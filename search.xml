<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>gradleåœ¨vscodeä¸‹æ„å»ºæ—¶æœªé€‰ç”¨æŒ‡å®šçš„jdkç‰ˆæœ¬</title>
      <link href="/2025/07/10/gradle%E5%9C%A8vscode%E4%B8%8B%E6%9E%84%E5%BB%BA%E6%97%B6%E6%9C%AA%E9%80%89%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84jdk%E7%89%88%E6%9C%AC/"/>
      <url>/2025/07/10/gradle%E5%9C%A8vscode%E4%B8%8B%E6%9E%84%E5%BB%BA%E6%97%B6%E6%9C%AA%E9%80%89%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84jdk%E7%89%88%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[info] [gradle-server] Gradle Server started, listening on 63127</span><br><span class="line">[info] Gradle client connected to server</span><br><span class="line">[info] Java Home: C:\Users\zheng\.cursor\extensions\redhat.java-1.43.1-win32-x64\jre\21.0.7-win32-x86_64</span><br><span class="line">[info] JVM Args: --add-opens,java.base/java.util=ALL-UNNAMED,--add-opens,java.base/java.lang=ALL-UNNAMED,--add-opens,java.base/java.lang.invoke=ALL-UNNAMED,--add-opens,java.base/java.util=ALL-UNNAMED,--add-opens,java.prefs/java.util.prefs=ALL-UNNAMED,--add-opens,java.prefs/java.util.prefs=ALL-UNNAMED,--add-opens,java.base/java.nio.charset=ALL-UNNAMED,--add-opens,java.base/java.net=ALL-UNNAMED,--add-opens,java.base/java.util.concurrent.atomic=ALL-UNNAMED,-Xmx3G,-Dfile.encoding=UTF-8,-Duser.country=CN,-Duser.language=zh,-Duser.variant</span><br><span class="line">[info] Gradle User Home: D:\gradle</span><br><span class="line">[info] Gradle Version: 7.5.1</span><br><span class="line">[error] FAILURE: Build failed with an exception.</span><br><span class="line"></span><br><span class="line">* What went wrong:</span><br><span class="line">Could not open cp_init generic class cache for initialization script &#x27;C:\Users\zheng\AppData\Local\Temp\9e4672d3aade77a0f70c4c8543b48b94cfaaf99d20f28b9ba9873c486bd2e2d2.gradle&#x27; (D:\gradle\caches\7.5.1\scripts\6hvk7ow3e6yllf2drn472dvw0).</span><br><span class="line">&gt; BUG! exception in phase &#x27;semantic analysis&#x27; in source unit &#x27;_BuildScript_&#x27; Unsupported class file major version 65</span><br><span class="line"></span><br><span class="line">* Try:</span><br><span class="line">&gt; Run with --stacktrace option to get the stack trace.</span><br><span class="line">&gt; Run with --info or --debug option to get more log output.</span><br><span class="line">&gt; Run with --scan to get full insights.</span><br><span class="line"></span><br><span class="line">* Get more help at https://help.gradle.org</span><br><span class="line"></span><br><span class="line">CONFIGURE FAILED in 18s</span><br><span class="line">[error] [gradle-server] The supplied build action failed with an exception.</span><br><span class="line">[error] Error getting build for d:\pokemon-lottery: The supplied build action failed with an exception.</span><br><span class="line">[info] Found 0 tasks</span><br><span class="line">[info] Java Home: C:\Users\zheng\.cursor\extensions\redhat.java-1.43.1-win32-x64\jre\21.0.7-win32-x86_64</span><br><span class="line">[info] JVM Args: --add-opens,java.base/java.util=ALL-UNNAMED,--add-opens,java.base/java.lang=ALL-UNNAMED,--add-opens,java.base/java.lang.invoke=ALL-UNNAMED,--add-opens,java.base/java.util=ALL-UNNAMED,--add-opens,java.prefs/java.util.prefs=ALL-UNNAMED,--add-opens,java.prefs/java.util.prefs=ALL-UNNAMED,--add-opens,java.base/java.nio.charset=ALL-UNNAMED,--add-opens,java.base/java.net=ALL-UNNAMED,--add-opens,java.base/java.util.concurrent.atomic=ALL-UNNAMED,-Xmx3G,-Dfile.encoding=UTF-8,-Duser.country=CN,-Duser.language=zh,-Duser.variant</span><br><span class="line">[info] Gradle User Home: D:\gradle</span><br><span class="line">[info] Gradle Version: 7.5.1</span><br><span class="line">[error] FAILURE: Build failed with an exception.</span><br><span class="line"></span><br><span class="line">* What went wrong:</span><br><span class="line">Could not open cp_init generic class cache for initialization script &#x27;C:\Users\zheng\AppData\Local\Temp\9e4672d3aade77a0f70c4c8543b48b94cfaaf99d20f28b9ba9873c486bd2e2d2.gradle&#x27; (D:\gradle\caches\7.5.1\scripts\6hvk7ow3e6yllf2drn472dvw0).</span><br><span class="line">&gt; BUG! exception in phase &#x27;semantic analysis&#x27; in source unit &#x27;_BuildScript_&#x27; Unsupported class file major version 65</span><br><span class="line"></span><br><span class="line">* Try:</span><br><span class="line">&gt; Run with --stacktrace option to get the stack trace.</span><br><span class="line">&gt; Run with --info or --debug option to get more log output.</span><br><span class="line">&gt; Run with --scan to get full insights.</span><br><span class="line"></span><br><span class="line">* Get more help at https://help.gradle.org</span><br><span class="line"></span><br><span class="line">CONFIGURE FAILED in 227ms</span><br><span class="line">[error] [gradle-server] The supplied build action failed with an exception.</span><br><span class="line">[error] Error getting build for d:\pokemon-lottery: The supplied build action failed with an exception.</span><br></pre></td></tr></table></figure><p>æˆªæ­¢å°†å¼€å‘ç¯å¢ƒä»ideaé€‚åº”åˆ°vscodeä»¥æ¥ï¼Œä¸€ç›´ä½¿ç”¨mavenè¿›è¡Œä¾èµ–ç®¡ç†ã€‚ä»Šå¤©è¿«ä¸å¾—å·²éœ€è¦ç»´æŠ¤ä¸€ä¸ªä½¿ç”¨gradleçš„é¡¹ç›®</p><p>åœ¨vsä¸­å®‰è£…äº†ç›¸å…³çš„æ’ä»¶ä¹‹åï¼Œæ‰“å¼€é¡¹ç›®å§‹ç»ˆæ— æ³•æ„å»ºã€‚</p><p>å¯ä»¥çœ‹åˆ°å¼€å¤´æ˜ç¡®äº†ä½¿ç”¨ redhat.java ä¸‹è½½çš„jdk21è¿›è¡Œæ„å»ºï¼Œè€Œå½“å‰gradleç‰ˆæœ¬æœ€é«˜åªæ”¯æŒåˆ°dk17</p><p>ä¸è®ºæ˜¯æ›´æ”¹ <code>JAVA_HOME</code> æŒ‡å‘ï¼Œè¿˜æ˜¯æ›´æ”¹vsè®¾ç½®ä¸­çš„java.homeéƒ½æ— æ•ˆ</p><p>æœ€åï¼Œåœ¨ <a href="https://github.com/redhat-developer/vscode-java/issues/3136">https://github.com/redhat-developer/vscode-java/issues/3136</a> è¿™ä¸ªissueä¸‹æ‰¾åˆ°ç­”æ¡ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">The exact Precedence is below.</span><br><span class="line"></span><br><span class="line">settings.json java.import.gradle.java.home</span><br><span class="line">settings.json java.jdt.ls.java.home (Default is Red Hat embedded JRE)</span><br><span class="line">settings.json java.home (deprecated)</span><br><span class="line">env var JAVA_HOME</span><br><span class="line">env var PATH</span><br><span class="line">The design problem is that the Gradle extension references java.jdt.ls.java.home for the Red Hat extension language server. This is counter-intuitive.</span><br></pre></td></tr></table></figure><p>gradleæ‰©å±•ä½¿ç”¨äº† java.jdt.ls.java.homeä½œä¸ºjdkæœåŠ¡ï¼Œä½†æˆ‘æµ‹è¯•ä¸‹ï¼Œå³ä½¿ä¿®æ”¹äº†è¿™ä¸ªå€¼ï¼Œgradleä¾ç„¶ä½¿ç”¨åµŒå…¥çš„jdkæ„å»º<br>æœ€åçš„è§£å†³æ–¹æ¡ˆ:<br>åœ¨vscodeçš„setting.jsonä¸­åŠ å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;java.jdt.ls.java.home&quot;: &quot;C:\\Program Files\\lib\\store\\amazon_jdk1.8.0_265&quot;,</span><br></pre></td></tr></table></figure><p>æŒ‡å®šgradleä½¿ç”¨çš„jdkå³å¯ï¼Œä¸è¿‡ä¸åŒgradleç‰ˆæœ¬æ‰€éœ€ç‰ˆæœ¬ä¸åŒã€‚å»ºè®®åœ¨å·¥ä½œåŒºé…ç½®ä¸‹ä¿®æ”¹</p><p>åˆ°æ­¤ï¼Œé—®é¢˜è§£å†³</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨xtodoåœ¨vscodeä¸­ç®¡ç†å¾…åŠäº‹é¡¹</title>
      <link href="/2025/06/26/%E4%BD%BF%E7%94%A8xtodo%E5%9C%A8vscode%E4%B8%AD%E7%AE%A1%E7%90%86%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9/"/>
      <url>/2025/06/26/%E4%BD%BF%E7%94%A8xtodo%E5%9C%A8vscode%E4%B8%AD%E7%AE%A1%E7%90%86%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æ¢äº†æ–°ç”µè„‘ï¼Œä»ç¬¨é‡çš„jbå…¨å®¶æ¡¶æ¢åˆ°äº†vscode(çœŸé¦™)</p><p>å…¶ä¸­é…ç½®ç¯å¢ƒæ—¶æ‰¾ä¸åˆ°åˆé€‚çš„todoæ‰©å±•ï¼ŒèŠ±äº†ä¸€ä¸ªå‘¨æœ«å†™äº†ä¸€ä¸ªæ›´ç¬¦åˆæˆ‘ä½¿ç”¨ä¹ æƒ¯çš„æ’ä»¶</p><p>ç»è¿‡è¿™å‡ å¤©ä¸€è¾¹ä½¿ç”¨ä¸€è¾¹å®Œå–„ï¼Œå·²ç»å¯ä»¥æ»¡è¶³æˆ‘æ—¥å¸¸çš„è®°å½•éœ€æ±‚äº†ã€‚åœ¨æ­¤åˆ†äº«å‡ºæ¥</p><h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><p>è¯¥æ‰©å±•ä½¿ç”¨æœ¬åœ°æ–‡ä»¶å¤¹çš„æ–¹å¼å­˜å‚¨å¾…åŠäº‹é¡¹ï¼Œæ‰€æœ‰å¾…åŠåˆ—è¡¨ä»¥ <code>.todo</code> ç»“å°¾ï¼Œæ”¯æŒä»¥æ–‡ä»¶å¤¹ç»„ç»‡çš„å½¢å¼æ’åºä»»åŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">PS D:\todo&gt; tree /F </span><br><span class="line">å· repository çš„æ–‡ä»¶å¤¹ PATH åˆ—è¡¨</span><br><span class="line">å·åºåˆ—å·ä¸º 4272-4989</span><br><span class="line">D:.</span><br><span class="line">â”‚  README.md</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€å­¦ä¹ </span><br><span class="line">â”‚      æœªå½’æ¡£.todo</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€å·¥ä½œ</span><br><span class="line">â”‚      å…¶ä»–ç»´æŠ¤çš„é¡¹ç›®.todo</span><br><span class="line">â”‚      æœªå½’æ¡£.todo</span><br><span class="line">â”‚      æ¥çš„å…¶ä»–ç§æ´».todo</span><br><span class="line">â”‚</span><br><span class="line">â””â”€ç”Ÿæ´»</span><br><span class="line">        æœªå½’æ¡£.todo</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨gitåœ¨å¤šå°è®¾å¤‡åŒæ­¥todoæ–‡ä»¶å¤¹;åŒæ—¶æ”¯æŒä½¿ç”¨å¤šä¸ªç›®å½•</p><p><img src="https://meteoross.github.io/img/xtodo1.png" alt="xtodo1"></p><p>è®¾ç½®å®Œå¾…åŠå­˜å‚¨è·¯å¾„åï¼Œä½ å¯ä»¥åœ¨å·¦ä¾§ä¸»é¢æ¿ä¸­çœ‹åˆ°â€Todoâ€æ ç›®</p><p>ğŸ“Š XTodo æ‹¥æœ‰ä¸‰ä¸ªè§†å›¾ï¼Œä»¥å¸®åŠ©ä½ åœ¨å¼€å‘ä¸­è¿›è¡Œä»»åŠ¡çš„è®°å½•</p><blockquote><ul><li><strong>æ‰€æœ‰ä»»åŠ¡</strong>: é¢„è§ˆæ‰€æœ‰çš„å¾…åŠ</li><li><strong>è¿›è¡Œä¸­çš„ä»»åŠ¡</strong>: èšç„¦äºæ­£åœ¨è¿›è¡Œçš„å·¥ä½œ</li><li><strong>å½“å‰é¡¹ç›®</strong>: å½“å‰æ‰“å¼€é¡¹ç›®ä¸­çš„.todoå¾…åŠ</li></ul></blockquote><p>ç‚¹å‡»ä»»æ„ä»»åŠ¡ï¼Œå°†ç´¢å¼•è‡³å…·ä½“çš„æ–‡ä»¶ã€‚å°†å…‰æ ‡æ”¾ç½®ä¸Šå»ï¼ŒæŒ‰ä¸‹å¿«æ·é”®åˆ‡æ¢ä»»åŠ¡çŠ¶æ€</p><ul><li>â˜ Not started tasks (alt+q)</li><li>â–  In-progress tasks (alt+f)</li><li>âœ” Completed tasks (alt+d)</li></ul><p>xtodoä½¿ç”¨ä¸€äº›ç‰¹æ®Šç¬¦å·(â˜ â–  âœ”)æ¥æ ‡æ³¨æ–‡æœ¬ä¸ºä»»åŠ¡èŠ‚ç‚¹</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p>VsCodeæ‰©å±•å•†åº— æœç´¢ â€˜XTodoâ€™ </p><p>æˆ– å‰å¾€ <a href="https://marketplace.visualstudio.com/items?itemName=meteorOSS.xtodo&ssr=false#overview">å¸‚åœº</a> å®‰è£…æ‰©å±•</p></blockquote><p>å¦‚æœè¯¥é¡¹ç›®å¸®åŠ©åˆ°äº†ä½ ï¼Œå¯ä»¥å‰å¾€ <a href="https://github.com/meteorOSS/xtodo">github</a> ä¸ºæˆ‘ç‚¹ä¸ª â€˜starâ€™<br>ä»»ä½•å»ºè®®æ¬¢è¿æäº¤ <a href="https://github.com/meteorOSS/xtodo/issues">issue</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>apache poiåº“è§£ææŠ¥é”™;java.io.IOException: Your InputStream was neither an OLE2 stream, nor an OOXML str</title>
      <link href="/2025/06/20/Apache%20POI%E5%BA%93%E6%89%93%E5%8C%85%E4%B8%BAjar%E5%90%8E%E8%A7%A3%E6%9E%90%E6%8A%A5%E9%94%99/"/>
      <url>/2025/06/20/Apache%20POI%E5%BA%93%E6%89%93%E5%8C%85%E4%B8%BAjar%E5%90%8E%E8%A7%A3%E6%9E%90%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ä¸šåŠ¡éœ€è¦è§£æexcel,ä½¿ç”¨apache poiåº“<br>åœ¨vscodeä¸­ä¸€åˆ‡é¡ºåˆ©ã€‚æ‰“åŒ…ä¸ºjarä¸¢åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶æŠ¥é”™:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.io.IOException: Your InputStream was neither an OLE2 stream, nor an OOXML stream or you haven&#x27;t provide the poi-ooxml*.jar in the classpath/modulepath - FileMagic: OOXML, having providers: [org.apache.poi.hssf.usermodel.HSSFWorkbookFactory@405294c8]</span><br></pre></td></tr></table></figure><p>æœäº†ä¸€åœˆç­”æ¡ˆéƒ½å’Œå®é™…ä¸ç¬¦ï¼Œæœ€ååœ¨ <a href="https://stackoverflow.com/questions/67884617/apache-poi-excel-writer-works-in-ide-but-not-in-fat-jar-java-io-ioexception-yo">https://stackoverflow.com/questions/67884617/apache-poi-excel-writer-works-in-ide-but-not-in-fat-jar-java-io-ioexception-yo</a> è¿™ä¸ªå¸–å­ä¸‹æ‰¾åˆ°äº†ç­”æ¡ˆ</p><p>é—®é¢˜çš„æ ¹æœ¬æ˜¯:</p><blockquote><p>Apache POIä½¿ç”¨META-INF&#x2F;servicesç›®å½•ä¸‹çš„æ–‡ä»¶æ¥è¯†åˆ«å¯ç”¨çš„æœåŠ¡æä¾›è€…ã€‚</p><p>å½“ä½¿ç”¨Mavençš„maven-assembly-pluginæ‰“åŒ…æˆfat JARæ—¶ï¼Œæ¥è‡ªpoiå’Œpoi-ooxmlçš„é‡åæœåŠ¡æä¾›è€…æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®åˆå¹¶ï¼Œå¯¼è‡´åœ¨è¿è¡Œæ—¶åªæœ‰ä¸€ä¸ªæä¾›è€…å¯ç”¨ï¼Œæ— æ³•æ­£ç¡®å¤„ç†Excelæ–‡ä»¶ã€‚</p></blockquote><p>ä»€ä¹ˆæ˜¯æœåŠ¡æä¾›è€…å‘¢ï¼Ÿè¿™æ˜¯ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶ï¼Œå³ <code>Java SPI (Service Provider Interface)</code> ï¼Œå…è®¸åº”ç”¨ç¨‹åºåŠ¨æ€å‘ç°å’ŒåŠ è½½æœåŠ¡å®ç°ã€‚å®ƒåŸºäºä»¥ä¸‹çº¦å®šï¼š</p><ol><li><p>æœåŠ¡æä¾›è€…åœ¨ META-INF&#x2F;services&#x2F; ç›®å½•ä¸‹åˆ›å»ºä»¥æœåŠ¡æ¥å£å…¨é™å®šåå‘½åçš„æ–‡ä»¶</p></li><li><p>æ–‡ä»¶å†…å®¹æ˜¯å®ç°è¯¥æ¥å£çš„ç±»çš„å…¨é™å®šååˆ—è¡¨</p></li><li><p>ServiceLoader ç±»ç”¨äºåŠ è½½è¿™äº›æœåŠ¡å®ç°</p></li></ol><p>ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¥å£ com.example.MyServiceï¼Œå…¶å®ç°ç±»æ˜¯ com.example.impl.MyServiceImplï¼Œåˆ™ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼š</p><p>META-INF&#x2F;services&#x2F;com.example.MyService å†…å®¹ä¸º com.example.impl.MyServiceImpl</p><p><strong>å½“ä½¿ç”¨ Maven æ‰“åŒ…æˆ Fat JARï¼ˆåŒ…å«æ‰€æœ‰ä¾èµ–çš„å•ä¸€ JAR æ–‡ä»¶ï¼‰æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼š</strong></p><p><strong>å¦‚æœå¤šä¸ª JAR åŒ…ä¸­éƒ½æœ‰åŒåçš„æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶ï¼ˆå¦‚ META-INF&#x2F;services&#x2F;com.example.MyServiceï¼‰ï¼Œåœ¨åˆå¹¶æ—¶è¿™äº›æ–‡ä»¶ä¼šç›¸äº’è¦†ç›–ï¼Œå¯¼è‡´åªæœ‰ä¸€ä¸ªæ–‡ä»¶è¢«ä¿ç•™ï¼Œå…¶ä»–çš„å®ç°ç±»ä¿¡æ¯ä¸¢å¤±ã€‚</strong></p><p><strong>è¿™æ­£æ˜¯ Apache POI åœ¨æ‰“åŒ…æˆ JAR åå‡ºç°é—®é¢˜çš„åŸå› ã€‚poi å’Œ poi-ooxml æ¨¡å—éƒ½æœ‰è‡ªå·±çš„æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶ï¼Œä½†åœ¨æ‰“åŒ…æ—¶è¿™äº›æ–‡ä»¶æ²¡æœ‰è¢«æ­£ç¡®åˆå¹¶ã€‚</strong></p><p>çŸ¥é“é—®é¢˜ä¹‹åè§£å†³èµ·æ¥å°±å¾ˆç®€å•äº†ï¼Œæˆ‘çš„æ–¹æ¡ˆæ˜¯ å°†maven-assembly-pluginæ›¿æ¢ä¸ºmaven-shade-pluginï¼Œå¹¶æ·»åŠ ServicesResourceTransformeråˆå¹¶æœåŠ¡æä¾›è€…æ–‡ä»¶</p><p>ä¿®æ”¹å‰:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.5.0&lt;/version&gt;</span><br><span class="line">    &lt;configuration&gt;</span><br><span class="line">        &lt;archive&gt;</span><br><span class="line">            &lt;manifest&gt;</span><br><span class="line">                &lt;mainClass&gt;com.exceltool.Application&lt;/mainClass&gt;</span><br><span class="line">            &lt;/manifest&gt;</span><br><span class="line">        &lt;/archive&gt;</span><br><span class="line">        &lt;descriptorRefs&gt;</span><br><span class="line">            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;</span><br><span class="line">        &lt;/descriptorRefs&gt;</span><br><span class="line">    &lt;/configuration&gt;</span><br><span class="line">    &lt;executions&gt;</span><br><span class="line">        &lt;execution&gt;</span><br><span class="line">            &lt;id&gt;make-assembly&lt;/id&gt;</span><br><span class="line">            &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">                &lt;goal&gt;single&lt;/goal&gt;</span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">        &lt;/execution&gt;</span><br><span class="line">    &lt;/executions&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.4.1&lt;/version&gt;</span><br><span class="line">    &lt;executions&gt;</span><br><span class="line">        &lt;execution&gt;</span><br><span class="line">            &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">                &lt;goal&gt;shade&lt;/goal&gt;</span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;transformers&gt;</span><br><span class="line">                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;</span><br><span class="line">                        &lt;mainClass&gt;com.exceltool.Application&lt;/mainClass&gt;</span><br><span class="line">                    &lt;/transformer&gt;</span><br><span class="line">                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;</span><br><span class="line">                &lt;/transformers&gt;</span><br><span class="line">                &lt;filters&gt;</span><br><span class="line">                    &lt;filter&gt;</span><br><span class="line">                        &lt;artifact&gt;*:*&lt;/artifact&gt;</span><br><span class="line">                        &lt;excludes&gt;</span><br><span class="line">                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;</span><br><span class="line">                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;</span><br><span class="line">                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;</span><br><span class="line">                        &lt;/excludes&gt;</span><br><span class="line">                    &lt;/filter&gt;</span><br><span class="line">                &lt;/filters&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/execution&gt;</span><br><span class="line">    &lt;/executions&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><p>å…³é”®çš„å˜åŒ–æ˜¯æ·»åŠ äº†ServicesResourceTransformerï¼Œå®ƒèƒ½å¤Ÿæ­£ç¡®åˆå¹¶æ¥è‡ªä¸åŒJARåŒ…ä¸­é‡åçš„æœåŠ¡æä¾›è€…æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä»…ä¿ç•™ä¸€ä¸ª</p><p>é—®é¢˜è§£å†³</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘å°†åšå®¢è¿ç§»åˆ°äº†è¿™é‡Œ</title>
      <link href="/2025/06/20/hello-world/"/>
      <url>/2025/06/20/hello-world/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºä¸€äº›åŸå› ï¼Œæˆ‘å°†åšå®¢è¿ç§»åˆ°äº†hexoã€‚åé¢æœ‰ç©ºä¼šå°†æ—§çš„å†…å®¹æ…¢æ…¢æ¬è¿‡æ¥</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è¿è¡Œæ—¶åŠ¨æ€è½½å…¥ä¾èµ–</title>
      <link href="/2023/12/05/%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8A%A8%E6%80%81%E8%BD%BD%E5%85%A5%E4%BE%9D%E8%B5%96/"/>
      <url>/2023/12/05/%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8A%A8%E6%80%81%E8%BD%BD%E5%85%A5%E4%BE%9D%E8%B5%96/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å†™æ’ä»¶çš„æ—¶å€™ä¸å¯é¿å…çš„éœ€è¦è°ƒç”¨ä¸€äº›å¤–éƒ¨åº“ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¾èµ–æ‰“åŒ…åˆ°jarä¸­ï¼Œå½“ä½¿ç”¨çš„ä¾èµ–è¿‡å¤šæ—¶ä½“ç§¯å°†éå¸¸è‡ƒè‚¿ã€‚é€šè¿‡ <a href="https://www.spigotmc.org/threads/loading-dependencies-from-external-sources-in-spigot.491014/">Loading Dependencies from External Sources in Spigot</a>è¿™ç¯‡æ–‡ç« å’Œé˜…è¯»luckpermsçš„è§£å†³æ–¹æ³•ï¼ŒèŠ±äº†åŠä¸ªé€šå®µæ£é¼“å‡ºäº†ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆ</p><p>æœ€åˆçš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡<code>ClassLoader</code>çš„addURLåŠ¨æ€çš„åŠ è½½ä¾èµ–ï¼Œä½†å°±åƒä¸Šé¢é‚£ç¯‡æ–‡ç« è¯´çš„ï¼Œjava16ä»¥ä¸Šçš„åå°„ä¸å…è®¸è¿™æ ·çš„æ“ä½œ;æœ€åæˆ‘æ‰¾åˆ°äº†è¿™ä¸ªä»“åº“ <a href="https://github.com/Revxrsal/PluginLib/tree/master/src/main/java/pluginlib">https://github.com/Revxrsal/PluginLib/tree/master/src/main/java/pluginlib</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">f</span> <span class="operator">=</span> Unsafe.class.getDeclaredField(<span class="string">&quot;theUnsafe&quot;</span>);</span><br><span class="line">        f.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Unsafe</span> <span class="variable">unsafe</span> <span class="operator">=</span> (Unsafe) f.get(<span class="literal">null</span>);</span><br><span class="line">        <span class="type">Field</span> <span class="variable">ucpField</span> <span class="operator">=</span> URLClassLoader.class.getDeclaredField(<span class="string">&quot;ucp&quot;</span>);</span><br><span class="line">        ucp = unsafe.getObject(AifadianPay.class.getClassLoader(), unsafe.objectFieldOffset(ucpField));</span><br><span class="line">        <span class="type">Field</span> <span class="variable">lookupField</span> <span class="operator">=</span> MethodHandles.Lookup.class.getDeclaredField(<span class="string">&quot;IMPL_LOOKUP&quot;</span>);</span><br><span class="line">        MethodHandles.<span class="type">Lookup</span> <span class="variable">lookup</span> <span class="operator">=</span> (MethodHandles.Lookup) unsafe.getObject(unsafe.staticFieldBase(lookupField), unsafe.staticFieldOffset(lookupField));</span><br><span class="line">        addUrlHandle = lookup.findVirtual(ucp.getClass(), <span class="string">&quot;addURL&quot;</span>, MethodType.methodType(<span class="keyword">void</span>.class, URL.class));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä½¿ç”¨Unsafeç»•è¿‡å®‰å…¨æ£€æŸ¥ï¼Œåƒé­”æ³•ä¸€æ ·çš„å–å¾—äº† <code>addURL</code> æ–¹æ³•ï¼Œç»è¿‡æµ‹è¯•ï¼Œåœ¨jdk8åˆ°17çš„ç‰ˆæœ¬éƒ½è¿è¡Œè‰¯å¥½ã€‚<br>è¿™æ˜¯ä¸€ä¸ªæœ€åæ›´æ–°äº2020å¹´çš„åº“ï¼Œæˆ‘å»é™¤äº†ä¸€äº›æ— ç”¨çš„åŠŸèƒ½(å¯¹æˆ‘æ¥è¯´)ï¼Œæ•´ç†åˆ°äº†<a href="https://github.com/meteorOSS/SpigotDependencyManager">https://github.com/meteorOSS/SpigotDependencyManager</a></p><p>æ¥ä¸‹æ¥ï¼Œç¤ºèŒƒä¸€ä¸‹ä½¿ç”¨è¿™ä¸ªæ–°å·¥å…·æ¥å†™ä»£ç <br>é¦–å…ˆä¸‹è½½ä¸Šæ–¹gitä»“åº“å‘å¸ƒçš„jaråŒ…ï¼Œæ–°å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œä½¿ç”¨<br><code>mvn install:install-file -Dfile=src/lib/DependencyManager-1.0-SNAPSHOT.jar -DgroupId=com. meteor -DartifactId=dependency-manager -Dversion=1.0 -Dpackaging=jar</code><br>æ¥å¯¼å…¥åˆ°æœ¬åœ°ä»“åº“ï¼Œç„¶åå®šä¹‰ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.meteor<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dependency-manager<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæƒ³æƒ³å¾€å¸¸è¦å¹²ä»€ä¹ˆï¼Œæ¯”æ–¹è¯´æˆ‘æœ‰ä¸€ä¸ªè¦å‘èµ·ç½‘ç»œè¯·æ±‚çš„åŠŸèƒ½ï¼Œæƒ³ä½¿ç”¨Httpclientåº“æ¥æ“ä½œã€‚é‚£ä¹ˆï¼Œå¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents.client5<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents.core5/httpcore5-h2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents.core5<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpcore5-h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±æ˜¯é‡å¤´æˆäº†ï¼Œåœ¨<code>plugin.yml</code>ä¸­å®šä¹‰ä¾èµ–</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">TestPlugin</span></span><br><span class="line"><span class="attr">main:</span> <span class="string">com.test.plugin.TestPluginMain</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.0</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">meteor</span></span><br><span class="line"><span class="attr">api-version:</span> <span class="number">1.13</span></span><br><span class="line"><span class="comment"># æ‰€éœ€ä¾èµ–</span></span><br><span class="line"><span class="attr">lib:</span></span><br><span class="line">  <span class="attr">httpcore5:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">&#x27;https://repo.maven.apache.org/maven2/&#x27;</span></span><br><span class="line">    <span class="attr">groupId:</span> <span class="string">&#x27;org.apache.httpcomponents.core5&#x27;</span></span><br><span class="line">    <span class="attr">artifactId:</span> <span class="string">&#x27;httpcore5&#x27;</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">&#x27;5.2.4&#x27;</span></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">&#x27;https://repo.maven.apache.org/maven2/&#x27;</span></span><br><span class="line">    <span class="attr">groupId:</span> <span class="string">&#x27;org.apache.httpcomponents.client5&#x27;</span></span><br><span class="line">    <span class="attr">artifactId:</span> <span class="string">&#x27;httpclient5&#x27;</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">&#x27;5.2.3&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸»ç±»ä¸­ï¼Œåªéœ€è¦è¿™æ ·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onEnable</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// è½½å…¥ä¾èµ–</span></span><br><span class="line">       DependencyManager.loadDependency(<span class="built_in">this</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>æœ€ååˆ«å¿˜äº†æŠŠDependcyManageræ‰“åŒ…åˆ°ä½ çš„jarä¸­ï¼Œè¿™æ˜¯å”¯ä¸€éœ€è¦å†…ç½®çš„ä¾èµ–ã€‚æˆ‘ä½¿ç”¨<code>maven-assembly-plugin</code><br>mvn clean packageï¼Œåœ¨targetä¸­æ‰¾åˆ° xxx-jar-with-dependencies.jarï¼Œè¿™å°±æ˜¯æ‰“åŒ…çš„ç»“æœäº†!<br><img src="http://cdn.zsenhe.com/afcc6915bbdc4d1684dd9c029ab09bd9" alt="image.png"><br>è¿è¡Œ,ç°åœ¨å¯åŠ¨çš„æ—¶å€™å¦‚æœªå­˜åœ¨ä¾èµ–ï¼Œä¼šé€šè¿‡mavenä»“åº“ä¸‹è½½åˆ°æ’ä»¶ç›®å½•ä¸‹çš„libé‡Œå¹¶åŠ¨æ€æ·»åŠ !<br>ä¸è¿‡è¿™ç§æ–¹å¼æœ‰æ²¡æœ‰å…¶ä»–éšæ‚£è¿˜å¾…éªŒè¯</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GoReplaceTool æŒ‡å®šç›®æ ‡ç›®å½•æ‰¹é‡æ›¿æ¢å·¥å…·</title>
      <link href="/2023/11/29/GoReplaceTool%20%E6%8C%87%E5%AE%9A%E7%9B%AE%E6%A0%87%E7%9B%AE%E5%BD%95%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2%E5%B7%A5%E5%85%B7/"/>
      <url>/2023/11/29/GoReplaceTool%20%E6%8C%87%E5%AE%9A%E7%9B%AE%E6%A0%87%E7%9B%AE%E5%BD%95%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/b09197b593314913af78bbfb46fc48c8" alt="logo2.png"></p><h1 id="GoReplaceTool"><a href="#GoReplaceTool" class="headerlink" title="GoReplaceTool"></a>GoReplaceTool</h1><p><a href="https://github.com/meteorOSS/GoReplaceTools">githubåœ°å€</a></p><p>å¹³æ—¶æœåŠ¡å™¨æ›´æ–°çš„æ—¶å€™ï¼Œå†™å®Œçš„é…ç½®æ–‡ä»¶éœ€è¦ä¸€ä¸ªä¸ªæ‹·è´åˆ°å„ä¸ªæœåŠ¡ç«¯ã€‚è¿‡ç¨‹é‡å¤åº¦é«˜ä¸”å®¹æ˜“å‡ºé—®é¢˜<br>äºæ˜¯è¿™ä¸ªå·¥å…·å°±è¯ç”Ÿäº† (goå†™è¿™äº›å°è„šæœ¬æ˜¯çœŸæ–¹ä¾¿)</p><h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼:"></a>ä½¿ç”¨æ–¹å¼:</h2><ol><li>åœ¨å‘å¸ƒé¡µæ ¹æ®æœåŠ¡å™¨ç±»å‹ä¸‹è½½è½¯ä»¶</li><li>å¯åŠ¨è½¯ä»¶</li><li>å¯åŠ¨åä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶å¤¹<br>config.xml: å­˜æ”¾å¾…è¦†ç›–ç›®æ ‡è·¯å¾„<br>commit: å­˜æ”¾è¦†ç›–æ–‡ä»¶<br><img src="https://github.com/meteorOSS/GoReplaceTools/assets/61687266/3a4f6085-1a5e-4240-a1fa-a2fbbea91a8b" alt="image"></li><li>ä¸€ä¸ªç¤ºä¾‹<br>é…ç½®config.xml<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  å¡«å†™éœ€è¦è¦†ç›–çš„ç›®å½•  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  ä¾‹å¦‚ä»¥ä¸‹ä¼šæŠŠcommitçš„å†…å®¹è¦†ç›–åˆ°pluginsä¸‹ï¼Œæ²¡æœ‰çš„ç›®å½•è‡ªåŠ¨æ„å»º --!&gt;</span></span><br><span class="line"><span class="comment">&lt;directory&gt;D:/server1/plugins&lt;/directory&gt;</span></span><br><span class="line"><span class="comment">&lt;directory&gt;D:/server2/plugins&lt;/directory&gt;</span></span><br><span class="line"><span class="comment">&lt;/config&gt;</span></span><br></pre></td></tr></table></figure>æ¥ä¸‹æ¥ï¼Œæ­¤æ¬¡æˆ‘å°†æ›´æ–°æ‰€æœ‰æœåŠ¡ç«¯CMIçš„é…ç½®æ–‡ä»¶. åœ¨commitä¸‹æ–°å»ºæ–‡ä»¶å¤¹ï¼Œèµ·ä¸€ä¸ªåå­—ï¼Œæ¯”å¦‚â€CMIé…ç½®æ›´æ–°â€<br><img src="https://github.com/meteorOSS/GoReplaceTools/assets/61687266/81cd21ef-436e-4d3c-8731-2de92aa54a9f" alt="image"><br>æˆ‘ä»¬éœ€è¦å°†setting.ymlè¦†ç›–åˆ°ç›®æ ‡è·¯å¾„çš„CMIæ–‡ä»¶å¤¹ä¸‹ (D:&#x2F;server1&#x2F;plugins&#x2F;CMI&#x2F;)ã€‚<br>ç”±äºåœ¨ä¸Šæ–¹çš„è½¯ä»¶config.xmlé…ç½®ä¸­ï¼Œç›®æ ‡æ–‡ä»¶å¤¹(æœåŠ¡ç«¯)ä»…é…ç½®åˆ°äº†pluginsæ–‡ä»¶å¤¹ï¼Œäºæ˜¯â€CMIé…ç½®æ›´æ–°â€æ–‡ä»¶å¤¹ä¸‹è¿˜éœ€è¦æ–°å»ºä¸€ä¸ªâ€CMIâ€æ–‡ä»¶å¤¹<br><img src="https://github.com/meteorOSS/GoReplaceTools/assets/61687266/2b5aeb38-979c-4889-8727-4a0cebea6b7f" alt="image"></li></ol><p>æ‰“å¼€è½¯ä»¶ è¾“å…¥ update CMIé…ç½®æ›´æ–°<br><img src="https://github.com/meteorOSS/GoReplaceTools/assets/61687266/ff755265-458a-4748-86b6-fb1f8cb5edac" alt="image"></p><h3 id="åœ¨linuxå¹³å°ä½¿ç”¨"><a href="#åœ¨linuxå¹³å°ä½¿ç”¨" class="headerlink" title="åœ¨linuxå¹³å°ä½¿ç”¨"></a>åœ¨linuxå¹³å°ä½¿ç”¨</h3><p>è¾“å…¥chmod +x GoReplaceToolsæ·»åŠ å¯æ‰§è¡Œæƒé™</p><p><img src="https://github.com/meteorOSS/GoReplaceTools/assets/61687266/1f977ba1-161c-4def-b027-858e9604ef7d" alt="image"></p><p>ä½¿ç”¨.&#x2F;GoReplaceToolsï¼Œæ“ä½œæ–¹å¼ä¸ä¸Šé¢ä¸€è‡´</p><p>æ€æ¯’æŠ¥å‘Š <a href="https://www.virscan.org/report/637d5cbabb88960c519dce1bd5afc9f63952f0115d6954b22dfa115dc22d417b">https://www.virscan.org/report/637d5cbabb88960c519dce1bd5afc9f63952f0115d6954b22dfa115dc22d417b</a></p><p>å¾ˆçˆ½<br><img src="http://cdn.zsenhe.com/8e483000a4d34780b663aab839725cdb" alt="23NXC8BK1V446DJZB.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>XPathä¸MyBatisè§£æå™¨æ¨¡å—XPathParser</title>
      <link href="/2023/10/26/XPath%E4%B8%8EMyBatis%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A8%A1%E5%9D%97XPathParser/"/>
      <url>/2023/10/26/XPath%E4%B8%8EMyBatis%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A8%A1%E5%9D%97XPathParser/</url>
      
        <content type="html"><![CDATA[<h2 id="XPathä¸XPathParse"><a href="#XPathä¸XPathParse" class="headerlink" title="XPathä¸XPathParse"></a>XPathä¸XPathParse</h2><h3 id="XPath"><a href="#XPath" class="headerlink" title="XPath"></a>XPath</h3><p>mybatisåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­å¤„ç†MybatisConfig.xmlä»¥åŠæ˜ å°„æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨çš„æ˜¯DOMè§£ææ–¹å¼ï¼Œå¹¶ç»“åˆXPath(javax.xml.xpathåŒ…ä¸‹)å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè§£æï¼ŒXPathå¯¹XMLæ–‡ä»¶æ¥è¯´å°±ç›¸å½“äºSQLè¯­è¨€ä¹‹äºæ•°æ®åº“ã€‚</p><p>XPathä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼æ¥é€‰å–XMLæ–‡æ¡£ä¸­æŒ‡å®šçš„èŠ‚ç‚¹æˆ–èŠ‚ç‚¹é›†åˆ,å¯¹äºXPathçš„è¯­æ³•éœ€è¦ç®€å•äº†è§£ä¸€ä¸‹</p><p><img src="http://cdn.zsenhe.com/811faf7e45064620ae943c9691e4af58" alt="image.png"></p><p>ä¾‹å¦‚å¯¹äºä»¥ä¸‹xmlæ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span> <span class="attr">id</span>=<span class="string">&quot;1001&quot;</span> <span class="attr">year</span>=<span class="string">&quot;1955&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>ç¥é›•ä¾ ä¾£<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;<span class="name">author</span>&gt;</span>é‡‘åº¸<span class="tag">&lt;/<span class="name">author</span>&gt;</span><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span> <span class="attr">id</span>=<span class="string">&quot;1002&quot;</span> <span class="attr">year</span>=<span class="string">&quot;1986&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">name</span>&gt;</span>å¤©é¾™å…«éƒ¨<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="tag">&lt;<span class="name">author</span>&gt;</span>é‡‘åº¸<span class="tag">&lt;/<span class="name">author</span>&gt;</span><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾æ‰€æœ‰ä¹¦ç±çš„è¡¨è¾¾å¼æ˜¯ â€œ&#x2F;&#x2F;bookâ€,æŸ¥æ‰¾ä½œè€…ä¸º â€˜é‡‘åº¸â€™ çš„æ‰€æœ‰å›¾ä¹¦éœ€è¦åˆ¶å®š<author>çš„å€¼,å¾—åˆ°è¡¨è¾¾å¼ â€œ&#x2F;&#x2F;book[author&#x3D;â€™é‡‘åº¸â€™]â€,å†åŠ ä¸€ä¸ªç­›é€‰æ¡ä»¶,æˆ‘ä»¬éœ€è¦å¾—åˆ° æ‰€æœ‰åœ¨1955å¹´ä¹‹åï¼ˆä¸åŒ…æ‹¬1995ï¼‰å‘è¡Œçš„ä¹¦,è¿™å°±éœ€è¦å¾—åˆ°bookçš„å±æ€§èŠ‚ç‚¹yearã€‚æ­¤æ—¶æˆ‘ä»¬çš„è¡¨è¾¾å¼é•¿è¿™æ ·:</p><blockquote><p>&#x2F;&#x2F;book[author&#x3D;â€™é‡‘åº¸â€™][@year&gt;1955]</p></blockquote><p>å¾—åˆ°äº†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹å,æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¹¦çš„åå­—,äºæ˜¯å®šä½åˆ°bookèŠ‚ç‚¹ä¸‹çš„ <name></name>,å¾—åˆ°:</p><blockquote><p>&#x2F;&#x2F;book[author&#x3D;â€™é‡‘åº¸â€™][@year&gt;1955]&#x2F;name&#x2F;text()</p></blockquote><p>å¦‚ä¸Šæ‰€è¿°,text()ç”¨äºåŒ¹é…èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œé€šè¿‡è¯¥è¡¨è¾¾å¼çš„ç­›é€‰ï¼Œæˆ‘ä»¬å¾—åˆ°äº†</p><p><img src="http://cdn.zsenhe.com/02688917d7cf4d7bb5cc2f163516b2ef" alt="image.png"></p><p>å®Œæ•´çš„ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XPathTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DocumentBuilderFactory</span> <span class="variable">documentBuilderFactory</span> <span class="operator">=</span></span><br><span class="line">                DocumentBuilderFactory.newInstance();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯éªŒè¯</span></span><br><span class="line">        documentBuilderFactory.setValidating(<span class="literal">true</span>);</span><br><span class="line">        documentBuilderFactory.setNamespaceAware(<span class="literal">true</span>);</span><br><span class="line">        documentBuilderFactory.setIgnoringComments(<span class="literal">true</span>);</span><br><span class="line">        documentBuilderFactory.setIgnoringElementContentWhitespace(<span class="literal">false</span>);</span><br><span class="line">        documentBuilderFactory.setCoalescing(<span class="literal">false</span>);</span><br><span class="line">        documentBuilderFactory.setExpandEntityReferences(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DocumentBuilder</span> <span class="variable">documentBuilder</span> <span class="operator">=</span> documentBuilderFactory.newDocumentBuilder();</span><br><span class="line">            documentBuilder.setErrorHandler(<span class="keyword">new</span> <span class="title class_">ErrorHandler</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">warning</span><span class="params">(SAXParseException exception)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;warning: &quot;</span>+exception.getMessage());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">error</span><span class="params">(SAXParseException exception)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;error: &quot;</span>+exception.getMessage());</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fatalError</span><span class="params">(SAXParseException exception)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;fatal: &quot;</span>+exception.getMessage());</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> documentBuilder.parse(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;bookdata.xml&quot;</span>)));</span><br><span class="line">            <span class="type">XPathFactory</span> <span class="variable">xPathFactory</span> <span class="operator">=</span> XPathFactory.newInstance();</span><br><span class="line">            <span class="type">XPath</span> <span class="variable">xPath</span> <span class="operator">=</span> xPathFactory.newXPath();</span><br><span class="line">            <span class="comment">// ç¼–è¯‘XPathè¡¨è¾¾å¼</span></span><br><span class="line">            <span class="type">XPathExpression</span> <span class="variable">expression</span> <span class="operator">=</span> xPath.compile(<span class="string">&quot;//book[author=&#x27;é‡‘åº¸&#x27;][@year&gt;1955]/name/text()&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">evaluate</span> <span class="operator">=</span> expression.evaluate(document, XPathConstants.NODESET);</span><br><span class="line">            <span class="type">NodeList</span> <span class="variable">nodeList</span> <span class="operator">=</span> (NodeList) evaluate;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nodeList.getLength(); i++) &#123;</span><br><span class="line">                System.out.println(nodeList.item(i).getNodeValue());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParserConfigurationException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SAXException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (XPathExpressionException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™ä¸€è¡Œä»£ç :</p><blockquote><p>Object evaluate &#x3D; expression.evaluate(document, XPathConstants.NODESET);</p></blockquote><p>evaluateçš„ç¬¬äºŒä¸ªå‚æ•°æ¥å—ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œä»–çš„æ„ä¹‰æ˜¯æŒ‡å®šXpathè¡¨è¾¾å¼æŸ¥æ‰¾çš„ç»“æœç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XPathConstants</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Private constructor to prevent instantiation.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">XPathConstants</span><span class="params">()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The XPath 1.0 number data type.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Maps to Java &#123;<span class="doctag">@link</span> Double&#125;.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">QName</span> <span class="variable">NUMBER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QName</span>(<span class="string">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>, <span class="string">&quot;NUMBER&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The XPath 1.0 string data type.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Maps to Java &#123;<span class="doctag">@link</span> String&#125;.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">QName</span> <span class="variable">STRING</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QName</span>(<span class="string">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>, <span class="string">&quot;STRING&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The XPath 1.0 boolean data type.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Maps to Java &#123;<span class="doctag">@link</span> Boolean&#125;.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">QName</span> <span class="variable">BOOLEAN</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QName</span>(<span class="string">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>, <span class="string">&quot;BOOLEAN&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The XPath 1.0 NodeSet data type.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Maps to Java &#123;<span class="doctag">@link</span> org.w3c.dom.NodeList&#125;.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">QName</span> <span class="variable">NODESET</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QName</span>(<span class="string">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>, <span class="string">&quot;NODESET&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The XPath 1.0 NodeSet data type.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;Maps to Java &#123;<span class="doctag">@link</span> org.w3c.dom.Node&#125;.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">QName</span> <span class="variable">NODE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QName</span>(<span class="string">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span>, <span class="string">&quot;NODE&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;The URI for the DOM object model, &quot;http://java.sun.com/jaxp/xpath/dom&quot;.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DOM_OBJECT_MODEL</span> <span class="operator">=</span> <span class="string">&quot;http://java.sun.com/jaxp/xpath/dom&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¦‚æœXPathè¡¨è¾¾å¼åªä½¿ç”¨ä¸€æ¬¡ï¼Œå¯ä»¥è·³è¿‡ç¼–è¯‘æ­¥éª¤ç›´æ¥è°ƒç”¨Xpathå¯¹è±¡çš„evaulateæ–¹æ³•ã€‚ä½†å¦‚æœæ˜¯é‡å¤å¤šæ¬¡çš„è°ƒç”¨ï¼Œç¼–è¯‘åæ€§èƒ½æ›´ä½³ã€‚</p><h3 id="XPathParse"><a href="#XPathParse" class="headerlink" title="XPathParse"></a>XPathParse</h3><p>Mybatisæä¾›çš„XPathParserç±»å°è£…äº†ä¸Šæ–‡æåˆ°çš„XPath,Documentå’ŒEntityResolver</p><p>XPathParserçš„å­—æ®µå¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XPathParser</span>()&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Document document; <span class="comment">//æ“ä½œçš„documentå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> validation; <span class="comment">//æ˜¯å¦å¼€å¯éªŒè¯</span></span><br><span class="line">    <span class="keyword">private</span> EntityResolver entityResolver; <span class="comment">//ç”¨äºåŠ è½½æœ¬åœ°dtdæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">private</span> Properties variables; <span class="comment">// mybatis-config.xmlä¸­&lt;propteries&gt;æ ‡ç­¾å®šä¹‰çš„é”®å€¼å¯¹é›†åˆ</span></span><br><span class="line">    <span class="keyword">private</span> XPath xpath; <span class="comment">//XPathå¯¹è±¡</span></span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹XMLæ–‡æ¡£è¿›è¡ŒéªŒè¯æ—¶ï¼Œä¼šæ ¹æ®XMLæ–‡æ¡£å¼€å§‹ä½ç½®åŠ è½½å¯¹åº”çš„DTDæ–‡ä»¶</p><blockquote><p>DTDæ–‡ä»¶ä¸ºå¯¹XMLçš„çº¦æŸï¼Œå¯å‚è€ƒ <a href="https://www.runoob.com/dtd/dtd-tutorial.html">DTD æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹</a></p></blockquote><p>å¦‚æœè§£æmybatis-configæ–‡ä»¶æ—¶ï¼Œé»˜è®¤è”ç½‘åŠ è½½ <a href="http://mybatis.org/dtd/mybatis-3-config.dtd">http://mybatis.org/dtd/mybatis-3-config.dtd</a> è¿™ä¸ªæ–‡æ¡£ï¼Œå½“ç½‘ç»œæ¯”è¾ƒæ…¢æ—¶ä¼šå¯¼è‡´éªŒè¯è¿‡ç¨‹ç¼“æ…¢ã€‚åœ¨å¼€å‘ä¸­å¾€å¾€ä¼šè®¾ç½®EntityResolveræ¥å£å¯¹è±¡åŠ è½½æœ¬åœ°çš„DTDæ–‡ä»¶ï¼Œä»è€Œé¿å…è”ç½‘åŠ è½½ã€‚</p><p>XMLMapperEntityResolveræ˜¯Mybatisæä¾›çš„EntityResolveræ¥å£çš„å®ç°ç±»ï¼Œè¯¥æ¥å£çš„å®ç°å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XMLMapperEntityResolver</span> <span class="keyword">implements</span> <span class="title class_">EntityResolver</span> &#123;</span><br><span class="line">    <span class="comment">// æŒ‡å®šmybatis-config.xmlæ–‡ä»¶å’Œæ˜ å°„æ–‡ä»¶å¯¹åº”çš„DTDçš„SystemId</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">IBATIS_CONFIG_SYSTEM</span> <span class="operator">=</span> <span class="string">&quot;ibatis-3-config.dtd&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">IBATIS_MAPPER_SYSTEM</span> <span class="operator">=</span> <span class="string">&quot;ibatis-3-mapper.dtd&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYBATIS_CONFIG_SYSTEM</span> <span class="operator">=</span> <span class="string">&quot;mybatis-3-config.dtd&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYBATIS_MAPPER_SYSTEM</span> <span class="operator">=</span> <span class="string">&quot;mybatis-3-mapper.dtd&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYBATIS_CONFIG_DTD</span> <span class="operator">=</span> <span class="string">&quot;org/apache/ibatis/builder/xml/mybatis-3-config.dtd&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MYBATIS_MAPPER_DTD</span> <span class="operator">=</span> <span class="string">&quot;org/apache/ibatis/builder/xml/mybatis-3-mapper.dtd&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">XMLMapperEntityResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> InputSource <span class="title function_">resolveEntity</span><span class="params">(String publicId, String systemId)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (systemId != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">lowerCaseSystemId</span> <span class="operator">=</span> systemId.toLowerCase(Locale.ENGLISH);</span><br><span class="line">                <span class="keyword">if</span> (lowerCaseSystemId.contains(<span class="string">&quot;mybatis-3-config.dtd&quot;</span>) || lowerCaseSystemId.contains(<span class="string">&quot;ibatis-3-config.dtd&quot;</span>)) &#123;</span><br><span class="line">                   <span class="comment">// æŸ¥æ‰¾æŒ‡å®šçš„dtdæ–‡ä»¶ï¼Œå¹¶è°ƒç”¨getInputSourceè¯»å–dtdæ–‡æ¡£è¿”å› </span></span><br><span class="line">                   <span class="keyword">return</span> <span class="built_in">this</span>.getInputSource(<span class="string">&quot;org/apache/ibatis/builder/xml/mybatis-3-config.dtd&quot;</span>, publicId, systemId);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (lowerCaseSystemId.contains(<span class="string">&quot;mybatis-3-mapper.dtd&quot;</span>) || lowerCaseSystemId.contains(<span class="string">&quot;ibatis-3-mapper.dtd&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">this</span>.getInputSource(<span class="string">&quot;org/apache/ibatis/builder/xml/mybatis-3-mapper.dtd&quot;</span>, publicId, systemId);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception var4) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SAXException</span>(var4.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> InputSource <span class="title function_">getInputSource</span><span class="params">(String path, String publicId, String systemId)</span> &#123;</span><br><span class="line">        <span class="type">InputSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (path != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(path);</span><br><span class="line">                source = <span class="keyword">new</span> <span class="title class_">InputSource</span>(in);</span><br><span class="line">                source.setPublicId(publicId);</span><br><span class="line">                source.setSystemId(systemId);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException var6) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> source;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›åˆ°XPathParserå¯¹è±¡ï¼Œå…ˆçœ‹æ¯ä¸ªæ„é€ æ–¹æ³•ä¸­éƒ½è°ƒç”¨çš„createDocument(InputSource)æ–¹æ³•ï¼Œåœ¨è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨commonConstructor()å®Œæˆåˆå§‹åŒ–</p><p><img src="http://cdn.zsenhe.com/b4b5b3d42f3443d190df528764435fd5" alt="image.png"></p><p>å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><p>å¯ä»¥çœ‹åˆ°ï¼ŒcreateDocumentçš„å¯¹è±¡å³æ˜¯æˆ‘ä»¬åˆ›å»ºDocumentBuilderå¯¹è±¡çš„å°è£…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Document <span class="title function_">createDocument</span><span class="params">(InputSource inputSource)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">DocumentBuilderFactory</span> <span class="variable">factory</span> <span class="operator">=</span> DocumentBuilderFactory.newInstance();</span><br><span class="line">        factory.setFeature(<span class="string">&quot;http://javax.xml.XMLConstants/feature/secure-processing&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">        factory.setValidating(<span class="built_in">this</span>.validation);</span><br><span class="line">        factory.setNamespaceAware(<span class="literal">false</span>);</span><br><span class="line">        factory.setIgnoringComments(<span class="literal">true</span>);</span><br><span class="line">        factory.setIgnoringElementContentWhitespace(<span class="literal">false</span>);</span><br><span class="line">        factory.setCoalescing(<span class="literal">false</span>);</span><br><span class="line">        factory.setExpandEntityReferences(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">DocumentBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> factory.newDocumentBuilder();</span><br><span class="line">        builder.setEntityResolver(<span class="built_in">this</span>.entityResolver);</span><br><span class="line">        builder.setErrorHandler(<span class="keyword">new</span> <span class="title class_">ErrorHandler</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">error</span><span class="params">(SAXParseException exception)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">                <span class="keyword">throw</span> exception;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fatalError</span><span class="params">(SAXParseException exception)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">                <span class="keyword">throw</span> exception;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">warning</span><span class="params">(SAXParseException exception)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> builder.parse(inputSource);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception var4) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BuilderException</span>(<span class="string">&quot;Error creating document instance.  Cause: &quot;</span> + var4, var4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">commonConstructor</span><span class="params">(<span class="type">boolean</span> validation, Properties variables, EntityResolver entityResolver)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.validation = validation;</span><br><span class="line">    <span class="built_in">this</span>.entityResolver = entityResolver;</span><br><span class="line">    <span class="built_in">this</span>.variables = variables;</span><br><span class="line">    <span class="type">XPathFactory</span> <span class="variable">factory</span> <span class="operator">=</span> XPathFactory.newInstance();</span><br><span class="line">    <span class="built_in">this</span>.xpath = factory.newXPath();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾€ä¸‹çœ‹è¿™ä¸ªç±»ï¼Œä»–æä¾›äº†ä¸€ç³»åˆ—çš„eval*()æ–¹æ³•ç”¨äºè§£æboolean,shor,stringç­‰ä¸åŒæ•°æ®ç±»å‹ã€‚ä»–é€šè¿‡è°ƒç”¨å‰é¢ä»‹ç»çš„XPath.evaluate()æ–¹æ³•æ¥æŸ¥æ‰¾æŒ‡å®šè·¯å¾„çš„èŠ‚ç‚¹æˆ–æ•°å­¦ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ç±»å‹è½¬æ¢ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯å…¶ä¸­çš„evalString()æ–¹æ³•ï¼Œå…¶ä¸­ä¼šè°ƒç”¨PropertyParser.parse()æ–¹æ³•å¤„ç†èŠ‚ç‚¹ä¸­ç›¸åº”çš„é»˜è®¤å€¼ï¼Œå®ç°å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">evalString</span><span class="params">(Object root, String expression)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> (String)<span class="built_in">this</span>.evaluate(expression, root, XPathConstants.STRING);</span><br><span class="line">    <span class="keyword">return</span> PropertyParser.parse(result, <span class="built_in">this</span>.variables);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€å¾€ä¸‹åˆ†æï¼Œæ‰“å¼€PropertyParserç±»çš„å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;org.apache.ibatis.parsing.PropertyParser.&quot;</span>;</span><br><span class="line"><span class="comment">// åœ¨mybats-config.xmlä¸­&lt;properties&gt;èŠ‚ç‚¹ä¸‹é…ç½®æ˜¯å¦å¼€å¯é»˜è®¤å€¼åŠŸèƒ½çš„é…ç½®é¡¹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_ENABLE_DEFAULT_VALUE</span> <span class="operator">=</span> <span class="string">&quot;org.apache.ibatis.parsing.PropertyParser.enable-default-value&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY_DEFAULT_VALUE_SEPARATOR</span> <span class="operator">=</span> <span class="string">&quot;org.apache.ibatis.parsing.PropertyParser.default-value-separator&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ENABLE_DEFAULT_VALUE</span> <span class="operator">=</span> <span class="string">&quot;false&quot;</span>; <span class="comment">//é»˜è®¤å…³é—­é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_VALUE_SEPARATOR</span> <span class="operator">=</span> <span class="string">&quot;:&quot;</span>; <span class="comment">// é»˜è®¤åˆ†éš”ç¬¦æ˜¯å†’å·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½œä¸ºå·¥å…·ç±»ï¼Œåœ¨æºç ä¸­æ„é€ å™¨ä¸ºç§æœ‰é˜²æ­¢è¢«å…¶ä»–ç±»åˆ›å»º</span></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">PropertyParser</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PropertyParser. parseï¼ˆï¼‰æ–¹æ³•ä¸­ä¼šåˆ›å»º GenericTokenParser è§£æå™¨ï¼Œå¹¶å°†é»˜è®¤å€¼çš„å¤„ç†å§”æ‰˜ç»™GenericTokenParser.parse()æ–¹æ³•ï¼Œå®ç°å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">parse</span><span class="params">(String string, Properties variables)</span> &#123;</span><br><span class="line">    <span class="type">VariableTokenHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VariableTokenHandler</span>(variables);</span><br><span class="line">    <span class="type">GenericTokenParser</span> <span class="variable">parser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericTokenParser</span>(<span class="string">&quot;$&#123;&quot;</span>, <span class="string">&quot;&#125;&quot;</span>, handler);</span><br><span class="line">    <span class="keyword">return</span> parser.parse(string);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>GenericTokenParseræ˜¯ä¸€ä¸ªå ä½ç¬¦è§£æç±»ï¼Œå®ƒçš„å­—æ®µè§£é‡Šå¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTokenParser</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String openToken; <span class="comment">// å ä½ç¬¦å¼€å§‹æ ‡è®°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String closeToken; <span class="comment">// å ä½ç¬¦ç»“æŸæ ‡è®°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TokenHandler handler; <span class="comment">// tokenhandlerå®ç°ç±»ä¼šæŒ‰å®ƒçš„é€»è¾‘è§£æå ä½ç¬¦</span></span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>GenericTokenParser.parser()çš„é€»è¾‘ä¹Ÿå¹¶ä¸å¤æ‚ï¼Œå®ƒå°†é¡ºåºæŸ¥æ‰¾openTokenå’ŒcloseTokenï¼Œè§£æå¾—åˆ°å ä½ç¬¦çš„å­—é¢å€¼ï¼Œå¹¶å°†å…¶äº¤ç»™ä¼ å…¥çš„TokenHandlerå¤„ç†ï¼Œç„¶åå°†è§£æç»“æœé‡æ–°æ‹¼è£…æˆå­—ç¬¦ä¸²è¿”å›ã€‚å®ƒçš„æµç¨‹å®ç°å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">parse</span><span class="params">(String text)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (text != <span class="literal">null</span> &amp;&amp; !text.isEmpty()) &#123;</span><br><span class="line">        <span class="comment">// å¯»æ‰¾å¼€å§‹æ ‡è®°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> text.indexOf(<span class="built_in">this</span>.openToken);</span><br><span class="line">        <span class="comment">// æœªå¯»æ‰¾åˆ°å¼€å§‹æ ‡è®°ï¼Œç›´æ¥è¿”å›text</span></span><br><span class="line">        <span class="keyword">if</span> (start == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> text;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å°†textè§£æä¸ºå­—ç¬¦æ•°ç»„</span></span><br><span class="line">            <span class="type">char</span>[] src = text.toCharArray();</span><br><span class="line">            <span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//åˆå§‹å ä½ç¬¦çš„åç§»å€¼ï¼Œéšç€å¯¹æ•°ç»„çš„éå†å’ŒæŸ¥æ‰¾ä¼šä¸æ–­å˜åŒ–ï¼Œåç§»é‡ä¹‹å‰çš„å­—ç¬¦ä¸ºå·²ç»å¤„ç†è¿‡çš„</span></span><br><span class="line">            <span class="comment">// è®°å½•è§£æåçš„å­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="comment">// ç”¨æ¥è®°å½•ä¸€ä¸ªå ä½ç¬¦çš„å­—é¢å€¼</span></span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">expression</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å½“è¿˜æœ‰å¼€å§‹æ ‡è®°æ—¶</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (start &gt; <span class="number">0</span> &amp;&amp; src[start - <span class="number">1</span>] == <span class="string">&#x27;\\&#x27;</span>) &#123;</span><br><span class="line">                    <span class="comment">// é‡åˆ°è½¬ä¹‰çš„å¼€å§‹æ ‡è®°æ—¶ï¼Œç›´æ¥å°†å‰é¢çš„å­—ç¬¦ä¸²ä»¥åŠå¼€å§‹æ ‡è®°è¿½åŠ åˆ°builderä¸­</span></span><br><span class="line">                    builder.append(src, offset, start - offset - <span class="number">1</span>).append(<span class="built_in">this</span>.openToken);</span><br><span class="line">                    offset = start + <span class="built_in">this</span>.openToken.length();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// æŸ¥æ‰¾åˆ°å¼€å§‹æ ‡è®°ï¼Œä¸”æœªè½¬ä¹‰</span></span><br><span class="line">                    <span class="keyword">if</span> (expression == <span class="literal">null</span>) &#123;</span><br><span class="line">                        expression = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        expression.setLength(<span class="number">0</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// å°†å‰é¢çš„å­—ç¬¦ä¸²è¿½åŠ åˆ°builderä¸­</span></span><br><span class="line">                    builder.append(src, offset, start - offset);</span><br><span class="line">                    offset = start + <span class="built_in">this</span>.openToken.length(); <span class="comment">// æ›´æ–°åç§»å€¼,å¼€å§‹æ ‡è®°çš„ä½ç½®+æ ‡è®°çš„é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">                    <span class="type">int</span> end;</span><br><span class="line">                    <span class="keyword">for</span>(end = text.indexOf(<span class="built_in">this</span>.closeToken, offset); end &gt; -<span class="number">1</span>; end = text.indexOf(<span class="built_in">this</span>.closeToken, offset)) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (end &lt;= offset || src[end - <span class="number">1</span>] != <span class="string">&#x27;\\&#x27;</span>) &#123;</span><br><span class="line">                            <span class="comment">// åˆ°äº†è¿™é‡Œï¼Œå°†å¼€å§‹æ ‡è®°å’Œç»“æŸæ ‡è®°ä¹‹é—´çš„å†…å®¹è¿½åŠ åˆ° expression ä¸­ä¿å­˜</span></span><br><span class="line">                            expression.append(src, offset, end - offset);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// å¤„ç†è½¬ä¹‰çš„ç»“æŸæ ‡è®°</span></span><br><span class="line">                        expression.append(src, offset, end - offset - <span class="number">1</span>).append(<span class="built_in">this</span>.closeToken);</span><br><span class="line">                        offset = end + <span class="built_in">this</span>.closeToken.length();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (end == -<span class="number">1</span>) &#123;</span><br><span class="line">                        builder.append(src, start, src.length - start);</span><br><span class="line">                        offset = src.length;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// å°†å ä½ç¬¦çš„å€¼äº¤ç»™TokenHandlerå¤„ç†ï¼Œå¹¶å°†ç»“æœè¿½åŠ åˆ°builderä¸­ä¿å­˜</span></span><br><span class="line">                        <span class="comment">// å¹¶å°†åç§»å€¼ç§»åŠ¨åˆ°ç»“æŸæ ‡è®°å (å¤„ç†å®Œä¸€ç»„å ä½ç¬¦)</span></span><br><span class="line">                        builder.append(<span class="built_in">this</span>.handler.handleToken(expression.toString()));</span><br><span class="line">                        offset = end + <span class="built_in">this</span>.closeToken.length();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// ç§»åŠ¨start (å¦‚æœæœ‰çš„è¯ï¼Œå¤„ç†ä¸‹ä¸€ç»„)</span></span><br><span class="line">                start = text.indexOf(<span class="built_in">this</span>.openToken, offset);</span><br><span class="line">            &#125; <span class="keyword">while</span>(start &gt; -<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (offset &lt; src.length) &#123;</span><br><span class="line">                builder.append(src, offset, src.length - offset);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> builder.toString();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å ä½ç¬¦çš„å­—é¢å€¼ç”±TokenHandleræ¥å£å®ç°è¿›è¡Œè§£æï¼ŒTokenHandleræ¥å£æœ‰å››ä¸ªå®ç°ã€‚</p><p>å†å›æ¥çœ‹PropertyParser.parse()æ–¹æ³•</p><p><img src="http://cdn.zsenhe.com/62842403141f45ae82f49bdb75c4d83c" alt="image.png"><br>å…¶ä¸­ä¸ºå ä½ç¬¦è§£æä¼ å…¥çš„TokenHandlerå®ç°ç±»ä¸ºVariableTokenHandler ï¼Œä¸€ä¸ªå†…éƒ¨å®ç°ç±»ï¼Œå…¶å­—æ®µå«ä¹‰å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Properties variables; <span class="comment">// &lt;properties&gt;èŠ‚ç‚¹ä¸‹å®šä¹‰çš„é”®å€¼å¯¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">boolean</span> enableDefaultValue; <span class="comment">// æ˜¯å¦æ”¯æŒå ä½ç¬¦ä¸­ä½¿ç”¨é»˜è®¤å€¼çš„åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String defaultValueSeparator; <span class="comment">// æŒ‡å®šå ä½ç¬¦å’Œé»˜è®¤å€¼ä¹‹é—´çš„åˆ†éš”ç¬¦</span></span><br></pre></td></tr></table></figure><p>VariableTokenHandlerå®ç°äº†TokenHandleræ¥å£ä¸­çš„handlerToken()æ–¹æ³•ï¼Œè¯¥å®ç°é¦–å…ˆä¼šæŒ‰ç…§defaultValueSpearatorå­—æ®µå¯¹æ•´ä¸ªå ä½ç¬¦è¿›è¡Œåˆ‡å‰²ï¼Œå¾—åˆ°å ä½ç¬¦çš„åç§°å’Œé»˜è®¤å€¼ï¼ŒæŒ‰ç…§åç§°æŸ¥æ‰¾å¯¹åº”çš„å€¼ï¼Œå¦‚ä¸å­˜åœ¨ä¸”é»˜è®¤å€¼åŠŸèƒ½å¼€å¯ï¼Œåˆ™è¿”å›é»˜è®¤å€¼ã€‚å…¶ä¸­ä»£ç å®ç°å¹¶ä¸å¤æ‚ï¼Œå°±ä¸è´´ä¸Šæ¥äº†</p><p>å›åˆ°å¯¹XPathParserçš„åˆ†æï¼ŒXPathParser.evalNode()è¿”å›å€¼ç±»å‹æ˜¯XNodeï¼Œå®ƒå¯¹org.w3c.dom.Nodeå¯¹è±¡åšäº†å°è£…å’Œè§£æï¼Œå…¶å­—æ®µå«ä¹‰å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XNode</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node node; <span class="comment">//org.w3c.dom.Node å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name; <span class="comment">// NodeèŠ‚ç‚¹åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String body; <span class="comment">// èŠ‚ç‚¹å†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Properties attributes; <span class="comment">//èŠ‚ç‚¹å±æ€§åˆé›†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Properties variables; <span class="comment">// mybatis-config.xml ä¸­å®šä¹‰çš„é”®å€¼å¯¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> XPathParser xpathParser; <span class="comment">// ç”Ÿæˆè¯¥XNodeå¯¹è±¡XPathParserå¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>XNodeçš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†å®ƒçš„parseAttributes()å’ŒparseBody()æ–¹æ³•è§£æorg.w3c.dom.Nodeå¯¹è±¡ä¸­çš„ä¿¡æ¯ï¼Œåˆå§‹åŒ–attributesé›†åˆå’Œbodyå­—æ®µï¼Œè¿‡ç¨‹å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Properties <span class="title function_">parseAttributes</span><span class="params">(Node n)</span> &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">attributes</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">// è·å–èŠ‚ç‚¹çš„å±æ€§é›†åˆ</span></span><br><span class="line">    <span class="type">NamedNodeMap</span> <span class="variable">attributeNodes</span> <span class="operator">=</span> n.getAttributes();</span><br><span class="line">    <span class="keyword">if</span> (attributeNodes != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; attributeNodes.getLength(); ++i) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">attribute</span> <span class="operator">=</span> attributeNodes.item(i);</span><br><span class="line">            <span class="comment">// è°ƒç”¨ä¸Šæ–‡æ‰€è¿°çš„PropertyParser.parseå¤„ç†å±æ€§å€¼çš„å ä½ç¬¦</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> PropertyParser.parse(attribute.getNodeValue(), <span class="built_in">this</span>.variables);</span><br><span class="line">            attributes.put(attribute.getNodeName(), value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> attributes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">parseBody</span><span class="params">(Node node)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="built_in">this</span>.getBodyData(node); <span class="comment">// è·å–èŠ‚ç‚¹æ–‡æœ¬å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (data == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">NodeList</span> <span class="variable">children</span> <span class="operator">=</span> node.getChildNodes();</span><br><span class="line">        <span class="comment">// å¤„ç†å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼Œxmlä¸­èŠ‚ç‚¹å†…çš„æ–‡æœ¬å±äºæ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">        <span class="comment">// æ¯”å¦‚ç›´æ¥getBodyData &lt;name&gt;ç¥é›•ä¾ ä¾£&lt;/name&gt; æ˜¯æ— æ³•è·å–æ–‡æœ¬çš„</span></span><br><span class="line">        <span class="comment">// éœ€è¦å†å¾€é‡Œä¸€å±‚ï¼Œè§£æ&quot;ç¥é›•ä¾ ä¾£&quot;èŠ‚ç‚¹æ—¶æ‰å±äºæ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; children.getLength(); ++i) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">child</span> <span class="operator">=</span> children.item(i);</span><br><span class="line">            data = <span class="built_in">this</span>.getBodyData(child);</span><br><span class="line">            <span class="keyword">if</span> (data != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">getBodyData</span><span class="params">(Node child)</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸æ˜¯æ–‡æœ¬å€¼,è¿”å›null</span></span><br><span class="line">    <span class="keyword">if</span> (child.getNodeType() != <span class="number">4</span> &amp;&amp; child.getNodeType() != <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> ((CharacterData)child).getData();</span><br><span class="line">        <span class="keyword">return</span> PropertyParser.parse(data, <span class="built_in">this</span>.variables);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆ°æ­¤ï¼Œè®©æˆ‘ä»¬ç©ä¸€ä¸‹XPathParserå§"><a href="#åˆ°æ­¤ï¼Œè®©æˆ‘ä»¬ç©ä¸€ä¸‹XPathParserå§" class="headerlink" title="åˆ°æ­¤ï¼Œè®©æˆ‘ä»¬ç©ä¸€ä¸‹XPathParserå§!"></a>åˆ°æ­¤ï¼Œè®©æˆ‘ä»¬ç©ä¸€ä¸‹XPathParserå§!</h4><p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰è·å–1955å¹´ä¹‹åå‘è¡Œçš„ä¹¦æ­¥éª¤å—ï¼Œç°åœ¨å¯ä»¥ç®€åŒ–æˆå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XPathParserTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">XPathParser</span> <span class="variable">xPathParser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XPathParser</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;bookdata.xml&quot;</span>)));</span><br><span class="line">            List&lt;XNode&gt; xNodes = xPathParser.evalNodes(<span class="string">&quot;//book[@year&gt;1955]&quot;</span>); <span class="comment">// æŸ¥è¯¢æ‰€æœ‰ year&gt;1955 çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (XNode xNode : xNodes) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> xNode.getStringAttribute(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">XNode</span> <span class="variable">nameNode</span> <span class="operator">=</span> xNode.evalNode(<span class="string">&quot;//name&quot;</span>);</span><br><span class="line">                <span class="type">XNode</span> <span class="variable">authorNode</span> <span class="operator">=</span> xNode.evalNode(<span class="string">&quot;//author&quot;</span>);</span><br><span class="line">                System.out.println(id+<span class="string">&quot;:&quot;</span>+nameNode.getStringBody()+<span class="string">&quot;/&quot;</span>+authorNode.getStringBody());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>XNodeä¸­æä¾›äº†å¤šç§get*()æ–¹æ³•è·å–æ‰€éœ€çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯æ¥æºäºattribute,body,nodeå­—æ®µ;ä¹Ÿå¯ä»¥åƒä¸Šé¢è¿™æ ·é€šè¿‡eval*()é…åˆXPathè¡¨è¾¾å¼æ¥å–å¾—ä¿¡æ¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œeval*ä¸­çš„ä¸Šä¸‹æ–‡èŠ‚ç‚¹ä¸ºå½“å‰Xnodeå¯¹è±¡çš„nodeå­—æ®µã€‚</p><p>å‚è€ƒèµ„æ–™ - ã€ŠMyBatisæŠ€æœ¯å†…å¹•ã€‹</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>XMLå¸¸è§çš„è§£ææ–¹å¼</title>
      <link href="/2023/10/26/XML%E5%B8%B8%E8%A7%81%E7%9A%84%E8%A7%A3%E6%9E%90%E6%96%B9%E5%BC%8F/"/>
      <url>/2023/10/26/XML%E5%B8%B8%E8%A7%81%E7%9A%84%E8%A7%A3%E6%9E%90%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="XMLçš„ä¸‰ç§è§£ææ–¹å¼"><a href="#XMLçš„ä¸‰ç§è§£ææ–¹å¼" class="headerlink" title="XMLçš„ä¸‰ç§è§£ææ–¹å¼"></a>XMLçš„ä¸‰ç§è§£ææ–¹å¼</h2><p>åœ¨é˜…è¯»MyBatisè§£æå™¨æ¨¡å—ä¸­çš„XPathParserç±»æ—¶ï¼Œéœ€è¦äº†è§£ä¸€äº›å…³äºXMLæ–‡æ¡£è§£æçš„ç›¸å…³çŸ¥è¯†<br>XMLå¸¸è§çš„è§£ææ–¹å¼æœ‰ä¸‰ç§ <em>DOMè§£æ</em> <em>SAXè§£æ</em> <em>STAXè§£æ</em><br>ä¸‹é¢å°†è¯¦ç»†è®°å½•SAXè§£æçš„è¿‡ç¨‹å’Œä»£ç </p><h4 id="DOMè§£æ"><a href="#DOMè§£æ" class="headerlink" title="DOMè§£æ"></a>DOMè§£æ</h4><p>DOMå±äºæ˜¯å‰ç«¯é€‰æ‰‹çš„è€æœ‹å‹äº†ï¼Œå®ƒä¼šåŸºäºæ ‘çš„å½¢å¼å°†æ•´ä¸ªxmlæ–‡æ¡£è¯»å…¥å†…å­˜ç»´æŠ¤ï¼ŒåŸºäºè¿™æ£µæ ‘ç»“æ„å¯¹å„ä¸ªèŠ‚ç‚¹(Node)è¿›è¡Œæ“ä½œã€‚</p><p><img src="http://cdn.zsenhe.com/356bfd8686434745bdb7534ec338f659" alt="image.png"></p><p>å¦‚ä¸‹ç»è¿‡DOMè§£æåçš„æ ‘ç»“æ„:</p><p><img src="http://cdn.zsenhe.com/a8a56780ed694b898450f3748d1bfd71" alt="image.png"></p><p>DOMè§£æçš„å¥½å¤„æ˜¯å› ä¸ºåŸºäºæ ‘å­˜å‚¨ï¼Œæ˜“äºèŠ‚ç‚¹ä¹‹é—´çš„å®šä½å¯¼èˆªã€‚ä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œç”±äºéœ€è¦ä¸€æ¬¡æ€§è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå½“æ–‡æ¡£è¿‡å¤§æ—¶ä¼šé€ æˆè¾ƒå¤§çš„èµ„æºæ¶ˆè€—</p><h4 id="SAXè§£æ"><a href="#SAXè§£æ" class="headerlink" title="SAXè§£æ"></a>SAXè§£æ</h4><p>SAXè§£æåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†ä¸Šé¢æ‰€è¿°çš„èµ„æºæ¶ˆè€—é—®é¢˜ï¼Œå®ƒå¹¶ä¸éœ€è¦å°†æ•´ä¸ªæ–‡æ¡£åŠ è½½åˆ°å†…å­˜ï¼Œåªéœ€å°†XMLæ–‡æ¡£çš„ä¸€éƒ¨åˆ†åŠ è½½ï¼Œå³å¯å¼€å§‹è§£æï¼Œåœ¨å¤„ç†è¿‡ç¨‹ä¸­ä¸ä¼šåœ¨å†…å­˜ä¸­ç¼“å­˜XMLçš„æ•°æ®ï¼Œå ç”¨èµ„æºè¾ƒå°ã€‚å½“ç¨‹åºå¤„ç†è¿‡ç¨‹ä¸­æ»¡è¶³æ¡ä»¶æ—¶ï¼Œä¹Ÿå¯ä»¥ç«‹å³åœæ­¢è§£æè¿‡ç¨‹</p><p>å½“SAXè§£æå™¨è§£æåˆ°æŸç±»å‹èŠ‚ç‚¹æ—¶ï¼Œä¼šcallæ³¨å†Œåœ¨è¯¥ç±»å‹èŠ‚ç‚¹ä¸Šçš„å›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘äººå‘˜åªéœ€ç»§æ‰¿DefaultHandleråŸºç±»ï¼Œé‡å†™å¯¹åº”äº‹ä»¶çš„å‡½æ•°å³å¯</p><p>æ¯”å¦‚ä»¥ä¸‹xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">id</span>=<span class="string">&quot;1001&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span></span><br><span class="line">            ç¥é›•ä¾ ä¾£</span><br><span class="line">        <span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span></span><br><span class="line">            é‡‘åº¸</span><br><span class="line">        <span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“saxè§£æå™¨å¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œä¼šåˆ†åˆ«è°ƒç”¨ä»¥ä¸‹å›è°ƒå‡½æ•°</p><blockquote><p>startElement(books)<br>startElement(book)<br>startElement(name)<br>characters(ç¥é›•ä¾ ä¾£)<br>endElement(name)<br>startElement(author)<br>characters(é‡‘åº¸)<br>endElement(author)<br>endElement(book)<br>endElement(books)</p></blockquote><p>ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å°†xmlä¸­çš„bookè½¬ä¸ºå®ä½“ç±»ï¼Œåªéœ€è¦åˆ›å»ºè‡ªå·±çš„å¤„ç†ç±»ï¼Œç»§æ‰¿DefaultHandlerï¼Œé‡å†™å¯¹åº”çš„å‡½æ•°å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomHandler</span> <span class="keyword">extends</span> <span class="title class_">DefaultHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Book bookCache;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Book&gt; books;</span><br><span class="line">    <span class="keyword">private</span> String currentName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£ææ–‡æœ¬çš„å›è°ƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">characters</span><span class="params">(<span class="type">char</span>[] ch, <span class="type">int</span> start, <span class="type">int</span> length)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;characters(&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(ch,start,length)+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(currentName.equalsIgnoreCase(<span class="string">&quot;author&quot;</span>))&#123;</span><br><span class="line">            <span class="built_in">this</span>.bookCache.setAuthor(<span class="keyword">new</span> <span class="title class_">String</span>(ch,start,length));</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(currentName.equalsIgnoreCase(<span class="string">&quot;name&quot;</span>))&#123;</span><br><span class="line">            <span class="built_in">this</span>.bookCache.setName(<span class="keyword">new</span> <span class="title class_">String</span>(ch,start,length));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹è§£æèŠ‚ç‚¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startElement</span><span class="params">(String uri, String localName, String qName, Attributes attributes)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;startElement(&quot;</span>+qName+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(qName.equalsIgnoreCase(<span class="string">&quot;books&quot;</span>))&#123;</span><br><span class="line">            <span class="built_in">this</span>.books = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(qName.equalsIgnoreCase(<span class="string">&quot;book&quot;</span>))&#123;</span><br><span class="line">            <span class="built_in">this</span>.bookCache = <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">            <span class="built_in">this</span>.bookCache.setId(Long.parseLong(attributes.getValue(<span class="string">&quot;id&quot;</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.currentName = qName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»“æŸæŸä¸ªèŠ‚ç‚¹çš„è§£æ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">endElement</span><span class="params">(String uri, String localName, String qName)</span> <span class="keyword">throws</span> SAXException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;endElement(&quot;</span>+qName+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(qName.equalsIgnoreCase(<span class="string">&quot;book&quot;</span>))&#123;</span><br><span class="line">            <span class="built_in">this</span>.books.add(bookCache);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getBooks</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> books;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaxTest</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–xmlè§£æå™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> XMLReader <span class="title function_">xmlReader</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SAXParserFactory</span> <span class="variable">saxParserFactory</span> <span class="operator">=</span> SAXParserFactory.newInstance();</span><br><span class="line">        <span class="type">SAXParser</span> <span class="variable">saxParser</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            saxParser = saxParserFactory.newSAXParser();</span><br><span class="line">            <span class="keyword">return</span> saxParser.getXMLReader();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParserConfigurationException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SAXException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">XMLReader</span> <span class="variable">xmlReader</span> <span class="operator">=</span> xmlReader();</span><br><span class="line">        <span class="type">CustomHandler</span> <span class="variable">customHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CustomHandler</span>();</span><br><span class="line">        xmlReader.setContentHandler(customHandler);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xmlReader.parse(<span class="keyword">new</span> <span class="title class_">InputSource</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;bookdata.xml&quot;</span>))));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SAXException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        customHandler.getBooks().forEach(book -&gt; System.out.println(book));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/654b1ba0cc8d47d8817eb78e136a01df" alt="image.png">![])</p><p>staxç¬”è€…æœªå»äº†è§£è¿‡ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚é˜…ç›¸å…³èµ„æ–™</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€å—é’±æ‰åœ°ä¸Šï¼Œç¢æˆäº†ä¸¤å¼ äº”æ¯›</title>
      <link href="/2023/10/06/%E4%B8%80%E5%9D%97%E9%92%B1%E6%8E%89%E5%9C%B0%E4%B8%8A%EF%BC%8C%E7%A2%8E%E6%88%90%E4%BA%86%E4%B8%A4%E5%BC%A0%E4%BA%94%E6%AF%9B/"/>
      <url>/2023/10/06/%E4%B8%80%E5%9D%97%E9%92%B1%E6%8E%89%E5%9C%B0%E4%B8%8A%EF%BC%8C%E7%A2%8E%E6%88%90%E4%BA%86%E4%B8%A4%E5%BC%A0%E4%BA%94%E6%AF%9B/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/af4b15e66ede4e7c9a91a3c0296e7ff3" alt="å¾®ä¿¡å›¾ç‰‡_20231006171122.jpg"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„</title>
      <link href="/2023/09/10/%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84/"/>
      <url>/2023/09/10/%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘è¦åå°„è·å–çš„ç±»æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateMenu</span><span class="params">(Block b, BlockMenu inv, <span class="type">boolean</span> force)</span> &#123;</span><br><span class="line">  <span class="type">String</span> <span class="variable">hasHolo</span> <span class="operator">=</span> BlockStorage.getLocationInfo(b.getLocation(), <span class="string">&quot;holo&quot;</span>);</span><br><span class="line">  <span class="type">int</span> <span class="variable">stored</span> <span class="operator">=</span> getStored(b);</span><br><span class="line">  <span class="type">String</span> <span class="variable">itemName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="type">String</span> <span class="variable">storedPercent</span> <span class="operator">=</span> doubleRoundAndFade(stored / <span class="built_in">this</span>.MAX_STORAGE * <span class="number">100.0D</span>);</span><br><span class="line">  <span class="type">String</span> <span class="variable">storedStacks</span> <span class="operator">=</span> doubleRoundAndFade(stored / inv.getItemInSlot(<span class="number">31</span>).getMaxStackSize());</span><br><span class="line">  <span class="keyword">if</span> (inv.hasViewer() || force)</span><br><span class="line">    inv.replaceExistingItem(<span class="number">22</span>, (ItemStack)<span class="keyword">new</span> <span class="title class_">CustomItemStack</span>(Material.LIME_STAINED_GLASS_PANE, <span class="string">&quot;&amp;6&amp;e&quot;</span> + stored + <span class="string">&quot; / &quot;</span> + <span class="built_in">this</span>.MAX_STORAGE, <span class="keyword">new</span> <span class="title class_">String</span>[] &#123; <span class="string">&quot;&amp;b&quot;</span> + storedStacks + <span class="string">&quot; &amp;8| &amp;7&quot;</span> + storedPercent + <span class="string">&quot;&amp;7%&quot;</span> &#125;)); </span><br><span class="line">  <span class="type">ItemStack</span> <span class="variable">item</span> <span class="operator">=</span> inv.getItemInSlot(<span class="number">31</span>);</span><br><span class="line">  <span class="keyword">if</span> (inv.getItemInSlot(<span class="number">31</span>) != <span class="literal">null</span>)</span><br><span class="line">    itemName = ItemUtils.getItemName(item); </span><br><span class="line">  <span class="keyword">if</span> (((Boolean)<span class="built_in">this</span>.showHologram.getValue()).booleanValue() &amp;&amp; (hasHolo == <span class="literal">null</span> || hasHolo.equals(<span class="string">&quot;true&quot;</span>)))</span><br><span class="line">    updateHologram(b, itemName + <span class="string">&quot; &amp;9x&quot;</span> + stored + <span class="string">&quot; &amp;7(&quot;</span> + storedPercent + <span class="string">&quot;&amp;7%)&quot;</span>); </span><br><span class="line">  <span class="keyword">if</span> (stored == <span class="number">0</span>) &#123;</span><br><span class="line">    inv.replaceExistingItem(<span class="number">31</span>, (ItemStack)<span class="keyword">new</span> <span class="title class_">CustomItemStack</span>(Material.BARRIER, <span class="string">&quot;&amp;c, new String[0]));</span></span><br><span class="line"><span class="string">    if (((Boolean)this.showHologram.getValue()).booleanValue() &amp;&amp; (hasHolo == null || hasHolo.equals(&quot;</span><span class="literal">true</span><span class="string">&quot;)))</span></span><br><span class="line"><span class="string">      updateHologram(b, &quot;</span>&amp;c); </span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åå°„ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">Method</span> <span class="variable">updateMenuMethod</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;updateMenu&quot;</span>, Block.class, BlockMenu.class, Boolean.class);</span><br><span class="line">                    updateMenuMethod.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                    updateMenuMethod.invoke(barrel,block,BlockStorage.getInventory(block),<span class="literal">true</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆçœ‹æ€ä¹ˆæ²¡é”™æ˜¯å§!ä½†è¿˜æ˜¯<br><img src="http://cdn.zsenhe.com/24e4c258bacc4eb387a7de25e73fc383" alt="WWMZ_PEDB``67ITQLYNVI.png"><br>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œä»¥ä¸ºæ˜¯ä¾èµ–å†²çªï¼ŒæŠ˜è…¾äº†å¿«ä¸€ä¸ªå°æ—¶<br>çœ¼å°–çš„åº”è¯¥å·²ç»çœ‹å‡ºæ¥äº†ï¼Œå®é™…forceç±»å‹æ˜¯booleanï¼ŒgetDeclaredMethodå´ä¼ äº†ä¸ªBoolean<br>å“ï¼Œå®è´µçš„æ—¶é—´å°±æ˜¯è¢«è¿™äº›è¯¥æ­»çš„å°é—®é¢˜æµªè´¹</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºçˆ±å‘ç”µçš„spigotæœåŠ¡å™¨è‡ªåŠ¨å……å€¼å‘è´§</title>
      <link href="/2023/08/31/%E5%9F%BA%E4%BA%8E%E7%88%B1%E5%8F%91%E7%94%B5%E7%9A%84spigot%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%8A%A8%E5%85%85%E5%80%BC%E5%8F%91%E8%B4%A7/"/>
      <url>/2023/08/31/%E5%9F%BA%E4%BA%8E%E7%88%B1%E5%8F%91%E7%94%B5%E7%9A%84spigot%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%8A%A8%E5%85%85%E5%80%BC%E5%8F%91%E8%B4%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="AifadianPay"><a href="#AifadianPay" class="headerlink" title="AifadianPay"></a>AifadianPay</h1><p>åŸºäºçˆ±å‘ç”µå®ç°çš„spigotè‡ªåŠ¨å……å€¼å‘è´§æ’ä»¶</p><p>ä½¿ç”¨:<br>å‰å¾€ <a href="https://afdian.net/">https://afdian.net</a> æ³¨å†Œè´¦å·åï¼Œå³ä¸Šè§’ç‚¹å‡»â€å¼€å‘è€…â€<br>è·å–user_id,tokenå¡«å…¥é…ç½®æ–‡ä»¶ï¼Œé‡è½½æ’ä»¶ï¼Œåˆ›å»ºå®Œå•†å“å³å¯å¼€å§‹ä½¿ç”¨(æ³¨æ„æ˜¯å•†å“ï¼Œä¸æ˜¯èµåŠ©æ–¹æ¡ˆ)</p><p>é…ç½®æ–‡ä»¶:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">setting:</span></span><br><span class="line">  <span class="comment"># userIdä¸tokenåœ¨çˆ±å‘ç”µè·å–,è¯¦æƒ…å¯å‚è€ƒmcbbså¸–å†…æ•™ç¨‹</span></span><br><span class="line">  <span class="attr">userId:</span> <span class="string">&#x27;user_id&#x27;</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">&#x27;token&#x27;</span></span><br><span class="line">  <span class="comment"># è‡ªåŠ¨å‘è´§é—´éš”</span></span><br><span class="line">  <span class="attr">delay:</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="attr">shopItem:</span></span><br><span class="line">  <span class="comment"># å•†å“åç§°è¯·ä¸çˆ±å‘ç”µå†…ä¿æŒä¸€è‡´</span></span><br><span class="line">  <span class="string">&#x27;100ç‚¹åˆ¸&#x27;</span><span class="string">:</span></span><br><span class="line">    <span class="comment"># å±•ç¤ºå</span></span><br><span class="line">    <span class="attr">displayName:</span> <span class="string">&#x27;100ç‚¹åˆ¸&#x27;</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨ /apl show 100ç‚¹åˆ¸ æ—¶å±•ç¤ºçš„url</span></span><br><span class="line">    <span class="attr">showUrl:</span> <span class="string">&#x27;https://afdian.net/item/1cab866647aa11ee9f3652540025c377&#x27;</span></span><br><span class="line">    <span class="comment"># ä»…æ˜¾ç¤ºåœ¨å±•ç¤ºä¿¡æ¯ ( &#123;price&#125;RMB )</span></span><br><span class="line">    <span class="attr">price:</span> <span class="number">100</span></span><br><span class="line">    <span class="comment"># è·å–ç‚¹åˆ¸</span></span><br><span class="line">    <span class="attr">point:</span> <span class="number">100</span></span><br><span class="line">    <span class="comment"># æ‰§è¡ŒæŒ‡ä»¤</span></span><br><span class="line">    <span class="attr">commands:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;give @p@ stone 1&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;say @p@,æ„Ÿè°¢ä½ çš„æ”¯æŒ&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;say ç™½ç»™äº†å•Šï¼Œ@p@åˆšåˆšèµåŠ©äº†100ç‚¹åˆ¸&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;[title]&amp;aå·²å‘è´§/&amp;f+@point@&amp;a ç‚¹å· (&amp;c@price@rmb@&amp;a)&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;[message]&amp;a &#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;[message]&amp;f å·²å®Œæˆè®¢å• &amp;e@tradeNo@ &amp;fæ„Ÿè°¢æ‚¨çš„æ”¯æŒ&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;[message]&amp;f å½“å‰ç‚¹åˆ¸ä½™é¢ &amp;e&amp;n@current_point@&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;[message]&amp;a &#x27;</span></span><br></pre></td></tr></table></figure><p>å‘½ä»¤&amp;æƒé™:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/apl help æŸ¥çœ‹å¸®åŠ© apl.use.help</span><br><span class="line">/apl check [è®¢å•] æŸ¥çœ‹è®¢å•çŠ¶æ€ apl.admin.check</span><br><span class="line">/apl update [è®¢å•] æ‰‹åŠ¨å‘è´§è®¢å• apl.admin.update</span><br><span class="line">/apl reload é‡è½½é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>å…¶ä»–:<br>å¼€æºåœ°å€: <a href="https://github.com/meteorOSS/AifadianPay">https://github.com/meteorOSS/AifadianPay</a><br>è‡ªå·±åŒ…è£…çš„çˆ±å‘ç”µjavasdk: <a href="https://github.com/meteorOSS/AifadianApi/tree/master">https://github.com/meteorOSS/AifadianApi/tree/master</a></p><p>å¦‚æœèƒ½æ¥å—æ‰‹ç»­è´¹6%çš„è¯åŸºæœ¬æ²¡åˆ«çš„ç¼ºç‚¹äº†ï¼Œå¹³å°åŠŸèƒ½å®Œå¤‡ä¸”ç¨³å®šï¼Œæ¯”åœˆå†…ä¸€äº›è·‘è·¯å¹³å°å¼ºçš„å¤š</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CMSä¸ä¸‰è‰²æ ‡è®°ç®—æ³•</title>
      <link href="/2023/08/25/CMS%E4%B8%8E%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E7%AE%97%E6%B3%95/"/>
      <url>/2023/08/25/CMS%E4%B8%8E%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="CMSä¸ä¸‰è‰²æ ‡è®°ç®—æ³•"><a href="#CMSä¸ä¸‰è‰²æ ‡è®°ç®—æ³•" class="headerlink" title="CMSä¸ä¸‰è‰²æ ‡è®°ç®—æ³•"></a>CMSä¸ä¸‰è‰²æ ‡è®°ç®—æ³•</h1><p>CMSæ˜¯ä¸€æ¬¾é‡Œç¨‹ç¢‘å¼çš„åƒåœ¾æ”¶é›†å™¨ï¼Œåœ¨å®ƒä¹‹å‰GCçº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹æ˜¯æ— æ³•åŒæ—¶è¿è¡Œçš„ï¼Œåœ¨ç”¨æˆ·å±‚é¢å¸¦æ¥çš„åæœå°±æ˜¯è¿è¡Œä¸€æ®µæ—¶é—´å°±ä¼šå¡é¡¿ä¸€ä¼šï¼Œé™ä½å“åº”é€Ÿåº¦</p><p>ä½†åœ¨æˆ‘ä»¬è®¤çŸ¥ä¸­ï¼ŒGCæ—¶åœæ­¢å…¶ä»–çº¿ç¨‹åº”è¯¥æ˜¯å¿…è¦çš„ã€‚è¯•æƒ³ä¸€ä¸‹å¦‚æœå®ƒä»¬åŒæ—¶è¿è¡Œï¼Œå¦‚æœåŸæœ¬ä¸æ˜¯åƒåœ¾ï¼Œå·¥ä½œçº¿ç¨‹å°†å¼•ç”¨æ›´æ”¹å˜æˆäº†åƒåœ¾ï¼Œè¿™ç§æƒ…å†µå¤§ä¸äº†å°±æ˜¯GCä¸‹ä¸€æ¬¡å†æ¸…ç†å°±å¥½äº†ï¼Œä½†å¦‚æœåŸæœ¬æ˜¯åƒåœ¾ï¼Œåœ¨æ¸…ç†è¿‡ç¨‹ä¸­å…¶ä»–çº¿ç¨‹å°†å…¶å¼•ç”¨ï¼ŒGCå›æ”¶åå°±ä¼šé€ æˆç¾éš¾çš„ç¨‹åºè¿è¡Œé”™è¯¯ã€‚</p><p>CMSæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ</p><h2 id="ä¸»è¦æ­¥éª¤"><a href="#ä¸»è¦æ­¥éª¤" class="headerlink" title="ä¸»è¦æ­¥éª¤"></a>ä¸»è¦æ­¥éª¤</h2><p>Concurrent Mark Sweepï¼Œä»åå­—ä¸Šçœ‹å°±èƒ½çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå·¥ä½œåœ¨è€å¹´ä»£çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå®ƒé‡‡ç”¨äº†æ ‡è®°æ¸…é™¤æ³•ã€‚åœ¨å®ƒè¿è¡Œä¸­å¤§è‡´åˆ†ä¸ºå‡ ä¸ªè¿‡ç¨‹</p><blockquote><p>åˆå§‹æ ‡è®° -&gt; å¹¶å‘æ ‡è®° -&gt; é‡æ–°æ ‡è®° -&gt; å¹¶å‘æ¸…ç†</p></blockquote><p>åˆå§‹æ ‡è®°é˜¶æ®µå¹¶ä¸ä¼šæ ‡è®°æ‰€æœ‰åƒåœ¾ï¼Œè€Œæ˜¯å¯¹GCrootç›´æ¥å…³è”çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¾ç„¶æ˜¯STWçš„ï¼Œä½†å®ƒçš„æ‰€å æ—¶é—´éå¸¸çŸ­ï¼Œå‡ ä¹å¯ä»¥å¿½ç•¥ï¼Œå› ä¸ºè¿™æ—¶å€™å¹¶ä¸ä¼šè¿›è¡Œæ ‡è®°ä»¥å¤–çš„å·¥ä½œ</p><p>åœ¨åˆå§‹æ ‡è®°ç»“æŸåï¼Œå¯¹æ ‡è®°çš„æ ¹å…³è”å¯¹è±¡è¿›è¡Œdfsï¼Œä»¥è¿™äº›å¯¹è±¡ä¸ºæ ¹ï¼Œéå†æ•´ä¸ªå†…å­˜å †ï¼›è¿™ä¸ªè¿‡ç¨‹è€—æ—¶ä¼šè¾ƒé•¿ï¼Œä½†å¥½åœ¨è¯¥è¿‡ç¨‹å¹¶ä¸ä¼šè§¦å‘STWï¼Œå·¥ä½œçº¿ç¨‹ä¾ç„¶å¯ä»¥è¿è¡Œï¼Œå½“ç„¶å“åº”çš„é€Ÿåº¦ä¼šå—åˆ°å½±å“</p><p>ç”±äºåœ¨å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­å…¶ä»–çº¿ç¨‹ä»åœ¨å·¥ä½œï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šäº§ç”Ÿé”™æ ‡ï¼Œé‚£ä¹ˆå°±å¾—æŠŠå®ƒä¿®æ­£å›æ¥ï¼Œè¿™ä¸ªæ—¶å€™å°±è¿›å…¥äº†é‡æ–°æ ‡è®°é˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¼šè§¦å‘STWï¼Œä½†ç”±äºé”™æ ‡çš„å¯¹è±¡ä¸ä¼šå¤ªå¤šï¼Œè¯¥è¿‡ç¨‹å¹¶ä¸ä¼šåœé¡¿è¿‡é•¿ï¼Œæœ€åè¿›è¡Œå¹¶å‘æ¸…ç†</p><h2 id="ä¸‰è‰²æ¸…ç†ç®—æ³•"><a href="#ä¸‰è‰²æ¸…ç†ç®—æ³•" class="headerlink" title="ä¸‰è‰²æ¸…ç†ç®—æ³•"></a>ä¸‰è‰²æ¸…ç†ç®—æ³•</h2><p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ€å…·ç¥ç§˜æ„Ÿçš„ä¾¿æ˜¯ç¬¬äºŒä¸ªé˜¶æ®µï¼Œå¹¶å‘æ ‡è®°ã€‚ä¸Šæ–‡æ‰€è¿°å®ƒèƒ½åœ¨ä¸STWä¸‹è¿›è¡Œåƒåœ¾æ ‡è®°ï¼Œé‚£ä¹ˆæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ã€‚å…¶é‡‡ç”¨çš„ç®—æ³•å« ä¸‰è‰²æ ‡è®°æ³•</p><p>ä¸‰è‰²æ ‡è®°æ³•å°†å¯¹è±¡çš„é¢œè‰²åˆ†ä¸ºé»‘ ç° ç™½</p><blockquote><p>ç™½è‰²: æœªè¢«æ ‡è®°è¿‡çš„å¯¹è±¡ï¼ˆåƒåœ¾ï¼‰</p><p>ç°è‰²: å·²ç»è¢«æ ‡è®°è¿‡ï¼Œä½†è¯¥å¯¹è±¡å…³è”ç³»ä¸‹çš„å…¶ä»–èŠ‚ç‚¹å¯¹è±¡æœªè¢«å…¨éƒ¨æ ‡è®°</p><p>é»‘è‰²: å·²ç»è¢«æ ‡è®°è¿‡ä¸”è¯¥å¯¹è±¡ä¸‹å…³è”çš„å…¶ä»–èŠ‚ç‚¹ä¹Ÿå·²ç»å…¨éƒ¨æ ‡è®°å®Œæˆ</p></blockquote><p><img src="https://pic3.zhimg.com/80/v2-524613ef814265510d92d5fb577bef7e_720w.webp"></p><p>æµç¨‹å¦‚ä¸‹:</p><blockquote><p>ä»mainæ–¹æ³•çš„GC Rootå¼€å§‹æ²¿ç€å®ƒä»¬çš„å¯¹è±¡å‘ä¸‹æŸ¥æ‰¾ï¼Œç”¨é»‘ç™½ç°çš„è§„åˆ™ï¼Œæ ‡è®°å¤„æ‰€æœ‰è·ŸGC Rootç›¸è¿æ¥çš„å¯¹è±¡ï¼Œæ‰«æä¸€éç»“æŸåï¼Œè¿›å…¥é‡æ–°æ ‡è®°ï¼ŒçŸ­æš‚STWï¼Œå†æ¬¡è¿›è¡Œæ‰«æï¼Œæ­¤æ—¶ç•¥è¿‡é»‘è‰²å¯¹è±¡ï¼Œæ‰¾å‡ºç°è‰²å¯¹è±¡ç»§ç»­æ ‡è®°ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œï¼ŒGCçº¿ç¨‹æ‰«ææ‰€æœ‰çš„ç™½è‰²å¯¹è±¡è¿›è¡Œå›æ”¶</p></blockquote><blockquote><ol><li><p>åˆ›å»ºä¸‰ä¸ªé›†åˆ é»‘ ç° ç™½</p></li><li><p>åˆå§‹æ‰€æœ‰å¯¹è±¡å­˜å…¥ç™½è‰²é›†åˆ</p></li><li><p>ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ‰€æœ‰å¯¹è±¡ (åˆå§‹æ ‡è®°ï¼Œæ³¨æ„è¿™é‡Œå¹¶ä¸ä¼šè¿›è¡Œdfs) ï¼Œå°†éå†åˆ°çš„å¯¹è±¡åŠ å…¥ç°è‰²é›†åˆ</p></li><li><p>å¯¹ç°è‰²é›†åˆä¸­æ‰€æœ‰å¯¹è±¡è¿›è¡Œdfsï¼Œå°†ç°è‰²å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ä»ç™½è‰²å˜æˆç°è‰²ï¼Œä¹‹åå°†æ­¤æœ¬æ¬¡éå†çš„æ ¹èŠ‚ç‚¹(æ­¤ç°è‰²å¯¹è±¡)åŠ å…¥é»‘è‰²é›†åˆ</p></li><li><p>é‡å¤ 4 ç›´åˆ°ç°è‰²ä¸­æ— ä»»ä½•å¯¹è±¡</p></li><li><p>æ¸…ç†ç™½è‰²åƒåœ¾</p></li></ol></blockquote><h2 id="B-Dæ¶ˆå¤±ï¼ŒA-Då¢åŠ "><a href="#B-Dæ¶ˆå¤±ï¼ŒA-Då¢åŠ " class="headerlink" title="B -&gt; Dæ¶ˆå¤±ï¼ŒA-&gt;Då¢åŠ "></a>B -&gt; Dæ¶ˆå¤±ï¼ŒA-&gt;Då¢åŠ </h2><p>åœ¨è„‘æµ·ä¸­è¿‡ä¸€éæµç¨‹ï¼Œå¾ˆæ˜æ˜¾è¿™æ ·è²Œä¼¼å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚å¦‚æœDåŸå…ˆä½œä¸ºç™½è‰²å¯¹è±¡è¢«ç°è‰²å¯¹è±¡Bæ‰€å¼•ç”¨ï¼Œç”±äºæ¸…ç†çš„è¿‡ç¨‹ç¨‹åºè¿˜åœ¨ä¸é—´æ–­è¿è¡Œï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹å–æ¶ˆäº†Bå¯¹Dçš„å¼•ç”¨ï¼Œé‚£ä¹ˆå°±æ‰«æä¸åˆ°Däº†ï¼Œè¿™æ ·è¿˜ä¸æ˜¯æœ€ä¸¥é‡çš„ï¼Œè‡³å¤šäº§ç”Ÿä¸€äº›æµ®åŠ¨åƒåœ¾ï¼Œä¸‹ä¸€æ¬¡å†æ¬¡æ¸…ç†å°±å¥½äº†ã€‚æœ€ä¸¥é‡çš„æ˜¯å¦å¤–ä¸€ç§æƒ…å†µï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨æ‰«æç°è‰²å¯¹è±¡æ—¶ï¼ŒåŸå…ˆDå±äºBçš„å¼•ç”¨ï¼Œä¸æ­¤åŒæ—¶å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†æ›´æ”¹ï¼ŒBåˆ°Dçš„å¼•ç”¨æ¶ˆå¤±ï¼Œå¢åŠ äº†é»‘è‰²å¯¹è±¡Aåˆ°Dçš„å¼•ç”¨ï¼Œç”±äºAå±äºé»‘è‰²å¯¹è±¡ï¼Œå¦‚æœä¸è¿›è¡Œä¿®æ­£ï¼Œå†ä¸‹æ¬¡æ¸…ç†çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šå¯¹Dè¿›è¡Œæ‰«æï¼Œåˆ°ç¬¬6æ­¥çš„æ—¶å€™ï¼ŒDä½œä¸ºç™½è‰²èŠ‚ç‚¹è¢«æ¸…ç†ï¼Œä½†Aè¿˜åœ¨å¼•ç”¨Dã€‚</p><p>é’ˆå¯¹æ­¤é—®é¢˜ï¼ŒCMSé‡‡ç”¨äº† å¢åŠ å¼•ç”¨ç¯èŠ‚(Incremental Update) æ¥å¤„ç†ï¼Œä¹Ÿå°±æ˜¯å°†Aé‡æ–°æ ‡è®°ä¸ºç°è‰²</p><h3 id="IncrementalUpdateäº§ç”Ÿçš„æ–°é—®é¢˜-æ¼æ ‡"><a href="#IncrementalUpdateäº§ç”Ÿçš„æ–°é—®é¢˜-æ¼æ ‡" class="headerlink" title="IncrementalUpdateäº§ç”Ÿçš„æ–°é—®é¢˜ æ¼æ ‡"></a>IncrementalUpdateäº§ç”Ÿçš„æ–°é—®é¢˜ æ¼æ ‡</h3><ul><li>åœ¨ä¸€ä¸ªç°è‰²å¯¹è±¡æ­£åœ¨è¢«ä¸€ä¸ªGCçº¿ç¨‹å›æ”¶æ—¶ï¼Œå½“å®ƒå·²ç»è¢«æ ‡è®°è¿‡çš„å±æ€§æŒ‡å‘äº†ä¸€ä¸ªç™½è‰²å¯¹è±¡ï¼ˆåƒåœ¾ï¼‰</li><li>è€Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§å¯¹è±¡æœ¬èº«è¿˜æœªå…¨éƒ¨æ ‡è®°ç»“æŸï¼Œåˆ™ä¸ºç°è‰²ä¸å˜</li><li>ã€Œè€Œè¿™ä¸ªGCçº¿ç¨‹åœ¨æ ‡è®°å®Œæœ€åä¸€ä¸ªå±æ€§åï¼Œè®¤ä¸ºå·²ç»å°†æ‰€æœ‰çš„å±æ€§æ ‡è®°ç»“æŸäº†ï¼Œå°†è¿™ä¸ªç°è‰²å¯¹è±¡æ ‡è®°ä¸ºé»‘è‰²ï¼Œè¢«é‡æ–°å¼•ç”¨çš„ç™½è‰²å¯¹è±¡ï¼Œæ— æ³•è¢«æ ‡è®°</li></ul><p>ç”±äºè¿™ä¸ªé—®é¢˜ï¼Œé‡æ–°æ ‡è®°ç¯èŠ‚éœ€è¦ä»å¤´å¼€å§‹æ‰«æã€‚ç”±äºé‡æ–°æ ‡è®°é˜¶æ®µä¾ç„¶å¾—STWï¼Œä»CMSè¯ç”Ÿä¸ºæ­¢ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªjdkå°†CMSä½œä¸ºåƒåœ¾æ”¶é›†æ–¹æ¡ˆï¼Œé‚£ä¹ˆç”¨é‚£ä¹ˆå¤šç²¾åŠ›å­¦ä¹ CMSå’Œä¸‰è‰²æ ‡è®°æœ‰ä»€ä¹ˆç”¨ã€‚å¹¶ä¸æ˜¯ä¸‰è‰²æ ‡è®°ç®—æ³•æœ‰é—®é¢˜ï¼Œé—®é¢˜å‘ç”Ÿåœ¨cmsé‡‡ç”¨çš„IncrementalUpdateç®—æ³•</p><h2 id="ä»€ä¹ˆéƒ½ä¸å¹²çš„åƒåœ¾å›æ”¶å™¨-Epsilon"><a href="#ä»€ä¹ˆéƒ½ä¸å¹²çš„åƒåœ¾å›æ”¶å™¨-Epsilon" class="headerlink" title="ä»€ä¹ˆéƒ½ä¸å¹²çš„åƒåœ¾å›æ”¶å™¨ Epsilon"></a>ä»€ä¹ˆéƒ½ä¸å¹²çš„åƒåœ¾å›æ”¶å™¨ Epsilon</h2><p>Epsilonæ˜¯jdk11ä¹‹åæä¾›çš„ä¸€ä¸ªåƒåœ¾æ”¶é›†å™¨ï¼Œå®ƒç›¸è¾ƒå…¶ä»–æ”¶é›†å™¨æ›´ä¸ºç‰¹æ®Šã€‚å¤„ç†å†…å­˜åˆ†é…ä½†ä¸è¿›è¡Œå›æ”¶ï¼Œjavaå †è€—å°½åjvmå…³é—­</p><p>å½“èƒ½å‡†ç¡®é¢„ä¼°ç¨‹åºå¹¶ä¸ä¼šäº§ç”Ÿè¿‡å¤šåƒåœ¾æˆ–æ‰‹åŠ¨è¿›è¡Œç®¡ç†ï¼Œä»¥æ±‚æœ€é«˜æ€§èƒ½è¿è¡Œæ—¶ï¼Œå¯é€‰æ‹©è¯¥åƒåœ¾æ”¶é›†å™¨ï¼Œé€šå¸¸ç”¨äºæµ‹é‡å’Œç®¡ç†ç¨‹åºã€‚</p><h1 id="æœ€ä¸»æµçš„åƒåœ¾æ”¶é›†å™¨-G1"><a href="#æœ€ä¸»æµçš„åƒåœ¾æ”¶é›†å™¨-G1" class="headerlink" title="æœ€ä¸»æµçš„åƒåœ¾æ”¶é›†å™¨ G1"></a>æœ€ä¸»æµçš„åƒåœ¾æ”¶é›†å™¨ G1</h1><p><img src="http://cdn.zsenhe.com/964541f63a4849669744eee4dd25df31" alt="20230825235424image.png"></p><p>G1æ‘’å¼ƒäº†ä»¥å‰çš„åˆ†ä»£æ¨¡å‹ï¼Œå°†å†…å­˜åˆ†ä¸ºä¸å›ºå®šå¤§å°çš„å¤šå—åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸéƒ½å¯ä»¥ä½œä¸ºedenç©ºé—´ï¼Œoldç©ºé—´â€¦.(ç‰©ç†ä¸Šä¸å†åˆ†ä»£ï¼Œä½†é€»è¾‘ä¸Šä¾ç„¶åˆ†ä»£)ã€‚æ ¹æœ¬ä¸Šçš„è½¬å˜ä½¿å¾—å®ƒè¡¡é‡æ ‡å‡†ä¸å†æ˜¯å¯¹è±¡å±äºå“ªä¸ªåˆ†ä»£ï¼Œè€Œæ˜¯å“ªå—å†…å­˜å­˜æ”¾çš„å¤šï¼Œå›æ”¶çš„æ”¶ç›Šè¶Šå¤§ï¼Œè¿™å°±æ˜¯G1çš„æ··åˆGCæ¨¡å¼</p><p>å…¶ä¸­Humongousä½œä¸ºè¿ç»­çš„å†…å­˜ä¸“é—¨ç”¨äºå­˜æ”¾å¤§å¯¹è±¡</p><p><strong>Regionçš„å–å€¼èŒƒå›´ä¸º 1M ~ 32M</strong></p><p><strong>Regionçš„é»˜è®¤ä¸ªæ•°ä¸º 2048ä¸ª</strong></p><p>G1çš„é—®é¢˜åœ¨äºæ¯æ¬¡å›æ”¶è¦å°†å¹´è½»ä»£çš„å†…å­˜å…¨éƒ¨å›æ”¶ï¼Œå½“å¹´è½»ä»£çš„å†…å­˜è¾ƒå¤§æ—¶ï¼Œä¸€æ¬¡YGCäº§ç”Ÿçš„STWæ—¶é—´è¾ƒé•¿,å› æ­¤è¯ç”Ÿäº†ZGC</p><h1 id="ZGC"><a href="#ZGC" class="headerlink" title="ZGC"></a>ZGC</h1><p>ZGCé‡‡ç”¨äº†åˆ†é¡µç®—æ³•ï¼Œä¹Ÿæ˜¯Golangåƒåœ¾å›æ”¶æ‰€é‡‡ç”¨çš„ç®—æ³•ã€‚å®ƒç›¸è¾ƒG1æ”¯æŒTBçº§åˆ«çš„å†…å­˜ï¼Œæœ€å¤§GCåœé¡¿10msï¼Œä¸”å†…å­˜å¢å¤§çš„åŒæ—¶åœé¡¿æ—¶é—´ä¸ä¼šå¢é•¿ï¼Œå¯¹ååé‡çš„å½±å“ä¸è¶…è¿‡15%</p><p>å®ƒä¸G1ä¸€æ ·é‡‡ç”¨äº†å†…å­˜åˆ†å—ï¼Œä½†åŠ¨æ€åˆ†é…ä½¿å¾—å¯ä»¥æœ‰1m,2mçš„regionï¼Œä¸”ä¸å†åˆ†å¹´è½»ä»£è€å¹´ä»£ï¼Œåœ¨å›ºå®šæ—¶é—´å†…è§¦å‘gc</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GCåƒåœ¾å›æ”¶åŠå†å²æ¼”è¿›</title>
      <link href="/2023/08/24/GC%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%8F%8A%E5%8E%86%E5%8F%B2%E6%BC%94%E8%BF%9B/"/>
      <url>/2023/08/24/GC%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%8F%8A%E5%8E%86%E5%8F%B2%E6%BC%94%E8%BF%9B/</url>
      
        <content type="html"><![CDATA[<h1 id="GCåŠå†å²æ¼”è¿›"><a href="#GCåŠå†å²æ¼”è¿›" class="headerlink" title="GCåŠå†å²æ¼”è¿›"></a>GCåŠå†å²æ¼”è¿›</h1><h1 id="æ ˆå’Œå †"><a href="#æ ˆå’Œå †" class="headerlink" title="æ ˆå’Œå †"></a>æ ˆå’Œå †</h1><p>åœ¨ç¨‹åºå¼€å‘ä¸­æœ€éš¾ä»¥è°ƒè¯•çš„é—®é¢˜è«è¿‡äºé‡æŒ‡é’ˆå’Œå¹¶å‘é—®é¢˜ã€‚</p><p>é‡æŒ‡é’ˆå³æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ç€å¤šä¸ªæŒ‡é’ˆå¼•ç”¨ï¼Œå½“å¯¹è±¡åœ¨æŸä¸€å¤„é‡Šæ”¾æ‰äº†è€Œå¦ä¸€å¤„è¿˜ä¸çŸ¥æƒ…ä¾æ—§ä½¿ç”¨;æˆ–è€…æ˜¯ä¸å†æŒ‡å‘ä»»ä½•å¯¹è±¡çš„æŒ‡é’ˆï¼Œä¹Ÿæ˜¯åœ¨javaä¸­æœ€ä¸ºç»å…¸çš„NullPointerExcetion</p><p>é‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿå¤§å¤šè¯­è¨€åœ¨è¿è¡ŒæœŸé—´å†…å­˜ä¸­çš„è¡¨ç°éƒ½æœ‰ç€æ ˆï¼Œå †è¿™ä¸¤ä¸ªæ¦‚å¿µ</p><p>å¦‚ä¸‹é¢è¿™æ®µä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(Object o)</span>&#123;</span><br><span class="line">       <span class="type">Object</span> <span class="variable">p</span> <span class="operator">=</span> o;</span><br><span class="line">       out(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        print(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/688d2f90076148f3801b99df09ce644c" alt="20230825003845image.png"></p><p>å¦‚å¯¹äºjavaï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªæ ˆï¼Œæ ˆä¸­å­˜æ”¾ç€æ–¹æ³•çš„è·¯å¾„å¼•ç”¨ï¼Œè€Œå †æ˜¯ä½œä¸ºåŠ¨æ€åˆ†é…çš„åŒºåŸŸï¼Œå­˜æ”¾ç€ä¸åŒæŒ‡é’ˆæŒ‡å‘çš„å®é™…èµ„æºã€‚</p><p>å¯¹äºå›¾ä¸­æŒ‡é’ˆo,pçš„å¼•ç”¨ï¼Œå¦‚æœåœ¨printä¹‹å‰å‘ç”Ÿäº†å…¶ä»–äº‹ï¼ˆå¦‚æŒ‡å‘çš„å¯¹è±¡åœ¨å †ä¸­è¢«å…¶ä»–æ•°æ®è¦†ç›–ï¼Œæˆ–æ˜¯printä¹‹å‰é‡Šæ”¾æ‰äº†oæŒ‡å‘çš„èµ„æºâ€¦..)ï¼Œå°±ä¼šé€ æˆç©ºæŒ‡é’ˆæˆ–é‡æŒ‡é’ˆçš„é—®é¢˜</p><p>å†æ¥è¯´è¯´å¹¶å‘é—®é¢˜ï¼Œè¿™ä¸ªå°±æ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œå³å¤šä¸ªçº¿ç¨‹æ ˆåŒæ—¶è®¿é—®ä¸€å—å†…å­˜ç©ºé—´</p><p>å¦‚æœå•ä¸€çš„é—®é¢˜è¿˜ä¸æ˜¯æœ€ç³Ÿç³•ï¼Œé‚£ä¹ˆä¸¤è€…ç»“åˆå°±æ˜¯åœ°ç‹±äº†</p><h2 id="è¯­è¨€çš„å‘å±•å†å²"><a href="#è¯­è¨€çš„å‘å±•å†å²" class="headerlink" title="è¯­è¨€çš„å‘å±•å†å²"></a>è¯­è¨€çš„å‘å±•å†å²</h2><p>è¯­è¨€çš„å‘å±•å¾ˆå¤§åŸå› æ˜¯è¿™ä¸¤éƒ¨åˆ†åœ¨æ¨è¿›ï¼Œæœ€å¼€å§‹c&#x2F;c++ä½¿ç”¨æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œé€šè¿‡malloc()ç”³è¯·å†…å­˜ï¼Œä½¿ç”¨åé€šè¿‡free()é‡Šæ”¾æ‰ï¼Œä½†ç¨‹åºä¸æ˜¯ä¸€æ¡è·¯èµ°åˆ°é»‘ï¼Œå®ƒå¯èƒ½æœ‰ç€æ•°ä»¥ä¸Šç™¾çš„è¿è¡Œåˆ†æ”¯ï¼Œé‚£ä¹ˆé‡Šæ”¾å†…å­˜åˆ†é…å†…å­˜çš„æ—¶æœºä¼šé€ æˆå„ç§å„æ ·çš„bugã€‚å¦‚å¿˜è®°é‡Šæ”¾é€ æˆå†…å­˜æ³„æ¼ï¼Œé‡Šæ”¾å¤šæ¬¡ï¼Œé‡æŒ‡é’ˆæ»¡å¤©é£ç­‰æƒ…å†µ</p><p>äºæ˜¯ï¼Œç´§è·Ÿç€äº§å‡ºäº†ä¸€äº›å†…å­˜ç®¡ç†æ–¹ä¾¿çš„è¯­è¨€ï¼Œå¦‚Go&#x2F;Python&#x2F;Javaã€‚å½“ç„¶å¹¶ä¸æ˜¯è¯´å°±å®Œå…¨æ²¡æœ‰äº†é‡æŒ‡é’ˆç©ºæŒ‡é’ˆç­‰é—®é¢˜ï¼Œè€Œæ˜¯å¼•å…¥äº†GCçš„æ¦‚å¿µ-Gabarge Collectorã€‚ä¹Ÿå°±æ˜¯åƒåœ¾æ”¶é›†å™¨</p><p>ä»¥å‰æˆ‘ä»¬ä¸æ­¢éœ€è¦åˆ†é…å¯¹è±¡ï¼Œè¿˜å¾—è´Ÿè´£é‡Šæ”¾å¯¹è±¡ï¼Œè€ŒGCçš„å¼•å…¥ä¾¿æ˜¯è´Ÿè´£äº†åè€…çš„å·¥ä½œï¼Œæˆ‘ä»¬åªç®¡åˆ†é…ï¼Œå›æ”¶é‡Šæ”¾çš„å·¥ä½œäº¤ç»™GCï¼Œæå¤§çš„æå‡äº†å¼€å‘æ•ˆç‡</p><p>åˆ«é«˜å…´çš„å¤ªæ—©äº†ï¼Œä¸ç®¡æ˜¯javaè¿˜æ˜¯goï¼Œä¾ç„¶æ²¡æœ‰è§£å†³ç©ºæŒ‡é’ˆé‡æŒ‡é’ˆçš„é—®é¢˜ã€‚è™½ç„¶åœ¨javaä¸­æœ‰ç€Optionsç­‰å¤„ç†ç©ºæŒ‡é’ˆçš„ç±»ï¼Œä½†æ ¹æœ¬ä¸Šå¹¶æ²¡æœ‰è§£å†³ï¼Œæˆ‘ä»¬çš„ä»£ç ä¸­è¿˜æ˜¯å……æ–¥ç€å¤§é‡çš„if(obj!&#x3D;null)ã€‚è€Œä¸”gcä¼šå ç”¨cpuèµ„æºï¼Œè¿™å¯¼è‡´å®ƒä»¬çš„æ‰§è¡Œæ•ˆç‡ä¸å¦‚c&#x2F;c++</p><h2 id="ä»€ä¹ˆæ˜¯åƒåœ¾-garbage"><a href="#ä»€ä¹ˆæ˜¯åƒåœ¾-garbage" class="headerlink" title="ä»€ä¹ˆæ˜¯åƒåœ¾(garbage)?"></a>ä»€ä¹ˆæ˜¯åƒåœ¾(garbage)?</h2><p>æ—¢ç„¶å°†å†…å­˜é‡Šæ”¾çš„å·¥ä½œäº¤ç»™GCäº†ï¼Œé‚£ä¹ˆæ€ä¹ˆå®šä¹‰åƒåœ¾å‘¢?åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰ä»»ä½•æŒ‡é’ˆå¼•ç”¨çš„è‚¯å®šå°±æ˜¯åƒåœ¾äº†ï¼Œä½†æ€ä¹ˆå®šä½åƒåœ¾å‘¢ï¼Œå…¶ä¸­æœ‰å¤šç§æ–¹å¼</p><blockquote><p>Reference count å¼•ç”¨è®¡æ•°æ³•</p><p>å®ƒçš„æ ¸å¿ƒæ€ç»´æ˜¯ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨æ¥æ ‡è¯†å¯¹è±¡è¢«å¤šå°‘ä¸ªæŒ‡é’ˆæ‰€ä½¿ç”¨ï¼Œå½“ä¸º0æ—¶å³ç¡®å®šä¸ºåƒåœ¾è¿›è¡Œå›æ”¶ã€‚</p></blockquote><p>pythonå°±ä½¿ç”¨äº†è¿™ç§æ–¹å¼ï¼Œä½†å¼•å…¥è®¡æ•°æ³•å­˜åœ¨ç€é—®é¢˜</p><p><img src="http://cdn.zsenhe.com/4533794e9ba44bb4a849a3f8e19760fa" alt="20230825011638image.png"></p><p>å¦‚ä¸Šå›¾è¿™æ ·çš„æƒ…å†µï¼Œä¸‰ä¸ªå¯¹è±¡éƒ½å¼•ç”¨äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ²¡æœ‰ä»»ä½•å¤–éƒ¨æŒ‡é’ˆæ¥å¼•ç”¨å…¶ä¸­çš„ä¸€ä¸ª</p><p>è¿™æ ·ä¸‰ä¸ªåƒåœ¾äº’ç›¸æŒ‡å‘ï¼Œå¦‚æœä½¿ç”¨è®¡æ•°æ³•æ— æ³•å®šä½å…¶ä¸­ä»»ä½•ä¸€ä¸ªåƒåœ¾ï¼Œæ‰€ä»¥javaå¹¶æ²¡æœ‰é‡‡ç”¨è¿™æ ·çš„æ–¹å¼</p><blockquote><p>Root Searching æ ¹å¯è¾¾ç®—æ³•</p><p>javaé‡‡ç”¨çš„æ˜¯æ ¹å¯è¾¾ç®—æ³•ï¼Œå…¶é€šè¿‡ä¸€ç³»åˆ—åä¸ºâ€Gc Rootsâ€çš„å¯¹è±¡ä½œä¸ºå‡ºå‘ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å¾€ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°Gcrootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼Œåˆ™è¯æ˜è¯¥å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„</p></blockquote><p>å…¶ä¸­èƒ½ä½œä¸ºæ ¹èŠ‚ç‚¹çš„å¯¹è±¡æœ‰å¾ˆå¤š</p><blockquote><p>(1). è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡åŒºï¼Œä¹Ÿå«åšå±€éƒ¨å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚</p><p>(2). æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚</p><p>(3). æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ã€‚</p><p>(4). æœ¬åœ°æ–¹æ³•æ ˆä¸­JNI(Nativeæ–¹æ³•)å¼•ç”¨çš„å¯¹è±¡ã€‚</p></blockquote><p>å…¶ä¸­ä»»ä½•ä¸€é¡¹æ‹å‡ºæ¥éƒ½èƒ½å•ƒåŠå¤©ï¼Œæœ€ç®€å•çš„å³æ˜¯ï¼Œmainå…¥å£æ–¹æ³•ä¸­ä»»ä½•å˜é‡éƒ½èƒ½ç®—æ ¹</p><h2 id="å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œåƒåœ¾å›æ”¶å™¨"><a href="#å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œåƒåœ¾å›æ”¶å™¨" class="headerlink" title="å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œåƒåœ¾å›æ”¶å™¨"></a>å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•å’Œåƒåœ¾å›æ”¶å™¨</h2><p>å½“æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯åƒåœ¾åï¼Œå°±å¾—æŠŠå®ƒæ¸…æ‰äº†ï¼Œå¸¸è§çš„åƒåœ¾æ¸…é™¤ç®—æ³•æœ‰ä¸‰ç§</p><blockquote><p>Mark-Sweepæ ‡è®°æ¸…é™¤</p><p>å®ƒåˆ†ä¸ºæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªé˜¶æ®µï¼Œé€šè¿‡æ ¹å¯è¾¾ç®—æ³•æ ‡è®°æ‰€æœ‰çš„åƒåœ¾ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€è¿›è¡Œæ¸…é™¤ã€‚</p><p><img src="http://cdn.zsenhe.com/eff08c7df7ea4eaa90e66bc91629eb43" alt="20230825014059image.png"></p><p>è¿™ç§æ¸…é™¤æ–¹å¼æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯åœ¨å¤šæ¬¡æ ‡è®°æ¸…é™¤ä¹‹åï¼Œå†…å­˜ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œå½“ä¸€æ¬¡æ€§éœ€è¦åˆ†é…å¤§å—çš„å†…å­˜ç©ºé—´æ—¶ï¼Œä¼šè§¦å‘æ–°ä¸€æ¬¡çš„åƒåœ¾æ”¶é›†åŠ¨ä½œ</p></blockquote><hr><blockquote><p>Copying å¤åˆ¶ç®—æ³•</p><p>å¤åˆ¶ç®—æ³•é’ˆå¯¹æ ‡è®°æ¸…é™¤ç®—æ³•çš„ç¼ºç‚¹ï¼Œåœ¨å…¶åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ã€‚å®ƒå°†å†…å­˜å¯ç”¨å®¹é‡åˆ†å‰²ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—ï¼Œå½“ä¸Šé¢çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°†å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸­ï¼Œå†æŠŠåŸå…ˆå·²ä½¿ç”¨çš„å†…å­˜è¿›è¡Œä¸€æ¬¡æ€§æ¸…é™¤</p><p><img src="http://cdn.zsenhe.com/a687ae7cdc95458c8ef103f93c83eae7" alt="20230825015336image.png"></p><p>å®ƒçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ¯æ¬¡åªæ˜¯ç”¨1&#x2F;2ï¼Œå¯ç”¨å†…å­˜å°‘äº†æ•´æ•´ä¸€åŠï¼</p></blockquote><p>ä¸ºäº†è§£å†³copyingç®—æ³•çš„ç¼ºé™·ï¼Œå……åˆ†åˆ©ç”¨å†…å­˜ç©ºé—´ï¼Œæå‡ºäº†Mark-Compactç®—æ³•</p><blockquote><p>æ ‡è®°-æ•´ç†ç®—æ³• (Mark-Compact)</p><p>è¯¥ç®—æ³•æ ‡è®°é˜¶æ®µå’ŒMark-Sweepä¸€æ ·ï¼Œä½†ä¸åŒçš„æ˜¯åœ¨æ ‡è®°å®Œæˆä¹‹åä¼šé—²å°†å­˜æ´»å¯¹è±¡éƒ½å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†å­˜æ´»å¯¹è±¡è¾¹ç•Œä»¥å¤–çš„åƒåœ¾</p><p><img src="http://cdn.zsenhe.com/e6b1bc5cdbf24862986a545ee713a329" alt="20230825015716image.png"></p><p>å½“ç„¶ï¼Œç¼ºç‚¹å°±æ˜¯æ•ˆç‡æ¯”å…¶ä»–ä¸¤ç§ä½äº†å¾ˆå¤šï¼Œæ¯•ç«Ÿé™¤äº†æ ‡è®°åŠ¨ä½œï¼Œè¿˜å¾—è¿›è¡Œå­˜æ´»å¯¹è±¡çš„æ’åˆ—ç§»åŠ¨</p></blockquote><p>é‚£ä¹ˆjvmçš„GCæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿå¦‚æœå°†å†…å­˜å½“åšåªæœ‰ä¸€å—å¯ä½¿ç”¨çš„è¯ï¼Œä¸‰ç§ç®—æ³•éƒ½æœ‰ç¼ºç‚¹ã€‚jvmå°†ä¸€æ•´å—å†…å­˜åŒºåŸŸåˆ’åˆ†ä¸ºä¸åŒçš„å—ç»¼åˆåº”ç”¨ä¸åŒçš„å›æ”¶ç®—æ³•</p><h2 id="GCåƒåœ¾å›æ”¶å™¨çš„æ¼”åŒ–è¿‡ç¨‹"><a href="#GCåƒåœ¾å›æ”¶å™¨çš„æ¼”åŒ–è¿‡ç¨‹" class="headerlink" title="GCåƒåœ¾å›æ”¶å™¨çš„æ¼”åŒ–è¿‡ç¨‹"></a>GCåƒåœ¾å›æ”¶å™¨çš„æ¼”åŒ–è¿‡ç¨‹</h2><p>jvmå°†å †å†…å­˜åˆ†åŒºä¸º æ–°ç”Ÿä»£ï¼ˆnew) å’Œè€å¹´ä»£(old)</p><p><img src="http://cdn.zsenhe.com/8e2b076dac904c3783103c7b1b40ff82" alt="20230825020358image.png"></p><p>åˆšè¯ç”Ÿçš„å¯¹è±¡ä¼˜å…ˆå¾€æ–°ç”Ÿä»£å­˜æ”¾ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„â€œå¹´é¾„â€ï¼Œå½“æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç»å†è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶åè¿˜å­˜æ´»ï¼Œé‚£ä¹ˆå®ƒçš„å¹´é¾„+1ï¼Œå½“å…¶å¹´é¾„è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œé‚£ä¹ˆå°±æ˜¯è€ä¸œè¥¿äº†ï¼Œå¾€è€å¹´ä»£ç§»åŠ¨</p><p>åœ¨æ–°ç”Ÿä»£ä¸­é‡‡ç”¨Copyingç®—æ³•ï¼Œè€å¹´ä»£é‡‡ç”¨Mark-Compactç®—æ³•</p><p>æ–°ç”Ÿä»£ä¸­çš„åƒåœ¾å›æ”¶ç§°ä¸ºYGï¼Œä¸€æ¬¡æ€§çš„å›æ”¶å¯èƒ½å›æ”¶åˆ°90%çš„å¯¹è±¡ï¼Œ100ä¸ªå¯¹è±¡æˆ‘åªå‰©ä¸‹10ä¸ªå¯¹è±¡å­˜æ´»ï¼Œåªåˆ†æˆä¸¤å—æ˜¯ä¸æ˜¯å¤ªæµªè´¹äº†ï¼Ÿäºæ˜¯åœ¨åˆ†ä»£æ¨¡å‹ä¸­ï¼Œæ¯”ä¾‹ä¸º8:1:1ï¼Œå 8æˆçš„åŒºåŸŸç§°ä¸ºä¼Šç”¸(eden)ï¼Œç”Ÿå‘½è¯ç”Ÿçš„åœ°æ–¹ï¼Œåˆšåˆ†é…çš„å¯¹è±¡ä¼šè¢«å­˜æ”¾åœ¨è¿™é‡Œï¼Œåƒåœ¾å›æ”¶åå­˜æ´»çš„å­˜æ”¾è‡³å 1çš„survivoråŒºåŸŸï¼Œä¼Šç”¸å‰©ä¸‹çš„å¯¹è±¡å…¨éƒ¨æ¸…é™¤ï¼Œåœ¨ä¸‹ä¸€æ¬¡å›æ”¶ä¸­ï¼ŒåŒæ—¶æ‰«æå‰ä¸¤ä¸ªåŒºåŸŸï¼Œå­˜æ´»çš„å¯¹è±¡æ¬è‡³ç¬¬äºŒä¸ªSurvivorï¼Œå¦‚æ­¤å¾€å¤ã€‚è£…ä¸ä¸‹äº†æˆ–æ˜¯å¹´é¾„åˆ°æŸä¸ªé˜ˆå€¼äº†ï¼Œè¿åˆ°è€å¹´ã€‚å½“è€å¹´ä»£åŒºåŸŸæ»¡äº†ä¼šè§¦å‘å…¨åŒºçš„gc</p><p>è¯´å›åƒåœ¾æ”¶é›†å™¨ï¼ŒGCçš„æ¼”åŒ–éšç€å†…å­˜å¤§å°çš„ä¸æ–­å¢è¿›è€Œæ¨è¿›</p><p>åœ¨åªæœ‰å‡ måˆ°å‡ åmçš„æ—¶å€™ï¼Œåªéœ€è¦Serialæ”¶é›†å™¨</p><blockquote><p><img src="http://cdn.zsenhe.com/3fa74a6ffb4e4e3d979c0c7097fcda70" alt="20230825023056image.png"></p><p>Serialæ”¶é›†å™¨</p><p>Serial(ä¸²è¡Œ)æ”¶é›†å™¨æ˜¯å†å²æœ€æ‚ ä¹…çš„åƒåœ¾æ”¶é›†å™¨ã€‚åœ¨jdk1.3ä¹‹å‰å®ƒæ˜¯å¹´è½»ä»£å”¯ä¸€çš„æ”¶é›†å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œå®ƒåªä¼šä½¿ç”¨ä¸€æ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å»å®Œæˆå·¥ä½œï¼Œåœ¨å®ƒå·¥ä½œçš„æ—¶å€™ä¼šæš‚åœæ‰æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ï¼Œç§°ä¸ºSTWï¼ˆStop The Worldï¼‰ï¼Œç›´åˆ°å®ƒæ”¶é›†ç»“æŸä¸–ç•Œæ‰ä¼šé‡å¯</p><p>è¿™ä¹Ÿæ„å‘³ç€å®ƒåœ¨å·¥ä½œçš„æ—¶å€™ä¼šç»™ç”¨æˆ·å¸¦æ¥å¡é¡¿ç°è±¡é€ æˆä¸è‰¯çš„ä½“éªŒï¼Œç”±äºæ²¡æœ‰çº¿ç¨‹ä¹‹é—´çš„äº¤äº’å¼€é”€ï¼Œè‡ªç„¶å¯ä»¥è·å¾—é«˜æ•ˆçš„æ•ˆç‡</p></blockquote><p>Serialæ”¶é›†å™¨åœ¨è€å¹´ä»£å’Œæ–°ç”Ÿä»£çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼Œä¸åŒçš„åªæ˜¯åœ¨å¹´è½»ä»£ä¸­ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œåè€…åˆ™ä½¿ç”¨æ ‡è®°-æ•´ç†ç®—æ³•</p><p>åé¢å†…å­˜å¢é•¿åˆ°ä¸Šç™¾å…†ç”šè‡³1Gäº†ï¼Œå¦‚æœä¾ç„¶ä½¿ç”¨Serialæ”¶é›†å™¨ï¼Œé‚£å¯èƒ½å¾—å¿å—ç¨‹åºæš‚åœåŠå°æ—¶è¿™æ ·çš„é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™ParNewå‡ºç°äº†ï¼Œå®ƒé‡‡ç”¨äº†å¤šçº¿ç¨‹å¹¶è¡Œçš„åƒåœ¾æ”¶é›†</p><p>å·¥ä½œåœ¨å¹´è½»ä»£çš„ParNewå«åšParallel Scavengeï¼Œå·¥ä½œåœ¨è€å¹´ä»£çš„ParNewç§°ä¸ºParallel Oldã€‚ç®€ç§°PS+POï¼Œåœ¨1.8ä¸­ï¼Œå¦‚æœæ²¡æœ‰è¿‡ä»»ä½•è®¾ç½®ï¼Œè¿™æ˜¯é»˜è®¤çš„åƒåœ¾å›æ”¶å™¨æ–¹æ¡ˆ</p><p>ParNewä¸æ­¢ä½¿ç”¨äº†å¤šçº¿ç¨‹æé«˜æ•ˆç‡ï¼Œå®ƒæ›´å…³æ³¨çš„æ˜¯ååé‡ï¼ˆé«˜æ•ˆç‡çš„åˆ©ç”¨CPUï¼Œä¹ŸæŒ‡ç³»ç»Ÿåœ¨ä¸€ä¸ªå•ä½æ—¶é—´å†…å¯æ‰¿å—çš„è¯·æ±‚æ•°é‡ï¼Œè¡¨ç°äº†ç³»ç»Ÿçš„æ‰¿å‹èƒ½åŠ›ï¼‰</p><p>æ…¢æ…¢çš„ï¼Œå†…å­˜å¢é•¿åˆ°äº†ä¸Šç™¾Gï¼Œè¿™ä¸ªæ—¶å€™å‘ç°æƒ³è¦æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡å°±ç‰µæ‰¯åˆ°äº†æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªé—®é¢˜</p><blockquote><p>çº¿ç¨‹æ•°è¶Šå¤šæ•ˆç‡å°±è¶Šé«˜å—ï¼Ÿ</p></blockquote><p>ç­”æ¡ˆæ˜¯ä¸ä¸€å®šï¼Œå¤šçº¿ç¨‹å¹¶ä¸æ„å‘³ç€çœŸæ­£çš„åŒæ—¶è¿è¡Œã€‚è€Œæ˜¯cpuæ—¶é—´ç‰‡çš„åˆ‡æ¢ï¼Œä¸€ä¸ªcpuåŒæ—¶åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œ16æ ¸çš„cpuåŒæ—¶è¿è¡Œ16ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™ä½ æ¥äº†ä¸€ç™¾ä¸ªçº¿ç¨‹ï¼Œå¾’å¢äº†è®¸å¤šåˆ‡æ¢çš„å¼€é”€ä¸è¯´ï¼Œå¯¹æ•ˆç‡å¹¶æ²¡æœ‰ä½œç”¨ï¼Œç”šè‡³çº¿ç¨‹åˆ‡æ¢æ‰€å çš„èµ„æºè¶…è¿‡äº†çº¿ç¨‹è¿è¡Œã€‚</p><p>æ‰€ä»¥åˆ°äº†è¿™ä¸ªæ—¶å€™ï¼Œå¢åŠ å¤šçš„çº¿ç¨‹å¹¶ä¸ä¼šæé«˜å¤šå¤§çš„æ•ˆç‡ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œè¯ç”Ÿäº†</p><blockquote><p>Concurrent GC</p></blockquote><p>åé¢æ‰€äº§ç”Ÿçš„åŒ…æ‹¬CMSï¼ŒG1ï¼ŒZGCéƒ½æ¥è‡ªäºConcureent</p><p>Concurrentè®©GCçº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹å¯ä»¥åŒæ—¶è¿è¡Œï¼Œä¹Ÿå°±æ˜¯å¹¶å‘ã€‚åœ¨è¿™ä¹‹å‰ï¼ŒGCä¸€è¿è¡Œå…¶ä»–å·¥ä½œçº¿ç¨‹éƒ½å¾—STWã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œç¨‹åºä¸€è¾¹å·¥ä½œGCä¸€è¾¹æ¸…ç†åƒåœ¾</p><p>è¿™å°±æ˜¯GCå›æ”¶çš„å†å²æ¼”è¿›äº†ï¼Œå½“æŒæ¡äº†å¤§æ¦‚çš„ä½“ç³»ï¼Œåé¢å°±å¯ä»¥å¼€å§‹å¯¹ç»†èŠ‚çš„æ¢ç©¶åŠè°ƒä¼˜äº†</p><p>å‚è€ƒ:</p><p><a href="https://www.bookstack.cn/read/gc-handbook/">ä»‹ç» - ã€ŠGCå‚è€ƒæ‰‹å†Œ-Javaç‰ˆã€‹ - ä¹¦æ ˆç½‘ Â· BookStack</a></p><p><a href="https://www.bilibili.com/video/BV1fe411A7JQ">JVMè°ƒä¼˜å®æˆ˜1-7p</a></p><p><a href="https://blog.csdn.net/hyb612/article/details/103777129">å¤šçº¿ç¨‹å°±ä¸€å®šå¿«å—ï¼Ÿå¤©çœŸï¼_çº¿ç¨‹è¶Šå¤šè¶Šå¿«å—_å®ˆæœ›ä¹‹åçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/qq522044637/article/details/124863705">ä»€ä¹ˆæ˜¯QPSã€TPSã€ååé‡ï¼Ÿ- é«˜å¹¶å‘åè¯æ¦‚å¿µ_ååé‡qps_ä¸€è¾¹å­¦ä¹ ä¸€è¾¹å“­çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/ccuaman/article/details/107067222">åƒåœ¾å›æ”¶çš„ä¸‰ç§ç®—æ³•_åƒåœ¾å›æ”¶ç®—æ³•_vvuz2çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/qq_39691723/article/details/121379180">æ ¹å¯è¾¾æ€§ç®—æ³•ï¼šæ˜¯ä»€ä¹ˆã€æ€ä¹ˆåšã€ä¸ºä»€ä¹ˆ_æ ¹å¯è¾¾ç®—æ³•_é”®ç›˜ä¸Šã®Dancerçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/W_J_F_/article/details/82778565">C++ ï¼šå¼•ç”¨è®¡æ•°(reference count) å®ç°_c++å¼•ç”¨è®¡æ•°çš„å®ç°_WangJ_F_çš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>1.16+çš„forgeä¸bukkité€šä¿¡</title>
      <link href="/2023/08/18/1.16+%E7%9A%84forge%E4%B8%8Ebukkit%E9%80%9A%E4%BF%A1/"/>
      <url>/2023/08/18/1.16+%E7%9A%84forge%E4%B8%8Ebukkit%E9%80%9A%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<p>å…³äºforgeå’Œbukkité€šä¿¡ï¼ŒæŸ¥é˜…äº†å¾ˆå¤šèµ„æ–™å‘ç°å¤§å¤šéƒ½å·²ç»è¿‡æ—¶ï¼Œæˆ–æ˜¯ä¸è¯¦ç»†ã€‚è‡ªå·±æŠ˜è…¾äº†ä¸€ç•ªï¼Œè®°å½•ä¸€ä¸‹</p><blockquote><p>forge æ¥æ”¶æ–¹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Mod(&quot;story_hud_show&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StoryHudShow</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> SimpleChannel channel;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">222</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String[] data = &#123;<span class="string">&quot;23456&quot;</span>,<span class="string">&quot;æ˜ŸæœŸå¤©14æ—¥&quot;</span>,<span class="string">&quot;ä¸Šåˆ9:00&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StoryHudShow</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setup</span><span class="params">(<span class="keyword">final</span> FMLCommonSetupEvent event)</span></span><br><span class="line">    &#123;</span><br><span class="line">        channel = NetworkRegistry.ChannelBuilder.named(<span class="keyword">new</span> <span class="title class_">ResourceLocation</span>(<span class="string">&quot;story_hud_show&quot;</span>, <span class="string">&quot;main_channel&quot;</span>))</span><br><span class="line">                .networkProtocolVersion(() -&gt; <span class="string">&quot;bzdo&quot;</span>)</span><br><span class="line">                .serverAcceptedVersions(NetworkRegistry.ACCEPTVANILLA::equals)</span><br><span class="line">                .clientAcceptedVersions(NetworkRegistry.ACCEPTVANILLA::equals)</span><br><span class="line">                .simpleChannel();</span><br><span class="line">        channel.registerMessage(idx,String.class,<span class="built_in">this</span>::enc,<span class="built_in">this</span>::dec,<span class="built_in">this</span>::proc);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">enc</span><span class="params">(String str, FriendlyByteBuf buffer)</span> &#123;</span><br><span class="line">        buffer.writeBytes(str.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">dec</span><span class="params">(FriendlyByteBuf buffer)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> buffer.toString(StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">proc</span><span class="params">(String str, Supplier&lt;NetworkEvent.Context&gt; supplier)</span> &#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        data = str.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        NetworkEvent.<span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> supplier.get();</span><br><span class="line">        context.setPacketHandled(<span class="literal">true</span>);</span><br><span class="line">        channel.reply(<span class="string">&quot;rpl&quot;</span>, context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ChannelBuilderç”¨äºæ„å»ºä¸€ä¸ªé¢‘é“ï¼Œæ˜¾è€Œæ˜“è§æ˜¯ä¸€ä¸ªå·¥å‚ç±»ï¼Œæ‰€ç¤ºä»£ç ä¸­ç”¨åˆ°çš„æ–¹æ³•è§£é‡Šå¦‚ä¸‹</p><blockquote><p>named å…¶ä¸­éœ€ä¼ å…¥ä¸€ä¸ªResourceLocationï¼Œå¦‚èµ„æºæ–‡ä»¶ä¸€èˆ¬çš„å¼•ç”¨æ–¹å¼ namespace:path<br>networkProtocolVersion ä¸ºç½‘ç»œåè®®ç‰ˆæœ¬<br>server||client AcceptedVersion å‚æ•°ä¸ºNetworkRegistry.ACCEPTVANILLA::equalsè¡¨ç¤ºå…è®¸æœªå®‰è£…forgeçš„åŸç‰ˆå®¢æˆ·ç«¯è¿›å…¥<br>æœ€åä½¿ç”¨simpleChannelå¾—åˆ°SimpleChannelå¯¹è±¡</p></blockquote><p>SimpleChannelå°±æ˜¯æˆ‘ä»¬çš„ä¸»è§’äº†ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨registerMessageæ³¨å†Œå®Œæ¶ˆæ¯ç§ç±»</p><blockquote><p>channel.registerMessage(idx,String.class,this::enc,this::dec,this::proc);</p></blockquote><p>å…¶ä¸­,idxç”¨äºåŒºåˆ†ä¸åŒçš„æ¶ˆæ¯ç±»å‹;ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°æ®ç±»å‹,åœ¨ç¤ºä¾‹ä¸­ä½¿ç”¨String;åé¢è·Ÿç€çš„åˆ†åˆ«æ˜¯ç¼–ç å’Œè§£ç çš„å¤„ç†æ–¹æ³•<br>å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¾¿å®Œæˆäº†æ¶ˆæ¯é¢‘é“çš„æ³¨å†Œï¼Œprocä¾¿æ˜¯æ¥æ”¶æ¶ˆæ¯çš„å¤„ç†äº†ï¼Œå…¶ä¸­çš„channel.replyä¸ºæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œå¯¹æœåŠ¡ç«¯çš„å›å¤<br>ï¼ˆå…¶å®ä¸å†™ä¹Ÿæ— å…³ç´§è¦ï¼Œåªæ˜¯ä¼šåˆ·æŠ¥é”™ä¸é›…è§‚ï¼Œå½“ç„¶ç©å®¶ä¹Ÿçœ‹ä¸åˆ°ï¼‰</p><blockquote><p>bukkit å‘é€æ–¹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">StarHudServerPackPlugin</span> <span class="keyword">extends</span> <span class="title class_">JavaPlugin</span> <span class="keyword">implements</span> <span class="title class_">Listener</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">222</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">channel</span> <span class="operator">=</span> <span class="string">&quot;star_hud_show:main_channel&quot;</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onEnable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Plugin startup logic</span></span><br><span class="line">        getServer().getMessenger().registerIncomingPluginChannel(<span class="built_in">this</span>,channel,(channel,player,message)-&gt;&#123;</span><br><span class="line">            getLogger().info(<span class="string">&quot;received message from client&quot;</span>);</span><br><span class="line">            getLogger().info(message.toString());</span><br><span class="line">        &#125;);</span><br><span class="line">        getServer().getMessenger().registerOutgoingPluginChannel(<span class="built_in">this</span>, channel);</span><br><span class="line">        getServer().getPluginManager().registerEvents(<span class="built_in">this</span>, <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">(Player player, String msg)</span> &#123;</span><br><span class="line">        msg = <span class="string">&quot;23846&quot;</span>+<span class="string">&quot;/&quot;</span>+<span class="string">&quot;æ˜ŸæœŸå¤©14æ—¥&quot;</span>+<span class="string">&quot;/&quot;</span>+<span class="string">&quot;ä¸Šåˆ9:00&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] bytes = msg.getBytes(StandardCharsets.UTF_8);</span><br><span class="line">        <span class="type">ByteBuf</span> <span class="variable">buf</span> <span class="operator">=</span> Unpooled.buffer(bytes.length + <span class="number">1</span>);</span><br><span class="line">        buf.writeByte(idx);</span><br><span class="line">        buf.writeBytes(bytes);</span><br><span class="line">        player.sendPluginMessage(<span class="built_in">this</span>, channel, buf.array());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">read</span><span class="params">(<span class="type">byte</span>[] array)</span> &#123;</span><br><span class="line">        <span class="type">ByteBuf</span> <span class="variable">buf</span> <span class="operator">=</span> Unpooled.wrappedBuffer(array);</span><br><span class="line">        <span class="keyword">if</span> (buf.readUnsignedByte() == idx) &#123;</span><br><span class="line">            <span class="keyword">return</span> buf.toString(StandardCharsets.UTF_8);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EventHandler</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onJoin</span><span class="params">(PlayerJoinEvent event)</span>&#123;</span><br><span class="line">        <span class="type">Player</span> <span class="variable">player</span> <span class="operator">=</span> event.getPlayer();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class&lt;? <span class="keyword">extends</span> <span class="title class_">CommandSender</span>&gt; senderClass = player.getClass();</span><br><span class="line">            <span class="type">Method</span> <span class="variable">addChannel</span> <span class="operator">=</span> senderClass.getDeclaredMethod(<span class="string">&quot;addChannel&quot;</span>, String.class);</span><br><span class="line">            addChannel.setAccessible(<span class="literal">true</span>);</span><br><span class="line">            addChannel.invoke(player, channel);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Bukkit.getScheduler().runTaskLater(<span class="built_in">this</span>,</span><br><span class="line">                () -&gt; send(player, <span class="string">&quot;23846&quot;</span>+<span class="string">&quot;/&quot;</span>+<span class="string">&quot;æ˜ŸæœŸå¤©14æ—¥&quot;</span>+<span class="string">&quot;/&quot;</span>+<span class="string">&quot;ä¸Šåˆ9:00&quot;</span>), <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDisable</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Plugin shutdown logic</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bukkitçš„ä»£ç å°±è¾ƒä¸ºç†Ÿæ‚‰äº†ï¼Œå…¶ä¸­ç–‘æƒ‘æ˜¯è¿™ä¸ªä¸‘é™‹çš„åå°„æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ<br>åŸå› æ˜¯åœ¨1.13ä¹‹åçš„ç‰ˆæœ¬ï¼Œforgeå®¢æˆ·ç«¯ä¸ä¼šåœ¨åŠ å…¥å‰å‘æœåŠ¡å™¨æ³¨å†Œæ¶ˆæ¯é€šé“ï¼Œåªèƒ½ç”¨åå°„å‡è£…æˆ‘ä»¬å·²ç»æ”¶åˆ°äº†registeråŒ…hh</p><p>æœ‰äº†forgeå’Œbukkité€šä¿¡ï¼Œå¯ä»¥åšåˆ°å¾ˆå¤šæœ‰æ„æ€çš„äº‹æƒ…ï¼Œä¸”è´Ÿè·éƒ½åœ¨å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯åªéœ€å‘ä¸ªåŒ…å°±å¥½äº†ã€‚é‚£äº›ä»˜è´¹çš„é¾™æ ¸,vvç­‰ä¹Ÿéƒ½æ˜¯ä¸€æ ·çš„åŸç†<br>æ¯”å¦‚è¯´ï¼Œç”¨hudå±•ç¤ºæœåŠ¡å™¨ä¿¡æ¯ï¼Œè¿™å¯æ¯”è®¡åˆ†æ¿ä¼˜é›…å¤šäº†<br><img src="http://cdn.zsenhe.com/235cb63e49894fffab04df89df9c88be" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>cdnjs.cloudflareçš„æ›¿ä»£è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2023/08/14/cdnjs.cloudflare%E7%9A%84%E6%9B%BF%E4%BB%A3%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2023/08/14/cdnjs.cloudflare%E7%9A%84%E6%9B%BF%E4%BB%A3%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ç½‘ç«™å‡ºç°äº†markdownæ— æ³•æ¸²æŸ“ç­‰å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚<br>æ’æŸ¥ä¹‹ä¸‹å‘ç°æ˜¯ç”±äºcdnjs.cloudflareè¢«å±è”½äº†æ— æ³•è®¿é—®å¯¼è‡´åŒ…æ‹¬markdownæ¸²æŸ“åœ¨å†…çš„ä¸€ç³»åˆ—jsæ–‡ä»¶æ— æ³•è½½å…¥</p><p>è§£å†³æ–¹æ³•æ˜¯å°†æ‰€æœ‰jsé‡Œçš„cdnjs.cloudflareæ›¿æ¢ä¸ºcdnjs.loli.net&#x2F;ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å‰è€…åœ¨å†…çš„æ‰€æœ‰å¼€æºåº“</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°å¾®ä¿¡å°æ¸¸æˆå¹¿å‘Šä¸­çš„â€œæ­¦å™¨å›´ç€å°äººè½¬â€</title>
      <link href="/2023/08/10/%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%B9%BF%E5%91%8A%E4%B8%AD%E7%9A%84%E2%80%9C%E6%AD%A6%E5%99%A8%E5%9B%B4%E7%9D%80%E5%B0%8F%E4%BA%BA%E8%BD%AC%E2%80%9D/"/>
      <url>/2023/08/10/%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%B9%BF%E5%91%8A%E4%B8%AD%E7%9A%84%E2%80%9C%E6%AD%A6%E5%99%A8%E5%9B%B4%E7%9D%80%E5%B0%8F%E4%BA%BA%E8%BD%AC%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/13ebbd5a7d714f10a999a2dba26298ee" alt="http://cdn.zsenhe.com/13ebbd5a7d714f10a999a2dba26298ee"><br>éƒ½çœ‹è¿‡è¿™ç§å¹¿å‘Šå§ï¼Œæ­¦å™¨å›´ç€å°äººè½¬åœˆåœˆï¼Œè¢«æ­¦å™¨ç¢°åˆ°çš„å°æ€ªå°±æ‰£è¡€ã€‚çœ‹ç€å¾ˆæœ‰æ„æ€ï¼Œæ‰‹ç—’å°è¯•ç€ç”¨ç°æœ‰çš„çŸ¥è¯†å®ç°ä¸€ä¸ª<br>å°±ä¸èŠ±æ—¶é—´å»å­¦ä¹ æ¸¸æˆå¼•æ“äº†ï¼Œç”¨çº¯åŸç”Ÿjs+canvasåº“åšä¸€ä¸ªç½‘é¡µç‰ˆçš„å°å®ç°å§<br>é¦–å…ˆåœ¨canvasä¸Šå°†ç©å®¶æ“æ§çš„ä¸»è§’ç”»å‡ºæ¥ï¼Œè´´å›¾å°±ä¸åšäº†ï¼Œç›´æ¥ä¸Šåœ†ç‚¹å§</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>dddemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;gameMap&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> canvas  = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;gameMap&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é€šè¿‡ç”»å¸ƒå®½é«˜å–å¾—ä¸­å¿ƒç‚¹åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cX = canvas.<span class="property">width</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cY = canvas.<span class="property">height</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// åœ†ç‚¹(äººç‰©)çš„åŠå¾„</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> r = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®©æ¯ä¸€å¸§éƒ½è°ƒç”¨drawå‡½æ•°æ›´æ–°ç”»é¢</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ¸…é™¤ç”»å¸ƒä¸Šæ‰€æœ‰åƒç´ </span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">400</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// ç”»åœ†</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">arc</span>(cX,cY,r,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fillText</span>(<span class="string">&quot;æˆ‘æ˜¯äººç‰©&quot;</span>,cX-<span class="number">10</span>,cY-<span class="number">12</span>,<span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é‡å¤ç»˜åˆ¶</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">requestAnimationFrame</span>(draw);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">draw</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="http://cdn.zsenhe.com/739ce0803c3c45d8948c6d7b6533f117" width="512px"><p>æ¥ä¸‹æ¥æœ€é‡è¦çš„å°±æ˜¯ä»–è¾¹ä¸Šçš„æ­¦å™¨äº†ï¼Œå‰‘å‘¢ï¼Ÿå°±ä¸ç”»äº†ï¼Œç›´æ¥æ‹¿æ ¹çº¿æ¡ä»£æ›¿å§</p><blockquote><p>CanvasRenderingContext2D.lineTo() æ˜¯ Canvas 2D API ä½¿ç”¨ç›´çº¿è¿æ¥å­è·¯å¾„çš„ç»ˆç‚¹åˆ° xï¼Œy åæ ‡çš„æ–¹æ³•</p></blockquote><p>å­è·¯å¾„å³æ˜¯åœ†ç‚¹æ‰€åœ¨çš„åæ ‡ï¼Œé‚£ä¹ˆx,yç›®æ ‡åæ ‡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰è§’å‡½æ•°æ¥è¿›è¡Œè®¡ç®—<br>è®¾(cx,cy)ä¸ºåœ†å¿ƒæ‰€åœ¨çš„åæ ‡ï¼Œangä¸ºå¼§åº¦åˆ¶çš„è§’ï¼ˆåˆå§‹ä¸º0ï¼‰ï¼Œæ¯æ¬¡drawæ‰§è¡Œçš„æ—¶å€™éƒ½æ›´æ–°è§’+speed(é€Ÿåº¦)<br>æ ¹æ®ä¸‰è§’å‡½æ•°ä¸å¼§åº¦åˆ¶ï¼Œcos(ang) &#x3D; x&#x2F;åœ†åŠå¾„ï¼Œè€Œè¿™é‡Œçš„åœ†åŠå¾„å°±æ˜¯çº¿çš„é•¿åº¦ï¼Œå› æ­¤çº¿çš„åæ ‡ä¸º<br>x &#x3D; cos(ang)*rï¼ŒåŠ ä¸ŠcXçš„åç§»é‡,yè½´åŒç†ï¼›äºæ˜¯å¯ä»¥æ¨å¯¼å‡ºçº¿çš„åæ ‡ä¸º<br>(cX+cos(ang)*çº¿é•¿åº¦,cY+sin(ang)*çº¿é•¿åº¦)<br>okï¼Œå†™å‡ºç›¸åº”çš„ä»£ç å®ç°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>dddemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;gameMap&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> canvas  = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;gameMap&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é€šè¿‡ç”»å¸ƒå®½é«˜å–å¾—ä¸­å¿ƒç‚¹åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cX = canvas.<span class="property">width</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cY = canvas.<span class="property">height</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// åœ†ç‚¹(äººç‰©)çš„åŠå¾„</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> r = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// å½“å‰è§’</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ang = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®©æ¯ä¸€å¸§éƒ½è°ƒç”¨drawå‡½æ•°æ›´æ–°ç”»é¢</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ¸…é™¤ç”»å¸ƒä¸Šæ‰€æœ‰åƒç´ </span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">400</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// ç”»åœ†</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">arc</span>(cX,cY,r,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fillText</span>(<span class="string">&quot;æˆ‘æ˜¯äººç‰©&quot;</span>,cX-<span class="number">10</span>,cY-<span class="number">12</span>,<span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(ang);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(cX+<span class="string">&quot;/&quot;</span>+cY+<span class="string">&quot;/åœ†åæ ‡&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// çº¿çš„åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> lx = cX + <span class="title class_">Math</span>.<span class="title function_">cos</span>(ang)*<span class="number">80</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ly = cY + <span class="title class_">Math</span>.<span class="title function_">sin</span>(ang)*<span class="number">80</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">cos</span>(ang)+<span class="string">&quot;/&quot;</span>+<span class="title class_">Math</span>.<span class="title function_">sin</span>(ang));</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;-----&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®¾ç½®å­è·¯å¾„(èµ·å§‹åæ ‡)</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">moveTo</span>(cX,cY);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">lineTo</span>(lx,ly);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ›´æ–°è§’åº¦</span></span></span><br><span class="line"><span class="language-javascript">ang += <span class="number">0.03</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é‡å¤ç»˜åˆ¶</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">requestAnimationFrame</span>(draw);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">draw</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p><video src="http://cdn.zsenhe.com/bandicam%202023-08-10%2020-14-26-858.mp4" width=400px; height=500px controls></video><br>okï¼Œç°åœ¨å®ƒä¼šåŠ¨äº†ï¼Œæ¥ä¸‹æ¥è¦è®©ä»–ç§»åŠ¨ã€‚ç”±äºâ€œæ­¦å™¨â€å’Œâ€œäººç‰©â€çš„ç»˜åˆ¶éƒ½æ˜¯æ ¹æ®åœ†å¿ƒåæ ‡æ¥çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ç›‘å¬wasdæ›´æ”¹åœ†å¿ƒçš„åæ ‡å°±å®Œäº‹äº†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&quot;keydown&quot;, handlerMove);</span><br><span class="line"></span><br><span class="line">       function handlerMove(event) &#123;</span><br><span class="line">           var key = event.key;</span><br><span class="line"></span><br><span class="line">           switch(key) &#123;</span><br><span class="line">               case &quot;w&quot;:</span><br><span class="line">                   cY -= 5;</span><br><span class="line">                   break;</span><br><span class="line">               case &quot;a&quot;:</span><br><span class="line">                   cX -= 5;</span><br><span class="line">                   break;</span><br><span class="line">               case &quot;s&quot;:</span><br><span class="line">                   cY += 5;</span><br><span class="line">                   break;</span><br><span class="line">               case &quot;d&quot;:</span><br><span class="line">                   cX += 5;</span><br><span class="line">                   break;</span><br><span class="line">               default:</span><br><span class="line">                   break;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹:<br><video src="http://cdn.zsenhe.com/bandicam%202023-08-10%2020-35-19-613.mp4" width=400px; height=500px controls></video></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¾ç½®å‡ ä¸ªæ•Œäºº,æ•Œäººå°±ç”¨ç»¿è‰²çš„çƒçƒè¡¨ç¤º</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>dddemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;gameMap&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> canvas  = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;gameMap&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é€šè¿‡ç”»å¸ƒå®½é«˜å–å¾—ä¸­å¿ƒç‚¹åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cX = canvas.<span class="property">width</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cY = canvas.<span class="property">height</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// åœ†ç‚¹(äººç‰©)çš„åŠå¾„</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> r = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// å½“å‰è§’</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ang = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mX = cX+<span class="number">128</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mY = cY+<span class="number">128</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mR = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, handlerMove);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">handlerMove</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> key = event.<span class="property">key</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">switch</span>(key) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;w&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cY -= <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;a&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cX -= <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;s&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cY += <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;d&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cX += <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®©æ¯ä¸€å¸§éƒ½è°ƒç”¨drawå‡½æ•°æ›´æ–°ç”»é¢</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ¸…é™¤ç”»å¸ƒä¸Šæ‰€æœ‰åƒç´ </span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">400</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// ç”»åœ†</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">arc</span>(cX,cY,r,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fillText</span>(<span class="string">&quot;æˆ‘æ˜¯äººç‰©&quot;</span>,cX-<span class="number">10</span>,cY-<span class="number">12</span>,<span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// çº¿çš„åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> lx = cX+<span class="title class_">Math</span>.<span class="title function_">cos</span>(ang)*<span class="number">80</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ly = cY+<span class="title class_">Math</span>.<span class="title function_">sin</span>(ang)*<span class="number">80</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åœ†åæ ‡:(&quot;</span>+cX+<span class="string">&quot;,&quot;</span>+cY+<span class="string">&quot;)&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§’:&quot;</span>+ang+<span class="string">&quot;cos:&quot;</span>+<span class="title class_">Math</span>.<span class="title function_">cos</span>(ang));</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§’:&quot;</span>+ang+<span class="string">&quot;sin:&quot;</span>+<span class="title class_">Math</span>.<span class="title function_">sin</span>(ang));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®¾ç½®å­è·¯å¾„(èµ·å§‹åæ ‡)</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">moveTo</span>(cX,cY);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">lineTo</span>(lx,ly);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ›´æ–°è§’åº¦</span></span></span><br><span class="line"><span class="language-javascript">ang += <span class="number">0.03</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">arc</span>(mX,mY,mR,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="property">fillStyle</span> = <span class="string">&quot;green&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fillText</span>(<span class="string">&quot;æˆ‘æ˜¯æ•Œäºº&quot;</span>,mX-<span class="number">10</span>,mY-<span class="number">12</span>,<span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é‡å¤ç»˜åˆ¶</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">requestAnimationFrame</span>(draw);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">draw</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åœ¨drawå‡½æ•°ä¸­ï¼Œè®¡ç®—çº¿ä¸æ•Œäººçš„è·ç¦»ï¼Œä¸¤ç‚¹é—´çš„è·ç¦»å…¬å¼</p><blockquote><p>var dis &#x3D; Math.sqrt(Math.pow((lx - mX), 2) + Math.pow((ly - mY), 2));</p></blockquote><p>å½“è¢«çº¿å‡»ä¸­æ—¶ï¼Œæ•Œäººé¢œè‰²å˜ä¸ºçº¢è‰²ï¼Œ300æ¯«ç§’åæ¢å¤ç»¿è‰²</p><p><img src="http://cdn.zsenhe.com/6e54e113245a433db945d2c36646c607" alt="image.png"><br>ç¨å¾®æ•´ç†ä¸€ä¸‹ä»£ç :</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>dddemo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;gameMap&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;400&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> canvas  = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;gameMap&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é€šè¿‡ç”»å¸ƒå®½é«˜å–å¾—ä¸­å¿ƒç‚¹åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cX = canvas.<span class="property">width</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> cY = canvas.<span class="property">height</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// åœ†ç‚¹(äººç‰©)çš„åŠå¾„</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> r = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// å½“å‰è§’</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ang = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mX = cX+<span class="number">128</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mY = cY+<span class="number">128</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mR = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mC = <span class="string">&quot;green&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> mH = <span class="number">100</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, handlerMove);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">handlerMove</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> key = event.<span class="property">key</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">switch</span>(key) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;w&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cY -= <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;a&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cX -= <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;s&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cY += <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">case</span> <span class="string">&quot;d&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                    cX += <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">default</span>:</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®©æ¯ä¸€å¸§éƒ½è°ƒç”¨drawå‡½æ•°æ›´æ–°ç”»é¢</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ¸…é™¤ç”»å¸ƒä¸Šæ‰€æœ‰åƒç´ </span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">400</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// ç”»åœ†</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">arc</span>(cX,cY,r,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fillText</span>(<span class="string">&quot;æˆ‘æ˜¯äººç‰©&quot;</span>,cX-<span class="number">10</span>,cY-<span class="number">12</span>,<span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// çº¿çš„åæ ‡</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> lx = cX+<span class="title class_">Math</span>.<span class="title function_">cos</span>(ang)*<span class="number">80</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> ly = cY+<span class="title class_">Math</span>.<span class="title function_">sin</span>(ang)*<span class="number">80</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åœ†åæ ‡:(&quot;</span>+cX+<span class="string">&quot;,&quot;</span>+cY+<span class="string">&quot;)&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§’:&quot;</span>+ang+<span class="string">&quot;cos:&quot;</span>+<span class="title class_">Math</span>.<span class="title function_">cos</span>(ang));</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§’:&quot;</span>+ang+<span class="string">&quot;sin:&quot;</span>+<span class="title class_">Math</span>.<span class="title function_">sin</span>(ang));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è®¾ç½®å­è·¯å¾„(èµ·å§‹åæ ‡)</span></span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">moveTo</span>(cX,cY);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">lineTo</span>(lx,ly);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">stroke</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// æ›´æ–°è§’åº¦</span></span></span><br><span class="line"><span class="language-javascript">ang += <span class="number">0.03</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span>(mH&gt;<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">beginPath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">arc</span>(mX,mY,mR,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">closePath</span>();</span></span><br><span class="line"><span class="language-javascript">context.<span class="property">fillStyle</span> = mC;</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fillText</span>(<span class="string">&quot;æ•Œäºº è¡€é‡:&quot;</span>+mH+<span class="string">&quot;/100&quot;</span>,mX-<span class="number">10</span>,mY-<span class="number">12</span>,<span class="number">800</span>);</span></span><br><span class="line"><span class="language-javascript">context.<span class="title function_">fill</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> dis = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>((lx - mX), <span class="number">2</span>) + <span class="title class_">Math</span>.<span class="title function_">pow</span>((ly - mY), <span class="number">2</span>));</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span>(dis&lt;mR)&#123;</span></span><br><span class="line"><span class="language-javascript">mC = <span class="string">&quot;red&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">mH = mH-<span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span>(mH&lt;=<span class="number">0</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">mH = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">mR = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">mC = <span class="string">&quot;green&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;,<span class="number">300</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// é‡å¤ç»˜åˆ¶</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">requestAnimationFrame</span>(draw);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">draw</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„æ•ˆæœå¦‚ä¸‹:<br><video src="http://cdn.zsenhe.com/dddddemo.mp4" width=400px; height=500px controls></video></p><p>æºœäº†ï¼Œç­‰æˆ‘ç”»å¥½è´´å›¾æ•´ä¸ªå°æ¸¸æˆå‡ºæ¥</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ipåœ°å€åˆ’åˆ†ä¸å­ç½‘æ©ç </title>
      <link href="/2023/08/09/ip%E5%9C%B0%E5%9D%80%E5%88%92%E5%88%86%E4%B8%8E%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/"/>
      <url>/2023/08/09/ip%E5%9C%B0%E5%9D%80%E5%88%92%E5%88%86%E4%B8%8E%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h2 id="ipåœ°å€çš„åˆ’åˆ†"><a href="#ipåœ°å€çš„åˆ’åˆ†" class="headerlink" title="ipåœ°å€çš„åˆ’åˆ†:"></a>ipåœ°å€çš„åˆ’åˆ†:</h2><p>ipçš„èŒƒå›´æ˜¯0.0.0.0~255.255.255.255,å®ƒçš„ç”±æ¥æ˜¯32ä½çš„äºŒè¿›åˆ¶ã€‚ä¸ºäº†æ–¹ä¾¿è®°å¿†å°†ä»–ä»¬æ‹†åˆ†ä¸ºå››ç»„(ä»¥.åˆ†å‰²)ï¼Œæ¯ç»„ç”±8ä½äºŒè¿›åˆ¶ç»„æˆ</p><blockquote><p>aç±» 1.0.0.1 ~ 126.255.255.254</p><p>0&lt;aç±»&lt;127 128ä¸ªå¤§ç½‘æ®µ</p><p>bç±» 128.0.0.1~192.255.255.254</p><p>128&lt;&#x3D;bç±»&lt;192 64ä¸ªå¤§ç½‘æ®µ</p><p>cç±» 192.0.0.1 ~ 223.255.255.254 32ä¸ªå¤§ç½‘æ®µ</p><p>dç±» ç»„æ’­,vrrpåè®®,keepaliveé«˜å¯ç”¨224~239</p><p>eç±» ç§‘ç ”240â€¦~255â€¦.</p></blockquote><p>(00000000)bitå…¨1ä¸‹ä¸º(255)dec(2^8&#x3D;255),äºæ˜¯æœ€å¤§å°±åªèƒ½å–åˆ°255.255.255.255</p><p>ç…§è¿™æ ·æ¨ç®—ï¼Œæ€»çš„ipåœ°å€é‡çº¦æœ‰43eä¸ªï¼Œè€Œå…¨çƒäººå£æœ‰80eä¹‹å¤šã€‚ä¸”ä¸æä¸å¤Ÿäººæ‰‹ä¸€ä¸ªipåœ°å€ï¼Œç°å¦‚ä»Šä¸€ä¸ªäººä¹Ÿä¸æ­¢ä¸€å°è®¾å¤‡éœ€è¦ä¸Šç½‘ï¼Œé‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢?</p><p>ä¸ºäº†ç¼“è§£ipv4åœ°å€è€—å°½ï¼Œè¯¸å¤šçš„æŠ€æœ¯åº”è¿è€Œç”Ÿ</p><h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><p>NATå…¨ç¨‹ä¸ºNetwork Address Translation,æ„ä¸ºç½‘ç»œåœ°å€è½¬æ¢ï¼Œå½“å†…ç½‘ç”¨æˆ·è®¿é—®å…¬æ–‡æ—¶ï¼Œå¦‚æœç½‘å…³è®¾å¤‡(è·¯ç”±å™¨)éƒ¨ç½²äº†NATï¼Œè®¾å¤‡ä¼šå°†æ¥æ”¶åˆ°çš„IPæ•°æ®æŠ¥æ–‡ä¸­çš„IPåœ°å€è½¬æ¢ä¸ºä¸€ä¸ªå”¯ä¸€çš„ipè½¬å‘ç»™å…¬ç½‘ã€‚å› æ­¤è®¾å¤‡å¯ä»¥ç”¨ä¸€ä¸ªå…¬ç½‘åœ°å€æ¥è½¬æ¢å¤šä¸ªå†…ç½‘ç”¨æˆ·å‘è¿‡æ¥çš„æ•°æ®åŒ…æŠ¥æ–‡ï¼Œä»è€Œè¾¾åˆ°åœ°å€å¤ç”¨çš„ç›®çš„</p><p>åœ¨å¦‚ä»Šï¼Œæœ€å°çš„å±€åŸŸç½‘éƒ½èƒ½æ”¯æŒä¸Šåƒä¸‡å°è®¾å¤‡è¿›è¡Œè®¿é—®ã€‚ç°å¦‚ä»Šå®¶åº­ä½¿ç”¨çš„å®½å¸¦ä¹Ÿæ˜¯ä¸€ä¸ªé“¾æ¥äº†æ— æ•°ä¸ªç”¨æˆ·çš„å¤§å‹å±€åŸŸç½‘</p><h2 id="å†…ç½‘ipç½‘æ®µ"><a href="#å†…ç½‘ipç½‘æ®µ" class="headerlink" title="å†…ç½‘ipç½‘æ®µ:"></a>å†…ç½‘ipç½‘æ®µ:</h2><p>a 10.0.0.0~10.255.255.255</p><p>b 176.16.0.0~172.31.255.255</p><p>c 192.168.0.0~192.168.255.255</p><p>é™¤äº†å†…ç½‘ç½‘æ®µä»¥å¤–ï¼Œéƒ½å±äºå…¬ç½‘ã€‚</p><p>ä¸€èˆ¬è·¯ç”±å™¨ä»…åˆ†é…cç±»ç½‘æ®µä½¿ç”¨ï¼Œæœ€å¤§65536ï¼Œè¿™å°±å¤Ÿç”¨äº†</p><h2 id="iPV6"><a href="#iPV6" class="headerlink" title="iPV6:"></a>iPV6:</h2><p>å°±ç®—ä½¿ç”¨äº†NATæŠ€æœ¯ï¼Œipv4åœ°å€ä¹Ÿæ€»æœ‰è€—å°½çš„ä¸€å¤©ã€‚å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œipv4çš„é•¿åº¦æ˜¯32ä½ï¼Œé‚£ä¹ˆç”¨æ›´å¤šçš„ä½æ•°ä¸å°±å¥½äº†ï¼Ÿè¿™å°±æ˜¯IPV6äº†</p><p>IPV6æœ‰ç€128ä½çš„é•¿åº¦ï¼Œå®ƒå·ç§°èƒ½ç»™äºˆå…¨çƒçš„æ¯ä¸€é¢—æ²™å­ä¸€ä¸ªipåœ°å€</p><blockquote><p>fe80::2c4:3412:e85c:a787%3</p></blockquote><p>åœ¨16è¿›åˆ¶ä¸‹ï¼Œå®ƒçš„è¡¨ç¤ºèŒƒå›´æ¯”ipv4å¤šçš„å¤šï¼Œä½†ä½œä¸º1996å¹´è¯ç”Ÿçš„æ ‡å‡†ï¼Œç›´è‡³ä»Šæ—¥ä¹Ÿæœªèƒ½å®Œå…¨æ™®åŠã€‚ä»ç½‘ä¸Šæ‘˜è¿‡æ¥çš„:</p><blockquote><p><strong>ç¬¬ä¸€ï¼šä¸å¥½ç®¡æ§</strong></p><p>v6æ—¶ä»£æ¯å°è®¾å¤‡éƒ½èƒ½æœ‰ç‹¬ç«‹ipï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å‘å…¬ç½‘æä¾›æœåŠ¡çš„é—¨æ§›å¤§å¹…åº¦é™ä½äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿æ³•çŠ¯ç½ªçš„æˆæœ¬è¢«é™ä½äº†ã€‚</p><p><strong>ç¬¬äºŒï¼šéš¾ä»¥æ§åˆ¶</strong></p><p>IPV6è¿˜æœ‰ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å…¨é¢ä½¿ç”¨IPSecï¼Œæ•°æ®ä¼ è¾“ç»è¿‡åŠ å¯†ï¼Œå®‰å…¨æ€§å¤§å¢ã€‚ä½†è¿™ç§æƒ…å†µä¸‹ä¼šè®©DNSæ±¡æŸ“è¿™ç±»æ‰‹æ®µå¤±æ•ˆï¼Œæµ·é‡çš„IPåˆå°ä¸è¿‡æ¥ã€‚å¦‚æœè¿™ä¸ªæŠ€æœ¯é—®é¢˜è§£å†³ï¼ŒIPv6çš„æ¨å¹¿ä¼šå¿«å¾ˆå¤šï¼Œè€Œä¸ä»…ä»…åªå±€é™äºæ•™è‚²ç½‘ç­‰æœ¬èº«å°±å®¹æ˜“æ§åˆ¶çš„ç½‘ç»œã€‚</p><p><strong>ç¬¬ä¸‰ï¼šå¤§éƒ¨åˆ†è·¯ç”±å™¨ä¾ç„¶ä¸æ”¯æŒipv6</strong></p><p>ç›®å‰æ·˜å®tplinkç­‰ä½ç«¯è·¯ç”±å™¨å‚å®¶åœ¨å”®çš„å¾ˆå¤šè·¯ç”±å™¨ä¾ç„¶ä¸æ”¯æŒv6ï¼Œæœ‰å¾ˆå¤šå®¶åº­ç”¨çš„æ˜¯è¥ä¸šå…é€çš„å…‰çŒ«å’Œè·¯ç”±å™¨ï¼Œä¹Ÿä¸æ”¯æŒv6ã€‚æ˜¯çš„ä½ æ²¡å¬é”™ï¼Œè¿è¥å•†çš„å®½å¸¦æ”¯æŒv6ä½†æ˜¯ä»–ç»™çš„å…‰çŒ«ä¸æ”¯æŒv6ã€‚å¼€å¯v6æ”¯æŒéœ€è¦å®½å¸¦ï¼Œå…‰çŒ«ï¼Œè·¯ç”±å™¨å’Œç»ˆç«¯è¿™å››è€…åŒæ—¶æ”¯æŒæ‰è¡Œï¼Œç¼ºä¸€ä¸å¯ã€‚è¿™ä¸€ç‚¹åœ¨ç›®å‰åº”è¯¥æ˜¯æœ€å¤§çš„é˜»åŠ›</p><p><strong>ç¬¬å››ï¼šæ€»å®½å¸¦å¾ˆä½</strong></p><p>ç›®å‰v6å¤„äºåˆšå‘å±•é˜¶æ®µï¼Œä¹‹å‰å¹¿ä¸œçš„v6åªèƒ½çœå†…è®¿é—®ï¼Œå‡ºå£å®½å¸¦ç®€ç›´è·Ÿæ²¡æœ‰ä¸€æ ·ï¼Œç°åœ¨å¥½å¾ˆå¤šäº†ã€‚</p></blockquote><p>ä¸è¿‡æˆ‘è§‰å¾—é è°±çš„è¯´æ³•è¿˜æ˜¯å½“æ—¶é™ˆæ—§çš„è®¾å¤‡èˆä¸å¾—ä¸¢ï¼Œå¤§å®¶éƒ½æ²¡ç€æ€¥ä¸Šipv6ï¼Œæš‚æ—¶ç”¨natç¼“ç¼“ï¼Œåé¢å†è¯´</p><p>æ‰¯äº†è¿™ä¹ˆå¤šæ¦‚å¿µï¼Œå¯¹äºå•çº¯çš„è½¯ä»¶å¼€å‘ä»ä¸šäººå‘˜æ¥è¯´ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Œå°±ç®—ä¸æ˜¯ä¸ºäº†åº”è¯•ï¼Œå…‰è®°ä½ipæ®µï¼Œä¹Ÿå¤§æœ‰ä½œç”¨çš„åœ°æ–¹ã€‚è¯•æƒ³æœ‰ä¸€å¤©æœåŠ¡è¹¦äº†ï¼Œä¸€çœ‹ç›‘æ§ï¼Œå¤§éƒ¨åˆ†æ”»å‡»éƒ½æ˜¯ä»å†…ç½‘ç½‘æ®µæ‰“å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å¾ˆå¿«æ¨æ–­å‡ºå†…éƒ¨æŸå°æœåŠ¡å™¨å¯èƒ½è¢«æ¸—é€å½“è‚‰é¸¡äº†ï¼ˆæˆ–è€…æœ‰å†…é¬¼ï¼Ÿhh)</p><h2 id="å­ç½‘æ©ç çš„ä½œç”¨"><a href="#å­ç½‘æ©ç çš„ä½œç”¨" class="headerlink" title="å­ç½‘æ©ç çš„ä½œç”¨:"></a>å­ç½‘æ©ç çš„ä½œç”¨:</h2><p>å­ç½‘æ©ç çš„ä½œç”¨æ˜¯å†³å®šä¸€ä¸ªç½‘æ®µçš„å¤§å°ï¼Œé¡»çŸ¥åªæœ‰åœ¨åŒä¸€ä¸ªç½‘æ®µå†…æ‰èƒ½äº’ç›¸è¿›è¡Œé€šè®¯</p><p><img src="http://cdn.zsenhe.com/5c44706aff644117bb9e0d2924ec9753" alt="image.png"></p><p>æœ‰çš„æ—¶å€™ä¹Ÿä¼šè¡¨ç¤ºæˆ 192.168.19.11&#x2F;24ï¼Œå®ƒè¡¨ç¤ºæˆäºŒè¿›åˆ¶</p><p>(11000000 10101000 00010011 00001011)bit</p><p>å®ƒå¯ä»¥è¡¨ç¤ºä¸º:</p><p>11111111 11111111 11111111 00000000</p><p>å…¶ä¸­å‰é¢çš„24ä¸ª1ä¸ºç½‘ç»œä½ï¼Œåé¢0éƒ¨åˆ†ä¸ºä¸»æœºä½ã€‚</p><blockquote><p>(11111111 11111111 11111111 00000000)bit &#x3D; 255.255.255.0 &#x3D; 24</p></blockquote><p>åªè¦ç½‘ç»œä½ç›¸åŒï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŒä¸€ä¸ªç½‘æ®µã€‚æ ¹æ®ipåœ°å€åŠ å­ç½‘æ©ç ï¼Œå³å¯ä»¥æ¨ç®—å‡ºè¯¥ç½‘æ®µçš„èŒƒå›´</p><p>å¦‚ä¸Šå›¾çš„ 192.168.1.108&#x2F;24ï¼Œè¯¥ç½‘æ®µçš„å¯ç”¨ipèŒƒå›´</p><blockquote><p>(192.168.1.0 ~ 192.168.1.255)</p><p>æ³¨æ„æ˜¯å¼€åŒºé—´ï¼Œå·¦å³ç«¯ç‚¹ä¸€èˆ¬ä¿ç•™ä½œä¸ºç½‘ç»œå·å’Œå¹¿æ’­åœ°å€</p><p>å®é™…å¯ç”¨çš„èŒƒå›´æ˜¯192.168.1.1 ~ 192.168.1.254</p><p>å‰è€…ç§°ä¸ºèµ·å§‹ipï¼Œåè€…ä¸ºç»“æŸip</p></blockquote><p>ä½¿ç”¨CPTæ¥åšåŒç½‘æ®µé€šè®¯å®éªŒ</p><p><img src="http://cdn.zsenhe.com/fc2a548f440541d9adadf5b8603e0593" alt="image.png"></p><p>pc0ä¸º:</p><p>192.168.100.126&#x2F;25</p><p>pc1ä¸º:</p><p>192.168.100.129&#x2F;25</p><p><img src="http://cdn.zsenhe.com/bd666affba8f4b1bac9bb6fd9a762180" alt="20230809182023image.png"><br>ä½¿ç”¨PC0pingPC1,ç»“æœæ˜¯<br><img src="http://cdn.zsenhe.com/b327dd7da25d4954b6b2436a06b9c771" alt="20230809182214image.png"><br>ä¸ºä»€ä¹ˆpingä¸é€šå‘¢ï¼Œçœ‹ç€æ˜¯ä¸€ä¸ªç½‘æ®µå•Šã€‚è®¡ç®—ä¸€ä¸‹ä¸¤ä¸ªipæ‰€å±çš„ç½‘æ®µ</p><blockquote><p>çœ‹ä¸€ä¸‹pc0çš„æ‰€åœ¨ç½‘æ®µ</p><p>11000000 10101000 01100100 01111110</p><p>å­ç½‘æ©ç : 1â€¦1 1â€¦1 1â€¦1 10000000</p><p>é‚£ä¹ˆpc0çš„ç½‘æ®µipä¸º (192.168.100.0,192.168.100.127)</p><p>è·Ÿpc1æ˜æ˜¾ä¸åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œè‚¯å®šæ˜¯pingä¸é€šäº†</p></blockquote><p>å°†ä¸¤ä¸ªè®¾å¤‡çš„å­ç½‘æ©ç éƒ½æ”¹ä¸º24ï¼Œå°±æ²¡é—®é¢˜äº†<br><img src="http://cdn.zsenhe.com/bc12df4f898a4779b2b3e5282063df3b" alt="20230809183155image.png"><br>ä¸åŒç½‘æ®µä¹‹é—´çš„é€šè®¯éœ€è¦å€ŸåŠ©è·¯ç”±å™¨è¿›è¡Œè½¬å‘</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>osiä¸ƒå±‚æ¨¡å‹ä¸æ•°æ®çš„å°è£…è§£å°è£…</title>
      <link href="/2023/08/08/osi%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B0%81%E8%A3%85%E8%A7%A3%E5%B0%81%E8%A3%85/"/>
      <url>/2023/08/08/osi%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B0%81%E8%A3%85%E8%A7%A3%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¾å¤‡æ˜¯æ€ä¹ˆä¸Šç½‘çš„ï¼Ÿ"><a href="#è®¾å¤‡æ˜¯æ€ä¹ˆä¸Šç½‘çš„ï¼Ÿ" class="headerlink" title="è®¾å¤‡æ˜¯æ€ä¹ˆä¸Šç½‘çš„ï¼Ÿ"></a>è®¾å¤‡æ˜¯æ€ä¹ˆä¸Šç½‘çš„ï¼Ÿ</h2><p>æ¯å°è®¾å¤‡ï¼ˆæ‰‹æœºï¼Œç”µè„‘ï¼‰å¸¦æœ‰ç½‘å¡è®¾å¤‡ï¼Œç½‘å¡é€šè¿‡å…‰çº¿è¿æ¥è‡³äº¤æ¢æœºï¼ˆäº¤æ¢æœºå¯èƒ½æœ‰å¤šä¸ªï¼‰ï¼Œäº¤æ¢æœºè¿æ¥è‡³è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨è¿æ¥è‡³å…‰çŒ«ï¼Œå…‰çŒ«é€šè¿‡å…‰çº¤è¿æ¥åˆ°è¿è¥å•†çš„è®¾å¤‡ç®±</p><hr><h2 id="OSIä¸ƒå±‚æ¨¡å‹"><a href="#OSIä¸ƒå±‚æ¨¡å‹" class="headerlink" title="OSIä¸ƒå±‚æ¨¡å‹:"></a>OSIä¸ƒå±‚æ¨¡å‹:</h2><p><img src="http://cdn.zsenhe.com/2c3e24d3ca384e618d231ca969505f6a" alt="20230808170318image.png"></p><p>åœ¨ç½‘ç»œé€šè®¯ä¸­ï¼Œæœ‰ç€æ“ä½œç³»ç»Ÿå…¼å®¹,å¤šä»‹è´¨,ä¼ è¾“ç›®æ ‡,å®‰å…¨,ä¿å¯†ç­‰é—®é¢˜ï¼Œè§£å†³çš„æ–¹æ¡ˆæ˜¯æ‰€æœ‰è®¾å¤‡éƒ½ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªç½‘ç»œæ ‡å‡†ï¼Œè¿™ä¸ªæ ‡å‡†å°±æ˜¯OSIä¸ƒå±‚æ¨¡å‹</p><p>å„ç§é€šè®¯åè®®éƒ½æ˜¯ç”±ä¸ƒå±‚æ¨¡å‹è®¾è®¡è€Œå‡ºï¼Œä¸åŒçš„ç‰©ç†è®¾å¤‡ä½¿ç”¨ä¸åŒçš„ä¿¡å·é€šè®¯ï¼Œä¾‹å¦‚ç½‘çº¿å‘å‡ºç”µä¿¡å·ï¼Œå…‰çº¤å‘å‡ºå…‰ä¿¡å·ï¼Œwifiå‘å‡ºç”µç£æ³¢ä¿¡å·ã€‚</p><p>ä»–ä»¬åªèƒ½å‘å‡ºç‰¹å®šçš„ä¿¡å·ï¼Œç½‘çº¿åˆæ€ä¹ˆä¼šçŸ¥é“å…‰çº¤åœ¨è¯´ä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ‰€è°“çš„åè®®äº†ï¼Œè§„å®šå¥½å…‰é—ªä¸‰ä¸‹å’Œç”µç£æ³¢æŒ‡å®šçš„é¢‘ç‡æ®µéƒ½ä»£è¡¨ä¸€ä¸ªæ„ä¹‰ï¼Œé‚£ä¹ˆå°±èƒ½æ²Ÿé€šäº†</p><p>ä¸ºäº†è§£å†³ä¸åŒçš„é—®é¢˜ï¼Œå…¬æœ‰çš„ç§æœ‰çš„ï¼Œæ•´ä¸ªç½‘ç»œè¯ç”Ÿäº†æ— æ•°çš„åè®®ï¼Œä½†æ— ä¸€ä¾‹å¤–éƒ½å¾—éµå¾ªosiä¸ƒå±‚æ¨¡å‹</p><p>ä¸ºäº†è®©ä¸åŒçš„åè®®å¤ç”¨ï¼Œæ•´ä¸ªæ¨¡å‹åˆ†ä¸ºä¸ƒå±‚ï¼Œå°±åƒåå­—ä¸€æ ·ï¼Œåˆ†åˆ«æ˜¯</p><blockquote><p>ç‰©ç†å±‚ ä¿¡å·è½¬æ¢çš„é—®é¢˜(æ•°å­—ä¿¡å·ï¼Œç”µä¿¡å·ï¼Œå…‰çº¤)</p><p>æ•°æ®é“¾æ¥å±‚ macåœ°å€,å”¯ä¸€,ç‰©ç†åœ°å€,ä»¥å¤ªç½‘</p><p>ç½‘ç»œå±‚ ipåœ°å€ï¼Œå…¬ç½‘ipï¼Œå®šä½</p><p>ä¼ è¾“å±‚ ç«¯å£,tcp&#x2F;ip</p><p>ä¼šè¯å±‚ ä¼šè¯</p><p>è¡¨ç¤ºå±‚ æ–‡ä»¶ç±»å‹</p><p>åº”ç”¨å±‚ http,ftp,smtp</p></blockquote><h3 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h3><p>ç‰©ç†å±‚è§£å†³äº†ä¿¡å·è½¬æ¢çš„é—®é¢˜ï¼Œä¹Ÿå°±è§£å†³äº†å¤šä»‹è´¨çš„é—®é¢˜ã€‚</p><p>ä¸è®ºæ¥è‡ªå…‰çº¤æˆ–æ˜¯wifiï¼Œç‰©ç†å±‚éƒ½å°†ä¹‹è½¬æ¢ä¸ºæ•°å­—ä¿¡å· (äºŒè¿›åˆ¶ä¿¡å·)ï¼Œå³01ä¸²ã€‚æ•°å­—ä¿¡å·è¾“å‡ºçš„æ—¶å€™åˆè½¬æ¢ä¸ºä¸åŒä»‹è´¨ä¿¡å·è¿›è¡Œé€šè®¯</p><h3 id="æ•°å­—é“¾è·¯å±‚"><a href="#æ•°å­—é“¾è·¯å±‚" class="headerlink" title="æ•°å­—é“¾è·¯å±‚"></a>æ•°å­—é“¾è·¯å±‚</h3><p>è€Œæ•°å­—é“¾è·¯å±‚çš„æœ€å¤§ä½œç”¨åˆ™æ˜¯é€‰æ‹©ä¼ è¾“ç›®æ ‡ï¼Œå…¶ä¸­çš„macåœ°å€åˆç§°ä¸ºç‰©ç†åœ°å€ï¼Œä¸ºæ¯å—ç½‘å¡å”¯ä¸€åˆ†é…çš„æ ‡è¯†<br>å¦‚è·¯ç”±å™¨ç®¡ç†é‡Œéšä¾¿æ‰¾ä¸€å°ä¸Šç½‘è®¾å¤‡<br><img src="http://cdn.zsenhe.com/5192936b1529417bb8ee2b74b106b5cc" alt="20230808155642image.png"></p><p>å¯ä»¥é€šè¿‡ä¸€äº›å·¥å…·æŸ¥åˆ°ç”Ÿäº§å•†ä½ç½®ä¿¡æ¯ç­‰</p><p><img src="http://cdn.zsenhe.com/ac54294f5bb749b28d5dadf561c0e3eb" alt="20230808155709image.png"></p><p>æ¯ä¸ªè®¾å¤‡ï¼ˆç½‘å¡ï¼‰ä½œä¸ºäº’è”ç½‘çš„ä¸€ä»½å­ï¼Œéƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼Œé‚£ä¹ˆä¼ è¾“ç›®æ ‡çš„é—®é¢˜ä¸å°±è§£å†³äº†å—ã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆç§°ä¸ºäº’è”ç½‘çš„ä¸€ä»½å­å‘¢ï¼Œç»å¸¸èƒ½å¬åˆ°æ‰€è°“â€œå…¥ç½‘è®¸å¯â€çš„è¯æ±‡ï¼Œä¾‹å¦‚æ¯å°æ‰‹æœºåœ¨ç”Ÿäº§å‰ï¼Œéƒ½éœ€è¦é€šè¿‡å…¥ç½‘è®¸å¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸ºäº†è·å–å”¯ä¸€çš„macåœ°å€ã€‚</p><h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><p>è™½ç„¶çŸ¥é“äº†ç‰©ç†åœ°å€ï¼Œä½†æˆ‘éœ€è¦æ›´è¯¦ç»†çš„å®šä½ã€‚å½“è¢«é—®åŠåœ°å€çš„æ—¶å€™ï¼Œæˆ‘æ€»ä¸èƒ½å›ç­”æˆ‘åœ¨ä¸­å›½å§ï¼Œè¿™æ ·ä¼šè¢«å½“æˆæä¸ºå¹¼ç¨šçš„è°ƒä¾ƒï¼Œç½‘ç»œå±‚ä¸­çš„ipåœ°å€å³è§£å†³äº†å®šä½çš„é—®é¢˜ã€‚ipåœ°å€åˆ†ä¸º å…¬ç½‘ip,å†…ç½‘ip,ä¹Ÿç§°å…¬ç½‘ä¸ç§ç½‘æ¯ä¸ªå…¬ç½‘ipä¹Ÿåƒç‰©ç†åœ°å€ä¸€æ ·æ˜¯å”¯ä¸€æ ‡è¯†ï¼Œç”±ianaè¿›è¡Œåˆ†é…ã€‚å†…ç½‘ipç±»ä¼¼é…’åº—çš„æˆ¿é—´åœ°å€ï¼Œåƒé…’åº—Aå’Œé…’åº—Bçš„602å±äºä¸åŒçš„æˆ¿é—´</p><p>ç»¼ä¸Šå¯¹äºä»¥ä¸Šä¸‰å±‚æœ€åŸºç¡€çš„ç†è§£å³æ˜¯:</p><p><strong>ç‰©ç†å±‚è§£å†³äº†å¤šä»‹è´¨çš„é—®é¢˜ï¼Œæ•°æ®é“¾è·¯å±‚è§£å†³äº†ç›®æ ‡é€‰æ‹©çš„é—®é¢˜ï¼Œç½‘ç»œå±‚è§£å†³äº†å®šä½é—®é¢˜</strong></p><p>ä½œä¸ºè½¯ä»¶å¼€å‘è€Œä¸æ˜¯ç½‘å®‰ç›¸å…³ä»ä¸šäººå‘˜ï¼Œæƒ³è¦ç²—ç•¥çš„äº†è§£osiä¸ƒå±‚æ¨¡å‹ï¼Œä¸‹ä¸€å±‚çš„ä¼ è¾“å±‚ä¹Ÿéœ€è¦å¾ˆå¤šç¬”å¢¨æ¥è®²å¤§ç™½è¯ã€‚</p><hr><h2 id="ä¸ƒå±‚æ¨¡å‹çš„ä¼ è¾“å±‚"><a href="#ä¸ƒå±‚æ¨¡å‹çš„ä¼ è¾“å±‚" class="headerlink" title="ä¸ƒå±‚æ¨¡å‹çš„ä¼ è¾“å±‚:"></a>ä¸ƒå±‚æ¨¡å‹çš„ä¼ è¾“å±‚:</h2><h3 id="ä¼ è¾“åè®®"><a href="#ä¼ è¾“åè®®" class="headerlink" title="ä¼ è¾“åè®®"></a>ä¼ è¾“åè®®</h3><p>ä¼ è¾“å±‚ä½¿ç”¨çš„ä¼ è¾“åè®®åˆ†ä¸ºtcpå’Œudp,tcpæ˜¯ä¸€ä¸ªå¯é çš„åè®®,ç½‘ç»œçš„ä¼ è¾“å¯èƒ½ä¼šç»è¿‡å¤šä¸ªè®¾å¤‡,å…¶ä¸­å¯èƒ½æŸä¸ªè®¾å¤‡ç¯èŠ‚å‡ºäº†é”™,é‚£ä¹ˆç½‘ç»œä¼ è¾“æ˜¯éœ€è¦å®¹é”™çš„,åˆæ€ä¹ˆç§°ä¹‹ä¸ºå¯é å‘¢ï¼Ÿ</p><p>å•ä¸ªæ•°æ®åŒ…å¯èƒ½é«˜è¾¾3,4g,è€Œæ•°æ®åŒ…æœ€å¤§ä»…æ¥å—1500byte,åœ¨tcpåè®®ä¸‹ä¼šé‡‡ç”¨åˆ†å—çš„æœºåˆ¶ã€‚å°†æ•°æ®åŒ…æ‹†æˆå¤šä¸ªï¼Œæ¯æ¬¡å‘é€éƒ½ä¼šå‘ç›®æ ‡è¿›è¡Œè¯¢é—®æ˜¯å¦æ”¶åˆ°ï¼Œå½“ç›®æ ‡è®¾å¤‡å‡ºç°æ¥æ”¶å¤±è´¥çš„æƒ…å†µä¼šè¿›è¡Œé‡ä¼ ï¼Œå› æ­¤tcpåè®®æ˜¯å¯é çš„ã€‚</p><p>udpç±»ä¼¼äºå‘çŸ­ä¿¡ï¼Œå®ƒæ˜¯ä¸å¯é çš„ï¼Œudpä¸éœ€è¦è¯¢é—®æ˜¯å¦ç¡®å®šï¼Œå› æ­¤é€Ÿåº¦æ¯”tcpåè®®å¿«ï¼Œä¸€èˆ¬é•¿è·ç¦»ä¼ è¾“é‡‡ç”¨udpåè®®</p><p>ç»¼ä¸Šudpæ³¨é‡æ•ˆç‡ä¸å®æ—¶æ€§ã€‚é€šè¯ï¼Œè§†é¢‘ç›´æ’­é€šå¸¸é‡‡ç”¨udpåè®®(è¯•æƒ³ä¸€ä¸‹ï¼Œç›´æ’­å¦‚æœé‡‡ç”¨tcpåè®®ï¼Œç›´æ’­è¿‡ç¨‹ä¸­å¡äº†ä¸€ä¸‹ï¼Œé‡è¿åˆé‡å¤äº†ä¸€ä¸‹ç”»é¢ï¼Œç›¸æ¯”è¿™ä¹ˆé¬¼ç•œçš„åœºé¢ï¼Œè¿˜æ˜¯å®¹è®¸å‡ åˆ†é’Ÿçš„ä¸¢å¤±æ¯”è¾ƒå’Œè°å§)</p><h3 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h3><p>ç«¯å£åˆ™æ˜¯æ›´ç»†è‡´çš„å®šä½ä½œç”¨,è¯•æƒ³ä¸€å°æœåŠ¡å™¨ä¸Šå¯èƒ½ä¼šæŒ‚è½½å¤šä¸ªæœåŠ¡,è€Œå®ƒåªæœ‰ä¸€ä¸ªå…¬ç½‘ip;å½“æ¥æ”¶è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨åˆæ˜¯æ€ä¹ˆçŸ¥é“å°†è¯·æ±‚åˆ†é…ç»™å“ªä¸ªè¿›ç¨‹å¤„ç†çš„å‘¢ï¼Œè¿™å°±æ˜¯ç«¯å£å·çš„ä½œç”¨äº†</p><p>å‘é€è¯·æ±‚æ—¶æºå¸¦ä¸€ä¸ªç«¯å£å·ï¼Œå½“æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå†…æ ¸å°†è¯·æ±‚åˆ†é…ç»™å¯¹åº”ç«¯å£å·çš„è¿›ç¨‹å¤„ç†</p><p>æ¯ä¸ªç¨‹åºåœ¨å¯åŠ¨æ—¶éƒ½ä¼šç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œå¦‚sshç™»å½•ä½¿ç”¨22ç«¯å£,mysqlæŒ‚è½½åœ¨3306ç«¯å£ä¸Šç­‰</p><hr><h2 id="ä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚"><a href="#ä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚" class="headerlink" title="ä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚"></a>ä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚</h2><p>è¿™ä¸‰å±‚çš„è”ç³»é¢‡å¤§ï¼Œå¾ˆå¤šåè®®éƒ½å°†è¿™ä¸‰å±‚è¿›è¡Œäº†åˆå¹¶ã€‚å¦‚åº”ç”¨æœ€å¹¿æ³›çš„tcp&#x2F;ipåè®®ï¼Œå®ƒå°†è¿™ä¸‰å±‚è§„åˆ’ä¸ºåº”ç”¨å±‚</p><h3 id="ä¼šè¯å±‚"><a href="#ä¼šè¯å±‚" class="headerlink" title="ä¼šè¯å±‚"></a>ä¼šè¯å±‚</h3><p>ä¼šè¯å±‚çš„åŸºæœ¬ä½œç”¨æ˜¯å»ºç«‹ä¼šè¯å…³ç³»å¹¶ä¿æŒç•…é€š</p><h3 id="è¡¨ç¤ºå±‚"><a href="#è¡¨ç¤ºå±‚" class="headerlink" title="è¡¨ç¤ºå±‚"></a>è¡¨ç¤ºå±‚</h3><p>è¡¨ç¤ºå±‚çš„ä½œç”¨ä¸ºæ ‡è¯†æ•°æ®åŒ…ç±»å‹ï¼Œè®©ç›®æ ‡è®¾å¤‡èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«ã€‚ä¾‹å¦‚æ–‡ä»¶å‘é€éœ€è¦æ ‡è¯†ç±»å‹ï¼Œå¦‚æœç›®æ ‡è®¾å¤‡ä¸çŸ¥é“å®ƒæ˜¯jpgæ ¼å¼çš„å›¾ç‰‡ï¼Œå®ƒå°±æ— æ³•æ­£ç¡®æ‰“å¼€</p><h3 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h3><p>è§åçŸ¥æ„ï¼Œå®ƒè´Ÿè´£å’Œå„ç§åº”ç”¨ç¨‹åºæ‰“äº¤é“ï¼Œæä¾›ä¸‹å±‚æ¥å£ä»¥ä½¿ç¨‹åºä½¿ç”¨ç½‘ç»œæœåŠ¡ã€‚ä¾‹å¦‚å‘é€ç”µå­é‚®ä»¶ï¼Œå®ƒé€šè¿‡åº”ç”¨å±‚æ²Ÿé€šä¼ è¾“å±‚å®Œæˆå·¥ä½œã€‚</p><hr><h2 id="ä½¿ç”¨wiresharkæŸ¥çœ‹æ•°æ®åŒ…"><a href="#ä½¿ç”¨wiresharkæŸ¥çœ‹æ•°æ®åŒ…" class="headerlink" title="ä½¿ç”¨wiresharkæŸ¥çœ‹æ•°æ®åŒ…"></a>ä½¿ç”¨wiresharkæŸ¥çœ‹æ•°æ®åŒ…</h2><p>è®¿é—®<a href="http://175.178.152.24/%E5%90%8E%E5%81%9C%E6%AD%A2%E6%8D%95%E8%8E%B7%EF%BC%8C%E5%9C%A8%E8%BF%87%E6%BB%A4%E6%9D%A1%E4%BB%B6%E4%B8%AD%E8%BE%93%E5%85%A5">http://175.178.152.24/ååœæ­¢æ•è·ï¼Œåœ¨è¿‡æ»¤æ¡ä»¶ä¸­è¾“å…¥</a><br>ip.addr &#x3D;&#x3D; 175.178.152.24<br><img src="http://cdn.zsenhe.com/a26682c88e284ceeb9f7e2d3573a75c5" alt="20230808172506image.png"></p><p>éšä¾¿ç‚¹å¼€ä¸€ä¸ªtcpç±»å‹çš„æ•°æ®åŒ…<br><img src="http://cdn.zsenhe.com/9ba687b2a42d474bb5ef35c27791cf8a" alt="20230808172702image.png"><br>å¯ä»¥åœ¨åº•éƒ¨çœ‹åˆ°æ•°æ®åŒ…çš„ä¿¡æ¯ï¼Œç¬¬ä¸€è¡Œæ˜¯ç‰©ç†å±‚çš„ä¿¡æ¯ï¼Œå¾€ä¸‹æ˜¯æ•°æ®é“¾è·¯å±‚ï¼Œä¼ è¾“å±‚ï¼Œåº”ç”¨å±‚ï¼ˆTCPåè®®ï¼‰<br>å¦‚å›¾ï¼Œå‰é¢é™¤äº†æµ‹è¯•æ•°æ®åŒ…ä»¥å¤–ï¼Œéƒ½ä¸æ˜¯å®Œæ•´çš„æ•°æ®åŒ…ï¼ŒHTTPç±»å‹çš„æ‰æ˜¯æœ¬æ¬¡è®¿é—®çš„å®Œæ•´æ•°æ®åŒ…<br><img src="http://cdn.zsenhe.com/a639f5fdeea446f68212787d764cb1c6" alt="20230808173032image.png"><br><img src="http://cdn.zsenhe.com/f3064437c1b04cbdb2bd7f90caf0979c" alt="20230808173424image.png"><br>ä¼ è¾“å±‚æè¿°äº†å½“å‰è®¿é—®æºçš„ç«¯å£å·50467,ç›®æ ‡ç«¯å£å·80ï¼Œlenè¡¨ç¤ºé•¿åº¦<br><img src="http://cdn.zsenhe.com/7113236e506b4ccf87eba35debfc9af6" alt="20230808173520image.png"><br>å†å¾€ä¸Šä¾¿æ˜¯ç½‘ç»œå±‚äº†ï¼Œæè¿°æº,ç›®æ ‡å…¬ç½‘ipåœ°å€<br><img src="http://cdn.zsenhe.com/515f3ae42b48418784364752b3a80d39" alt="20230808173659image.png"><br>ä¹‹åæ˜¯é“¾è·¯å±‚ï¼Œæè¿°äº†macåœ°å€<br><img src="http://cdn.zsenhe.com/11170a580b084ac5b6df52d0c8329115" alt="20230808174208image.png"><br>æœ€åº•éƒ¨å°±æ˜¯åº”ç”¨å±‚äº†ï¼Œå äº†æ•°æ®åŒ…çš„å¤§éƒ¨åˆ†<br>å¦‚æœæŠŠæ•°æ®åŒ…å½¢å®¹æˆä¸€ä»½å¿«é€’ï¼Œé‚£ä¹ˆåº”ç”¨å±‚çš„æ•°æ®å°±æ˜¯å¯„é€ç‰©å“äº†ï¼Œå‰é¢çš„æ•°æ®é“¾è·¯å±‚ç­‰æˆ–è®¸å¯ä»¥ç”¨å¿«é€’å•æ¥æ¯”å–»<br>è¿™äº”å±‚ä¹Ÿå°±æ˜¯TCPçš„äº”å±‚æ¨¡å‹</p><h2 id="æ•°æ®çš„å°è£…ä¸è§£å°è£…"><a href="#æ•°æ®çš„å°è£…ä¸è§£å°è£…" class="headerlink" title="æ•°æ®çš„å°è£…ä¸è§£å°è£…"></a>æ•°æ®çš„å°è£…ä¸è§£å°è£…</h2><p>ä»¥æœ¬æ¬¡httpè¯·æ±‚ä¸ºä¾‹,æ•°æ®çš„ä¼ è¾“ç”±åº”ç”¨å±‚å¾€ä¸‹é€å±‚è¿›è¡Œå°è£…,æ¯å±‚çš„ä½œç”¨å¦‚ä¸‹</p><blockquote><p>åº”ç”¨å±‚: æ•°æ®</p><p>ä¼ è¾“å±‚: tcpæŠ¥æ–‡+æ•°æ®</p><p>ç½‘ç»œå±‚: ipåŒ…+tcpæŠ¥æ–‡+æ•°æ®</p><p>æ•°æ®é“¾è·¯å±‚: æ•°æ®å¸§(macåœ°å€)+ipåŒ…+tcpæŠ¥æ–‡+æ•°æ®</p><p>ç‰©ç†å±‚: å°†å®Œæ•´çš„æ•°æ®åŒ…ç”±äºŒè¿›åˆ¶è½¬æ¢ä¸ºç”µä¿¡å·</p></blockquote><p>æ¥æ”¶å³æ˜¯å°†è¿™ä¸ªè¿‡ç¨‹å€’ç€åšä¸€é</p><blockquote><p>ç‰©ç†å±‚: å°†ç”µä¿¡å·è½¬æ¢ä¸ºäºŒè¿›åˆ¶</p><p>æ•°æ®é“¾è·¯å±‚: æ•°æ®å¸§(macåœ°å€)+ipåŒ…+tcpæŠ¥æ–‡+æ•°æ®</p><p>&#x2F; å†…æ ¸æŸ¥çœ‹æ•°æ®å¸§ï¼Œæ ¡éªŒmacåœ°å€æ˜¯å¦æ­£ç¡®å¯¹åº”æœ¬æœº</p><p>ç½‘ç»œå±‚: ipåŒ…+tcpæŠ¥æ–‡+æ•°æ®</p><p>&#x2F; ç½‘ç»œå±‚æ ¡éªŒipåœ°å€,æ­£ç¡®åˆ™ç»§ç»­è§£åŒ…</p><p>ä¼ è¾“å±‚: tcpæŠ¥æ–‡+æ•°æ®</p><p>&#x2F; åœ¨å†…å­˜ä¸­æ ¡éªŒæ•°æ®åŒ…ï¼Œéœ€è¦åˆå¹¶åˆ™åˆå¹¶</p><p>åº”ç”¨å±‚: æ•°æ®åŒ…</p><p>&#x2F; æœ€å åº”ç”¨å±‚å¾—åˆ°å®Œæ•´æ•°æ®åŒ…</p></blockquote><p>è¿™ä¸ªè¿‡ç¨‹å³æ˜¯æ•°æ®åŒ…çš„å°è£…å’Œè§£å°è£…</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>sql deleteè¯­å¥ä¸ºè¡¨èµ·åˆ«ç§°æŠ¥1064</title>
      <link href="/2023/06/29/delete%E8%AF%AD%E5%8F%A5%E4%B8%BA%E8%A1%A8%E8%B5%B7%E5%88%AB%E7%A7%B0%E6%8A%A51064/"/>
      <url>/2023/06/29/delete%E8%AF%AD%E5%8F%A5%E4%B8%BA%E8%A1%A8%E8%B5%B7%E5%88%AB%E7%A7%B0%E6%8A%A51064/</url>
      
        <content type="html"><![CDATA[<p>è€ƒè¯•çš„æ—¶å€™ä¸€é“åˆ é™¤è®°å½•çš„é¢˜ï¼Œå™¼é‡Œå•ªå•¦ä¸‰ä¸‹æ•²å®Œè‡ªä¿¡æäº¤ã€‚<br>æŠ¥äº†1064ï¼Œè°ƒè¯•äº†å¥½ä¸€é˜µä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œè¾¹ä¸Šçš„åŒå­¦æŠŠåˆ«ç§°å»äº†å°±æ­£å¸¸è¿è¡Œäº†<br>ä»Šæ™šç¿»åˆ«äººä»£ç çš„æ—¶å€™æ‰çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªï¼Œsqlçš„deleteè¯­å¥ä¸å¤ªä¸€æ ·ï¼Œä½¿ç”¨åˆ«ç§°æ—¶éœ€è¦åœ¨â€deleteâ€åæ ‡æ³¨<br>å¦‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">table</span> t</span><br></pre></td></tr></table></figure><p>éœ€è¦æ”¹æˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> t <span class="keyword">from</span> <span class="keyword">table</span> t</span><br></pre></td></tr></table></figure><p>ç¡äº†ç¡äº†ï¼Œæ˜å¤©å»çˆ¬å±±</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†å¸ƒå¼ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ï¼Œå¦‚ä½•ä¿è¯å¤šå°æœåŠ¡å™¨ä¹‹é—´åªæ‰§è¡Œä¸€æ¬¡</title>
      <link href="/2023/05/20/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E5%A4%9A%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E5%8F%AA%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1/"/>
      <url>/2023/05/20/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E5%A4%9A%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E5%8F%AA%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1/</url>
      
        <content type="html"><![CDATA[<p>åœºæ™¯æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡å—è®¾å®šå¦‚ä¸‹</p><blockquote><p>ç”¨æˆ·é€šè¿‡å„ç§æ¸ é“è·å–ç§¯åˆ†ï¼Œæ¯æœˆ10å·ï¼Œ25å·è¿›è¡Œä¸€æ¬¡ç»“ç®—;ç»“ç®—æ’åå­˜å…¥æ•°æ®åº“ï¼Œæ’è¡Œå‰åˆ—çš„å¯è·å¾—å¥–åŠ±</p></blockquote><p>å› ä¸ºæ˜¯åˆ†å¸ƒå¼æ¶æ„ï¼Œå¤šä¸ªæœåŠ¡å™¨åŒæ—¶æ“ä½œç§¯åˆ†è¡¨ï¼Œäºæ˜¯å°±æœ‰äº†è„æ•°æ®çš„æƒ…å†µã€‚å½“aæœåŠ¡å™¨å¯¹è¡¨è¿›è¡Œäº†ä¸€æ¬¡ç»“ç®—æ“ä½œï¼ŒbæœåŠ¡å™¨åˆå¯¹ç»“ç®—åçš„ç»“æœå†æ¬¡è¿›è¡Œç»“ç®—ã€‚äºæ˜¯æ•°æ®å°±è„æ‰äº†ï¼Œé‚£ä¹ˆæ€ä¹ˆè´¹æœ€å°çš„åŠ²é¿å…è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mysqlçš„äº‹åŠ¡åŠ ä¸€å¼ ä¸´æ—¶è¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> `SCHEDULED` </span><br><span class="line">(</span><br><span class="line">`end_time` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span>,</span><br><span class="line">`id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT NULL</span> AUTO_INCREMENT, </span><br><span class="line"><span class="keyword">PRIMARY KEY</span> (`end_time`) </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å¢åŠ SCHEDULEDè¡¨æ¥è®°å½•æ¯ä¸€æ¬¡æ’è¡Œæ¦œçš„ç»“ç®—æ“ä½œï¼Œå…¶ä¸­å­—æ®µEND_TIMEè®°å½•ç»“ç®—æ—¶çš„æ¯«ç§’æ•°;ç”±äºæ¯æ¬¡åªä¼šè·å–ä¸‹ä¸ª10å·æˆ–25å·ï¼Œè¯¥å­—æ®µæ˜¯ç™¾åˆ†ç™¾å”¯ä¸€ä¸”æ— åæ•ˆæ€§çš„</p><p>å®šæ—¶ä»»åŠ¡çš„é€»è¾‘å¦‚ä¸‹</p><p>è¡¨ç»“æ„:</p><figure class="highlight sql"><figcaption><span>java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package com.meteor.activetop;</span><br><span class="line"></span><br><span class="line">public enum SQL_MAPPER &#123;</span><br><span class="line"></span><br><span class="line">    CREATE_RACE_SCHEDULED_TABLE(</span><br><span class="line">            &quot;create table `&#123;table_name&#125;` (`end_time` bigint(20) NOT NULL,`id` int(11) NOT NULL AUTO_INCREMENT, PRIMARY KEY (`end_time`) );&quot;</span><br><span class="line">    ),</span><br><span class="line">    IS_EXECUTE_CLOSE_SCHEDULED(</span><br><span class="line">            &quot;select count(*) as cnt from &#123;table_name&#125; where `end_time` = ?;&quot;</span><br><span class="line">    ),</span><br><span class="line">    CREATE_RACE_DATA_TABLE(</span><br><span class="line">      &quot;create table `&#123;table_name&#125;` (`type` varchar(25) NOT NULL , `value` varchar(255) NOT NULL , PRIMARY KEY(`type`));&quot;</span><br><span class="line">    ),</span><br><span class="line">    INSERT_EXECUTE_CLOSE_LOG(</span><br><span class="line">            &quot;insert into `table_name`(`end_time`) values(&#123;end_time&#125;);&quot;</span><br><span class="line">    ),</span><br><span class="line">    CLOSE_SORT(</span><br><span class="line">      &quot;select player from &#123;table_name&#125; where last_active_time &lt;= ? order by `point` desc limit 30;&quot;</span><br><span class="line">    ),</span><br><span class="line">    INSERT_TOP_LOG(</span><br><span class="line">            &quot;insert into &#123;table_name&#125; values(?,?,?,?);&quot;</span><br><span class="line">    ),</span><br><span class="line">    RESET_POINT(</span><br><span class="line">            &quot;update `&#123;table_name&#125;` set `point` = ?;&quot;</span><br><span class="line">    ),</span><br><span class="line">    SAVE_ENDTIME(</span><br><span class="line">            &quot;insert into `&#123;table_name&#125;`(`type`,`value`) values(&#x27;end_time&#x27;,?) on duplicate key update `type`=&#x27;end_time&#x27;,`value`=?;&quot;</span><br><span class="line">    ),</span><br><span class="line">    SELECT_CURRENT_RACE_ENDTIME(</span><br><span class="line">            &quot;select `value` from `&#123;table_name&#125;` where `type` = &#x27;end_time&#x27;;&quot;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    private String query;</span><br><span class="line"></span><br><span class="line">    SQL_MAPPER(String query) &#123;</span><br><span class="line">        this.query <span class="operator">=</span> query;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getQuery() &#123;</span><br><span class="line">        <span class="keyword">return</span> query;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor.activetop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.meteor.activetop.storage.AbstractPlayerDataStorage;</span><br><span class="line"><span class="keyword">import</span> com.meteor.activetop.util.Utils;</span><br><span class="line"><span class="keyword">import</span> com.meteor.jellylib.mysql.FastMySQLStorage;</span><br><span class="line"><span class="keyword">import</span> com.meteor.jellylib.mysql.column.Column;</span><br><span class="line"><span class="keyword">import</span> com.meteor.jellylib.mysql.data.KeyValue;</span><br><span class="line"><span class="keyword">import</span> org.bukkit.Bukkit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.security.sasl.SaslServer;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.ZoneId;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RaceStore</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RACE_SCHEDULED_TABLE</span> <span class="operator">=</span> <span class="string">&quot;race_scheduled&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RACE_DATA_TABLE</span> <span class="operator">=</span> <span class="string">&quot;race_data&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ActiveTop plugin;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Connection connection;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">raceEndTime</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">RaceStore</span><span class="params">(ActiveTop plugin)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.plugin = plugin;</span><br><span class="line">        <span class="built_in">this</span>.initDatabase();</span><br><span class="line">        <span class="built_in">this</span>.initRace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initDatabase</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.connection = DriverManager.getConnection(plugin.getConfig().getString(<span class="string">&quot;RaceStore.url&quot;</span>));</span><br><span class="line">            <span class="type">String</span> <span class="variable">create_race_scheduled_tableQuery</span> <span class="operator">=</span> SQL_MAPPER.CREATE_RACE_SCHEDULED_TABLE.getQuery();</span><br><span class="line">            create_race_scheduled_tableQuery = create_race_scheduled_tableQuery.replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,RACE_SCHEDULED_TABLE);</span><br><span class="line">            executeSqlQuery(connection,create_race_scheduled_tableQuery);</span><br><span class="line">            <span class="type">String</span> <span class="variable">create_race_dataQuery</span> <span class="operator">=</span> SQL_MAPPER.CREATE_RACE_DATA_TABLE.getQuery();</span><br><span class="line">            create_race_dataQuery = create_race_dataQuery.replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,RACE_DATA_TABLE);</span><br><span class="line">            executeSqlQuery(connection,create_race_dataQuery);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        plugin.getLogger().info(<span class="string">&quot;åˆå§‹åŒ–ç«èµ›æ•°æ®åº“&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æœªç»“ç®—çš„æ¯”èµ›ç»“æŸæ—¥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="title function_">getLastEndTime</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">select_current_race_endtimeQuery</span> <span class="operator">=</span> SQL_MAPPER.SELECT_CURRENT_RACE_ENDTIME.getQuery();</span><br><span class="line">        select_current_race_endtimeQuery = select_current_race_endtimeQuery.replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,RACE_DATA_TABLE);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="built_in">this</span>.connection.prepareStatement(select_current_race_endtimeQuery);</span><br><span class="line">            <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> preparedStatement.getResultSet();</span><br><span class="line">            <span class="keyword">while</span> (resultSet.next()) Long.parseLong(resultSet.getString(<span class="string">&quot;value&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸´æ—¶è¡¨æ¥å­˜å‚¨äº‹åŠ¡æ˜¯å¦æ‰§è¡Œè¿‡;é¿å…é‡å¤ç»“ç®—</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isExecuteClose</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">is_execute_close_scheduledQuery</span> <span class="operator">=</span> SQL_MAPPER.IS_EXECUTE_CLOSE_SCHEDULED.getQuery();</span><br><span class="line">        is_execute_close_scheduledQuery = is_execute_close_scheduledQuery.replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,RACE_SCHEDULED_TABLE);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(is_execute_close_scheduledQuery);</span><br><span class="line">            preparedStatement.setLong(<span class="number">1</span>,getRaceEndTime());</span><br><span class="line">            <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> preparedStatement.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">cnt</span> <span class="operator">=</span> resultSet.getInt(<span class="string">&quot;cnt&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(cnt&gt;<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">executeSqlQuery</span><span class="params">(Connection connection,String sql,Object... args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=args.length;i++)</span><br><span class="line">                preparedStatement.setObject(i,args[i-<span class="number">1</span>]);</span><br><span class="line">            preparedStatement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResultSet <span class="title function_">executeQuery</span><span class="params">(Connection connection,String sql,Object... args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=args.length;i++)</span><br><span class="line">                preparedStatement.setObject(i,args[i-<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">return</span> preparedStatement.executeQuery();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»“ç®—ä¸€åœºæ¯”èµ›...</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">closeReward</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// ä¸€åœºæ¯”èµ›å·²ç»“æŸ..</span></span><br><span class="line">        <span class="keyword">if</span>(System.currentTimeMillis()&gt;getRaceEndTime())&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœäº‹åŠ¡æœªæ‰§è¡Œè¿‡ï¼Œå¼€å§‹ç»“ç®—</span></span><br><span class="line">            <span class="keyword">if</span>(!isExecuteClose())&#123;</span><br><span class="line">                AbstractPlayerDataStorage.getInstance().closeReward(SQL_MAPPER.INSERT_EXECUTE_CLOSE_LOG</span><br><span class="line">                        .getQuery().replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,RACE_SCHEDULED_TABLE)</span><br><span class="line">                        .replace(<span class="string">&quot;&#123;end_tme&#125;&quot;</span>,String.valueOf(getRaceEndTime())),getRaceEndTime());</span><br><span class="line">            &#125;</span><br><span class="line">            raceEndTime = Utils.countRaceEndTime(System.currentTimeMillis());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">delayTick</span> <span class="operator">=</span> ((raceEndTime - System.currentTimeMillis())/<span class="number">1000</span>)*<span class="number">20</span>;</span><br><span class="line">        plugin.getLogger().info(<span class="string">&quot;å°†åœ¨&quot;</span>+delayTick+<span class="string">&quot;ä¸ªtickåå¼€å§‹ç»“ç®—ç«èµ›&quot;</span>);</span><br><span class="line">        Bukkit.getScheduler().runTaskLaterAsynchronously(plugin,()-&gt;&#123;</span><br><span class="line">            closeReward();</span><br><span class="line">        &#125;,delayTick+(<span class="number">60</span>*<span class="number">20</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initRace</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä¸€åœºæ¯”èµ›æ­£åœ¨è¿›è¡Œä¸­,å°è¯•ç»“ç®—;å¦åˆ™è®¡ç®—æ–°çš„ç»“æŸæ—¥æœŸ</span></span><br><span class="line">        <span class="keyword">if</span>((<span class="built_in">this</span>.raceEndTime = getLastEndTime())!=-<span class="number">1</span>) closeReward();</span><br><span class="line">        <span class="keyword">else</span> raceEndTime = Utils.countRaceEndTime(System.currentTimeMillis());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜æœªç»“æŸçš„æ¯”èµ›</span></span><br><span class="line">        executeSqlQuery(connection,SQL_MAPPER.SAVE_ENDTIME.getQuery().replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,RACE_SCHEDULED_TABLE),</span><br><span class="line">                raceEndTime,raceEndTime);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getRaceEndTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> raceEndTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">closeReward</span><span class="params">(String lockSql,<span class="type">long</span> endTime)</span> &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        connection = fastMySQLStorage.getConnection();</span><br><span class="line">        connection.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">close_sortQuery</span> <span class="operator">=</span> SQL_MAPPER.CLOSE_SORT.getQuery();</span><br><span class="line">        close_sortQuery = close_sortQuery.replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,P_POINT_TABLE);</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> RaceStore.executeQuery(connection, close_sortQuery, endTime);</span><br><span class="line">        <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">insert_top_logQuery</span> <span class="operator">=</span> SQL_MAPPER.INSERT_TOP_LOG.getQuery();</span><br><span class="line">        insert_top_logQuery = insert_top_logQuery.replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,TOP_TABLE);</span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())&#123;</span><br><span class="line">            RaceStore.executeSqlQuery(connection,insert_top_logQuery,top++,endTime,resultSet.getInt(<span class="string">&quot;point&quot;</span>),resultSet.getString(<span class="string">&quot;player&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ ‡æ³¨å·²ç»“ç®—è¿‡å¥–åŠ±</span></span><br><span class="line">        RaceStore.executeSqlQuery(connection,lockSql);</span><br><span class="line">        <span class="comment">//é‡ç½®ç§¯åˆ†</span></span><br><span class="line">        RaceStore.executeSqlQuery(connection,SQL_MAPPER.RESET_POINT.getQuery().replace(<span class="string">&quot;&#123;table_name&#125;&quot;</span>,P_POINT_TABLE),<span class="number">0</span>);</span><br><span class="line">        connection.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection.rollback();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ƒè™‘a,bæœåŠ¡å™¨çš„ç»“ç®—æ“ä½œã€‚å¦‚æœaå­æœçš„ç»“ç®—äº‹åŠ¡å…ˆæˆåŠŸæäº¤ï¼Œæ­¤æ—¶SCHEDULEDè¡¨ä¸­ä¼šæ’å…¥ä¸€æ¡è®°å½•æ¥å µå¡Bå­æœçš„äº‹åŠ¡å¼€å§‹;å¦‚æœa,bå­æœåŒæ—¶è¿›è¡Œç»“ç®—æ“ä½œï¼Œäº‹åŠ¡çš„é»˜è®¤éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»ï¼Œä»–ä»¬è¯»åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå’Œä¸šåŠ¡é€»è¾‘å¹¶æ— å†²çª<br>è‡³æ­¤ï¼Œåªè¦å…¶ä¸­ä¸€å°æœåŠ¡å™¨æ²¡æŒ‚ï¼Œæ¯æœˆ10,25å·çš„â€œç»“ç®—â€æ“ä½œéƒ½èƒ½æ­£å¸¸è¿è¡Œ</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å†å¥½å¬çš„æ­Œä¹Ÿè€ä¸èµ·â€œè®¾ç½®ä¸ºæ¥ç”µé“ƒå£°â€</title>
      <link href="/2023/05/16/%E5%86%8D%E5%A5%BD%E5%90%AC%E7%9A%84%E6%AD%8C%E4%B9%9F%E8%80%90%E4%B8%8D%E8%B5%B7%E2%80%9C%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%9D%A5%E7%94%B5%E9%93%83%E5%A3%B0%E2%80%9D/"/>
      <url>/2023/05/16/%E5%86%8D%E5%A5%BD%E5%90%AC%E7%9A%84%E6%AD%8C%E4%B9%9F%E8%80%90%E4%B8%8D%E8%B5%B7%E2%80%9C%E8%AE%BE%E7%BD%AE%E4%B8%BA%E6%9D%A5%E7%94%B5%E9%93%83%E5%A3%B0%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<p>éš”ä¸‰å·®äº”çº¿ä¸Šå‡ºbugä¸€ä¸ªç”µè¯è¿‡æ¥ï¼Œå¤šæ¥å‡ æ¬¡å°±ä¸æƒ³å¬äº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è·ç¦»ç›¸ç­‰çš„æ¡å½¢ç 1054 - å¤§æ ¹å †</title>
      <link href="/2023/05/16/%E8%B7%9D%E7%A6%BB%E7%9B%B8%E7%AD%89%E7%9A%84%E6%9D%A1%E5%BD%A2%E7%A0%811054%20-%20%E5%A4%A7%E6%A0%B9%E5%A0%86/"/>
      <url>/2023/05/16/%E8%B7%9D%E7%A6%BB%E7%9B%B8%E7%AD%89%E7%9A%84%E6%9D%A1%E5%BD%A2%E7%A0%811054%20-%20%E5%A4%A7%E6%A0%B9%E5%A0%86/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/f5fba0457d9e42e192168129bda1fa08" alt="image.png"></p><p>åˆ†æå‡ºè´ªå¿ƒç­–ç•¥ä¸º: ä¼˜å…ˆé€‰æ‹©æ¬¡æ•°è¾ƒå¤šä¸”ä¸ç­‰äºä¸Šä¸€ä¸ªå¡«å……æ•°çš„æ•°<br>ä¹‹åè¦æƒ³çš„å°±æ˜¯æ€ä¹ˆç»´æŠ¤ä»–ä»¬çš„æ¬¡æ•°ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨å †çš„ç‰¹æ€§ã€‚å †çš„æ¯ä¸ªæ ¹èŠ‚ç‚¹éƒ½æ˜¯å’Œå…¶å·¦å³å„¿å­çš„æœ€å€¼ï¼Œ<br>å¯ä»¥å»ºä¸€ä¸ªå¤§æ ¹å †æ¥æ“ä½œï¼Œå¦‚å¯¹äºç¤ºä¾‹2ï¼Œä¼šé¢„å¤„ç†å‡ºæ¥è¿™æ ·çš„ç»“æ„<br><img src="http://cdn.zsenhe.com/1ef1675765f947e68b1871c515e17d70" alt="image.png"><br>ä½¿ç”¨mapç»´æŠ¤å„ä¸ªæ•°å­—çš„å‰©ä¸‹æ¬¡æ•°ï¼Œæ¯æ¬¡é€‰æ‹©answer[i]æ—¶ï¼Œè®°ä¸Šä¸€ä¸ªé€‰æ‹©çš„æ•°ä¸ºlastã€‚å¦‚æœlast!&#x3D;å †é¡¶å…ƒç´ ï¼Œé€‰æ‹©å †é¡¶å…ƒç´ ä½œä¸ºå½“å‰å¡«å……;å¦åˆ™é€‰æ‹©å †é¡¶å·¦å³å„¿å­å…¶ä¸­æ¬¡æ•°æœ€å¤šçš„æ•°å¡«å……</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">down</span><span class="params">(Map&lt;Integer,Integer&gt; cnt,<span class="type">int</span> size,<span class="type">int</span>[] h,<span class="type">int</span> u)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> u;</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">2</span>*u&lt;=size&amp;&amp;cnt.get(h[<span class="number">2</span>*u])&gt;cnt.get(h[u])) t = <span class="number">2</span>*u;</span><br><span class="line">    <span class="keyword">if</span>((<span class="number">2</span>*u+<span class="number">1</span>)&lt;=size&amp;&amp;cnt.get(h[<span class="number">2</span>*u+<span class="number">1</span>])&gt;cnt.get(h[u])) t = <span class="number">2</span>*u+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(t!=u) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> h[u];</span><br><span class="line">        h[u] = h[t];</span><br><span class="line">        h[t] = tmp;</span><br><span class="line">        down(cnt, size, h, t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] rearrangeBarcodes(<span class="type">int</span>[] barcodes) &#123;</span><br><span class="line">    Map&lt;Integer,Integer&gt; cnt = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> barcode : barcodes) &#123;</span><br><span class="line">        cnt.put(barcode,cnt.getOrDefault(barcode,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span>[] heap = <span class="keyword">new</span> <span class="title class_">int</span>[cnt.size()+<span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (Integer integer : cnt.keySet()) &#123;</span><br><span class="line">        heap[++size] = integer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size/<span class="number">2</span>; i!=<span class="number">0</span> ; i--)&#123;</span><br><span class="line">        down(cnt,size,heap,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">last</span> <span class="operator">=</span> -<span class="number">100</span>;</span><br><span class="line">    <span class="type">int</span>[] answer = <span class="keyword">new</span> <span class="title class_">int</span>[barcodes.length];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;barcodes.length;i++)&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">top</span> <span class="operator">=</span> heap[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(top==last) &#123;</span><br><span class="line">            <span class="keyword">if</span> (size &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (cnt.get(heap[<span class="number">2</span>]) &gt; cnt.get(heap[<span class="number">3</span>])) top = heap[idx = <span class="number">2</span>];</span><br><span class="line">                <span class="keyword">else</span> top = heap[idx = <span class="number">3</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> top = heap[idx = <span class="number">2</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        answer[i] = last = top;</span><br><span class="line">        cnt.put(top,cnt.get(top)-<span class="number">1</span>);</span><br><span class="line">        down(cnt,size,heap,idx);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆç‡æŒºä½çš„ï¼Œå¯èƒ½ç”¨PriorityQueueä¼šå¥½ä¸€ç‚¹å§ã€‚ä¸»è¦æ˜¯æƒ³ç»ƒä¹ ä¸€ä¸‹å»ºå †æ“ä½œ</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>345å‘¨èµ›</title>
      <link href="/2023/05/14/345%E5%91%A8%E8%B5%9B/"/>
      <url>/2023/05/14/345%E5%91%A8%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<ol><li>6430æ‰¾å‡ºè½¬åœˆæ¸¸æˆè¾“å®¶<br><img src="http://cdn.zsenhe.com/b6b3e51404444fe29270e76fd7d857d3" alt="image.png"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] circularGameLosers(<span class="type">int</span> n, <span class="type">int</span> k) &#123;</span><br><span class="line">    HashSet&lt;Integer&gt; acceptBallList = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="number">1</span>,idx = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(acceptBallList.contains(ac)) <span class="keyword">break</span>;</span><br><span class="line">        acceptBallList.add(ac);</span><br><span class="line">        ac += ((idx++)*k);</span><br><span class="line">        <span class="keyword">if</span>(ac&gt;n) ac = (ac%n)==<span class="number">0</span>?n:(ac%n);</span><br><span class="line">    &#125;</span><br><span class="line">    idx = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span>[] answer = <span class="keyword">new</span> <span class="title class_">int</span>[n-acceptBallList.size()&lt;<span class="number">0</span>?<span class="number">0</span>:n-acceptBallList.size()];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!acceptBallList.contains(i)) answer[idx++] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    Arrays.sort(answer);</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="http://cdn.zsenhe.com/8fb0cddaa3fb44caa16b8528ea1fed10" alt="image.png"><br>å•çº¯çš„æ¨¡æ‹Ÿï¼Œä¸è¿‡ä¸‹æ ‡åº”è¯¥ä»0å¼€å§‹çš„.ä»1å¼€å§‹è¦é¢å¤–åˆ¤æ–­%n&#x3D;&#x3D;0çš„æƒ…å†µï¼Œæçš„å¤šäº†å‡ æ¬¡æ²¡å¿…è¦çš„é”™è¯¯æäº¤</li></ol><p>2.ç›¸é‚»å€¼çš„æŒ‰ä½å¼‚æˆ–</p><p><img src="http://cdn.zsenhe.com/19b7b5fca8074034ab8cabca603b0798" alt="image.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">boolean</span> <span class="title function_">handler</span><span class="params">(<span class="type">int</span>[] o,<span class="type">int</span>[] d)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;d.length-<span class="number">1</span>;i++)&#123;</span><br><span class="line">            o[i+<span class="number">1</span>] = d[i]^o[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((o[<span class="number">0</span>]^o[o.length-<span class="number">1</span>])!=d[d.length-<span class="number">1</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">doesValidArrayExist</span><span class="params">(<span class="type">int</span>[] derived)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] o = <span class="keyword">new</span> <span class="title class_">int</span>[derived.length];</span><br><span class="line">        <span class="type">int</span> <span class="variable">endBit</span> <span class="operator">=</span> derived[derived.length-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(endBit == <span class="number">0</span>)&#123;</span><br><span class="line">            o[<span class="number">0</span>] = o[derived.length-<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> handler(o,derived);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            o[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            o[derived.length-<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> handler(o,derived);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/43d31410022248738e510f7d214d58d4" alt="image.png"><br>æ¨å…¬å¼é€’æ¨å³å¯ã€‚<br>é¢˜ç›®ä¸­è¯´äº†å¦‚æœi &#x3D; n-1,é‚£ä¹ˆderived[i] &#x3D; original[i] ^ original[0];<br>åŸºäºè¿™ä¸€æ¡ä»¶ï¼Œå¯ä»¥æ ¹æ®åŸæ•°ç»„ä¸­ç¬¬n-1ä¸ªå…ƒç´ ç¡®å®šoriginalæ•°ç»„çš„ original[0],original[n-1]<br>è®° endBit &#x3D; derived[n-1] ,å¦‚æœendBit &#x3D; 0ï¼Œé‚£ä¹ˆoriginal[0] &#x3D; original[n-1] &#x3D; 0 (0^0 &#x3D; 0,å½“ç„¶éƒ½ä¸º1ä¹Ÿå¯ä»¥)<br>å¦‚æœ endBit &#x3D; 1,é‚£ä¹ˆoriginal[0] &#x3D; 0,original[n-1] &#x3D; 1</p><p>äºæ˜¯åŸºäºè¿™ä¸¤ä¸ªåˆå§‹çŠ¶æ€ï¼Œå¯ä»¥é€’æ¨å‡ºoriginalå†…å‰©ä¸‹å…ƒç´ <br>iä»0å¼€å§‹ï¼Œå¯¹äºæ¯ä¸ªoriginal[i+1]<br>ç”±äº derived[i] &#x3D; original[i] ^ original[i+1]<br>äºæ˜¯ original[i+1] &#x3D; derived[i] ^ original[i]</p><p>æœ€ååˆ¤æ–­æ¨å‡ºçš„originalæ˜¯ä¸æ˜¯åˆæ³•çš„,è¿™ä¸€æ­¥åªéœ€è¦åˆ¤æ–­å¤´å°¾å³å¯ï¼ˆå› ä¸ºå…¶ä»–å…ƒç´ éƒ½æ˜¯åˆæ³•æ¨å‡ºæ¥çš„ï¼‰</p><p>ç¬¬ä¸‰é¢˜dfså‡ºæ¥æ ·ä¾‹äº†ï¼Œä¸çŸ¥é“æ€ä¹ˆå‰ªæè¶…æ—¶äº†ã€‚ä¸‹å‘¨å†æˆ˜</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³äº†ä¸‹ç½‘ç«™å¡é¡¿çš„é—®é¢˜</title>
      <link href="/2023/05/13/%E8%A7%A3%E5%86%B3%E4%BA%86%E4%B8%8B%E7%BD%91%E7%AB%99%E5%8D%A1%E9%A1%BF%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/05/13/%E8%A7%A3%E5%86%B3%E4%BA%86%E4%B8%8B%E7%BD%91%E7%AB%99%E5%8D%A1%E9%A1%BF%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>è¿™å‡ å¤©è®¿é—®çš„æ—¶å€™ä¸€ç›´åœ¨loadingï¼Œå¯¼è‡´â€œå›å¤â€ä¹‹ç±»çš„å­ç»„ä»¶åŠ è½½ä¸å‡ºæ¥<br>æ–­ç‚¹è°ƒè¯•äº†ä¸€ä¼šï¼ŒåŸå› æ˜¯è°ƒç”¨çš„ä¸€ä¸ªå¤–éƒ¨jsåº“æŒ‚äº†ï¼Œä¸€ç›´è¶…æ—¶<br><img src="http://cdn.zsenhe.com/b77da9c3774a47f69616bf4e1a2a02c0" alt="image.png"></p><p><img src="http://cdn.zsenhe.com/b3da48af45ce43b4b7723c0b13cdc69c" alt="image.png"><br>ä¹Ÿä¸æ˜¯ä»€ä¹ˆé‡è¦çš„ä¸œè¥¿ï¼Œå•ç‹¬æ‹å‡ºæ¥åˆ äº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ç¨»èŠ±é¦™é‡Œè¯´ä¸°å¹´ï¼Œå¬å–è›™å£°ä¸€ç‰‡</title>
      <link href="/2023/05/05/%E7%A8%BB%E8%8A%B1%E9%A6%99%E9%87%8C%E8%AF%B4%E4%B8%B0%E5%B9%B4%EF%BC%8C%E5%90%AC%E5%8F%96%E8%9B%99%E5%A3%B0%E4%B8%80%E7%89%87/"/>
      <url>/2023/05/05/%E7%A8%BB%E8%8A%B1%E9%A6%99%E9%87%8C%E8%AF%B4%E4%B8%B0%E5%B9%B4%EF%BC%8C%E5%90%AC%E5%8F%96%E8%9B%99%E5%A3%B0%E4%B8%80%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/fd044d34da794e9fb8ecaeb72f37cf12" alt="image.png"><br>çº¯æ¨¡æ‹Ÿï¼Œå®šä¹‰totalè¡¨ç¤ºæ­£åœ¨å‘å‡ºå£°éŸ³çš„é’è›™ï¼Œcnt[]å°†â€™croakâ€™æ˜ å°„è‡³0~4çš„ä¸‹æ ‡ä½œä¸ºå­—ç¬¦è®¡æ•°å™¨ã€‚éå†croakOfFrogs,é‡åˆ°cæ—¶ä»£è¡¨ä¸€åªé’è›™å‘å‡ºäº†å«å£°ï¼Œtotal++ï¼Œcnt[mapper]++ã€‚å¦åˆ™å¨ƒå«ä¸Šä¸€ä¸ªå­—ç¬¦æ˜¯å¦å·²ç»åœ¨cntä¸­å‡ºç°è¿‡ï¼Œå¦‚ä¸å­˜åœ¨è¯´æ˜å­—ç¬¦ä¸²ä¸æ˜¯ä¸€ä¸ªåˆæ³•ä¸²ï¼Œè¿”å›ç­”æ¡ˆ-1;å½“éå†åˆ°çš„å­—ç¬¦ä¸ºkæ—¶ï¼Œä¸€åªé’è›™å·²ç»å®Œæˆäº†ä¸€æ¬¡è›™å«ï¼Œtotalâ€“;åœ¨éå†åˆ°cä¸­å¯¹æ¯”åˆ°æœ€å¤§ç­”æ¡ˆä½œä¸ºanswerè¿”å›å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minNumberOfFrogs</span><span class="params">(String croakOfFrogs)</span> &#123;</span><br><span class="line">        Map&lt;Character,Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&#x27;c&#x27;</span>,<span class="number">0</span>);</span><br><span class="line">        map.put(<span class="string">&#x27;r&#x27;</span>,<span class="number">1</span>);</span><br><span class="line">        map.put(<span class="string">&#x27;o&#x27;</span>,<span class="number">2</span>);</span><br><span class="line">        map.put(<span class="string">&#x27;a&#x27;</span>,<span class="number">3</span>);</span><br><span class="line">        map.put(<span class="string">&#x27;k&#x27;</span>,<span class="number">4</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">answer</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span>[] cnt = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; croakOfFrogs.length(); i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mapper</span> <span class="operator">=</span> map.get(croakOfFrogs.charAt(i));</span><br><span class="line">            <span class="keyword">if</span>(mapper==<span class="number">0</span>)&#123;</span><br><span class="line">                answer = Math.max(answer,++total);</span><br><span class="line">                cnt[mapper] ++;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(cnt[mapper-<span class="number">1</span>]==<span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">                cnt[mapper-<span class="number">1</span>] --;</span><br><span class="line">                <span class="keyword">if</span>(mapper==<span class="number">4</span>)&#123;</span><br><span class="line">                    total--;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    cnt[mapper]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(total&gt;<span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åº”è¯¥å¯ä»¥ç”¨è´ªå¿ƒè§£å†³ï¼Œç­‰ä¸‹åˆä¸Šè¯¾è¯•è¯•</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>leetcode2106.æ‘˜æ°´æœ</title>
      <link href="/2023/05/04/leetcode2106.%E6%91%98%E6%B0%B4%E6%9E%9C/"/>
      <url>/2023/05/04/leetcode2106.%E6%91%98%E6%B0%B4%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/8b6e29eb71a140b78947f6e02eb6cd93" alt="image.png"></p><p>ä¸€å¼€å§‹æƒ³çš„æ˜¯äºŒåˆ†å»åšï¼Œæ¨äº†ä¸€äº›å‘ç°æ˜ å°„åˆ°åæ ‡è½´å·¦å³ç§»åŠ¨ä¸Šå¤ªéº»çƒ¦äº†ã€‚å°±è½¬è€Œç”¨åŒæŒ‡é’ˆäº†ï¼Œè¢«è¾¹ç•Œå¡äº†ä¸€ä¸Šåˆã€‚æ•´ç†ä¸‹æ€è·¯<br>é¦–å…ˆéœ€è¦æ˜ç¡®çš„å°±æ˜¯å¾€ä¸€ä¸ªæ–¹å‘ç§»åŠ¨åï¼Œæœ€å¤šå›å¤´ä¸€æ¬¡ï¼Œå¦‚æœå›å¤´åå†æ¬¡è½¬å‘åªä¼šæµªè´¹ç­–ç•¥ï¼ˆæ—¢ç„¶è¦å†æ¬¡å›å¤´ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ä¸€æ¬¡æ€§å¾€ä¸€æ¡è·¯èµ°å‘¢ï¼‰<br>åªè¦æ˜ç™½è¿™ä¸€ç‚¹ï¼Œè¿™é¢˜å¤§æ¦‚å°±èƒ½ä»hardé™åˆ°ä¸­ç­‰äº†<br>å¦‚å›¾ï¼Œä»¥æ ·ä¾‹2ä¸ºä¾‹<br><img src="http://cdn.zsenhe.com/bf156d24004b41b493ac03fa89ac8a04" alt="image.png"><br>å½“iæŒ‡é’ˆé€’å¢çš„æ—¶å€™ï¼Œjä¹Ÿä¼šéšä¹‹å¾€å³æ‹‰ï¼Œå› ä¸º2(i-startPos)+(startPos-j)å¿…é¡»&lt;&#x3D;kï¼Œæ˜¾ç„¶å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£æ¥æ“ä½œ<br>åˆ†åˆ«æšä¸¾ä»¥startPosä¸Šä¸‹ç•ŒåŒºåˆ†çš„å·¦å³ä¸¤ä¸ªåŒºé—´å³éå†æ‰€æœ‰çš„æ–¹æ¡ˆï¼Œåœ¨å…¶ä¸­é€‰æ‹©æœ€å¤§çš„å³å¯ã€‚ä½†è¦æ³¨æ„ä¸€äº›è¾¹ç•Œæƒ…å†µ<br>å¦‚åœ¨æšä¸¾å³çª—å£iæŒ‡é’ˆæ—¶ï¼Œjæœ‰å¯èƒ½è¶Šè¿‡startPos<br><img src="http://cdn.zsenhe.com/8f99b5e6461e4d6d9990a30c1dd7d041" alt="image.png"><br>å½“å‘ç”Ÿè¿™ç§æƒ…å†µçš„æ—¶å€™ï¼Œ(startPos-j)å¯ä»¥è¢«ä¸¢å¼ƒï¼Œä½†(i-startPos)å¯èƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œéœ€è¦ç‰¹åˆ¤ä¸€ä¸‹ã€‚å¤„ç†å·¦çª—å£çš„æ—¶å€™åŒç†</p><p>æ¯æ¬¡é€‰å–ä¸€å¯¹i,jåï¼Œåœ¨é¢„å¤„ç†å¥½çš„å‰ç¼€å’Œä¸­åˆ’åˆ†åŒºåŸŸæ¥å¾—åˆ°é‡‡æ‘˜çš„æ°´æœæ•°ï¼ˆæ¨äº†å¥½ä¹…ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">lowerBound</span><span class="params">(List&lt;Integer&gt; pos,<span class="type">int</span> x)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">l</span> <span class="operator">=</span> <span class="number">0</span>,r=pos.size()-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(pos.get(mid)&gt;=x) r=mid;</span><br><span class="line">            <span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxTotalFruits</span><span class="params">(<span class="type">int</span>[][] fruits, <span class="type">int</span> startPos, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; pos = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span>[] sum = <span class="keyword">new</span> <span class="title class_">int</span>[fruits.length];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;fruits.length;i++)&#123;</span><br><span class="line">            pos.add(fruits[i][<span class="number">0</span>]);</span><br><span class="line">            sum[i] = (i==<span class="number">0</span>?<span class="number">0</span>:sum[i-<span class="number">1</span>])+fruits[i][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> pos.size();</span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lowerBound(pos,startPos);</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">answer</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=mid;i&lt;length;i++)&#123;</span><br><span class="line">            <span class="keyword">while</span>(pos.get(j)&lt;=startPos&amp;&amp;<span class="number">2</span>*(pos.get(i)-startPos)+(startPos-pos.get(j))&gt;k) j++;</span><br><span class="line">            <span class="keyword">if</span>(pos.get(j)&gt;startPos)&#123;</span><br><span class="line">                <span class="keyword">if</span>(pos.get(i)-startPos&lt;=k)</span><br><span class="line">                    answer = Math.max(answer,sum[i]-(mid==<span class="number">0</span>?<span class="number">0</span>:sum[mid-<span class="number">1</span>]));</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(Math.max(<span class="number">0</span>,<span class="number">2</span>*(pos.get(i)-startPos))+(startPos-pos.get(j))&lt;=k) &#123;</span><br><span class="line">                answer = Math.max(answer,sum[i]-(j==<span class="number">0</span>?<span class="number">0</span>:sum[j-<span class="number">1</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mid = lowerBound(pos,startPos);</span><br><span class="line">        <span class="keyword">if</span>(pos.get(mid)&gt;startPos) mid--;</span><br><span class="line">        j = length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=mid;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">while</span>(pos.get(j)&gt;=startPos&amp;&amp;<span class="number">2</span>*(startPos-pos.get(i))+(pos.get(j)-startPos)&gt;k) j--;</span><br><span class="line">            <span class="keyword">if</span>(pos.get(j)&lt;startPos)&#123;</span><br><span class="line">                <span class="keyword">if</span>(startPos-pos.get(i)&lt;=k) &#123;</span><br><span class="line">                    answer = Math.max(answer,sum[mid]-(i==<span class="number">0</span>?<span class="number">0</span>:sum[i-<span class="number">1</span>]));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="number">2</span>*(startPos-pos.get(i))+(pos.get(j)-startPos)&lt;=k)&#123;</span><br><span class="line">                answer = Math.max(answer,sum[j]-(i==<span class="number">0</span>?<span class="number">0</span>:sum[i-<span class="number">1</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/881f6a2e49a446a286f157ab014e0188" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>felè®¡ç®—å¼•æ“çš„ä½¿ç”¨</title>
      <link href="/2023/04/24/fel%E8%AE%A1%E7%AE%97%E5%BC%95%E6%93%8E%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/04/24/fel%E8%AE%A1%E7%AE%97%E5%BC%95%E6%93%8E%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æ¥åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œæ¯ä¸ªé…ç½®å¥½çš„å…¬å¼ä¸­æœ‰è¯¸å¤šå› å­</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»éªŒè·å–å…¬å¼</span></span><br><span class="line"><span class="comment"># exp æœ¬æ¬¡æ‹¾å–å¾—ç»éªŒ</span></span><br><span class="line"><span class="attr">reg:</span> <span class="string">&#x27;exp*0.25*5&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šè¿°é…ç½®ï¼Œéœ€è¦æŠŠexpæå‡ºæ¥æ›¿æ¢æˆå€¼å†è¿›è¡Œè®¡ç®—ã€‚è®°å½•ä¸€ä¸‹felçš„ç®€å•<br>ä½¿ç”¨,Felæ˜¯è½»é‡çº§çš„é«˜æ•ˆçš„è¡¨è¾¾å¼è®¡ç®—å¼•æ“,åœ¨å¼€æºçš„å¼•æ“ä¸­æ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œä¸”æ— ä»»ä½•é¢å¤–å­¦ä¹ æˆæœ¬</p><p>å¼•å…¥åº“</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eweb4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">handler</span><span class="params">(<span class="type">int</span> exp)</span>&#123;</span><br><span class="line"><span class="comment">// è¡¨è¾¾å¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">petExpReg</span> <span class="operator">=</span> BasicConfig.petExpReg;</span><br><span class="line">       <span class="type">FelContext</span> <span class="variable">ctx</span> <span class="operator">=</span> fel.getContext();</span><br><span class="line"><span class="comment">// è®¾ç½®å˜é‡expå€¼</span></span><br><span class="line">       ctx.set(<span class="string">&quot;exp&quot;</span>,exp);</span><br><span class="line"><span class="comment">// ä¼ å…¥è¡¨è¾¾å¼ï¼Œè®¡ç®—ç»“æœ</span></span><br><span class="line">       <span class="keyword">return</span> (<span class="type">int</span>) fel.eval(petExpReg);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>felå¼•æ“ä¹Ÿæä¾›è‡ªå®šä¹‰å‡½æ•°ï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒç­‰æ“ä½œï¼Œä¸è¿‡æš‚æ—¶ç”¨ä¸ä¸Šï¼Œç­‰ä»¥åå†ç ”ç©¶äº†<br><a href="https://code.google.com/p/fast-el/">https://code.google.com/p/fast-el/</a> felå®˜ç½‘</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQLè¯­å¥ä¸­ ` çš„ä½œç”¨</title>
      <link href="/2023/04/20/SQL%E8%AF%AD%E5%8F%A5%E4%B8%AD%20%60%20%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
      <url>/2023/04/20/SQL%E8%AF%AD%E5%8F%A5%E4%B8%AD%20%60%20%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>å†™æ’ä»¶çš„æ—¶å€™é‡åˆ°äº†sqlå¼‚å¸¸ï¼Œprintå‡ºæ¥sqlè¯­å¥ç²˜è´´åˆ°navicatåå‘ç°æœ‰ä¸ªå­—æ®µè“äº†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(code) <span class="keyword">as</span> total <span class="keyword">from</span> INVITE_PLAYER </span><br><span class="line"><span class="keyword">where</span> code <span class="operator">=</span> <span class="string">&#x27;be820&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ç»Ÿè®¡é‚€è¯·æ–°ç”¨æˆ·æ•°é‡çš„ä¸šåŠ¡ï¼Œä¸€å¼€å§‹ä»¥ä¸ºåªæ˜¯ä½¿ç”¨äº†codeè¿™ä¸ªå…³é”®è¯ï¼Œä¿®æ”¹æˆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="string">&#x27;code&#x27;</span>) <span class="keyword">as</span> total <span class="keyword">from</span> INVITE_PLAYER </span><br><span class="line"><span class="keyword">where</span> <span class="string">&#x27;code&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;be820&#x27;</span>;</span><br></pre></td></tr></table></figure><p>åï¼Œå€’æ˜¯ä¸æŠ¥é”™äº†ï¼Œä½†æŸ¥å‡ºæ¥æ˜¯ç©ºçš„ï¼Œè¡¨é‡Œå®é™…ä¸Šæ˜¯æœ‰äºŒåå¤šæ¡åŒ¹é…çš„ã€‚å·¦çœ‹å³çœ‹éƒ½æ²¡é—®é¢˜ï¼Œâ€¦æŠ˜è…¾äº†å°åŠä¸ªé’Ÿï¼Œçªå‘å¥‡æƒ³æ”¹æˆäº†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(`code`) <span class="keyword">as</span> total <span class="keyword">from</span> INVITE_PLAYER </span><br><span class="line"><span class="keyword">where</span> `code` <span class="operator">=</span> <span class="string">&#x27;be820&#x27;</span>;</span><br></pre></td></tr></table></figure><p>æœç„¶æ²¡é—®é¢˜äº†ï¼ŒæŸ¥äº†ä¸€ä¸‹æ–‡æ¡£ï¼ŒåŸæ¥&#96;&#96;æ˜¯ç”¨äºæ ‡æ³¨è¡¨ï¼Œè¡¨å­—æ®µï¼Œæ•°æ®åº“çš„ï¼Œä¸€ç›´ä»¥ä¸ºæ˜¯ç­‰ä»·äºå¼•å·<br>åƒäº†åŸºç¡€ä¸ç‰¢å›ºçš„äº</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SQLå¢åˆ æŸ¥æ”¹</title>
      <link href="/2023/03/07/SQL%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9/"/>
      <url>/2023/03/07/SQL%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9/</url>
      
        <content type="html"><![CDATA[<h3 id="1-åœ¨å•ä¸€è¡¨æ ¼æ£€ç´¢æ•°æ®"><a href="#1-åœ¨å•ä¸€è¡¨æ ¼æ£€ç´¢æ•°æ®" class="headerlink" title="1. åœ¨å•ä¸€è¡¨æ ¼æ£€ç´¢æ•°æ®"></a>1. åœ¨å•ä¸€è¡¨æ ¼æ£€ç´¢æ•°æ®</h3><h4 id="SELECT-è¯­å¥"><a href="#SELECT-è¯­å¥" class="headerlink" title="SELECT è¯­å¥"></a>SELECT è¯­å¥</h4><p>SELECTç”¨äºä»æ•°æ®åº“ä¸­é€‰å–æ•°æ®ï¼Œè¿”å›çš„è¡¨ç§°ä¸ºç»“æœé›†</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- SELECT è¯­æ³•</span></span><br><span class="line"><span class="keyword">SELECT</span> column1,column2... </span><br><span class="line"><span class="keyword">FROM</span> TABLE_NAME;</span><br></pre></td></tr></table></figure><p>column ä¸ºé€‰å–çš„åˆ—å­—æ®µåï¼ŒTABLE_NAMEä¸ºæŸ¥è¯¢çš„è¡¨åç§°</p><h5 id="é€‰æ‹©å­å¥SELECT-Clause"><a href="#é€‰æ‹©å­å¥SELECT-Clause" class="headerlink" title="é€‰æ‹©å­å¥SELECT Clause"></a>é€‰æ‹©å­å¥SELECT Clause</h5><p>å¯åœ¨é€‰æ‹©å­å¥ä¸­åµŒå¥—æ•°å­¦è¡¨è¾¾å¼,ç‰¹å®šå€¼,æ–‡æœ¬;</p><img src="http://cdn.zsenhe.com/dfdedb800c8d4d088deda6dc56525a79" width="600px" height="200px"><p>å¦‚å¯¹äºè¡¨customer,æ‰§è¡Œsqlè¯­å¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,points,(points <span class="operator">+</span> <span class="number">10</span>) <span class="keyword">AS</span> new_points</span><br><span class="line"><span class="keyword">FROM</span> customers;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœé›†<br><img src="http://cdn.zsenhe.com/e149343dc1fb4a2db999a77d98f791fb" alt="image.png"><br>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ è¿”å›äº†æ–°çš„ä¸€åˆ—â€œnew_pointsâ€,å®ƒçš„ç»“æœæ˜¯æ¯ä¸€è¡Œæ•°æ®pointsåˆ—å€¼+10<br>ä½¿ç”¨ASå¾—åˆ°äº†ä¸€ä¸ªæ–°çš„åˆ—åˆ«å</p><h4 id="WHERE-å­å¥"><a href="#WHERE-å­å¥" class="headerlink" title="WHERE å­å¥"></a>WHERE å­å¥</h4><p>WHEREå­å¥ç”¨äºè¿‡æ»¤è®°å½•ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­ä¸€å¼ è¡¨é‡Œå¯èƒ½æœ‰æˆç™¾ä¸Šåƒä¸‡è¡Œæ•°æ®ï¼Œé’ˆå¯¹æŸä¸€æ¬¡æŸ¥è¯¢å¦‚æœè¿”å›æ‰€æœ‰çš„æ•°æ®ä¼šå¯¹æ•°æ®åº“é€ æˆå¾ˆå¤§çš„å‹åŠ›;</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- WHEREå­å¥ è¯­æ³•</span></span><br><span class="line"><span class="keyword">SELECT</span> column1,column2... </span><br><span class="line"><span class="keyword">FROM</span> TABLE_NAME</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br></pre></td></tr></table></figure><p>conditionä¸ºè¡¨è¾¾å¼<br>è¿˜æ˜¯é’ˆå¯¹ä¸Šé¢çš„customersè¡¨,æ‰§è¡Œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,first_name,points</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">WHERE</span> points <span class="operator">&gt;=</span> <span class="number">500</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªsqlè¯­å¥è¿”å›äº†æ‰€æœ‰pointsåˆ—å¤§äºç­‰äº500çš„æ•°æ®</p><h5 id="AND-NOT-OR-é€»è¾‘è¿ç®—"><a href="#AND-NOT-OR-é€»è¾‘è¿ç®—" class="headerlink" title="AND NOT OR é€»è¾‘è¿ç®—"></a>AND NOT OR é€»è¾‘è¿ç®—</h5><p>è¿™ä¸‰ä¸ªè¿ç®—ç¬¦å·ä¸å­—é¢æ„æ€ç›¸åŒï¼Œç”¨äºå¤„ç†whereè¯­å¥ä¸­å¤šæ¡è¡¨è¾¾å¼â€œæˆ–â€â€œä¸â€â€œå–åâ€é€»è¾‘<br>å¦‚æˆ‘ä»¬éœ€è¦å¾—åˆ°pointså€¼åœ¨åŒºé—´[500,3000]ä¸­çš„æ•°æ®,å¯ä»¥åƒè¿™æ ·å†™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,first_name,points</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">WHERE</span> points <span class="operator">&gt;=</span><span class="number">500</span> <span class="keyword">AND</span> points <span class="operator">&lt;=</span><span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/4e24893c61cb48f29cd4487e91c0a74c" alt="image.png"></p><p>å¯¹äºANDé€»è¾‘,sqlæœ‰ä¸€ä¸ªç®€åŒ–çš„è¯­æ³•,ä½¿ç”¨BETWEENKæ“ä½œç¬¦,å®ƒç”¨äºé€‰å–ä»‹äºä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,first_name,points</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">WHERE</span> points <span class="keyword">BETWEEN</span> <span class="number">500</span> <span class="keyword">AND</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/ed12447d79f14480af8e5bcedda8fd37" alt="image.png"><br>æ¥ä¸‹æ¥,é€‰å–é™¤äº†è¿™ä¸ªåŒºé—´ä»¥å¤–çš„æ•°æ®,ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„sqlè¯­å¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,first_name,points</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">WHERE</span> points <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">500</span> <span class="keyword">AND</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/4314d24bda4c402e89d304b7b0f7e99d" alt="image.png"><br>ç°åœ¨è®°ä½ï¼ŒNOTç”¨äºè¡¨è¾¾å¼ä¸­å–å</p><h4 id="å¯¹äºå­—ç¬¦ä¸²æ£€ç´¢-ï¼ˆLIKE-REGEXPï¼‰"><a href="#å¯¹äºå­—ç¬¦ä¸²æ£€ç´¢-ï¼ˆLIKE-REGEXPï¼‰" class="headerlink" title="å¯¹äºå­—ç¬¦ä¸²æ£€ç´¢ ï¼ˆLIKE,REGEXPï¼‰"></a>å¯¹äºå­—ç¬¦ä¸²æ£€ç´¢ ï¼ˆLIKE,REGEXPï¼‰</h4><img src="http://cdn.zsenhe.com/dfdedb800c8d4d088deda6dc56525a79" width="600px" height="200px"><p>åœ¨çœŸå®æƒ…å¢ƒä¸­ä¸å¯èƒ½æ¯ä¸€åˆ—éƒ½æ˜¯æ•°å­—æˆ–æ—¥æœŸ,å¦‚first_name;åœ¨sqlæ“ä½œä¸­å¯¹å­—ç¬¦ä¸²è¿›è¡Œå¯»æ‰¾æ˜¯å¾ˆå¸¸è§çš„æ“ä½œ<br>ç¨æœ‰å¹´å¤´çš„LIKEæ“ä½œç¬¦å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œå®ƒå°±åƒæ­£åˆ™è¡¨è¾¾å¼é’æ˜¥ç‰ˆï¼Œå¯ä»¥å®Œæˆä¸€äº›ç®€å•çš„å·¥ä½œ</p><p>å¯¹äºäº†è§£ä½¿ç”¨è¿‡æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å‘è€…ï¼Œåªéœ€è®°ä½ â€œ%â€â€_â€åˆ†åˆ«å ä½ â€œä»»æ„ä¸ªå­—ç¬¦â€ â€œä¸€ä¸ªå­—ç¬¦â€ å³å¯<br>ç°åœ¨ï¼Œæˆ‘ä»¬å°†è¦æ£€ç´¢first_nameåˆ—å€¼ä»¥bå¼€å¤´çš„æ•°æ®ï¼Œè¿™æ ·å†™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,points,first_name <span class="keyword">AS</span> B_NAME</span><br><span class="line"><span class="keyword">FROM</span> customers </span><br><span class="line"><span class="keyword">WHERE</span> first_name <span class="keyword">LIKE</span> <span class="string">&#x27;B%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/4201e10f2e8c4e5bb2367afb5f6dd17f" alt="image.png"></p><p>sqlä¹Ÿæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨REGEXPæ“ä½œç¬¦è¿›è¡Œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,points,first_name <span class="keyword">AS</span> B_NAME</span><br><span class="line"><span class="keyword">FROM</span> customers </span><br><span class="line"><span class="keyword">WHERE</span> first_name REGEXP <span class="string">&#x27;^B.+$&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/ada3bc923fa648e89ba8db3d0d4becb7" alt="image.png"></p><h4 id="å¯¹ç»“æœé›†è¿›è¡Œæ’åº-ORDER-BY"><a href="#å¯¹ç»“æœé›†è¿›è¡Œæ’åº-ORDER-BY" class="headerlink" title="å¯¹ç»“æœé›†è¿›è¡Œæ’åº (ORDER BY)"></a>å¯¹ç»“æœé›†è¿›è¡Œæ’åº (ORDER BY)</h4><p>ORDER BY å…³é”®å­—ç”¨äºå¯¹ç»“æœé›†è¿›è¡Œæ’åºã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1, column2, ... <span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p>ORDER BY åé¢ç´§è·Ÿè¿›è¡Œæ’åºçš„åˆ—å­—æ®µï¼ŒDESCä¸ºé™åºï¼Œé»˜è®¤ä½¿ç”¨å‡åº</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,first_name,points</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> points <span class="keyword">DESC</span>,first_name;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/ca64bdda9f8e4c87b49455e22ced7c86" alt="image.png"><br>è§‚å¯Ÿidä¸º5å’Œ6è¿™ä¸¤è¡Œæ•°æ®;æ ¹æ®ORDER BYä½¿ç”¨çš„è§„åˆ™,å…ˆå¯¹pointsè¿›è¡Œé™åº,å½“pointsä¸€æ ·çš„æ—¶å€™;<br>ä½¿ç”¨äº†åä¸€ä¸ªè§„åˆ™,å¯¹first_nameè¿›è¡Œäº†å‡åºæ’åº</p><h5 id="ä½¿ç”¨LIMITå…³é”®è¯é™å®šæŸ¥è¯¢æ•°æ®é‡"><a href="#ä½¿ç”¨LIMITå…³é”®è¯é™å®šæŸ¥è¯¢æ•°æ®é‡" class="headerlink" title="ä½¿ç”¨LIMITå…³é”®è¯é™å®šæŸ¥è¯¢æ•°æ®é‡"></a>ä½¿ç”¨LIMITå…³é”®è¯é™å®šæŸ¥è¯¢æ•°æ®é‡</h5><p>ä¿®æ”¹ä¸Šé¢çš„sqlè¯­å¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT customer_id,first_name,points</span><br><span class="line">FROM customers</span><br><span class="line">ORDER BY points DESC,first_name</span><br><span class="line">LIMIT 5;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/f3872935da1c480681cb0c6142b51022" alt="image.png"></p><p>åŒæ—¶å¯ä»¥ä¸ºLIMITè®¾ç½®ä¸€ä¸ªåç§»é‡ï¼Œè¿™å¯¹ä¸€äº›åˆ†é¡µæ“ä½œçš„æŸ¥è¯¢æ˜¯å¾ˆæœ‰ç”¨çš„æŠ€å·§</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> customer_id,first_name,points</span><br><span class="line"><span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> points <span class="keyword">DESC</span>,first_name</span><br><span class="line">LIMIT <span class="number">2</span>,<span class="number">5</span>;</span><br></pre></td></tr></table></figure><p>2ä¸ºåç§»é‡ï¼ŒæŸ¥è¯¢5æ¡æ•°æ®<br><img src="http://cdn.zsenhe.com/4bdf607439e9492f8e55aa7ca0cba2b2" alt="image.png"></p><h3 id="2-åœ¨å¤šè¡¨ä¹‹é—´æ£€ç´¢æ•°æ®"><a href="#2-åœ¨å¤šè¡¨ä¹‹é—´æ£€ç´¢æ•°æ®" class="headerlink" title="2. åœ¨å¤šè¡¨ä¹‹é—´æ£€ç´¢æ•°æ®"></a>2. åœ¨å¤šè¡¨ä¹‹é—´æ£€ç´¢æ•°æ®</h3><p>å•è¡¨æ˜¯æ»¡è¶³ä¸äº†å¤§éƒ¨åˆ†ä¸šåŠ¡éœ€æ±‚çš„ï¼Œå¾ˆå¤šæ—¶å€™é‡‡ç”¨å¤šè¡¨å…³è”æ¥è§£å†³å­˜å‚¨é—®é¢˜ï¼Œå¦‚å¯¹äºè¯¥è¡¨</p><img src="http://cdn.zsenhe.com/4944c32d58c04bd0a6521e8fef11f9e7" width="600px" height="300px"><p>ordersæ˜¯ä¸€å¼ â€œè®¢å•è¡¨â€ï¼Œå…¶ä¸­order_idå­—æ®µä¸ºä¸»é”®ä¸è¡¨order_itemsä¸­çš„åŒåå­—æ®µç›¸å…³è”;orders.order_idä¹Ÿç§°ä¹‹ä¸ºâ€œå¤–é”®â€</p><p><img src="http://cdn.zsenhe.com/343e15ba7a2f4c4fb133286b97c02ee4" alt="image.png"></p><p>å½“æˆ‘ä»¬æŸ¥è¯¢ordersçš„æ—¶å€™ï¼Œæƒ³è¦åŒæ—¶å¾—åˆ°äº§å“id(product_id),å®ƒåœ¨å¦å¤–ä¸€å¼ è¡¨ä¸­ï¼Œè¿™ä¸ªæ—¶å€™æ€ä¹ˆæ“ä½œ?ä½¿ç”¨JOINè¿æ¥å…³é”®è¯</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2, ...</span><br><span class="line"><span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">JOIN</span> table2 <span class="keyword">ON</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>coditionä¸ºè¿æ¥æ¡ä»¶,ç”¨äºæŒ‡å®šè¿æ¥æ–¹å¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> o.order_id,oi.product_id</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line"><span class="keyword">JOIN</span> order_items oi <span class="keyword">ON</span> o.order_id <span class="operator">=</span> oi.order_id;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/d53cf4aa74564df18f0899f3b308276c" alt="image.png"></p><p>åœ¨sqlè¯­å¥ä¸­ o,oi ä¸ºè¡¨çš„åˆ«åï¼Œè€ŒSELECTæŸ¥è¯¢åˆ—çš„o.order_idæ˜¯ä¸ºæŒ‡å®šorder_idæ˜¯å“ªå¼ è¡¨ä¸­çš„å­—æ®µ(åŸå› æ˜¯orders,order_itemsä¸­<br>éƒ½æœ‰order_idè¿™ä¸ªå­—æ®µ)</p><h4 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h4><p>ä»€ä¹ˆæ˜¯å¤–è¿æ¥ï¼Ÿåœ¨æ¸…æ¥šè¿™ä¸ªæ¦‚å¿µä¹‹å‰å…ˆå¼•å…¥ä¸€å¼ æ–°çš„ç¤ºä¾‹è¡¨<br><img src="http://cdn.zsenhe.com/e50b9a72b388476e9e3c9bf4f620a79b" alt="image.png"><br>å¾ˆæ˜æ˜¾è¿™å¼ è¡¨ç”¨äºç®¡ç†æŸä¸ªå…¬å¸ä¸­çš„å‘˜å·¥,å…¶ä¸­reports_toåˆ—æŒ‡å®šäº†ä»–çš„ä¸Šçº§ï¼ˆæ±‡æŠ¥äººå‘˜;è€Œreports_toå¯¹åº”çš„employee_id<br>ç°åœ¨æˆ‘ä»¬è¦æŸ¥æ‰¾æ‰€æœ‰äººå‘˜ä»¥åŠä»–çš„ä¸Šçº§id<br>åˆ©ç”¨å‰é¢çš„æ¦‚å¿µå¾ˆè½»æ¾çš„å†™å‡ºæŸ¥è¯¢</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USE sql_hr;</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">e.employee_id,</span><br><span class="line">e.first_name,</span><br><span class="line">m.first_name <span class="keyword">AS</span> manger_first_name,</span><br><span class="line">m.employee_id <span class="keyword">AS</span> manger_id</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m <span class="keyword">ON</span> e.reports_to <span class="operator">=</span> m.employee_id;</span><br></pre></td></tr></table></figure><p>(æ³¨æ„ï¼Œè¡¨è‡ªå·±ä¸è‡ªå·±è¿æ¥ï¼Œç§°ä¹‹ä¸ºè‡ªè¿æ¥SelfJoin)<br><img src="http://cdn.zsenhe.com/5093cbd7204f41639a9f694cc7c83420" alt="image.png"><br>ä»”ç»†çœ‹ç»“æœé›†ä¼¼ä¹æœ‰ç‚¹ä¸å¯¹ï¼Œæˆ‘ä»¬æœŸæœ›å¾—åˆ°æ‰€æœ‰äººå‘˜ä»¥åŠä»–çš„ç®¡ç†å‘˜;ä½†è²Œä¼¼å°‘äº†ä¸€è¡Œ<br>ä¹Ÿå°±æ˜¯first_nameä¸ºYovonndaçš„æ•°æ®,è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?å¾€å›ç¿»ä¸€ä¸‹è¡¨ï¼Œå‘ç°Yovonndaçš„reports_toåˆ—ä¸ºNULL<br><img src="http://cdn.zsenhe.com/55c895369fa44dac8e738b84bec240a6" alt="image.png"><br>æ²¡ä»€ä¹ˆå¥½å¥‡æ€ªçš„ï¼Œä»–æ²¡æœ‰ä¸Šçº§ï¼Œè¿™å¯èƒ½æ˜¯å…¬å¸çš„CEO<br>è¦æƒ³å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œå°±å¾—äº†è§£ä¸‹æ‰€è°“å†…è¿æ¥ä¸å¤–è¿æ¥çš„å·®åˆ«äº†<br>ä¸Šæ–‡æ‰€æåˆ°æ‰€ä½¿ç”¨çš„JOINè¯­å¥éƒ½é»˜è®¤ä½¿ç”¨çš„å†…è¿æ¥ï¼Œå³</p><p><strong>ä»¥æŸç§æ¡ä»¶è¿›è¡Œè¿æ¥çš„ï¼Œä¸¤å¼ è¡¨ä¹‹é—´çš„äº¤é›†</strong></p><p>æ—¢ç„¶Yovonndaçš„reports_idä¸ºNULL,ä¹Ÿå°±æ²¡æœ‰äº¤é›†,è‡ªç„¶ä¹ŸæŸ¥è¯¢ä¸åˆ°ä»–çš„ä¿¡æ¯;<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤–è¿æ¥æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> o.order_id,oi.product_id</span><br><span class="line"><span class="keyword">FROM</span> orders o</span><br><span class="line">[<span class="keyword">LEFT</span><span class="operator">/</span><span class="keyword">RIGHT</span>] <span class="keyword">JOIN</span> order_items oi <span class="keyword">ON</span> o.order_id <span class="operator">=</span> oi.order_id;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸€ä¸‹sqlè¯­å¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">USE sql_hr;</span><br><span class="line"><span class="keyword">SELECT</span>  e.employee_id,</span><br><span class="line">e.first_name,</span><br><span class="line">m.first_name <span class="keyword">as</span> admin</span><br><span class="line"> <span class="keyword">FROM</span> employees e</span><br><span class="line"> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees m</span><br><span class="line"> <span class="keyword">ON</span> e.reports_to <span class="operator">=</span> m.employee_id;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/e01dbd9a4a4742aebb60a62a3e8f6bbf" alt="image.png"></p><p>okï¼Œç°åœ¨çš„ç»“æœé›†æ˜¯æˆ‘ä»¬æœŸæœ›å¾—åˆ°çš„äº†;å¯ä»¥çœ‹åˆ°å¤–è¿æ¥ä¸å†…è¿æ¥çš„å·®åˆ«åªæ˜¯å¤šäº†ä¸ªLEFT,å®ƒæŒ‡çš„æ˜¯å·¦è¡¨,åœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯FROMçš„<br>employess,å®ƒå°†å·¦è¡¨ä¸­æ— æ³•ä¸å³è¡¨å»ºç«‹è¿æ¥çš„è®°å½•ä¹Ÿè¿”å›;åœ¨å¤§å¤šæ•°æ—¶å€™ä¸ºäº†sqlè¯­å¥æ¸…æ™°,æˆ‘ä»¬åªä½¿ç”¨leftè€Œå°‘ç”¨right</p><h3 id="3-æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ•°æ®"><a href="#3-æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ•°æ®" class="headerlink" title="3. æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ•°æ®"></a>3. æ’å…¥ï¼Œæ›´æ–°ï¼Œåˆ é™¤æ•°æ®</h3><h4 id="æ’å…¥-ï¼ˆINSERT-INTOï¼‰"><a href="#æ’å…¥-ï¼ˆINSERT-INTOï¼‰" class="headerlink" title="æ’å…¥ ï¼ˆINSERT INTOï¼‰"></a>æ’å…¥ ï¼ˆINSERT INTOï¼‰</h4><p>è¯­æ³•:<br>ç¬¬ä¸€ç§æ–¹å¼æ— éœ€æä¾›æ’å…¥çš„åˆ—å­—æ®µåï¼Œåªéœ€æä¾›å€¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> table_name</span><br><span class="line"><span class="keyword">VALUES</span> (value1,value2,value3,...);</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è¿™æ ·</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> table_name (column1,column2,column3,...)</span><br><span class="line"><span class="keyword">VALUES</span> (value1,value2,value3,...);</span><br></pre></td></tr></table></figure><p>å°è¯•å¾€customersè¡¨é‡Œæ’å…¥ä¸€åæ–°çš„å®¢äººï¼Œæ‰§è¡Œ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">USE sql_store;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> customers </span><br><span class="line">(customer_id,</span><br><span class="line">first_name,</span><br><span class="line">last_name,</span><br><span class="line">birth_date,</span><br><span class="line">phone,</span><br><span class="line">address,</span><br><span class="line">city,</span><br><span class="line">state,</span><br><span class="line">points)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="keyword">DEFAULT</span>,&quot;z&quot;,&quot;sh&quot;,&quot;2023-3-8&quot;,&quot;13169018149&quot;,&quot;stou&quot;,&quot;stou&quot;,&quot;CH&quot;,<span class="keyword">DEFAULT</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> customers <span class="keyword">where</span> last_name <span class="operator">=</span> &quot;sh&quot;;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/f1f896ce0e0048d49c0ee9e60b91d3f0" alt="image.png"></p><p>DEFAULTä¸ºç¼ºçœå€¼ï¼Œå³ä½¿ç”¨å­—æ®µä¸­å®šä¹‰çš„è‡ªå¢æˆ–é»˜è®¤å€¼<br>ä¹Ÿå¯ä»¥åŒæ—¶æ’å…¥å¤šè¡Œ<br><img src="http://cdn.zsenhe.com/40b74f27541b4771834995581edf6aed" alt="image.png"></p><h4 id="æ’å…¥åˆ†å±‚è¡Œ-ï¼ˆLAST-INSERT-IDå‡½æ•°ï¼‰"><a href="#æ’å…¥åˆ†å±‚è¡Œ-ï¼ˆLAST-INSERT-IDå‡½æ•°ï¼‰" class="headerlink" title="æ’å…¥åˆ†å±‚è¡Œ ï¼ˆLAST_INSERT_IDå‡½æ•°ï¼‰"></a>æ’å…¥åˆ†å±‚è¡Œ ï¼ˆLAST_INSERT_IDå‡½æ•°ï¼‰</h4><img src="http://cdn.zsenhe.com/4944c32d58c04bd0a6521e8fef11f9e7" width="600px" height="300px"><p><img src="http://cdn.zsenhe.com/767035a9fd1543898f74acad9c4f7722" alt="image.png"></p><p>å¦‚å›¾æ‰€å±•ç¤ºçš„ä¸¤å¼ è¡¨ â€œordersâ€ â€œorder_itemsâ€ ,ä»–ä»¬ä½¿ç”¨order_idä½œä¸ºå¤–é”®è¿›è¡Œè¿æ¥ï¼Œæ¯è¡¨ordersä¸€è¡Œè®°å½•å¯èƒ½å¯¹åº”å­è¡¨order_itemså¤šæ¡æ•°æ®; åœ¨æ’å…¥çš„æ—¶å€™ä¸æ­¢è¦æ“ä½œordersè¡¨ï¼ŒåŒæ—¶è¿˜è¦æ’å…¥order_itemsï¼ˆè®¢å•äº§å“ä¿¡æ¯)</p><p>åœ¨å†™sqlè¯­å¥çš„æ—¶å€™ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜,order_idä½œä¸ºè‡ªå¢åˆ—,ä¸ºäº†é˜²æ­¢é‡å¤åœ¨æ’å…¥æ—¶æ— æ³•æŒ‡å®šè¯¥å­—æ®µçš„å€¼;è€Œå¾€å­è®¢å•é‡Œæ’å…¥æ•°æ®çš„æ—¶å€™åˆéœ€è¦è¯¥å­—æ®µä½œä¸ºç´¢å¼•,ä½¿ç”¨LAST_INSERT_ID()æ¥è§£å†³é—®é¢˜</p><p>LAST_INSERT_ID()æ˜¯mysqlå†…ç½®çš„åŠŸèƒ½å‡½æ•°ï¼Œå®ƒä¼šè¿”å›ä¸Šä¸€æ¬¡åˆ›å»ºçš„è‡ªå¢å€¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> orders </span><br><span class="line"><span class="keyword">VALUES</span>(<span class="keyword">DEFAULT</span>,<span class="number">6</span>,&quot;2023-3-8&quot;,<span class="number">1</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> order_items</span><br><span class="line"><span class="keyword">VALUES</span>(LAST_INSERT_ID(),<span class="number">4</span>,<span class="number">3</span>,<span class="number">4.5</span>),</span><br><span class="line">(LAST_INSERT_ID(),<span class="number">3</span>,<span class="number">4</span>,<span class="number">5.5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> order_items</span><br><span class="line"><span class="keyword">where</span> order_id <span class="operator">=</span> LAST_INSERT_ID();</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/79cd83fafac94e2793671cbe24d0a993" alt="image.png"></p><h4 id="å¤åˆ¶è¡¨æ•°æ®-å­æŸ¥è¯¢"><a href="#å¤åˆ¶è¡¨æ•°æ®-å­æŸ¥è¯¢" class="headerlink" title="å¤åˆ¶è¡¨æ•°æ® (å­æŸ¥è¯¢)"></a>å¤åˆ¶è¡¨æ•°æ® (å­æŸ¥è¯¢)</h4><p>æœ‰æ—¶å€™éœ€è¦å°†è¡¨ä¸­æ‰€æœ‰æˆ–æŸä¸€éƒ¨åˆ†æ•°æ®æ‹·è´åˆ°å¦ä¸€å¼ è¡¨ï¼Œä¸€æ¡æ¡è®°å½•insertæ˜¯æ•ˆç‡æä½çš„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> orders_copy </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders;</span><br></pre></td></tr></table></figure><p>è¯¥æŸ¥è¯¢ä¼šåˆ›å»ºä¸€å¼ æ–°çš„è¡¨â€orders_copyâ€,å¹¶å¯¼å…¥æ‰€æœ‰ordersè¡¨ä¸­çš„æ•°æ®;CREATE TABLE åç´§è·Ÿç€çš„SELECT ç§°ä¹‹ä¸ºå­æŸ¥è¯¢<br>å……åˆ†åˆ©ç”¨è¯¥ç‰¹æ€§å¯ä»¥å®Œæˆè®¸å¤šéªšæ“ä½œï¼Œä¾‹å¦‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> orders_copy2 </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> order_date <span class="operator">&lt;</span> <span class="string">&#x27;2019-1-1&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¯¥æŸ¥è¯¢ä¼šå¾—åˆ°ä¸€å¼ æ–°çš„è¡¨ï¼Œé‡Œé¢è®°å½•äº†2019-1-1ä¹‹å‰çš„è®¢å•æ•°æ®;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–¹å¼ä¼šå¿½ç•¥æ‰€æœ‰åˆ—å±æ€§<br><img src="http://cdn.zsenhe.com/26d56f1d89c74695bd1d7d4872375176" alt="image.png"><br>å¤åˆ¶å‡ºæ¥çš„è¡¨ï¼Œå…¶ä¸­order_idå¹¶æ²¡æœ‰è¢«æ ‡æ³¨ä¸ºä¸»é”®ï¼Œä¹Ÿæ²¡æœ‰è‡ªå¢å±æ€§</p><h4 id="æ›´æ–°è¡¨æ•°æ®-UPDATE"><a href="#æ›´æ–°è¡¨æ•°æ®-UPDATE" class="headerlink" title="æ›´æ–°è¡¨æ•°æ® (UPDATE)"></a>æ›´æ–°è¡¨æ•°æ® (UPDATE)</h4><p>ä½¿ç”¨UPDATEæ¥æ›´æ–°æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name</span><br><span class="line"><span class="keyword">SET</span> column1 <span class="operator">=</span> value1, column2 <span class="operator">=</span> value2, ...</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚,å°†customerä¸­,æ‰€æœ‰state&#x3D;CHçš„æ•°æ®pointsåˆ—æ›´æ”¹ä¸º1000</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> customers </span><br><span class="line"><span class="keyword">SET</span> points <span class="operator">=</span> <span class="number">1000</span></span><br><span class="line"><span class="keyword">WHERE</span> state<span class="operator">=</span><span class="string">&#x27;CH&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/7ccddcda0ba94871aa67c147b158f4d2" alt="image.png"><br>å…¶ä¸­ä¹Ÿå¯ä»¥åµŒå¥—æ•°å­¦è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ä¸ºæ‰€æœ‰CHçš„å®¢æˆ·åŠ 1000ç§¯åˆ†<br><img src="http://cdn.zsenhe.com/5fc1df1fdf3a4f949b338f35aaf56c55" alt="image.png"></p><h4 id="åˆ é™¤è¡¨æ•°æ®-DELETE"><a href="#åˆ é™¤è¡¨æ•°æ®-DELETE" class="headerlink" title="åˆ é™¤è¡¨æ•°æ® (DELETE)"></a>åˆ é™¤è¡¨æ•°æ® (DELETE)</h4><p>DELETEè¯­å¥ç”¨äºåˆ é™¤æ•°æ®</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure><p>where conditionä½œä¸ºç¼ºçœå€¼å‡ºç°,å¦‚æœä¸å¡«å†™ä¼šé»˜è®¤åˆ é™¤æ•´å¼ è¡¨çš„æ•°æ®</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>springboot  + jwt-tokenå®ç°å¾®ä¿¡å°ç¨‹åºç™»å½•æˆæƒ</title>
      <link href="/2023/03/03/springboot%20%20+%20jwt-token%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%8E%88%E6%9D%83/"/>
      <url>/2023/03/03/springboot%20%20+%20jwt-token%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%8E%88%E6%9D%83/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å†™ç±»ä¼¼æ ¡å›­å¢™çš„å°ç¨‹åºï¼Œè®°å½•ä¸‹å¼€å‘è¿‡ç¨‹ã€‚<br>ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œåœ¨å®ç°ä¸€ç³»åˆ—çš„åŠŸèƒ½ä¹‹å‰å…ˆè¦åšçš„å°±æ˜¯â€œç™»å½•æ³¨å†Œâ€;å› ä¸ºæ˜¯å°ç¨‹åºæ³¨å†Œè¿™å—å°±çœç•¥äº†ï¼Œåªéœ€è¦å†™ç™»å½•çš„é€»è¾‘å°±å¥½<br>å‰ç«¯é€‰ç”¨äº†uni-app,ä¸€å¥—ä»£ç å¤šç«¯å‘å¸ƒå¾ˆå¸å¼•äºº;åç«¯æ¡†æ¶é€‰æ‹©äº†SpringBoot,ç”±äºæ˜¯è¦è½åœ°ç©çš„é¡¹ç›®ï¼Œè‡ªç„¶æ˜¯æ€ä¹ˆæ•ˆç‡é«˜æ€ä¹ˆæ¥äº†</p><p>ç™»å½•æ¨¡å—æ‰€éœ€çš„ä¾èµ–å¼•å…¥: jwt-token,spring-security</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.11.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-impl --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.11.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-jackson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.11.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&lt;/dependency</span><br></pre></td></tr></table></figure><p>å°ç¨‹åºçš„ç™»å½•æµç¨‹ä¸ä¸€èˆ¬åº”ç”¨æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯å¤šå­˜äº†ä¸€ä¸ªopenidè€Œå·²ï¼›ç™»å½•æµç¨‹å¤§æ¦‚å¦‚ä¸‹</p><p>1: å‰ç«¯è°ƒç”¨å¾®ä¿¡çš„ç™»å½•APIï¼Œè·å–ä¸´æ—¶codeï¼Œæºå¸¦codeå‘åç«¯å‘é€è¯·æ±‚<br>2: åç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæºå¸¦æœ¬æ¬¡çš„code,appid(å°ç¨‹åºid),secretå‘å¾®ä¿¡æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè·å–å”¯ä¸€æ ‡è¯†openid<br>3: æŸ¥æ‰¾æ•°æ®åº“ï¼Œæœªå‘ç°è¯¥openidçš„æ¡ç›®åˆ™åˆ›å»ºï¼ˆå®é™…ä¸Šå°±æ˜¯çœç•¥çš„æ³¨å†Œï¼‰,æ’å…¥åº“<br>4: ç­¾å‘jwt-tokenï¼Œè¿”å›ç»™å‰ç«¯;å‰ç«¯ç¼“å­˜ï¼Œä¹‹åçš„ä¸šåŠ¡è¯·æ±‚æºå¸¦tokenè¿›è¡ŒéªŒè¯æƒé™</p><p>åšä¸€äº›å‡†å¤‡:</p><p>application.propertiesä¸­å¢åŠ é…ç½®é¡¹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å°ç¨‹åºid</span><br><span class="line">wx.appid=wx683fdea76c3825</span><br><span class="line">wx.secret=0554defd893f3eec9bf4c43dd97</span><br></pre></td></tr></table></figure><p>æ³¨æ„secretä¸ä¼šè¢«è®°å½•ï¼Œéœ€å¦¥å–„ä¿å­˜</p><p>JWTå·¥å…·ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.wswbackend.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.JwtBuilder;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.crypto.SecretKey;</span><br><span class="line"><span class="keyword">import</span> javax.crypto.spec.SecretKeySpec;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtil</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">JWT_TTL</span> <span class="operator">=</span> <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000L</span> * <span class="number">24</span> * <span class="number">14</span>;  <span class="comment">// æœ‰æ•ˆæœŸ14å¤©</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">JWT_KEY</span> <span class="operator">=</span> <span class="string">&quot;SDFGjhdsfalshdfHFdsjkdsffHFdsjkdsfds121232131afasdfac232131afasdfac&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUUID</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºtoken</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createJWT</span><span class="params">(String subject)</span> &#123;</span><br><span class="line">        <span class="type">JwtBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> getJwtBuilder(subject, <span class="literal">null</span>, getUUID());</span><br><span class="line">        <span class="keyword">return</span> builder.compact();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JwtBuilder <span class="title function_">getJwtBuilder</span><span class="params">(String subject, Long ttlMillis, String uuid)</span> &#123;</span><br><span class="line">        <span class="type">SignatureAlgorithm</span> <span class="variable">signatureAlgorithm</span> <span class="operator">=</span> SignatureAlgorithm.HS256;</span><br><span class="line">        <span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> generalKey();</span><br><span class="line">        <span class="type">long</span> <span class="variable">nowMillis</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">Date</span> <span class="variable">now</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(nowMillis);</span><br><span class="line">        <span class="keyword">if</span> (ttlMillis == <span class="literal">null</span>) &#123;</span><br><span class="line">            ttlMillis = JwtUtil.JWT_TTL;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">expMillis</span> <span class="operator">=</span> nowMillis + ttlMillis;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">expDate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(expMillis);</span><br><span class="line">        <span class="keyword">return</span> Jwts.builder()</span><br><span class="line">                .setId(uuid)</span><br><span class="line">                .setSubject(subject)</span><br><span class="line">                .setIssuer(<span class="string">&quot;sg&quot;</span>)</span><br><span class="line">                .setIssuedAt(now)</span><br><span class="line">                .signWith(signatureAlgorithm, secretKey)</span><br><span class="line">                .setExpiration(expDate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SecretKey <span class="title function_">generalKey</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">byte</span>[] encodeKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(encodeKey, <span class="number">0</span>, encodeKey.length, <span class="string">&quot;HmacSHA256&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">parseJWT</span><span class="params">(String jwt)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">SecretKey</span> <span class="variable">secretKey</span> <span class="operator">=</span> generalKey();</span><br><span class="line">        <span class="keyword">return</span> Jwts.parserBuilder()</span><br><span class="line">                .setSigningKey(secretKey)</span><br><span class="line">                .build()</span><br><span class="line">                .parseClaimsJws(jwt)</span><br><span class="line">                .getBody();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·ï¼Œæƒé™è¡¨</p><p>userè¡¨:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- auto-generated definition</span></span><br><span class="line"><span class="keyword">create table</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">    openid   <span class="type">varchar</span>(<span class="number">125</span>) <span class="keyword">null</span>,</span><br><span class="line">    wx       <span class="type">varchar</span>(<span class="number">24</span>)  <span class="keyword">null</span>,</span><br><span class="line">    id       <span class="type">int</span> auto_increment</span><br><span class="line">        <span class="keyword">primary key</span>,</span><br><span class="line">    role     <span class="type">int</span>          <span class="keyword">null</span>,</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">300</span>) <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> id</span><br><span class="line">        <span class="keyword">unique</span> (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>user_roleè¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- auto-generated definition</span></span><br><span class="line"><span class="keyword">create table</span> user_role</span><br><span class="line">(</span><br><span class="line">    id        <span class="type">int</span> auto_increment</span><br><span class="line">        <span class="keyword">primary key</span>,</span><br><span class="line">    role_name <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> id</span><br><span class="line">        <span class="keyword">unique</span> (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å®ä½“ç±»:<br>(ä½¿ç”¨äº†lombookï¼Œçœç•¥äº†ä¸€å¤§å †çš„getsetå’Œæ„é€ å™¨ä»£ç )</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.wswbackend.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String openid;</span><br><span class="line">    <span class="keyword">private</span> String wx;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer role;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®Security</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JwtAuthenticationTokenFilter jwtAuthenticationTokenFilter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AuthenticationManager <span class="title function_">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http.csrf().disable()</span><br><span class="line">                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/user/account/login/&quot;</span>, <span class="string">&quot;/user/account/register/&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(HttpMethod.OPTIONS).permitAll()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line"></span><br><span class="line">        http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtAuthenticationTokenFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, <span class="meta">@NotNull</span> HttpServletResponse response, <span class="meta">@NotNull</span> FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Authorization&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.hasText(token) || !token.startsWith(<span class="string">&quot;Bearer &quot;</span>)) &#123;</span><br><span class="line">            filterChain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        token = token.substring(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line">        String userid;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(token);</span><br><span class="line">            userid = claims.getSubject();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(Integer.parseInt(userid));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·åæœªç™»å½•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">UserDetailsImpl</span> <span class="variable">loginUser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDetailsImpl</span>(user);</span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(loginUser, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        SecurityContextHolder.getContext().setAuthentication(authenticationToken);</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDetailsImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDetails</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;? <span class="keyword">extends</span> <span class="title class_">GrantedAuthority</span>&gt; getAuthorities() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getPassword();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user.getOpenid();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isAccountNonLocked</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isCredentialsNonExpired</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDetailsServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        queryWrapper.eq(<span class="string">&quot;openid&quot;</span>, username);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(queryWrapper);</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDetailsImpl</span>(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åå†™ä¸€ä¸ªæ¥å£ç»„åˆèµ·æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">LoginService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment environment;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationManager authenticationManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">login</span><span class="params">(String code,String wx)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">appid</span> <span class="operator">=</span>  environment.getProperty(<span class="string">&quot;wx.appid&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">secret</span> <span class="operator">=</span> environment.getProperty(<span class="string">&quot;wx.secret&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">String</span> <span class="variable">openid</span> <span class="operator">=</span> GetOpenIdUtil.getopenid(appid,secret,code);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(openid);</span><br><span class="line">        openid = jsonObject.getString(<span class="string">&quot;openid&quot;</span>);</span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>();</span><br><span class="line">        queryWrapper = queryWrapper.eq(<span class="string">&quot;openid&quot;</span>, openid);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = userMapper.selectList(queryWrapper);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(userList.isEmpty())&#123;</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            user.setRole(<span class="number">0</span>);</span><br><span class="line">            user.setWx(wx);</span><br><span class="line">            user.setOpenid(openid);</span><br><span class="line">            user.setPassword(passwordEncoder.encode(openid));</span><br><span class="line">            userMapper.insert(user);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">usernamePasswordAuthenticationToken</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordAuthenticationToken</span>(openid,openid);</span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authenticate</span> <span class="operator">=</span> authenticationManager.authenticate(usernamePasswordAuthenticationToken);</span><br><span class="line">        <span class="type">UserDetailsImpl</span> <span class="variable">userDetails</span> <span class="operator">=</span> (UserDetailsImpl)authenticate.getPrincipal();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDetails.getUser();</span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> JwtUtil.createJWT(user.getId().toString());</span><br><span class="line">        map.put(<span class="string">&quot;error_message&quot;</span>,<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;token&quot;</span>,jwt);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è·å–openidçš„å·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetOpenIdUtil</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getopenid</span><span class="params">(String appid,String secret,String code)</span> &#123;</span><br><span class="line">         <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">         String url=<span class="string">&quot;https://api.weixin.qq.com/sns/jscode2session?appid=&quot;</span></span><br><span class="line">                 +appid+<span class="string">&quot;&amp;secret=&quot;</span>+secret+<span class="string">&quot;&amp;js_code=&quot;</span>+code+<span class="string">&quot;&amp;grant_type=authorization_code&quot;</span>;</span><br><span class="line">         <span class="keyword">try</span>&#123;</span><br><span class="line">             <span class="type">URL</span> <span class="variable">weChatUrl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(url);</span><br><span class="line">             <span class="type">URLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> weChatUrl.openConnection();</span><br><span class="line">             connection.setConnectTimeout(<span class="number">5000</span>);</span><br><span class="line">             connection.setReadTimeout(<span class="number">5000</span>);</span><br><span class="line">             connection.connect();</span><br><span class="line">             in = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(connection.getInputStream()));</span><br><span class="line">             <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">             String line;</span><br><span class="line">             <span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                 sb.append(line);</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">return</span> sb.toString();</span><br><span class="line">         &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">finally</span> &#123;</span><br><span class="line">             <span class="keyword">try</span> &#123;</span><br><span class="line">                 <span class="keyword">if</span> (in != <span class="literal">null</span>) &#123;</span><br><span class="line">                     in.close();</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125; <span class="keyword">catch</span> (Exception e2) &#123;</span><br><span class="line">                 e2.printStackTrace();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‰ç«¯éƒ¨åˆ†ä»£ç å¤ªä¸‘äº†ä¸åšå±•ç¤ºï¼Œæœ€åå®ç°æ•ˆæœå¦‚ä¸‹å›¾</p><p><img src="http://cdn.zsenhe.com/dd64545545fb4c50a21b92a7f728b691" alt="login 0.gif"></p><p>å¤´åƒçš„æ›´æ–°æ²¡å½•åˆ°hh</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è£…é¥°è€…æ¨¡å¼ä¸IOåŒ…</title>
      <link href="/2023/03/02/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F%E4%B8%8EIO%E5%8C%85/"/>
      <url>/2023/03/02/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F%E4%B8%8EIO%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h3 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h3><p>è£…é¥°è€…æ¨¡å¼æ˜¯ç»§æ‰¿çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒä»¥å¯¹å®¢æˆ·ç«¯é€æ˜çš„çŠ¶æ€åŠ¨æ€çš„ä¸ºå¯¹è±¡èµ‹äºˆä¸åŒçš„èŒè´£ï¼Œè€Œä¸ç”¨è¿›è¡Œå¤§é‡å­ç±»çš„æ‰©å†™ã€‚</p><h4 id="æ¨¡å¼ç»“æ„"><a href="#æ¨¡å¼ç»“æ„" class="headerlink" title="æ¨¡å¼ç»“æ„"></a>æ¨¡å¼ç»“æ„</h4><p>å®ƒçš„ç±»å›¾å¦‚ä¸‹:</p><p><img src="http://cdn.zsenhe.com/9fbbc0418fce488ea434dec5780eb0a1" alt="3985563a0d0ac0c5bdf5c93.png"></p><p><strong>Component(æŠ½è±¡æ„ä»¶)</strong>: é€šå¸¸ä½œä¸ºæ¥å£è¢«å®ç°ï¼Œç”¨äºè§„èŒƒè¢«è£…é¥°è§’è‰²<br><strong>ConcreteComponent(å…·ä½“æ„ä»¶)</strong>: ä½œä¸ºæ½æ”¶èŒè´£çš„å¯¹è±¡ç±»ï¼Œå®ç°äº†æŠ½è±¡æ„ä»¶æ¥å£<br><strong>Decorator(è£…é¥°èŒè´£è¶…ç±»)</strong>: ç”¨äºè§„èŒƒå…·ä½“è£…é¥°ç»„ä»¶ï¼ŒæŒæœ‰ä¸€ä¸ªå…·ä½“æ„å»ºå®ä¾‹<br><strong>ConcreteDecoratorA,B(å…·ä½“è£…é¥°ç±»)</strong>: ä½œä¸ºå…·ä½“è£…é¥°èŒè´£ï¼Œä¸ºå¯¹è±¡æ‰©å±•åŠŸèƒ½</p><h4 id="è£…é¥°è€…æ¨¡å¼å®ä¾‹"><a href="#è£…é¥°è€…æ¨¡å¼å®ä¾‹" class="headerlink" title="è£…é¥°è€…æ¨¡å¼å®ä¾‹"></a>è£…é¥°è€…æ¨¡å¼å®ä¾‹</h4><p>è®°å½•è¿™ç¯‡ç¬”è®°ä¸»è¦ç›®çš„æ˜¯æŠŠioç±»å•ƒä¸‹æ¥ï¼Œå•çº¯æ˜¯ç†è®ºå°±å¤ªæ¯ç‡¥äº†ã€‚åœ¨å¯¹ioç±»ä¸‰æ‹œäº”æ‰£ä¹‹å‰å…ˆå¼•å…¥ä¸€æ®µæ —å­</p><blockquote><p>è€ƒè™‘ä¸€ä¸‹å’–å•¡å…çš„ä¸šåŠ¡ï¼Œå’–å•¡ä½œä¸ºäº§å‡ºï¼Œä½†ä¸åŒçš„äººå£å‘³ä¸å°½ç›¸åŒï¼Œæœ‰çš„å–œæ¬¢åŠ è–„è·æœ‰çš„å–œæ¬¢åŠ ç‰›å¥¶;ä¸åŒçš„é…æ–™éœ€è¦æ”¶ä¸åŒçš„é’±ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ç»§æ‰¿æ¥è¿›è¡ŒæŠ½è±¡ï¼Œå¯èƒ½ä¼šå¤šå‡ºè®¸å¤šcoffeeçš„å­ç±»ï¼Œä¾‹å¦‚MintCoffee,MilkCoffeeâ€¦.è¿™æ ·çš„å®ç°æ˜¯ä¸ä¼˜é›…çš„ï¼Œè€ƒè™‘å®¢äººå¯èƒ½è¦åŠ ä¸€ç‚¹è–„è·ï¼Œå†åŠ ä¸€ç‚¹ç‰›å¥¶ã€‚æˆ‘ä»¬æ€»ä¸èƒ½ä¸Šä¸¤æ¯å§</p></blockquote><p>è¿™ä¸ªæ—¶å€™å°±éœ€è¦è£…é¥°è€…æ¨¡å¼æ´¾ä¸Šç”¨åœºäº†ï¼Œå®šä¹‰å‡ºæŠ½è±¡æ„ä»¶ CoffeeComponent</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CoffeeComponent</span> &#123;</span><br><span class="line">    <span class="comment">//è¿”å›å’–å•¡çš„åç§°</span></span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">//è¿”å›å’–å•¡çš„é…æ–™</span></span><br><span class="line">    String <span class="title function_">getAdd</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">//è¿”å›å’–å•¡çš„ä»·æ ¼</span></span><br><span class="line">    <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠå…·ä½“æ„ä»¶,å®¢äººå¯èƒ½éœ€è¦ä¸€æ¯è“å±±å’–å•¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlueCoffee</span> <span class="keyword">implements</span> <span class="title class_">CoffeeComponent</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è“å±±å’–å•¡&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAdd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è£…é¥°èŒè´£è¶…ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CoffeeDecorator</span> <span class="keyword">implements</span> <span class="title class_">CoffeeComponent</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CoffeeComponent coffeeEntity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CoffeeDecorator</span><span class="params">(CoffeeComponent coffeeEntity)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.coffeeEntity = coffeeEntity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> coffeeEntity.getName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAdd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> coffeeEntity.getAdd();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> coffeeEntity.getPrice();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> CoffeeComponent <span class="title function_">getCoffeeEntity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> coffeeEntity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®å®¢äººçš„å–œå¥½å†™å‡ºå…·ä½“è£…é¥°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor.decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.meteor.CoffeeComponent;</span><br><span class="line"><span class="keyword">import</span> com.meteor.CoffeeDecorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MilkCoffeeDecorator</span> <span class="keyword">extends</span> <span class="title class_">CoffeeDecorator</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MilkCoffeeDecorator</span><span class="params">(CoffeeComponent coffeeEntity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(coffeeEntity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getCoffeeEntity().getName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getCoffeeEntity().getPrice()+<span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAdd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getCoffeeEntity().getAdd()+<span class="string">&quot;ç‰›å¥¶ &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor.decorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.meteor.CoffeeComponent;</span><br><span class="line"><span class="keyword">import</span> com.meteor.CoffeeDecorator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MintCoffeeDecorator</span> <span class="keyword">extends</span> <span class="title class_">CoffeeDecorator</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MintCoffeeDecorator</span><span class="params">(CoffeeComponent coffeeEntity)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(coffeeEntity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getCoffeeEntity().getName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAdd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getCoffeeEntity().getAdd()+<span class="string">&quot;è–„è· &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getCoffeeEntity().getPrice()+<span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œå°±å®Œæˆäº†ï¼Œå½“éœ€è¦æ¨å‡ºæ–°å£å‘³çš„æ—¶å€™ä½ å¯ä»¥å†æ¬¡å¢åŠ è£…é¥°ç±»ã€‚åœ¨å®¢äººéœ€è¦è–„è·çš„æ—¶å€™èµ‹äºˆè–„è·çš„èŒè´£ï¼Œæˆ–è€…æ˜¯ç›´æ¥new ä¸€æ¯çº¢è±†ç‰›å¥¶å’–å•¡â€¦.ä¸è®ºæ˜¯ä»€ä¹ˆå£å‘³ï¼Œä»–æ€»æ˜¯ä¸€æ¯CoffeeComponent </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(CoffeeComponent coffeeComponent)</span>&#123;</span><br><span class="line">    out.println(coffeeComponent.getName()+<span class="string">&quot;/&quot;</span>+coffeeComponent.getAdd()+<span class="string">&quot;/&quot;</span>+coffeeComponent.getPrice()+<span class="string">&quot;$&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">CoffeeComponent</span> <span class="variable">coffeeComponent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BlueCoffee</span>();</span><br><span class="line">    print(coffeeComponent);</span><br><span class="line">    out.println(<span class="string">&quot;======åŠ å…¥ç‰›å¥¶=======&quot;</span>);</span><br><span class="line">    coffeeComponent = <span class="keyword">new</span> <span class="title class_">MilkCoffeeDecorator</span>(coffeeComponent);</span><br><span class="line">    print(coffeeComponent);</span><br><span class="line">    out.println(<span class="string">&quot;======åŠ å…¥è–„è·=======&quot;</span>);</span><br><span class="line">    coffeeComponent = <span class="keyword">new</span> <span class="title class_">MintCoffeeDecorator</span>(coffeeComponent);</span><br><span class="line">    print(coffeeComponent);</span><br><span class="line">    out.println(<span class="string">&quot;======ä¸€æ¯è–„è·ç‰›å¥¶å’–å•¡=====&quot;</span>);</span><br><span class="line">    <span class="type">CoffeeComponent</span> <span class="variable">mintMilkCoffee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MintCoffeeDecorator</span>(<span class="keyword">new</span> <span class="title class_">MilkCoffeeDecorator</span>(<span class="keyword">new</span> <span class="title class_">BlueCoffee</span>()));</span><br><span class="line">    print(coffeeComponent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">è“å±±å’–å•¡/</span> <span class="string">/5.0$</span></span><br><span class="line"><span class="string">======åŠ å…¥ç‰›å¥¶=======</span></span><br><span class="line"><span class="string">è“å±±å’–å•¡/</span> <span class="string">ç‰›å¥¶</span> <span class="string">/7.0$</span></span><br><span class="line"><span class="string">======åŠ å…¥è–„è·=======</span></span><br><span class="line"><span class="string">è“å±±å’–å•¡/</span> <span class="string">ç‰›å¥¶</span> <span class="string">è–„è·</span> <span class="string">/9.0$</span></span><br><span class="line"><span class="string">======ä¸€æ¯è–„è·ç‰›å¥¶å’–å•¡=====</span></span><br><span class="line"><span class="string">è“å±±å’–å•¡/</span> <span class="string">ç‰›å¥¶</span> <span class="string">è–„è·</span> <span class="string">/9.0$</span></span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡è£…é¥°è€…æ¨¡å¼è®°å¿†IOç±»"><a href="#é€šè¿‡è£…é¥°è€…æ¨¡å¼è®°å¿†IOç±»" class="headerlink" title="é€šè¿‡è£…é¥°è€…æ¨¡å¼è®°å¿†IOç±»"></a>é€šè¿‡è£…é¥°è€…æ¨¡å¼è®°å¿†IOç±»</h4><p>åœ¨ç†è§£äº†è£…é¥°è€…æ¨¡å¼åï¼Œå†æ¥ç†ioçš„è„‰ç»œå°±ä¸æ˜¯å¾ˆéš¾äº†ã€‚ä»¥ä¸‹æ˜¯javaä¸­ioçš„ç±»å›¾å…³ç³»<br><img src="http://cdn.zsenhe.com/fa3ef9b3cd58481e986da41629044634" alt="20190908093820782.jpg"><br>å°†ç›®å…‰æ”¾åœ¨å­—èŠ‚æµä¸Š<br><img src="http://cdn.zsenhe.com/61ec9ab634b1473cbdfa81bec9fd9ccb" alt="image.png"><br>ç”¨å‰æ–‡æåˆ°çš„æ¨¡å¼ç»“æ„å°†ä»–ä»¬çš„å…³ç³»ç”¨è£…é¥°è€…æ¨¡å¼ç†ä¸€é</p><p><strong>InputStream OutputStream</strong> ä½œä¸ºå­—èŠ‚æµçš„ä¸¤ä¸ªè¶…ç±»ï¼ˆæŠ½è±¡æ„ä»¶ Componentï¼‰ï¼Œåˆ†åˆ«æ˜¯è¾“å…¥ä¸è¾“å‡º<br>åœ¨InputStreamè¿™ä¸ªæ¨¡å¼ä¸­ï¼Œæ‹¥æœ‰ <strong>FileInputStream(æ–‡ä»¶å¤„ç†),ByteArrayInputStreamâ€¦.</strong> ç­‰å…·ä½“æ„ä»¶ï¼ˆConcreteComponentï¼‰<br>åŒæ ·ä¸å…·ä½“æ„ä»¶å®ç°äº†Componentçš„æ˜¯è£…é¥°èŒè´£è¶…ç±» <strong>FilterInputStream</strong> ,å®ƒçš„ç»§æ‰¿ä¸‹å®šä¹‰äº†ä¸‰ä¸ªå…·ä½“è£…é¥°ç±»<br><strong>BufferedInputStream,DataInputStream,PushbakInputStream</strong>;OutStreamåŒæ ·å¯ä»¥è¿™æ ·æ•´ç†å‡ºæ¥</p><p>åœ¨è„‘æµ·ä¸­æ•´ç†å‡ºæ¨¡å‹åï¼Œå½“æˆ‘ä»¬æƒ³è¯»å–æŸä¸ªæ–‡ä»¶æ—¶ç»ˆäºä¸ç”¨å¯¹ç€æ–‡æ¡£æ•²äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;zsh.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//å…·ä½“æ„ä»¶</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="comment">//å¢åŠ è£…é¥°è€… ç¼“å†²æµ</span></span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bufferedInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(inputStream);</span><br><span class="line">        <span class="type">byte</span> bytes[] = <span class="keyword">new</span> <span class="title class_">byte</span>[bufferedInputStream.available()];</span><br><span class="line">        <span class="keyword">while</span> ((bufferedInputStream.read(bytes))!=-<span class="number">1</span>)&#123;</span><br><span class="line">          out.print(<span class="keyword">new</span> <span class="title class_">String</span>(bytes));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨å­—ç¬¦æµæ—¶ä¹Ÿæ˜¯åŒæ ·çš„æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.meteor.io;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;zsh.txt&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å…·ä½“æ„ä»¶</span></span><br><span class="line">            <span class="type">FileReader</span> <span class="variable">fileReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(file);</span><br><span class="line">            <span class="comment">//è£…é¥°ç»„ä»¶</span></span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span>  <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span> ((line = bufferedReader.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/01cf3dfb78e84018abaf7bd1c48e2564" alt="image.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘éå†çš„åº”ç”¨</title>
      <link href="/2023/02/14/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86%E7%9A%84%E5%BA%94%E7%94%A8/"/>
      <url>/2023/02/14/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86%E7%9A%84%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><font size='20' color='green'><strong>äºŒå‰æ ‘éå†çš„åº”ç”¨</strong></font></p><p>:::</p><hr>åˆ©ç”¨äºŒå‰æ ‘éå†çš„æ¡†æ¶,æ€æƒ³å¯ä»¥åšå¾ˆå¤šäºŒå‰æ ‘åº”ç”¨æ–¹é¢çš„é—®é¢˜<h3 id="è¾“å‡ºæ‰€æœ‰å¶å­èŠ‚ç‚¹"><a href="#è¾“å‡ºæ‰€æœ‰å¶å­èŠ‚ç‚¹" class="headerlink" title="è¾“å‡ºæ‰€æœ‰å¶å­èŠ‚ç‚¹"></a>è¾“å‡ºæ‰€æœ‰å¶å­èŠ‚ç‚¹</h3><p>å°†äºŒå‰æ ‘ä¸­æ‰€æœ‰æ²¡æœ‰å„¿å­çš„èŠ‚ç‚¹è¾“å‡º,ä½¿ç”¨å…ˆåºéå†æ¥åš;åœ¨å…ˆåºéå†ç®—æ³•ä¸­ï¼Œå¢åŠ æ£€æµ‹èŠ‚ç‚¹çš„ <font color='blue'><strong>â€œå·¦å³å„¿å­æ˜¯å¦ä¸ºç©ºâ€</strong></font><br>ç¨‹åºçš„å®ç°å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">PreOrderTraversal</span><span class="params">(BinTree BT)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(BT)&#123;</span><br><span class="line"><span class="keyword">if</span>(!BT.left&amp;&amp;!BT.right) cout &lt;&lt; BT.data &lt;&lt; endl; <span class="comment">//åˆ¤æ–­æ˜¯å¦å·¦å³å„¿å­éƒ½ä¸ºç©º</span></span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT.left);</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT.right);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ±‚äºŒå‰æ ‘é«˜åº¦"><a href="#æ±‚äºŒå‰æ ‘é«˜åº¦" class="headerlink" title="æ±‚äºŒå‰æ ‘é«˜åº¦"></a>æ±‚äºŒå‰æ ‘é«˜åº¦</h3><p>æ ‘ä½¿ç”¨é€’å½’å®šä¹‰ï¼Œé‚£å¿…ç„¶ä¹Ÿå¯ä»¥ç”¨é€’å½’çš„æ–¹å¼æ±‚è§£è¿™ä¸ªé—®é¢˜;è¿™ä¸ªé—®é¢˜å®é™…ä¸Šæ˜¯æ±‚ <font color='blue'><strong>â€œæ ¹èŠ‚ç‚¹å·¦å³å­æ ‘é«˜åº¦çš„è¾ƒå¤§è€…+1â€</strong></font><br>ä¹‹å‰æåˆ°è¿‡ä¸åŒåºçš„åŒºåˆ«åœ¨äºè®¿é—®èŠ‚ç‚¹çš„æ—¶æœºä¸åŒï¼Œè¦æ±‚æ ¹èŠ‚ç‚¹å·¦å³å­æ ‘çš„é«˜åº¦ï¼Œé‚£å¿…ç„¶æ˜¯è¦å…ˆé€’å½’å¤„ç†å·¦å³å­æ ‘ï¼Œæœ€åé€’å½’å±‚å†è¿”å›åˆ°æ ¹èŠ‚ç‚¹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ±‚äºŒå‰æ ‘é«˜åº¦</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">PostOrderTraversal</span><span class="params">(BinTree BT)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(BT)&#123;</span><br><span class="line"><span class="type">int</span> lf = <span class="built_in">PreOrderTraversal</span>(BT.left); <span class="comment">//å·¦å­æ ‘é«˜åº¦</span></span><br><span class="line"><span class="type">int</span> rf = <span class="built_in">PreOrderTraversal</span>(BT.right);  <span class="comment">//å³å­æ ‘é«˜åº¦</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">max</span>(lf,rf)<span class="number">+1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£å°±æ˜¯ä½¿ç”¨ååºéå†æ¥åšäº†</p><h3 id="äºŒå…ƒè¡¨è¾¾å¼æ ‘"><a href="#äºŒå…ƒè¡¨è¾¾å¼æ ‘" class="headerlink" title="äºŒå…ƒè¡¨è¾¾å¼æ ‘"></a>äºŒå…ƒè¡¨è¾¾å¼æ ‘</h3><p><img src="http://cdn.zsenhe.com/c4a5afe7020f43d7adf0fe5e224d3b81" alt="image.png"></p><p>å¦‚å›¾ç»™å‡ºçš„äºŒå…ƒè¡¨è¾¾å¼æ ‘ï¼Œæ ‘å½“ä¸­çš„å¶èŠ‚ç‚¹ä¸ºè¿ç®—æ•°ï¼Œéå¶èŠ‚ç‚¹ä¸ºè¿ç®—ç¬¦å·;æ¯ä¸€æ£µå­æ ‘æè¿°äº†ä¸€ä¸ªå¼å­ã€‚<br>é€šè¿‡ä¸åŒçš„éå†æ¬¡åºå¯ä»¥å¾—åˆ° <font color='blue'><strong>å‰ç¼€è¡¨è¾¾å¼ï¼Œä¸­ç¼€è¡¨è¾¾å¼ï¼Œåç¼€è¡¨è¾¾å¼</strong></font></p><p><img src="http://cdn.zsenhe.com/a75b455b336d41c2abe32266d019e112" alt="image.png"></p><p>å¦‚å›¾ä¸­ç¼€è¡¨è¾¾å¼ç›´æ¥é€šè¿‡å‰åºéå†çš„æ–¹å¼è¾“å‡ºæ˜¯ä¸å‡†ç¡®çš„ï¼Œå¿…é¡»åœ¨å¼€å§‹é€’å½’å·¦å­æ ‘æ—¶è¾“å‡ºâ€(â€œ,å¹¶åœ¨è¿”å›çš„æ—¶å€™è¾“å‡ºå³æ‹¬å·â€)â€<br>è¿™æ ·æ‰èƒ½å¾—åˆ°æ­£ç¡®çš„ä¸­ç¼€è¡¨è¾¾å¼</p><h3 id="ç”±ä¸¤ç§éå†åºåˆ—ç¡®å®šä¸€æ£µå”¯ä¸€äºŒå‰æ ‘"><a href="#ç”±ä¸¤ç§éå†åºåˆ—ç¡®å®šä¸€æ£µå”¯ä¸€äºŒå‰æ ‘" class="headerlink" title="ç”±ä¸¤ç§éå†åºåˆ—ç¡®å®šä¸€æ£µå”¯ä¸€äºŒå‰æ ‘"></a>ç”±ä¸¤ç§éå†åºåˆ—ç¡®å®šä¸€æ£µå”¯ä¸€äºŒå‰æ ‘</h3><p>å½“å¾—çŸ¥ä¸€æ£µæ ‘çš„ä¸¤ç§éå†åºåˆ—ï¼Œæ˜¯å¦èƒ½æ¨å‡ºä¸€æ£µå”¯ä¸€çš„äºŒå‰æ ‘? ç­”æ¡ˆæ˜¯ <font color='blue'><strong>â€œä¸¤ç§åºåˆ—ä¸­å¿…é¡»åŒ…å«ä¸€ä¸ªä¸­åºâ€</strong></font><br>ä¸ºä»€ä¹ˆç»™å‡ºååºï¼Œå…ˆåºçš„éå†ç»“æœä¸èƒ½æ¨æµ‹å‡ºæ¥å‘¢ï¼Ÿä¾‹å¦‚å‰åºéå†çš„ç»“æœä¸º AB;ååºä¸ºBAï¼Œå¹¶æ²¡æ³•çŸ¥é“Bæ˜¯Açš„å·¦å„¿å­è¿˜æ˜¯å³å„¿å­ï¼Œè‡ªç„¶å°±æ— æ³•çŸ¥é“äºŒå‰æ ‘çš„å‡†ç¡®å½¢å¼äº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„éå†</title>
      <link href="/2023/02/02/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/"/>
      <url>/2023/02/02/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><font size='20' color='green'><strong>äºŒå‰æ ‘çš„éå†</strong></font></p><p>:::</p><hr>ä»¥äºŒå‰æ ‘çš„é“¾å¼å­˜å‚¨ä¸ºä¾‹,äºŒå‰æ ‘çš„éå†æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§<h2 id="é€’å½’å®ç°"><a href="#é€’å½’å®ç°" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h2><blockquote><p><a href="http://www.zsenhe.com/article/89">äºŒå‰æ ‘çš„å®šä¹‰ä¸å­˜å‚¨</a><br><font color='black'><strong>void PreOrderTraversal(T) å…ˆåº</strong> </font> <font color='blue'> <strong>æ ¹,å·¦å­æ ‘,å³å­æ ‘;</strong> </font><br><font color='black'><strong>void InOrderTraversal(T) ä¸­åº</strong> </font> <font color='blue'> <strong>å·¦å­æ ‘,æ ¹,å³å­æ ‘;</strong> </font><br><font color='black'><strong>void PostOrderTraversal(T) ååº</strong> </font> <font color='blue'> <strong>å·¦å­æ ‘,å³å­æ ‘,æ ¹;</strong> </font><br><font color='black'><strong>void LevelOrderTraversal(T) å±‚æ¬¡éå†</strong> </font> <font color='blue'> <strong>ä»ä¸Šè‡³ä¸‹ï¼Œä»å·¦åˆ°å³;</strong> </font></p></blockquote><h3 id="å…ˆåºéå†"><a href="#å…ˆåºéå†" class="headerlink" title="å…ˆåºéå†"></a>å…ˆåºéå†</h3><p><img src="http://cdn.zsenhe.com/d6294c133a5e46dca9f64a351b749180" alt="image.png"><br>éå†è¿‡ç¨‹ä¸º:</p><ol><li>è®¿é—® <font color='blue'><strong>æ ¹èŠ‚ç‚¹</strong> </font></li><li><font color='blue'><strong>å…ˆåº</strong> </font>éå†å…¶<font color='blue'><strong>å·¦å­æ ‘</strong> </font></li><li><font color='blue'><strong>å…ˆåº</strong> </font>éå†å…¶<font color='blue'><strong>å³å­æ ‘</strong> </font></li></ol><p>è¿™æ ·çš„è¿‡ç¨‹é‡‡ç”¨äº†é€’å½’çš„è®¾è®¡ï¼Œç›¸åº”çš„ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">PreOrderTraversal</span><span class="params">(BinTree BT)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(BT)&#123;</span><br><span class="line">cout &lt;&lt; BT-&gt;data &lt;&lt; endl;</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT-&gt;left);</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT-&gt;right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><p><img src="http://cdn.zsenhe.com/7a990cde8d9640cb8f166f73cf8aa6cb" alt="image.png"><br>å›¾ä¸­è¾“å‡º: D B E F A G H C I</p><p>éå†è¿‡ç¨‹ä¸º:</p><ol><li><font color='blue'><strong>ä¸­åº</strong> </font>éå†å…¶<font color='blue'><strong>å·¦å­æ ‘</strong> </font></li><li>è®¿é—® <font color='blue'><strong>æ ¹èŠ‚ç‚¹</strong> </font></li><li><font color='blue'><strong>ä¸­åº</strong> </font>éå†å…¶<font color='blue'><strong>å³å­æ ‘</strong> </font></li></ol><p>ä»£ç ä¹Ÿå°±æ˜¯å°†ä¸Šé¢çš„è®¿é—®æ ¹èŠ‚ç‚¹è°ƒæ¢åˆ°ä¸¤æ¬¡å­é—®é¢˜å¤„ç†ä¸­é—´</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InOrderTraversal</span><span class="params">(BinTree BT)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(BT)&#123;</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT-&gt;left);</span><br><span class="line">cout &lt;&lt; BT-&gt;data &lt;&lt; endl;</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT-&gt;right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><p><img src="http://cdn.zsenhe.com/f78f78ee22d64f6baa6dafe5ee4b1869" alt="image.png"><br>éå†è¿‡ç¨‹ä¸º:</p><ol><li><font color='blue'><strong>ååº</strong> </font>éå†å…¶<font color='blue'><strong>å·¦å­æ ‘</strong> </font></li><li><font color='blue'><strong>ä¸­åº</strong> </font>éå†å…¶<font color='blue'><strong>å³å­æ ‘</strong> </font></li><li>è®¿é—® <font color='blue'><strong>æ ¹èŠ‚ç‚¹</strong> </font></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">PostOrderTraversal</span><span class="params">(BinTree BT)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(BT)&#123;</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT-&gt;left);</span><br><span class="line"><span class="built_in">PreOrderTraversal</span>(BT-&gt;right);</span><br><span class="line">cout &lt;&lt; BT-&gt;data &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ç®¡æ˜¯ä½•ç§æ¬¡åºè¿›è¡Œéå†ï¼Œéå†è¿‡ç¨‹ä¸­ç»è¿‡èŠ‚ç‚¹çš„è·¯çº¿æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è®¿é—®å„æ¥ç‚¹çš„æ—¶æœºä¸åŒã€‚</p><h2 id="ä¸­åºéå†éé€’å½’å®ç°"><a href="#ä¸­åºéå†éé€’å½’å®ç°" class="headerlink" title="ä¸­åºéå†éé€’å½’å®ç°"></a>ä¸­åºéå†éé€’å½’å®ç°</h2><p>ä¸Šé¢çš„éå†éƒ½æ˜¯ä½¿ç”¨é€’å½’çš„å½¢å¼å®ç°ï¼Œæ—¢ç„¶æ˜¯é€’å½’ï¼Œé‚£è‚¯å®šå¯ä»¥æ›´æœ´ç´ çš„ç”¨å †æ ˆæ¥å®Œæˆ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">InOrderTraversal</span><span class="params">(BinTree BT)</span> </span>&#123;</span><br><span class="line">BinTree T = BT;</span><br><span class="line">Stack s = <span class="built_in">createStack</span>(); <span class="comment">//è·å–ä¸€ä¸ªæ ˆ </span></span><br><span class="line"><span class="keyword">while</span>(T||!<span class="built_in">isEmpty</span>(s))&#123;</span><br><span class="line"><span class="keyword">while</span> (T)&#123; <span class="comment">//ä¸€ç›´å‘å·¦èµ°å¹¶å°†æ²¿é€”èŠ‚ç‚¹å‹å…¥å †æ ˆ </span></span><br><span class="line"><span class="built_in">push</span>(T,s);</span><br><span class="line">T = T-&gt;left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">isEmpty</span>(s))&#123;</span><br><span class="line">T = <span class="built_in">pop</span>(s);</span><br><span class="line">cout &lt;&lt; T-&gt;data;</span><br><span class="line">T = T-&gt;right;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰é¢æåˆ°å¯¹äºæ ‘çš„éå†,ä¸‰ç§åºåˆ—çš„åŒºåˆ«ä¹Ÿå°±æ˜¯åœ¨ç¬¬å‡ æ¬¡é‡åˆ°å®ƒçš„æ—¶å€™è¿›è¡Œè®¿é—®;å¯¹äºä¸­åºéå†æ˜¯åœ¨ç¬¬äºŒæ¬¡é‡åˆ°èŠ‚ç‚¹çš„æ—¶å€™è¿›è¡Œè¾“å‡º,æ‰€ä»¥æˆ‘ä»¬è®¾è®¡å‡ºä»¥ä¸‹æ­¥éª¤,é…åˆå †æ ˆå®ç°ä¸­åºéå†</p><blockquote><p>é‡åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å®ƒå‹å…¥æ ˆï¼Œå¹¶éå†æ‰€æœ‰å·¦å­æ ‘<br>å½“å·¦å­æ ‘éå†å®Œä¹‹åï¼Œä»æ ˆé¡¶popå‡ºå»å¹¶è®¿é—®å®ƒ<br>ç»§ç»­ä¸­åºéå†åˆšæ‰popå‡ºå»çš„èŠ‚ç‚¹çš„å³å­æ ‘</p></blockquote><h2 id="å±‚åºéå†"><a href="#å±‚åºéå†" class="headerlink" title="å±‚åºéå†"></a>å±‚åºéå†</h2><p>åœ¨å­¦ä¹ å±‚åºéå†ä¹‹å‰ï¼Œè¦å…ˆææ‡‚äºŒå‰æ ‘éå†çš„æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆ;äºŒå‰æ ‘æ˜¯ä¸€ä¸ªäºŒç»´ç»“æ„,æ—¢ç„¶æ˜¯éå†,é‚£ä¹ˆå¿…ç„¶æ˜¯è¦äº§ç”Ÿä¸€ä¸ªåºåˆ—,æ ¹æ®ä¸åŒçš„è®¿é—®èŠ‚ç‚¹é¡ºåºä¼šäº§ç”Ÿä¸åŒç»“æœçš„åºåˆ—,è€Œè¿™ä¸ªåºåˆ—æ˜¯ä¸€ç»´ç»“æ„,æ‰€ä»¥äºŒå‰æ ‘çš„éå†æœ¬è´¨é—®é¢˜æ˜¯ <font color='blue'><strong>äºŒç»´ç»“æ„çš„ä¸€ç»´åŒ–</strong></font></p><p>é‚£ä¹ˆäºŒç»´æ€ä¹ˆå˜æˆä¸€ç»´?éš¾ç‚¹æ˜¯ä»€ä¹ˆ?ä»”ç»†æƒ³æƒ³ä¸Šé¢çš„éå†æ–¹å¼,è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹çš„å‰ææ˜¯â€ä½ æ˜¯æˆ‘çš„å³å„¿å­â€ or â€œä½ æ˜¯æˆ‘çš„å·¦å„¿å­â€,æ‰€ä»¥æˆ‘ä»¬æ˜¯é€šè¿‡ä¸€ä¸ªå·²çŸ¥çš„èŠ‚ç‚¹æ¥è®¿é—®å·¦å³å„¿å­èŠ‚ç‚¹ï¼Œå†é€šè¿‡å·¦å„¿å­å³å„¿å­å†å¾€æ·±å±‚éå†;</p><p>æ‰€ä»¥è®¿é—®è¿‡ç¨‹ä¸­å°±ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜,åœ¨éå†ä¸­,æˆ‘ä»¬è®¿é—®äº†èŠ‚ç‚¹çš„å·¦å„¿å­,<font color='red'><strong>å³å„¿å­æ€ä¹ˆåŠ?</strong></font>;å¦‚æœæŠŠå³å„¿å­æ”¾å¼ƒï¼Œä»¥åå°±æ‰¾ä¸åˆ°å³å„¿å­äº†</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥è®°ä½èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨å †æ ˆæˆ–è€…é˜Ÿåˆ—æ¥è¿›è¡Œä¿å­˜ï¼ˆä¾‹å¦‚ä¸Šæ–‡çš„éé€’å½’ä¸­åºéå†ï¼Œåœ¨å †æ ˆä¸­ä¿å­˜çš„å°±æ˜¯èŠ‚ç‚¹æœ¬èº«ï¼‰</p><p>å½“ä½¿ç”¨å †æ ˆä¿å­˜çš„æ—¶å€™ï¼Œå­˜çš„æ˜¯èŠ‚ç‚¹æœ¬èº«ï¼ˆå³æ˜¯è¯´å›æº¯å›æ¥çš„æ—¶å€™ä½¿ç”¨èŠ‚ç‚¹æœ¬èº«æ¥è®¿é—®å·¦æˆ–å³å„¿å­ï¼‰ï¼›è€Œä½¿ç”¨é˜Ÿåˆ—è¿›è¡Œè®°å¿†çš„æ—¶å€™ï¼Œå­˜çš„æ˜¯å³èŠ‚ç‚¹ï¼ˆå…ˆè®¿é—®å·¦èŠ‚ç‚¹ï¼Œå†å°†å³èŠ‚ç‚¹å…¥é˜Ÿï¼‰</p><h3 id="å±‚åºéå†çš„é˜Ÿåˆ—æ–¹å¼å®ç°"><a href="#å±‚åºéå†çš„é˜Ÿåˆ—æ–¹å¼å®ç°" class="headerlink" title="å±‚åºéå†çš„é˜Ÿåˆ—æ–¹å¼å®ç°:"></a>å±‚åºéå†çš„é˜Ÿåˆ—æ–¹å¼å®ç°:</h3><p>ä½¿ç”¨é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§,å¯ä»¥å¾ˆæ–¹ä¾¿çš„åšåˆ°å¯¹äºŒå‰æ ‘è¿›è¡Œå±‚åºéå†,åŸºæœ¬çš„æµç¨‹æ˜¯è¿™æ ·çš„</p><blockquote><p>éå†ä»æ ¹èŠ‚ç‚¹å¼€å§‹,é¦–å…ˆå°†<font color='blue'>æ ¹èŠ‚ç‚¹å…¥é˜Ÿ</font>,ç„¶åè¿›è¡Œå¾ªç¯: èŠ‚ç‚¹å‡ºé˜Ÿ-&gt;è®¿é—®è¯¥èŠ‚ç‚¹,å…¶<font color='blue'>å·¦å³å„¿å­å…¥é˜Ÿ</font></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">TreeNode</span> * BinTree;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TreeNode</span>&#123;</span><br><span class="line"><span class="type">char</span> data;</span><br><span class="line">BinTree left;</span><br><span class="line">BinTree right;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LevelOrderTraversal</span><span class="params">(BinTree BT)</span></span>&#123;</span><br><span class="line">Queue q;BinTree T;</span><br><span class="line"><span class="keyword">if</span>(!BT) <span class="keyword">return</span>;</span><br><span class="line">Q = <span class="built_in">createQueue</span>();</span><br><span class="line"><span class="built_in">Add</span>(Q,BT);</span><br><span class="line"><span class="keyword">while</span>(!<span class="built_in">isEmpty</span>(Q))&#123;</span><br><span class="line">T = <span class="built_in">DeleteQ</span>(Q);</span><br><span class="line">cout &lt;&lt; T-&gt;data;</span><br><span class="line"><span class="keyword">if</span>(T-&gt;left) <span class="built_in">AddQ</span>(Q,T-&gt;left);</span><br><span class="line"><span class="keyword">if</span>(T-&gt;right) <span class="built_in">AddQ</span>(Q,T-&gt;right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é˜Ÿåˆ—çš„å®ç° <a href="http://www.zsenhe.com/article/85">http://www.zsenhe.com/article/85</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„å®šä¹‰ä¸å­˜å‚¨</title>
      <link href="/2023/02/02/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%AD%98%E5%82%A8/"/>
      <url>/2023/02/02/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%AD%98%E5%82%A8/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><font size='20' color='green'><strong>äºŒå‰æ ‘çš„å­˜å‚¨ä¸éå†</strong></font></p><p>:::</p><hr><h2 id="äºŒå‰æ ‘çš„å®šä¹‰"><a href="#äºŒå‰æ ‘çš„å®šä¹‰" class="headerlink" title="äºŒå‰æ ‘çš„å®šä¹‰"></a>äºŒå‰æ ‘çš„å®šä¹‰</h2><p><font  color='blue'><strong>äºŒå‰æ ‘T</strong></font>: ä¸€ä¸ªæœ‰ç©·çš„èŠ‚ç‚¹é›†åˆ<br>è¿™ä¸ªé›†åˆå¯ä»¥ä¸ºç©º;è‹¥ä¸ä¸ºç©ºï¼Œåˆ™å®ƒæ˜¯ç”±<font  color='red'><strong>æ ¹èŠ‚ç‚¹</strong></font>å’Œç§°ä¸ºå…¶<font  color='red'><strong>å·¦å­æ ‘Tl</strong></font>å’Œ<font  color='red'><strong>å³å­æ ‘Tr</strong></font>çš„ä¸¤ä¸ªä¸ç›¸äº¤çš„äºŒå‰æ ‘ç»„æˆã€‚<br>ä»æŸç§è§’åº¦ç†è§£ï¼ŒäºŒå‰æ ‘å¯ä»¥å½“åšä¸€é¢—åº¦ä¸º2çš„æ ‘ï¼Œä½†ä»–æœ‰å·¦å³ä¹‹åˆ†</p><h3 id="äºŒå‰æ ‘çš„äº”ç§åŸºæœ¬å½¢æ€"><a href="#äºŒå‰æ ‘çš„äº”ç§åŸºæœ¬å½¢æ€" class="headerlink" title="äºŒå‰æ ‘çš„äº”ç§åŸºæœ¬å½¢æ€"></a>äºŒå‰æ ‘çš„äº”ç§åŸºæœ¬å½¢æ€</h3><p><img src="http://cdn.zsenhe.com/78a5bcb7d1814e0d9dc6739cbc596e2a" alt="image.png"></p><blockquote><p><strong>a</strong> : ç©ºäºŒå‰æ ‘<br><strong>b</strong> : åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹<br><strong>c</strong> <strong>d</strong> : å·¦å³å­æ ‘åˆ†åˆ«ä¸ºç©º<br><strong>e</strong> : æ‹¥æœ‰å·¦å³å­æ ‘</p></blockquote><p>äºŒå‰æ ‘ä¸ä¸€èˆ¬æ ‘çš„å·®åˆ«ä¾¿æ˜¯å­æ ‘æ‹¥æœ‰<font color='blue'><strong>å·¦å³é¡ºåºä¹‹åˆ†</strong></font>ï¼Œè€Œä¸€èˆ¬åº¦ä¸º2çš„æ ‘æ˜¯æ²¡æœ‰å·¦å³ä¹‹åˆ†çš„</p><h3 id="ç‰¹æ®ŠäºŒå‰æ ‘"><a href="#ç‰¹æ®ŠäºŒå‰æ ‘" class="headerlink" title="ç‰¹æ®ŠäºŒå‰æ ‘"></a>ç‰¹æ®ŠäºŒå‰æ ‘</h3><h4 id="æ–œäºŒå‰æ ‘"><a href="#æ–œäºŒå‰æ ‘" class="headerlink" title="æ–œäºŒå‰æ ‘"></a>æ–œäºŒå‰æ ‘</h4><p>å­æ ‘éƒ½å¾€ä¸€è¾¹å€’ï¼Œåªæœ‰å·¦å„¿å­ï¼Œæ²¡æœ‰å³å„¿å­ï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½å¾€å³è¾¹å€’ï¼‰;è¿™æ ·çš„ç»“æ„å®é™…ä¸Šå°±å½¢æˆä¸€ä¸ªé“¾è¡¨äº†<br><img src="http://cdn.zsenhe.com/26d614307f4a4effb77410f4e9cea7bb" alt="image.png"></p><h4 id="å®Œç¾äºŒå‰æ ‘ï¼ˆæ»¡äºŒå‰æ ‘ï¼‰"><a href="#å®Œç¾äºŒå‰æ ‘ï¼ˆæ»¡äºŒå‰æ ‘ï¼‰" class="headerlink" title="å®Œç¾äºŒå‰æ ‘ï¼ˆæ»¡äºŒå‰æ ‘ï¼‰"></a>å®Œç¾äºŒå‰æ ‘ï¼ˆæ»¡äºŒå‰æ ‘ï¼‰</h4><p><img src="http://cdn.zsenhe.com/63ce7e85548044afb5dfd3012b71fcc0" alt="image.png"><br>é™¤å¶èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰å·¦å³å­æ ‘ï¼Œç§°ä¹‹ä¸ºå®Œç¾äºŒå‰æ ‘</p><h4 id="å®Œå…¨äºŒå‰æ ‘"><a href="#å®Œå…¨äºŒå‰æ ‘" class="headerlink" title="å®Œå…¨äºŒå‰æ ‘"></a>å®Œå…¨äºŒå‰æ ‘</h4><p>æœ‰nä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³å¯¹èŠ‚ç‚¹è¿›è¡Œç¼–å·ï¼Œç¼–å·ä¸ºiçš„èŠ‚ç‚¹ä¸å®Œç¾äºŒå‰æ ‘ä¸­ç¼–å·ièŠ‚ç‚¹ä½ç½®ç›¸åŒ<br>å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Œå°†ä¸Šé¢çš„å®Œç¾äºŒå‰æ ‘æ‹¿æ‰ä¸€äº›èŠ‚ç‚¹<br><img src="http://cdn.zsenhe.com/94a160357f70443aa968195ede80dd2a" alt="image.png"><br>å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿ç¼ºå¤±äº†å¶èŠ‚ç‚¹å³è¾¹ä¸€éƒ¨åˆ†ï¼Œä»–çš„åºå·ä¾ç„¶ä¸æ»¡äºŒå‰æ ‘ä¿æŒä¸€è‡´ï¼Œè¿™ä¹Ÿèƒ½ç§°ä¹‹ä¸º <strong>å®Œå…¨äºŒå‰æ ‘</strong><br><img src="http://cdn.zsenhe.com/3419678ce2a6447cb14310ab69e6c207" alt="image.png"><br>å¦‚å›¾ï¼Œå› ä¸ºèŠ‚ç‚¹Dçš„å³å„¿å­ç¼ºå¤±ï¼Œä½¿å¾—ç¼–å·ä¸å®Œç¾äºŒå‰æ ‘ä¸ä¸€è‡´ï¼Œ<strong>è¿™å°±ä¸èƒ½ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘</strong></p><h3 id="äºŒå‰æ ‘çš„é‡è¦æ€§è´¨"><a href="#äºŒå‰æ ‘çš„é‡è¦æ€§è´¨" class="headerlink" title="äºŒå‰æ ‘çš„é‡è¦æ€§è´¨"></a>äºŒå‰æ ‘çš„é‡è¦æ€§è´¨</h3><ol><li><font color='black'><strong>ä¸€ä¸ªäºŒå‰æ ‘ç¬¬iå±‚çš„æœ€å¤§èŠ‚ç‚¹æ•°ä¸º<font color='red'> 2^i-1^,i&gt;&#x3D;1</strong></font></font></li><li>ç”±1å¯ä»¥æ¨å‡º: <font color='black'><strong>æ·±åº¦ä¸ºkçš„äºŒå‰æ ‘æ‹¥æœ‰æœ€å¤§èŠ‚ç‚¹æ•°é‡ <font color='red'> 2^k^-1,k&gt;&#x3D;1</strong></font></font></li><li>å¯¹äºä»»ä½•éç©ºäºŒå‰æ ‘Tï¼Œè‹¥N0è¡¨ç¤ºå¶èŠ‚ç‚¹ä¸ªæ•°,N1è¡¨ç¤ºåº¦ä¸º1çš„èŠ‚ç‚¹ä¸ªæ•°.N2è¡¨ç¤ºåº¦ä¸º2çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œå­˜åœ¨ <font color='red'><strong>n0&#x3D;n2+1</strong> </font> çš„å…³ç³»<br><img src="http://cdn.zsenhe.com/6900e20148c24563b665f9e64d407aae" alt="image.png"></li></ol><p>èƒ½è¯æ˜è¿™ä¸ªç»“è®ºå—?å…¶å®æ˜¯ä¸éš¾çš„,å¯¹äºä¸€æ£µèŠ‚ç‚¹æ•°ä¸ºnçš„äºŒå‰æ ‘Tï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–å¯¹è¾¹æ•°çš„è´¡çŒ®éƒ½ä¸º1ï¼Œäºæ˜¯æ€»çš„è¾¹æ•°k&#x3D;n-1;å±•å¼€æ¥è¯´ k&#x3D;n0+n1+n2-1ã€‚n1å¯¹äºè¾¹çš„è´¡çŒ®ä¸ºn0<em>0,n1çš„è´¡çŒ®ä¸ºn1</em>1,n2çš„è´¡çŒ®ä¸ºn2*2ï¼Œå¾—å‡ºä»¥ä¸‹ç­‰å¼å…³ç³»:</p><blockquote><p>n0+n1+n2-1 &#x3D; k &#x3D; n0*0 + n1 + 2n2<br>ä¸¤è¾¹ä¸€çº¦,æ¨å‡º:<br>n0 &#x3D; n2+1<br>é—®é¢˜å¾—è¯</p></blockquote><h3 id="äºŒå‰æ ‘çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰"><a href="#äºŒå‰æ ‘çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰" class="headerlink" title="äºŒå‰æ ‘çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰"></a>äºŒå‰æ ‘çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰</h3><p><img src="http://cdn.zsenhe.com/87e72290a0ee42018417684d629b5568" alt="image.png"><br>éå†æ˜¯äºŒå‰æ ‘çš„ä¸»è¦æ“ä½œï¼Œå¤§å¤šæ•°ç®—æ³•å®ç°éƒ½åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒäºŒå‰æ ‘çš„éå†åˆ†ä¸º:</p><p><font color='black'><strong>void PreOrderTraversal(T) å…ˆåº</strong> </font> <font color='blue'> <strong>æ ¹,å·¦å­æ ‘,å³å­æ ‘;</strong> </font><br><font color='black'><strong>void InOrderTraversal(T) ä¸­åº</strong> </font> <font color='blue'> <strong>å·¦å­æ ‘,æ ¹,å³å­æ ‘;</strong> </font><br><font color='black'><strong>void PostOrderTraversal(T) ååº</strong> </font> <font color='blue'> <strong>å·¦å­æ ‘,å³å­æ ‘,æ ¹;</strong> </font><br><font color='black'><strong>void LevelOrderTraversal(T) å±‚æ¬¡éå†</strong> </font> <font color='blue'> <strong>ä»ä¸Šè‡³ä¸‹ï¼Œä»å·¦åˆ°å³;</strong> </font></p><h2 id="äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„"><a href="#äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„" class="headerlink" title="äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„"></a>äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„</h2><h3 id="é¡ºåºå­˜å‚¨"><a href="#é¡ºåºå­˜å‚¨" class="headerlink" title="é¡ºåºå­˜å‚¨"></a>é¡ºåºå­˜å‚¨</h3><p>æ ¹æ®å‰é¢çš„ç»éªŒï¼Œæˆ‘ä»¬æƒ³åˆ°æœ‰æ²¡æœ‰å¯èƒ½ç”¨æ•°ç»„æ¥è¿›è¡Œè¡¨ç¤ºã€‚å‰é¢æåˆ°è¿‡ä¸€èˆ¬çš„æ ‘ç”¨æ•°ç»„å®ç°æ˜¯å¾ˆå›°éš¾çš„ï¼Œä½†äºŒå‰æ ‘ä¸åŒï¼Œå®ƒçš„åº¦åªæœ‰2ï¼Œåˆ†æ”¯ç›¸å¯¹è¾ƒå°‘<br>å¯¹äºå®Œå…¨äºŒå‰æ ‘ï¼Œç”±äºèŠ‚ç‚¹æ˜¯ä»ä¸Šå¾€ä¸‹,ä»å·¦åˆ°å³ç¼–å·,æˆ‘ä»¬å¯ä»¥åœ¨æ•°ç»„ä¸­è¿ç»­å­˜æ”¾<br><img src="http://cdn.zsenhe.com/87582478c8b446ce9611e2ac4e91288b" alt="image.png"><br>å¯¹äºè¿™æ ·çš„å­˜æ”¾ï¼Œä»–åœ¨æ•°ç»„ä¸­ä¸‹æ ‡çš„æ˜ å°„æœ‰å¦‚ä¸‹è§„å¾‹:</p><blockquote><p>å¯¹äºèŠ‚ç‚¹i:<br><strong>æ ¹èŠ‚ç‚¹ä½äº i&#x2F;2</strong> ,å‘ä¸‹å–æ•´<br><strong>å·¦å„¿å­ 2i</strong>;<strong>å³å„¿å­2i+1</strong></p></blockquote><p>ä¸€èˆ¬äºŒå‰æ ‘åŒæ ·å¯ä»¥ä½¿ç”¨æ•°ç»„å­˜æ”¾,åªæ˜¯è¦å¯¹æ•°ç»„ç©ºé—´é€ æˆæµªè´¹<br><img src="http://cdn.zsenhe.com/e7d3f26a1b4141a6996be57db3c7e5b8" alt="image.png"></p><h3 id="é“¾è¡¨å­˜å‚¨"><a href="#é“¾è¡¨å­˜å‚¨" class="headerlink" title="é“¾è¡¨å­˜å‚¨"></a>é“¾è¡¨å­˜å‚¨</h3><p>åˆ«å¿˜è®°å‰é¢çš„<strong>å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•</strong>ï¼Œä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåŸŸåˆ†åˆ«æŒ‡å‘å·¦å³å„¿å­å°±å¯ä»¥äº†<br><img src="http://cdn.zsenhe.com/d1afe0201dee4c3cb0e6256eda3da1ff" alt="image.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">TreeNode</span> *BinTree;</span><br><span class="line"><span class="keyword">typedef</span> BinTree Position;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TreeNode</span>&#123;</span><br><span class="line"><span class="type">char</span> data;</span><br><span class="line">BinTree left;</span><br><span class="line">BinTree right;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚å›¾:<br><img src="http://cdn.zsenhe.com/b387ab35869346e986eae64b3451b345" alt="image.png"></p><h2 id="ä¹ é¢˜-é”™é¢˜æ•´ç†"><a href="#ä¹ é¢˜-é”™é¢˜æ•´ç†" class="headerlink" title="ä¹ é¢˜&amp;é”™é¢˜æ•´ç†"></a>ä¹ é¢˜&amp;é”™é¢˜æ•´ç†</h2><ol><li>å¦‚æœä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘æœ€åº•ä¸‹ä¸€å±‚ä¸ºç¬¬å…­å±‚ï¼ˆæ ¹ä¸ºç¬¬ä¸€å±‚ï¼‰ä¸”è¯¥å±‚å…±æœ‰8ä¸ªå¶ç»“ç‚¹ï¼Œé‚£ä¹ˆè¯¥å®Œå…¨äºŒå‰æ ‘å…±æœ‰å¤šå°‘ä¸ªç»“ç‚¹ï¼Ÿ<br><strong>è§£: å¯¹äºæ·±åº¦ä¸º6çš„å®Œå…¨äºŒå‰æ ‘ï¼Œ1-5å±‚æ„æˆä¸€æ£µå®Œç¾äºŒå‰æ ‘Tï¼ŒTçš„èŠ‚ç‚¹æ•°ä¸º2^5^-1 &#x3D; 31ï¼ŒåŠ ä¸Šå¶èŠ‚ç‚¹ 31+8 &#x3D; 39ï¼Œäºæ˜¯ç­”æ¡ˆä¸º39</strong></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘ä¸äºŒå‰æ ‘</title>
      <link href="/2023/02/01/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2023/02/01/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><font size='20' color='green'><strong>æ ‘ä¸äºŒå‰æ ‘</strong></font></p><p>:::<br>&lt;æ ‘ï¼ŒäºŒå‰æ ‘ç»“æ„&gt; ç¬”è®°ç›®å½•</p><blockquote><p><a href='http://www.zsenhe.com/article/87'>0. æ ‘ä¸äºŒå‰æ ‘</a><br><a href='http://www.zsenhe.com/article/89'>1. äºŒå‰æ ‘çš„å®šä¹‰ä¸å­˜å‚¨</a><br><a href='http://www.zsenhe.com/article/90'>2.äºŒå‰æ ‘çš„éå†</a></p></blockquote><hr><h2 id="é¡ºåºæŸ¥æ‰¾"><a href="#é¡ºåºæŸ¥æ‰¾" class="headerlink" title="é¡ºåºæŸ¥æ‰¾"></a>é¡ºåºæŸ¥æ‰¾</h2><p>æŸ¥æ‰¾æŒ‡çš„æ˜¯æ ¹æ®æŸä¸ªç»™å®šå…³é”®è¯Kï¼Œä»é›†åˆRä¸­æ‰¾å‡ºå…³é”®å­—ä¸Kç›¸åŒçš„è®°å½•ï¼ŒæŸ¥æ‰¾åˆ†ä¸ºä¸¤ç±»</p><p><strong>é™æ€æŸ¥æ‰¾</strong>: é›†åˆä¸­<font color='red'><strong>è®°å½•æ˜¯å›ºå®š</strong></font>çš„ï¼Œæ²¡æœ‰æ’å…¥åˆ é™¤æ“ä½œï¼Œåªæœ‰æŸ¥æ‰¾<br><strong>åŠ¨æ€æŸ¥æ‰¾</strong>: é›†åˆä¸­<font color='red'><strong>è®°å½•æ˜¯åŠ¨æ€å˜åŒ–</strong></font>çš„ï¼Œé™¤æŸ¥æ‰¾å¤–è¿˜å¯èƒ½å‘ç”Ÿæ’å…¥ä¸åˆ é™¤æ“ä½œ</p><p><em>ä¸¾ä¸ªä¾‹å­ï¼Œä¸€æœ¬è¯å…¸ä¸­å¯èƒ½æœ‰æˆä¸‡ä¸Šç™¾ä¸‡çš„å•è¯ï¼Œå½“å®ƒå°åˆ·æˆä¹¦çš„æ—¶å€™é›†åˆæ˜¯ä¸å˜çš„ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è¿›è¡Œå•è¯çš„æŸ¥é˜…ï¼Œè¿™å°±æ˜¯æ‰€è°“é™æ€æŸ¥æ‰¾äº†;è€ŒåŠ¨æ€æŸ¥æ‰¾å¯èƒ½å‘ç”Ÿåœ¨æŸä¸ªç™¾ç§‘ç½‘ç«™ä¸Šï¼Œå½“æˆ‘ä»¬æ£€ç´¢æ¡ç›®çš„åŒæ—¶å¯èƒ½ä¹Ÿæœ‰ä¸€äº›è¿‡æ—¶çš„èµ„æ–™è¢«æ¸…é™¤æ›´æ–°</em></p><p>æˆ‘ä»¬çš„ä¸€èˆ¬è¡¨ç¤ºæ–¹æ³•æ˜¯æŠŠæ•°æ®æ”¾åœ¨æ•°ç»„é‡Œé¢</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1001</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LNode</span>&#123;</span><br><span class="line"><span class="type">int</span> data[<span class="number">1001</span>];</span><br><span class="line"><span class="type">int</span> length;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> LNode * L;</span><br></pre></td></tr></table></figure><p>é¡ºåºæŸ¥æ‰¾è¿™æ ·å†™ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">findTarget</span><span class="params">(L l,<span class="type">int</span> target)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line">l-&gt;data[<span class="number">0</span>] = target; <span class="comment">//å»ºç«‹å“¨å…µ </span></span><br><span class="line"><span class="keyword">for</span>(i = l-&gt;length;l-&gt;data[i]!=target;i--);</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å“¨å…µ?è¿™æ˜¯ä»€ä¹ˆæ–°æœ¯è¯­</strong></p><p>å®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†å°‘å†™ä¸€äº›è¾¹ç•Œåˆ¤æ–­çš„é€»è¾‘ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªâ€œå“¨å…µâ€å°†å®ƒå­˜æ”¾åœ¨æ•°ç»„ä¸‹æ ‡ä¸º0çš„ä½ç½®ï¼Œè¿™æ ·å½“å¾ªç¯é€€å‡ºæ—¶ï¼Œiä¸º0è‡ªç„¶å°±æ˜¯æœªæ‰¾åˆ°äº†;äºæ˜¯æˆ‘ä»¬çŸ¥é“æ¥æ”¶åˆ°0çš„æ—¶å€™ï¼Œå°±æ˜¯å…ƒç´ ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œå½“ç„¶è¿™æ ·å®ç°çš„è¯ï¼Œæ’å…¥å…ƒç´ æ—¶éœ€æ³¨æ„åˆæ³•ä¸‹æ ‡åœ¨ <strong>[1,n)</strong><br>å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ <font color='blue'> <strong>O(N)</strong> </font></p><hr><h3 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h3><p>é¡ºåºæŸ¥æ‰¾çš„æ•ˆç‡æ˜¾ç„¶æ˜¯æä½çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼ˆä¹Ÿå«æŠ˜åŠæŸ¥æ‰¾ï¼‰,å®ƒå¹¶ä¸æ˜¯ç”Ÿé¢å­”ï¼Œå¹³å¸¸çš„èšä¼šæ¸¸æˆä¹Ÿä¼šç»å¸¸ç”¨åˆ°ï¼Œæ²¡æœ‰ä»»ä½•çš„æ”¹å˜<br>å‡è®¾nä¸ªæ•°æ®å…ƒç´ çš„å…³é”®å­—æ»¡è¶³æœ‰åºï¼ˆé™åº å‡åºï¼‰å¹¶ä¸”è¿ç»­å­˜æ”¾,ä»£ç é•¿è¿™æ ·</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">binarySearch</span><span class="params">(L l,<span class="type">int</span> target)</span></span>&#123;</span><br><span class="line"><span class="type">int</span> left,right,mid,NF = <span class="number">-1</span>;</span><br><span class="line">left = <span class="number">1</span>;<span class="comment">//åˆå§‹åŒ–å·¦è¾¹ç•Œ </span></span><br><span class="line">right = l-&gt;length; <span class="comment">//åˆå§‹åŒ–å³è¾¹ç•Œ </span></span><br><span class="line"><span class="keyword">while</span>(left&lt;=right)&#123; </span><br><span class="line">mid = (left+right)/<span class="number">2</span>; <span class="comment">//è®¡ç®—ä¸­é—´å…ƒç´ åæ ‡ </span></span><br><span class="line"><span class="keyword">if</span>(target&lt;l-&gt;data[mid])  right=mid<span class="number">-1</span>; <span class="comment">//è°ƒæ•´å³è¾¹ç•Œ </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(k&gt;l-&gt;data[mid]) left = mid+; <span class="comment">//è°ƒæ•´å·¦è¾¹ç•Œ </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> NF; <span class="comment">//æœªæŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›-1 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡æŸ¥æ‰¾éƒ½ç¼©å°ä¸€åŠèŒƒå›´ï¼Œå®é™…æ„ä¹‰å³æ˜¯n &#x3D; n&#x2F;2ï¼Œæ ¹æ®å…¬å¼çŸ¥é“é™¤ä»¥lognæ¬¡åå½’1ï¼Œäºæ˜¯å®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º <font color='blue'> <strong>O(logn)</strong> </font><br>é€šè¿‡äº‹å…ˆå¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„æŸ¥æ‰¾æ•ˆç‡å¤§å¤§æé«˜<br>å¯¹äºäºŒåˆ†æŸ¥æ‰¾çš„è§£é¢˜æ€è·¯ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡å¾ˆè¯¦ç»†çš„ç¬”è®°ï¼š <a href="http://www.zsenhe.com/article/8">äºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³å’Œè§£é¢˜æ­¥éª¤ç¬”è®°ï¼Œæ¨¡æ¿</a></p><hr>## äºŒåˆ†æŸ¥æ‰¾çš„å¯ç¤º<p>ä¸ºä»€ä¹ˆäºŒåˆ†æŸ¥æ‰¾å°±å¿«å‘¢ï¼Ÿé€šè¿‡äº‹å…ˆæ’å¥½åºï¼Œå®é™…ä¸Šæˆ‘ä»¬å·²ç»æ„å»ºäº†å®ƒçš„æŸ¥æ‰¾é¡ºåº;æˆ‘ä»¬å¯ä»¥æ„é€ å‡ºè¿™æ ·çš„ä¸€æ£µæ ‘æ¥è¡¨è¿°<br><img src="http://cdn.zsenhe.com/b3c4e5d7754f408ca96f93263e303b2b" alt="image.png"></p><p>å¯¹äºä»1å¼€å§‹çš„è¿™æ ·11ä¸ªå…ƒç´ ï¼Œåªè¦æ’å¥½åºäº†ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡æ¯”è¾ƒçš„ä¸€å®šæ˜¯ä¸‹æ ‡ä¸º6è¿™ä¸ªå…ƒç´ ï¼Œæ ¹æ®æŸ¥æ‰¾çš„å€¼æ¥å†³å®šå¾€å·¦èŠ‚ç‚¹èµ°è¿˜æ˜¯å³èŠ‚ç‚¹èµ°ï¼Œå¯¹äº6è¿™ä¸ªä½ç½®ï¼Œå¦‚æœæ¯”è¾ƒå€¼å…ƒç´ æ¯”l[6]å¤§ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡å°†å¾€å³èŠ‚ç‚¹9èµ°â€¦.ä»¥æ­¤ç±»æ¨</p><p>è€Œå…ƒç´ çš„æŸ¥æ‰¾æ¬¡æ•°ä¾¿æ˜¯æ‰€åœ¨çš„å±‚æ•°,ä¾‹å¦‚4è¿™ä¸ªèŠ‚ç‚¹æ˜¯è¦å¯»æ‰¾çš„å€¼ï¼Œå®ƒä½äºç¬¬ä¸‰å±‚ï¼Œæ¯”è¾ƒä¸‰æ¬¡åå°±å¯ä»¥å–å‡º;æ ‘çš„æ€»å±‚æ¬¡æ˜¯logn+1,+1æ˜¯ä¸ºäº†å–æ•´;<strong>æ ‘çš„æ·±åº¦æœ‰<font color='blue'>logn+1</font>å±‚</strong></p><p>è€ƒè™‘å®ƒçš„å¹³å‡æŸ¥æ‰¾æ¬¡æ•°,æ ‘æ€»å…±æœ‰4å±‚</p><blockquote><p>æŸ¥æ‰¾4æ¬¡æ€»å…±æœ‰4ç§æƒ…å†µ,æŸ¥æ‰¾3æ¬¡4ç§æƒ…å†µ,æŸ¥æ‰¾2æ¬¡2ç§æƒ…å†µï¼ŒæŸ¥æ‰¾1æ¬¡åªæœ‰1ç§æƒ…å†µï¼ˆl[6]&#x3D;&#x3D;targetï¼‰</p></blockquote><p>é‚£ä¹ˆå®ƒçš„å¹³å‡æŸ¥æ‰¾æˆåŠŸæ¬¡æ•° <font color='blue'>ASL &#x3D; (4*4+4*3+2*3+1)&#x2F;11 &#x3D; 3</font><br>ç»¼ä¸Šæ‰€è¿°ï¼Œç”±äºæˆ‘ä»¬åœ¨æ•°ç»„é‡Œé¢å¯¹æŸ¥æ‰¾çš„å…ƒç´ è¿›è¡Œäº†æœ‰åºåŒ–çš„ç»„ç»‡ï¼Œä½¿å¾—æŸ¥æ‰¾è¿‡ç¨‹æŒ‰ç…§å›ºå®šçš„é¡ºåºè¿›è¡Œï¼Œè€Œé¡ºåºå½¢æˆäº†ç±»ä¼¼æ ‘çš„ç»“æ„;é‚£åè¿‡æ¥è¯´ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æŒ‰ç…§è¿™ä¸€ç§æ ‘çš„ç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼Œèƒ½ä¸èƒ½è¾¾åˆ°äºŒåˆ†æŸ¥æ‰¾çš„è¦æ±‚?è¿™å°±æ˜¯<strong>æŸ¥æ‰¾æ ‘</strong>äº†ï¼Œåœ¨æ•ˆç‡ä¸Šå®ƒå¯ä»¥å’ŒäºŒåˆ†æŸ¥æ‰¾è¾¾åˆ°åŒæ ·lognï¼ŒåŒæ—¶å®ƒåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œæ¯”å­˜å‚¨åœ¨æ•°ç»„ä¸­æ–¹ä¾¿çš„å¤š</p><p>ä»¥æŸ¥æ‰¾æ ‘çš„å½¢å¼å­˜å‚¨ï¼Œå¯ä»¥å¾ˆå¥½çš„è§£å†³é¡ºåºæŸ¥æ‰¾çš„ç¬¬äºŒå¤§ç±»é—®é¢˜ <strong>åŠ¨æ€æŸ¥æ‰¾é—®é¢˜</strong></p><hr><h2 id="æ ‘çš„å®šä¹‰"><a href="#æ ‘çš„å®šä¹‰" class="headerlink" title="æ ‘çš„å®šä¹‰"></a>æ ‘çš„å®šä¹‰</h2><p><font color='blue'><strong>æ ‘(Tree)</strong></font>: n (n&gt;&#x3D;0) ä¸ªèŠ‚ç‚¹æ„æˆçš„æœ‰é™é›†åˆã€‚<br>å½“n&#x3D;0æ—¶ï¼Œç§°ä¸º <font color='blue'><strong>ç©ºæ ‘</strong></font>;<br>å¯¹äºä»»ä¸€<font color='blue'><strong>éç©ºæ ‘</strong>(n&gt;0)</font>ï¼Œå®ƒå…·å¤‡ä»¥ä¸‹æ€§è´¨:</p><blockquote><p>æ ‘ä¸­æœ‰ä¸€ä¸ªç§°ä¸º<font color='red'><strong>æ ¹(root)</strong></font>çš„ç‰¹æ®ŠèŠ‚ç‚¹,ç”¨rè¡¨ç¤º<br>å…¶ä½™èŠ‚ç‚¹å¯åˆ†ä¸º<font color='red'><strong>m(m&gt;0)</strong></font>ä¸ªäº’ä¸ç›¸äº¤çš„æœ‰é™é›†T1,T2â€¦Tm,å…¶ä¸­æ¯ä¸ªé›†åˆæœ¬èº«åˆæ˜¯ä¸€æ£µæ ‘ï¼Œç§°ä¸ºåŸæ¥æ ‘çš„<font color='blue'><strong>å­æ ‘(SubTree)</strong></font></p></blockquote><p><img src="http://cdn.zsenhe.com/9a4e8e7ba8b34676a107b9ad934331da" alt="image.png"><br>æ ‘çš„å®šä¹‰é‡‡ç”¨äº†é€’å½’çš„è®¾è®¡ï¼Œä¾‹å¦‚Aæ˜¯ç”±ä¸‹ä¸€å±‚çš„å››æ£µå­æ ‘æ„æˆï¼Œæ¯ä¸ªå­æ ‘åˆæ˜¯ä¸€æ£µæ ‘</p><hr><h3 id="æ ‘ä¸éæ ‘"><a href="#æ ‘ä¸éæ ‘" class="headerlink" title="æ ‘ä¸éæ ‘"></a>æ ‘ä¸éæ ‘</h3><p><img src="http://cdn.zsenhe.com/f770e16faafc43bd896645a76dd39c27" alt="image.png"><br>å¦‚å›¾ï¼Œè¿™æ ·çš„ç»“æ„ä¸ºä»€ä¹ˆä¸èƒ½ç§°ä¹‹ä¸ºæ ‘å‘¢?å‰é¢æåˆ°äº†æ ‘çš„å­æ ‘ä¹‹é—´æ˜¯ä¸ç›¸äº¤çš„ï¼Œå¦‚å›¾1ç”±äºCä¸Dä¹‹é—´è¿ç€çº¿ï¼Œæˆ‘ä»¬æ— æ³•åšåˆ°æŠŠä»–ä»¬åˆ‡å‰²å¼€æ¥</p><p>ç°åœ¨æ˜ç¡®ä¸€ä¸‹æ ‘çš„æ›´å¤šæ¦‚å¿µ</p><blockquote><p>1.å­æ ‘æ˜¯<strong>ä¸ç›¸äº¤</strong>çš„<br>2.é™¤äº†æ ¹èŠ‚ç‚¹ä»¥å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹<strong>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</strong><br>3.ä¸€é¢—Nä¸ªèŠ‚ç‚¹çš„æ ‘æœ‰<strong>N-1æ¡è¾¹</strong><br>ï¼ˆå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€æ¡é€šå¾€çˆ¶èŠ‚ç‚¹çš„çº¿ï¼Œrooté™¤å¤–ï¼‰</p></blockquote><p>æ ‘æ˜¯ä¿è¯èŠ‚ç‚¹è”é€šçš„æœ€å°çš„ä¸€ç§è¿æ¥æ–¹å¼;å³è¾¹æœ€å°‘çš„ä¸€ç§æ–¹å¼</p><h3 id="æ ‘çš„ä¸€äº›åŸºæœ¬æœ¯è¯­"><a href="#æ ‘çš„ä¸€äº›åŸºæœ¬æœ¯è¯­" class="headerlink" title="æ ‘çš„ä¸€äº›åŸºæœ¬æœ¯è¯­"></a>æ ‘çš„ä¸€äº›åŸºæœ¬æœ¯è¯­</h3><ol><li><strong>èŠ‚ç‚¹çš„åº¦(Degree)</strong>: èŠ‚ç‚¹çš„å­æ ‘ä¸ªæ•°</li><li><strong>æ ‘çš„åº¦</strong>: æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ä¸­æœ€å¤§çš„åº¦æ•°</li><li><strong>å¶èŠ‚ç‚¹(Leaf)</strong>: åº¦ä¸º0çš„ç»“ç‚¹</li><li><strong>çˆ¶èŠ‚ç‚¹(Parent)</strong>: æœ‰å­æ ‘çš„ç»“ç‚¹æ˜¯å…¶å­æ ‘æ ¹èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</li><li><strong>å­èŠ‚ç‚¹(Child)</strong>: è‹¥AèŠ‚ç‚¹æ˜¯BèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œåˆ™ç§°BèŠ‚ç‚¹æ˜¯AèŠ‚ç‚¹çš„å­èŠ‚ç‚¹;å­èŠ‚ç‚¹ä¹Ÿç§°å­©å­èŠ‚ç‚¹</li><li><strong>å…„å¼ŸèŠ‚ç‚¹(Sibling)</strong>: ä¸¤ä¸ªèŠ‚ç‚¹å…·æœ‰åŒä¸€çˆ¶èŠ‚ç‚¹ï¼Œå³ç§°ä¹‹ä¸ºå…„å¼ŸèŠ‚ç‚¹</li><li><strong>è·¯å¾„å’Œè·¯å¾„é•¿åº¦</strong>: ä»èŠ‚ç‚¹N1åˆ°Nkçš„è·¯å¾„ç§°ä¹‹ä¸ºä¸€ä¸ªèŠ‚ç‚¹åºåˆ—(N1,N2â€¦Nk-1,Nk),Niæ˜¯Ni+1çš„çˆ¶èŠ‚ç‚¹ã€‚è·¯å¾„ä¸­åŒ…å«çš„è¾¹æ•°ç§°ä¸ºè·¯å¾„é•¿åº¦</li><li><strong>ç¥–å…ˆèŠ‚ç‚¹</strong>: æ²¿æ ‘æ ¹åˆ°æŸä¸€èŠ‚ç‚¹è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ç§°ä¸ºè¿™ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹</li><li><strong>å­å­™èŠ‚ç‚¹</strong>: æŸä¸€èŠ‚ç‚¹çš„å­æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ç§°ä¹‹ä¸ºè¿™ä¸ªèŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹</li><li><strong>èŠ‚ç‚¹çš„å±‚æ¬¡</strong>: è§„å®šæ ¹èŠ‚ç‚¹åœ¨1å±‚ï¼Œå…¶ä»–ä»»ä¸€èŠ‚ç‚¹çš„å±‚æ•°æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å±‚æ•°+1</li><li><strong>æ ‘çš„æ·±åº¦</strong>: æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„æœ€å¤§å±‚æ¬¡æ˜¯è¿™æ£µæ ‘çš„æ·±åº¦</li></ol><p>å¤§å¤šæ•°æ¦‚å¿µç±»ä¼¼å®¶è°±ç³»ä¸­çš„è¡¨ç¤ºï¼Œå®Œå…¨å¯ä»¥ç”¨å¸¸è¯†å»ç†è§£åŠ æ·±å°è±¡</p><hr><h2 id="æ ‘çš„è¡¨ç¤º"><a href="#æ ‘çš„è¡¨ç¤º" class="headerlink" title="æ ‘çš„è¡¨ç¤º"></a>æ ‘çš„è¡¨ç¤º</h2><p>è€ƒè™‘å‰é¢æ‰€å­¦çš„çŸ¥è¯†ï¼Œæ ‘èƒ½ä¸èƒ½ä½¿ç”¨é“¾è¡¨æˆ–è€…æ•°æ®æ¥å®ç°å‘¢ï¼Ÿé¦–å…ˆè€ƒè™‘æ•°ç»„ï¼Œè¿™æ ·éš¾åº¦è¿˜æ˜¯è¾ƒå¤§çš„ï¼Œå› ä¸ºæ ‘ä¸­å­˜åœ¨ç€å¾ˆå¤šå½¢å¼ï¼Œä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå„¿å­;æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­ä¸€ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯è°,å„¿å­æ˜¯è°</p><p>å¦‚æœç”¨é“¾è¡¨æ¥å®ç°å‘¢?å®ƒå¯èƒ½ä¼šé•¿è¿™æ ·<br><img src="http://cdn.zsenhe.com/bd1b5b686c24403d88c0fb2045f78e63" alt="image.png"><br>æ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨ä¸€ä¸ªç»“æ„æ¥è¡¨ç¤º,å¥½åƒæ˜¯æ²¡é—®é¢˜çš„,å®Œå…¨å¯ä»¥ç”¨ç»“æ„åŠ æŒ‡é’ˆæ¥è¡¨ç¤ºä¸€æ£µæ ‘?ä»”ç»†è§‚å¯Ÿ,è¿™ç§æ–¹å¼ä¹Ÿæ˜¯ä¸å®Œç¾çš„,å¦‚AèŠ‚ç‚¹æœ‰ä¸‰ä¸ªå­èŠ‚ç‚¹,è€ŒBæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹,ä»–ä»¬çš„ç»“æ„æ˜¯ä¸ä¸€æ ·çš„,æ— æ³•åšåˆ°ç»Ÿä¸€;ç»“æ„çš„å½¢å¼ä¸ä¸€æ ·ä¼šå¯¹ç¨‹åºè®¾è®¡å¸¦æ¥å›°éš¾ï¼Œæ¯•ç«Ÿæˆ‘ä»¬è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ˜¯æ— æ³•äº‹å…ˆçŸ¥é“ä»–çš„å­èŠ‚ç‚¹æ•°é‡çš„</p><p>å¦å¤–ä¸€ç§é€”å¾„å‘¢?æŠŠæ‰€æœ‰çš„èŠ‚ç‚¹è®¾è®¡æˆä¸€æ ·çš„ç»“æ„,ä¾‹å¦‚å›¾ä¸­,æ ‘çš„åº¦æ˜¯3,é‚£æˆ‘ä»¬ç»Ÿä¸€èŠ‚ç‚¹çš„ç»“æ„,è®©æ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰3ä¸ªæŒ‡é’ˆä¸å°±è¡Œäº†,ç©ºçš„å°±æŒ‡å‘NULL</p><p>è¿™æ ·è§£å†³å¸¦æ¥äº†æ–°çš„é—®é¢˜,å¦‚æœè¿™æ£µæ ‘æœ‰nä¸ªèŠ‚ç‚¹,é‚£ä»£è¡¨ç€æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰3ä¸ªæŒ‡é’ˆåŸŸ,è¿™æ„å‘³ç€æ•´ä¸ªæ ‘æ‹¥æœ‰3nä¸ªæŒ‡é’ˆ;è€Œæ ‘åªæœ‰n-1æ¡è¾¹,ä¹Ÿå°±æ˜¯è¯´åªæœ‰n-1ä¸ªæŒ‡é’ˆæ˜¯é0çš„,è¿™æ„å‘³ç€ä¼šæœ‰2n+1ä¸ªæŒ‡é’ˆæŒ‡å‘NULL,é€ æˆç©ºé—´æµªè´¹</p><hr><h3 id="å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•"><a href="#å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•" class="headerlink" title="å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•"></a>å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•</h3><p>è¿™æ˜¯ä¸€ç§æ›´å¥½çš„è¡¨ç¤ºæ–¹æ³•ï¼Œç§°ä¹‹ä¸º: <font color='blue'><strong>å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•</strong></font></p><p>å®ƒæ¯ä¸ªèŠ‚ç‚¹çš„ç»“æ„å¦‚ä¸‹:<br><img src="http://cdn.zsenhe.com/b1c416e1318b4c288bfe944018be21b8" alt="image.png"></p><p><strong>FirstChild</strong> æŒ‡å‘äº†å®ƒçš„ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹; <strong>NextSibling</strong> æŒ‡å‘ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ã€‚ä»¥æ­¤æ¥æŠŠæ•´æ£µæ ‘ä¸²èµ·æ¥</p><p><img src="http://cdn.zsenhe.com/439001000a1e4612ba80afee0776d352" alt="image.png"></p><p>è¿™æ ·çš„è¡¨ç¤ºæ–¹æ³•ä½¿å¾—æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ç»“æ„éƒ½æ˜¯ç»Ÿä¸€çš„ä¸”ä¸ä¼šé€ æˆç©ºé—´æµªè´¹(n+1ä¸ªæŒ‡é’ˆæ˜¯ç©ºçš„)</p><p>å°†å³å›¾æ—‹è½¬45Â°å¾—åˆ°:<br><img src="http://cdn.zsenhe.com/ef891c74be1a4173a234f734e904cdc2" alt="image.png"><br>å½¢æˆä¸€æ£µâ€œæ ‘â€ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€å¤šæœ‰ä¸¤ä¸ªå„¿å­ï¼Œè¿™ç§æ ‘ç§°ä¹‹ä¸º äºŒå‰æ ‘ ;å³æ ‘çš„åº¦ä¸º2<br>ç»¼ä¸Šï¼Œä¸ç®¡æ€æ ·çš„æ ‘ç»“æ„ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•ï¼Œå°†å®ƒç”¨äºŒå‰æ ‘é“¾è¡¨çš„å½¢å¼å®ç°</p><p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬æƒ³ç ”ç©¶ä¸€èˆ¬æ ‘çš„è¡¨ç¤ºä¸æ“ä½œçš„å®ç°ï¼Œå¦‚æœæˆ‘ä»¬ææ¸…æ¥šäº†äºŒå‰æ ‘çš„è¡¨ç¤ºä¸å®ç°ï¼Œä¾¿è§£å†³äº†å¤§éƒ¨åˆ†é—®é¢˜;æ‰€ä»¥<strong>äºŒå‰æ ‘æ˜¯æ ‘ç»“æ„ç ”ç©¶é‡Œé¢æœ€é‡è¦æœ€ä¸»è¦çš„å†…å®¹</strong></p><p>å¼•ç”¨&amp;å‚è€ƒ:<br><a href="https://zh.m.wikipedia.org/zh-sg/%E6%A0%91_(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84)">æ ‘,æ•°æ®ç»“æ„[ç»´åŸºç™¾ç§‘]</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é˜Ÿåˆ—ä¸é¡ºç¯é˜Ÿåˆ—</title>
      <link href="/2023/01/30/%E9%98%9F%E5%88%97%E4%B8%8E%E9%A1%BA%E7%8E%AF%E9%98%9F%E5%88%97/"/>
      <url>/2023/01/30/%E9%98%9F%E5%88%97%E4%B8%8E%E9%A1%BA%E7%8E%AF%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç§å—æ“ä½œçº¦æŸçš„<strong>ç‰¹æ®Šçº¿æ€§è¡¨</strong>;è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶å€™ åªèƒ½åœ¨<strong>ä¸€ç«¯æ’å…¥</strong>ï¼Œè€Œåœ¨<strong>å¦ä¸€ç«¯åˆ é™¤</strong><br>å®ƒçš„æ’å…¥å’Œåˆ é™¤æ“ä½œåˆ†åˆ«å‘ç”Ÿåœ¨è¡¨çš„ä¸¤å¤´ï¼Œè€Œä¸€èˆ¬åŒ–çš„çº¿æ€§è¡¨å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œæ’å…¥å’Œåˆ é™¤<br>æ•°æ®çš„æ’å…¥æˆ‘ä»¬ç§°ä¹‹ä¸º <strong>å…¥é˜Ÿ(AddQ)</strong> ;åˆ é™¤ç§°ä¸º <strong>å‡ºé˜Ÿ(DeleteQ)</strong><br>è¿™ç§è¡¨åˆè¢«ç§°ä¸º å…ˆå…¥å…ˆå‡ºè¡¨<br>æŠ½è±¡æ•°æ®ç±»å‹æè¿°ä¸º:<br><img src="http://cdn.zsenhe.com/a1065de7650b42ce823fe972dc9cde60" alt="image.png"><br>é˜Ÿåˆ—çš„å­˜å‚¨å®ç°ä¸€æ ·æœ‰ä¸¤ç§æ–¹å¼,é¡ºåºå­˜å‚¨ä¸é“¾å¼å­˜å‚¨;é¡ºåºå­˜å‚¨çš„å®ç°å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MaxSize = <span class="number">1000</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">QNode</span> &#123;</span></span><br><span class="line"><span class="type">char</span> data[MaxSize];</span><br><span class="line"><span class="type">int</span> front,rear;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">QNode</span> *<span class="title">Queue</span>;</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>å¯¹æ¯”å †æ ˆï¼Œå®ƒåªåœ¨è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥åˆ é™¤ï¼Œåªéœ€è¦ä¸€ä¸ªtopåˆ†é‡;è€Œé˜Ÿåˆ—éœ€è¦ä½¿ç”¨ä¸¤ä¸ªåˆ†é‡ <strong>front,rear</strong> åˆ†åˆ«è¡¨ç¤ºé˜Ÿåˆ—çš„é˜Ÿå¤´å’Œé˜Ÿå°¾<br><img src="http://cdn.zsenhe.com/15c990750e184a1b9d1aa685cfc8f454" alt="image.png"><br>åœ¨ä¸€å¼€å§‹,front,rearæŒ‡é’ˆéƒ½æŒ‡å‘-1è¿™ä¸ªä¸‹æ ‡ï¼Œé˜Ÿåˆ—æ˜¯ç©ºçš„<br><img src="http://cdn.zsenhe.com/66e2a2ff8d574f418c852574f7ab58f4" alt="image.png"><br>åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œrearå¾€åæŒªåŠ¨æŒ‡å‘0<br><img src="http://cdn.zsenhe.com/3d72a00da03547f0b830d97556bebeed" alt="image.png"><br>é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œæ­¤æ—¶rearæŒ‡å‘ä¸‹æ ‡2ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æƒ³è¦åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œä¾ç…§é˜Ÿåˆ—çš„åŸåˆ™ï¼Œå…ˆè¢«å¼¹å‡ºçš„æ˜¯Job1è¿™ä¸ªå…ƒç´ ã€‚æ³¨æ„åˆ°åœ¨åˆ é™¤ä¹‹å‰frontä»ç„¶æŒ‡å‘-1ï¼Œå®é™…ä¸Š<strong>frontæ˜¯æŒ‡å‘é˜Ÿåˆ—çš„å¤´ä¸€ä¸ªå…ƒç´ å†å‰é¢çš„ä¸‹æ ‡</strong><br><img src="http://cdn.zsenhe.com/f2f0d0a7faf74f52abc68c6ee466ef98" alt="image.png"><br>æŒ‡å‘å‡ºé˜Ÿæ“ä½œï¼ŒJob1å‡ºé˜Ÿï¼Œ<strong>frontå‘åç§»; <strong>ç»¼ä¸Šï¼Œ</strong>å…¥é˜Ÿrear+1ï¼Œå‡ºé˜Ÿfront+1</strong></p><h4 id="é¡ºç¯é˜Ÿåˆ—"><a href="#é¡ºç¯é˜Ÿåˆ—" class="headerlink" title="é¡ºç¯é˜Ÿåˆ—"></a>é¡ºç¯é˜Ÿåˆ—</h4><p><img src="http://cdn.zsenhe.com/de12cfb91b6c43389de5948197bf3b60" alt="image.png"><br>é˜Ÿåˆ—ä¸­æ—¶å¸¸ä¼šæœ‰è¿™æ ·çš„çŠ¶æ€ï¼Œæ•°ç»„å°¾éƒ¨åŠ æ»¡äº†ï¼Œä½†å‰é¢å·²ç»æœ‰å…ƒç´ å‡ºé˜Ÿ;rearæ— æ³•å†å¾€åç§»ï¼Œä½†æ•°ç»„å‰é¢è¿˜æœ‰ç©ºé—²èµ„æºã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿé‡æ–°å¼€è¾Ÿä¸€ä¸ªæ›´å¤§çš„æ•°ç»„åŠ¿å¿…è¦æœ‰å…ƒç´ ç§»åŠ¨ç­‰æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <strong>é¡ºç¯é˜Ÿåˆ—</strong><br><img src="http://cdn.zsenhe.com/7c08c076699f41cf8279d17f2280c07f" alt="image.png"><br>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œfrontï¼Œrearä¸¤ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘æŸä¸ªä½ç½®ï¼Œfront&#x3D;&#x3D;rearæ—¶é˜Ÿåˆ—æ˜¯ç©ºçš„<br><img src="http://cdn.zsenhe.com/ded3ae774104430f94bae5594feedbe9" alt="image.png"></p><p>æŒ‡å‘é˜Ÿåˆ—çš„ä¸€èˆ¬æ“ä½œï¼Œæ­¤æ—¶é˜Ÿåˆ—æ¥åˆ°äº†è¿™ä¸ªçŠ¶æ€ï¼Œæ€»å…±6ä¸ªåˆ†é‡ï¼Œæ­¤æ—¶å·²ç»æœ‰5ä¸ªè¢«å æ»¡äº†;è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æƒ³å†å¾€é‡Œæ’å…¥ä¸€ä¸ªå…ƒç´ ï¼ŒåŠ å…¥ä¹‹årear+1&#x3D;1,frontä¹Ÿç­‰äº1ï¼Œè¯¶ï¼Œæ ¹æ®å‰é¢çš„è¯´æ³•ï¼Œfront&#x3D;rearæ—¶é˜Ÿåˆ—ä¸ºç©ºï¼Œä½†é‡Œé¢æ˜æ˜æ»¡æ»¡å½“å½“çš„å…ƒç´ å•Šè¿™å°±çŸ›ç›¾äº†ï¼Œ<strong>å½“front&#x3D;&#x3D;rearæ—¶ï¼Œé˜Ÿåˆ—æ˜¯ç©ºçš„è¿˜æ˜¯æ»¡çš„å‘¢ï¼Ÿ</strong><br>æ ¹æœ¬åŸå› åœ¨äºï¼Œæˆ‘ä»¬åˆ¤åˆ«é˜Ÿåˆ—çŠ¶æ€æ—¶ï¼Œæ ¹æ®çš„æ˜¯frontå’Œrearä¹‹é—´è·ç¦»çš„ç›¸å¯¹å…³ç³»æ¥åˆ¤æ–­çš„ï¼Œå¯¹äºä¸€ä¸ªå¤§å°ä¸ºnçš„é˜Ÿåˆ—ï¼Œä»–ä»¬ä¹‹é—´çš„å·®è·æœ‰nç§æƒ…å†µ;è€Œé˜Ÿåˆ—çŠ¶æ€æœ‰å‡ ç§æƒ…å†µå‘¢ï¼Ÿæ˜¯n+1å§ï¼ˆç©ºé›†ä¹Ÿç®—ä¸€ä¸ª)ï¼Œè€Œfrontå’Œrearçš„å·®è·åªæœ‰nç§æƒ…å†µï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æƒ³ä½¿ç”¨nç§çš„çŠ¶æ€æ¥åŒºåˆ†å®é™…ä¸Šå­˜åœ¨çš„n+1ç§æƒ…å†µ</strong><br>å°±åƒç”¨ä¸€ä¸ªbitæ¥åŒºåˆ†3ç§æƒ…å†µä¸€æ ·ä¸å¯èƒ½ï¼Œè¿™å°±æ˜¯å®ƒçš„æ ¹æœ¬åŸå› ï¼›æ—¢ç„¶åŸå› æ‰¾åˆ°äº†ï¼Œè‡ªç„¶ä¹Ÿæœ‰è§£å†³çš„æ–¹æ¡ˆ</p><blockquote><ol><li>ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„tagæ¥åŒºåˆ†æ ‡è®° (å½“å…¥é˜Ÿçš„æ—¶å€™tag++ï¼Œå‡ºé˜Ÿçš„æ—¶å€™tagâ€“ï¼Œä»¥tagæ¥åˆ¤æ–­é˜Ÿåˆ—çš„çŠ¶æ€)</li><li>ä»…ä½¿ç”¨n-1ä¸ªæ•°ç»„ç©ºé—´ï¼ˆå¦‚æ­¤å¯¹äºn&#x3D;3å¤§å°çš„æ•°ç»„ï¼Œå®ƒçš„å…ƒç´ è£…è½½åªæœ‰(0,1,2)ä¸‰ç§æƒ…å†µ)</li></ol></blockquote><p>æœ€ä¼˜é›…çš„æ˜¯é‡‡å–ç¬¬äºŒç§æ–¹æ¡ˆï¼Œå¯¹äºå…¥é˜Ÿæ“ä½œï¼Œæˆ‘ä»¬è¿™æ ·å†™</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">addQ</span><span class="params">(Queue q,<span class="type">char</span> item)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>((q-&gt;rear+<span class="number">1</span>)%MaxSize == q-&gt;front)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;é˜Ÿåˆ—å·²æ»¡&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">q-&gt;rear = (q-&gt;rear+<span class="number">1</span>)%MaxSize;</span><br><span class="line">q-&gt;data[q-&gt;rear] = item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ±‚ä½™æ¥å–å¾—ä¸‹ä¸€ä¸ªå­˜æ”¾çš„ä½ç½®ï¼Œå½“ä¸‹ä¸€ä¸ªä½ç½®ä¸frontç¢°ä¸Šçš„æ—¶å€™ï¼Œé˜Ÿåˆ—å·²ç»æ»¡äº†<br>å¯¹äºå‡ºé˜Ÿæ“ä½œ:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="title function_">deleteQ</span><span class="params">(Queue q)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(q-&gt;front==q-&gt;rear)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">//é˜Ÿåˆ—ç©º </span></span><br><span class="line">&#125;</span><br><span class="line">q-&gt;front = (q-&gt;front+<span class="number">1</span>)%MaxSize; </span><br><span class="line"><span class="keyword">return</span> q-&gt;data[q-&gt;front];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å †æ ˆä¸è¡¨è¾¾å¼æ±‚å€¼</title>
      <link href="/2023/01/28/%E5%A0%86%E6%A0%88%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/"/>
      <url>/2023/01/28/%E5%A0%86%E6%A0%88%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯å †æ ˆ"><a href="#ä»€ä¹ˆæ˜¯å †æ ˆ" class="headerlink" title="ä»€ä¹ˆæ˜¯å †æ ˆ?"></a>ä»€ä¹ˆæ˜¯å †æ ˆ?</h3><p>å †æ ˆæ˜¯ä¸€ç§çº¿æ€§ç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼›å †æ ˆåœ¨è®¡ç®—æœºå­¦ç§‘ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå¦‚å‡½æ•°è°ƒç”¨,é€’å½’,è¡¨è¾¾å¼æ±‚å€¼ç­‰ï¼ˆè€ƒè™‘ä¸€ä¸‹æ¸¸æˆä¸­uiç•Œé¢çš„è°ƒç”¨ï¼Œæ‰“å¼€å•†åŸé€‰æ‹©å•†å“ä¼šè¹¦å‡ºæ¥ä¸€ä¸ªâ€œç»“ç®—â€çš„å­ç•Œé¢ï¼Œæ­¤æ—¶ç©å®¶æŒ‰ä¸‹escï¼Œè¯¥å…³æ‰å“ªä¸ªå‘¢ï¼Ÿè‚¯å®šæ˜¯éµå®ˆå…ˆè¿›åå‡ºçš„åŸåˆ™å…ˆå…³æ‰ç»“ç®—ç•Œé¢å§ï¼Œè¿™å°±æ˜¯å †æ ˆçš„åº”ç”¨äº†ï¼‰<br>æ€è€ƒä¸€ä¸‹è®¡ç®—æœºè¡¨è¾¾å¼æ±‚å€¼çš„é—®é¢˜ï¼Œå¦‚å¯¹äºä»¥ä¸‹è¿™ä¸ªå¼å­</p><blockquote><p>5+6&#x2F;2-2*4</p></blockquote><p>æ­£ç¡®ç†è§£æ˜¯:</p><blockquote><p>5+3-2*4 &#x3D; 8-8 &#x3D; 0</p></blockquote><p>ç”±ä¸¤ç±»å¯¹è±¡æ„æˆçš„:</p><blockquote><p>è¿ç®—æ•°,å¦‚2,4,5<br>è¿ç®—ç¬¦å·,å¦‚+,-,*,&#x2F;</p></blockquote><p>ç”±äºä¸åŒè¿ç®—ç¬¦å·ä¼˜å…ˆçº§ä¸åŒï¼Œä½¿å¾—æ±‚è§£å˜å¾—è¾ƒä¸ºå¤æ‚ï¼Œè€Œå½’æ ¹ç»“åº•åŸå› æ˜¯æˆ‘ä»¬æŠŠè¡¨è¾¾å¼æŠŠè¿ç®—ç¬¦å·æ”¾åœ¨è¿ç®—æ•°ä¸­é—´<br>åè¿‡æ¥ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é‡åˆ°è¿ç®—ç¬¦å·æ—¶å·²ç»çŸ¥é“ä¸¤ä¸ªè¿ç®—æ•°äº†ï¼Œé‚£ä¹ˆå°±ç®€å•è®¸å¤šäº†å§ï¼Œè¿™ç§è¡¨ç¤ºå« <strong>åç¼€è¡¨è¾¾å¼</strong>ï¼Œåœ¨å¹³å¸¸æˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨çš„åä¸º <strong>ä¸­ç¼€è¡¨è¾¾å¼</strong><br><img src="http://cdn.zsenhe.com/610226c94973434290f3515be4a01524" alt="image.png"></p><blockquote><p>åç¼€è¡¨è¾¾å¼æ±‚å€¼ç­–ç•¥: <strong>ä»å·¦åˆ°å³æ‰«æï¼Œé€ä¸ªå¤„ç†è¿ç®—æ•°å’Œè¿ç®—ç¬¦å·</strong></p></blockquote><p>æŒ‰ç…§è¿™ç§ç­–ç•¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ•°æ®ç»“æ„æ¥æœ‰æ•ˆçš„ç»„ç»‡,è®°ä½è¿ç®—æ•°;å½“éœ€è¦è¿ç®—æ—¶èƒ½å–å¾—æœ€åä¸¤ä¸ªè®°ä½çš„è¿ç®—æ•°ã€‚<br>è¿™æ ·çš„æ•°æ®ç»“æ„æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå…ˆå­˜å…¥çš„åå–å‡ºï¼Œåå­˜å…¥çš„å…ˆå–å‡ºï¼Œè¿™å®é™…ä¸Šå°±æ˜¯ <strong>å †æ ˆ</strong><br>æ¯”å¦‚è¡¨è¾¾å¼</p><blockquote><p>6 2 &#x2F; 3 - 4 2 * +</p></blockquote><p>å®ƒçš„æ±‚å€¼è¿‡ç¨‹å¦‚å›¾<br><img src="http://cdn.zsenhe.com/yz89i-168n2.gif" alt="image.png"><br>å®ƒæ˜¯ä¸€ä¸ª<strong>å—çº¦æŸçš„çº¿æ€§è¡¨</strong>ï¼Œåªèƒ½åœ¨ä¸€ç«¯ï¼ˆæ ˆé¡¶ï¼‰è¿›è¡Œæ’å…¥ä¸åˆ é™¤ï¼Œæ’å…¥æˆ‘ä»¬ç§°ä¸º<strong>å…¥æ ˆ</strong>ï¼Œåˆ é™¤æ•°æ®ä¸º<strong>å‡ºæ ˆ</strong><br><img src="http://cdn.zsenhe.com/38559719ea2b42d6a01e239807059922" alt="image.png"><br>å †æ ˆçš„æ“ä½œæµç¨‹å›¾<br><img src="http://cdn.zsenhe.com/695b87c855c5422fb9e6b105e43155f8" alt="image.png"></p><h3 id="é¡ºåºå­˜å‚¨"><a href="#é¡ºåºå­˜å‚¨" class="headerlink" title="é¡ºåºå­˜å‚¨"></a>é¡ºåºå­˜å‚¨</h3><p>æ—¢ç„¶å®ƒæ˜¯çº¿æ€§è¡¨ï¼Œå¾ˆè‡ªç„¶è€Œç„¶çš„æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„æ¥å®ç°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXSIZE = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SNode</span> *<span class="title">Stack</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SNode</span>&#123;</span></span><br><span class="line"><span class="type">char</span> data[];</span><br><span class="line"><span class="type">int</span> top;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>topç”¨äºè®°å½•æ ˆé¡¶çš„ä½ç½®ï¼Œå®é™…ä¸Šä»£è¡¨äº†æ ˆé¡¶ä½ç½®çš„æ•°ç»„ä¸‹æ ‡</p><h4 id="æ’å…¥ä¸åˆ é™¤æ“ä½œ"><a href="#æ’å…¥ä¸åˆ é™¤æ“ä½œ" class="headerlink" title="æ’å…¥ä¸åˆ é™¤æ“ä½œ:"></a>æ’å…¥ä¸åˆ é™¤æ“ä½œ:</h4><p><strong>1.å…¥æ ˆ</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">push</span><span class="params">(Stack <span class="built_in">stack</span>,<span class="type">char</span> item)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">stack</span>-&gt;top==MAXSIZE<span class="number">-1</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;å †æ ˆæ»¡&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">stack</span>-&gt;data[++(<span class="built_in">stack</span>-&gt;top)] = item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2.å‡ºæ ˆ</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="title function_">pop</span><span class="params">(Stack <span class="built_in">stack</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">stack</span>-&gt;top==<span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">stack</span>-&gt;data[(<span class="built_in">stack</span>-&gt;top)--]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é“¾è¡¨å®ç°å †æ ˆ"><a href="#é“¾è¡¨å®ç°å †æ ˆ" class="headerlink" title="é“¾è¡¨å®ç°å †æ ˆ"></a>é“¾è¡¨å®ç°å †æ ˆ</h3><p>çº¿æ€§è¡¨å¯ä»¥ä½¿ç”¨é“¾è¡¨å®ç°ï¼Œå †æ ˆä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„çº¿æ€§è¡¨å½“ç„¶ä¹Ÿå¯ä»¥ï¼›æ ˆçš„é“¾å¼å­˜å‚¨ç»“æ„å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå•é“¾è¡¨ï¼Œå«åšé“¾æ ˆã€‚æ’å…¥å’Œåˆ é™¤æ“ä½œæŒ‡å—åœ¨é“¾æ ˆçš„æ ˆé¡¶è¿›è¡Œã€‚<br>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ ˆé¡¶æŒ‡é’ˆtopåº”è¯¥å®šä¹‰åœ¨é“¾è¡¨çš„å“ªä¸€å¤´å‘¢ï¼Ÿ<br>ç­”æ¡ˆå½“ç„¶æ˜¯å¤´ç»“ç‚¹ï¼Œåˆ«å¿˜è®°è¿™æ˜¯å•é“¾è¡¨ï¼Œæ— æ³•å¯»æ‰¾åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½“æˆ‘ä»¬ç”¨å°¾ç»“ç‚¹ä½œä¸ºtopæ—¶ï¼Œåˆ é™¤æ“ä½œæ˜¯æ— æ³•è¿›è¡Œçš„ï¼ˆåŒé“¾è¡¨å½“ç„¶å¯ä»¥ï¼Œä½†è¦ä¸ºæ­¤å¤šå†™ä¸€äº›ä»£ç ï¼Œå’Œåˆè¡·ä¸ç¬¦ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">SNode</span> *<span class="title">Stack</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SNode</span>&#123;</span></span><br><span class="line"><span class="type">char</span> data;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SNode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰CreateStackå‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ªç©ºçš„å †æ ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Stack <span class="title function_">createStack</span><span class="params">()</span>&#123;</span><br><span class="line">Stack s = (Stack)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> SNode));</span><br><span class="line">s-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“å½“å¤´èŠ‚ç‚¹nextæŒ‡å‘NULLæ—¶ä¸ºç©ºæ ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(Stack s)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> s-&gt;next==<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å…¥æ ˆæ“ä½œ"><a href="#å…¥æ ˆæ“ä½œ" class="headerlink" title="å…¥æ ˆæ“ä½œ"></a>å…¥æ ˆæ“ä½œ</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">push</span><span class="params">(<span class="type">char</span> item,Stack <span class="built_in">stack</span>)</span>&#123;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SNode</span> * <span class="title">tmpCell</span> =</span> (<span class="keyword">struct</span> SNode *) <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> SNode));</span><br><span class="line">tmpCell-&gt;data = item;</span><br><span class="line">tmpCell-&gt;next = <span class="built_in">stack</span>-&gt;next;</span><br><span class="line"><span class="built_in">stack</span>-&gt;next = tmpCell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‡ºæ ˆæ“ä½œ"><a href="#å‡ºæ ˆæ“ä½œ" class="headerlink" title="å‡ºæ ˆæ“ä½œ"></a>å‡ºæ ˆæ“ä½œ</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="title function_">pop</span><span class="params">(Stack <span class="built_in">stack</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(isEmpty(<span class="built_in">stack</span>))<span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SNode</span> * <span class="title">firstCell</span> =</span> <span class="built_in">stack</span>-&gt;next;</span><br><span class="line"><span class="built_in">stack</span>-&gt;next = firstCell-&gt;next;</span><br><span class="line"><span class="type">char</span> topItem = firstCell-&gt;data;</span><br><span class="line"><span class="built_in">free</span>(firstCell);</span><br><span class="line"><span class="keyword">return</span> topItem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯è¿›è¡Œ</p><blockquote><p>Stack stack &#x3D; createStack();<br>push(â€˜câ€™,stack);<br>push(â€˜aâ€™,stack);<br>cout &lt;&lt; pop(stack);</p></blockquote><p>æ“ä½œçš„é“¾è¡¨çŠ¶æ€è¿‡ç¨‹<br><img src="http://cdn.zsenhe.com/00b452f4eb5c4ec9b745f4cb2d8dece8" alt="image.png"><br>è¾“å‡ºç»“æœä¸º</p><blockquote><p>a</p></blockquote><h3 id="è¡¨è¾¾å¼é—®é¢˜"><a href="#è¡¨è¾¾å¼é—®é¢˜" class="headerlink" title="è¡¨è¾¾å¼é—®é¢˜"></a>è¡¨è¾¾å¼é—®é¢˜</h3><p>ç°åœ¨å›è¿‡å¤´æ¥çœ‹å‰é¢çš„è¡¨è¾¾å¼é—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°åç¼€è¡¨è¾¾å¼ï¼›ä½†æˆ‘ä»¬æ›´å…³å¿ƒçš„æ˜¯æˆ‘ä»¬æ›´å¸¸ä½¿ç”¨çš„ä¸­ç¼€è¡¨è¾¾å¼ï¼Œæ—¢ç„¶å‰è€…çš„è¿ç®—æ›´åŠ æ–¹ä¾¿ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•è¿›è¡Œè½¬æ¢å‘¢ï¼Ÿ<br>è§‚å¯Ÿä¸€ä¸ªç®€å•çš„ä¾‹å­: 2+9&#x2F;3-5 -&gt; <strong>2 9 3 &#x2F; + 5 -</strong><br>ä¸éš¾å‘ç°å¦‚ä¸‹å®šä¹‰çš„è§„åˆ™:</p><blockquote><p>1.è¿ç®—æ•°ç›¸å¯¹é¡ºåºä¸å˜<br>2.è¿ç®—ç¬¦å·é¡ºåºå‘ç”Ÿæ”¹å˜<br>  2.1 éœ€è¦å­˜å‚¨â€œç­‰å¾…â€ä¸­çš„è¿ç®—ç¬¦å·<br>  2.2 è¦å°†å½“å‰è¿ç®—ç¬¦å·ä¸â€œç­‰å¾…ä¸­â€çš„æœ€åä¸€ä¸ªè¿ç®—ç¬¦å·æ¯”è¾ƒ</p></blockquote><p>æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹:<br>ä»å·¦åˆ°å³æ‰«æè¿™ä¸ªè¡¨è¾¾å¼ï¼Œé‡åˆ°è¿ç®—æ•°æ—¶ç›´æ¥è¾“å‡ºï¼Œåœ¨ç¬¬äºŒæ¬¡æ‰«æç¢°åˆ°äº†+å·ï¼Œèƒ½ä¸èƒ½è¾“å‡ºå‘¢ï¼Ÿæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ï¼Œåé¢&#x2F;çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œé‚£ä¹ˆ+å…¥æ ˆï¼Œè¾“å‡º9ï¼Œæ­¤æ—¶è¾“å‡ºçš„ç»“æœ:</p><blockquote><p>2 9</p></blockquote><p>æ ˆä¸­çš„å…ƒç´ </p><blockquote><p>+</p></blockquote><p>ç»§ç»­æ‰«æï¼Œé‡åˆ°äº†â€œ&#x2F;â€œ ,èƒ½ä¸èƒ½è¾“å‡ºå‘¢ï¼Ÿæ­¤æ—¶éœ€è¦å’Œæ ˆé¡¶å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œ&#x2F;çš„ä¼˜å…ˆçº§æ¯”+é«˜ï¼Œæ— æ³•ä¿è¯æ˜¯å®‰å…¨çš„ï¼Œ&#x2F;å…¥æ ˆï¼Œè¾“å‡º3;æ­¤æ—¶æ ˆä¸­å…ƒç´ ä¸º</p><blockquote><p>&#x2F;<br>+</p></blockquote><p>æ¥ä¸‹æ¥ç¢°åˆ°äº†æœ€åä¸€ä¸ªè¿ç®—ç¬¦-ï¼Œå’Œæ ˆé¡¶å…ƒç´ å¯¹æ¯”ï¼Œ-çš„ä¼˜å…ˆçº§æ¯”&#x2F;ä½ï¼Œé‚£ä¹ˆå¯ä»¥å‡ºæ ˆäº†ï¼Œæ­¤æ—¶è¾“å‡ºç»“æœä¸º</p><blockquote><p>2 9  3 &#x2F;  +</p></blockquote><p>â€œ-â€å…¥æ ˆï¼Œæ‰«æå¹¶è¾“å‡ºæœ€åä¸€ä¸ªè¿ç®—æ•°5ï¼Œåˆ°å°¾äº†ï¼Œå°†æ ˆä¸­å…ƒç´ å…¨éƒ¨è¾“å‡ºã€‚<br>é‚£ä¹ˆä¸­ç¼€è¡¨è¾¾å¼ â€œ2+9&#x2F;3-5â€çš„åç¼€è¡¨è¾¾å¼ä¸º:</p><blockquote><p>2 9 3 &#x2F; + 5 -</p></blockquote><p><strong>æœ‰æ‹¬å·æ€ä¹ˆåŠï¼Ÿ</strong><br>æ¯”å¦‚å¯¹äºè¡¨è¾¾å¼ *<em>a</em>(b+c)&#x2F;d **,å‡ºç°äº†æ‹¬å·ï¼Œè¯¥è¿™ä¹ˆè¿›è¡Œè½¬æ¢å‘¢;åŸºæœ¬ç­–ç•¥è·Ÿæ— æ‹¬å·æ—¶ä¸€æ ·ï¼Œä½†è¦è®°ä½:<br>å¯¹äºå·¦æ‹¬å·â€(â€œ åœ¨æ ˆå¤–æ—¶ä¼˜å…ˆçº§é«˜äºä»»æ„è¿ç®—ç¬¦ï¼Œåœ¨æ ˆå†…æ—¶ä¼˜å…ˆçº§æœ€ä½;æ‰«æè¿‡ç¨‹ä¸­é‡åˆ°å³æ‹¬å·â€)â€æ—¶,<br>å–å‡ºæ ˆå†…â€)â€ä»¥ä¸Šçš„æ‰€æœ‰å…ƒç´ <br>æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·çš„æµç¨‹:<br><img src="http://cdn.zsenhe.com/4fe18561d5ea4db0ba2148a810140b95" alt="image.png"><br>å¯ä»¥çœ‹åˆ°ï¼Œä¸ºäº†è¿›è¡Œæ–¹ä¾¿çš„è½¬æ¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§ç»“æ„æ¥æŒ‰é¡ºåºä¿ç•™è¿ç®—ç¬¦å·ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å–å‡ºï¼Œå½“ç„¶å°±æ˜¯ **å †æ ˆ **äº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ€§è¡¨çš„å®ç°ä¸å¤šé¡¹å¼è¡¨ç¤º</title>
      <link href="/2023/01/28/%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%A4%9A%E9%A1%B9%E5%BC%8F%E8%A1%A8%E7%A4%BA/"/>
      <url>/2023/01/28/%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%A4%9A%E9%A1%B9%E5%BC%8F%E8%A1%A8%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<p><strong>&lt;çº¿æ€§ç»“æ„&gt;ç¬”è®°ç›®å½•</strong></p><blockquote><p>çº¿æ€§è¡¨çš„å®ç°ä¸å¤šé¡¹å¼è¡¨ç¤º <a href="http://www.zsenhe.com/article/83">http://www.zsenhe.com/article/83</a><br>å †æ ˆä¸è¡¨è¾¾å¼æ±‚å€¼é—®é¢˜ <a href="http://www.zsenhe.com/article/84">http://www.zsenhe.com/article/84</a><br>é˜Ÿåˆ—ï¼Œé¡ºç¯é˜Ÿåˆ— <a href="http://www.zsenhe.com/article/85">http://www.zsenhe.com/article/85</a></p></blockquote><h2 id="å¼•å­â€”â€”å¤šé¡¹å¼è¡¨ç¤º"><a href="#å¼•å­â€”â€”å¤šé¡¹å¼è¡¨ç¤º" class="headerlink" title="å¼•å­â€”â€”å¤šé¡¹å¼è¡¨ç¤º"></a>å¼•å­â€”â€”å¤šé¡¹å¼è¡¨ç¤º</h2><p>çº¿æ€§ç»“æ„æ˜¯æ•°æ®ç»“æ„é‡Œæœ€åŸºç¡€ï¼Œæœ€ç®€å•çš„ä¸€ç§ç±»å‹;å…¶ä¸­æœ€å…¸å‹çš„ä¾¿æ˜¯â€œçº¿æ€§è¡¨â€ï¼Œä»€ä¹ˆæ˜¯çº¿æ€§è¡¨å‘¢?<br>è€ƒè™‘ä¸€ä¸‹ä¸€å…ƒå¤šé¡¹å¼çš„è¡¨ç¤º:<br><img src="http://cdn.zsenhe.com/9ec731363bc942fba6a04af8a4641e68" alt="image.png"><br>è¿™æ ·çš„å¤šé¡¹å¼åŸºæœ¬è¿ç®—åŒ…æ‹¬: ä¸¤ä¸ªå¤šé¡¹å¼ç›¸åŠ ï¼Œç›¸ä¹˜ï¼Œç›¸å‡ç­‰;é‚£ä¹ˆï¼Œæ€ä¹ˆç”¨ç¨‹åºè®¾è®¡è¯­è¨€æ¥è¡¨ç¤ºè¿™æ ·ä¸€ä¸ªå¤šé¡¹å¼åŠè¿ç®—å‘¢?åœ¨ç¨‹åºè®¾è®¡è¯­è¨€é‡Œé¢ï¼Œè¦è¡¨ç¤ºä¸€ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦åˆ†æä¸€ä¸‹é—®é¢˜çš„å…³é”®æ•°æ®å’Œå…³é”®ä¿¡æ¯;å¯¹äºå¤šé¡¹å¼è€Œè¨€ï¼Œå®ƒçš„å…³é”®ä¿¡æ¯ä¸»è¦æœ‰å®ƒçš„é¡¹æ•°å’Œæœ€é«˜æŒ‡æ•°ã€‚<br>å…¶ä¸­ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•ä¾¿æ˜¯ <strong>é¡ºåºå­˜å‚¨çš„ç›´æ¥è¡¨ç¤º</strong><br>ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥è¡¨ç¤ºå¤šé¡¹å¼çš„æœ‰å…³ä¿¡æ¯ï¼Œæ•°ç»„å„åˆ†é‡å¯¹åº”å¤šé¡¹å¼å„é¡¹</p><blockquote><p>a[i] é¡¹ x^i çš„ç³»æ•°;iä¸ºå¯¹åº”çš„æŒ‡æ•°</p></blockquote><h2 id="æ¯”æ–¹å¯¹äºä¸‹é¢è¿™ä¸ªå¤šé¡¹å¼-è¡¨ç¤ºä¸º-è¿™æ ·ç”¨6ä¸ªåˆ†é‡æ¥è¡¨ç¤ºè¯¥å¤šé¡¹å¼-è¿™æ ·çš„è¡¨ç¤ºæ˜¯å¾ˆç®€å•çš„ï¼Œä¸”è¿ç®—ä¹Ÿæ–¹ä¾¿å¦‚å¯¹äºä¸¤ä¸ªå¤šé¡¹å¼çš„ç›¸åŠ ï¼Œå³å˜æˆäº†-ä¸¤ä¸ªæ•°ç»„å¯¹åº”åˆ†é‡çš„ç›¸åŠ ä½†è¯¥è¡¨ç¤ºæ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœæˆ‘ä»¬è¦å­˜å‚¨é‚£ä¹ˆéœ€è¦2001é•¿åº¦çš„æ•°ç»„æ¥è¡¨ç¤ºï¼Œè€Œè¿™2001ä¸ªåˆ†é‡ï¼Œåªæœ‰ä¸¤é¡¹æ˜¯é0çš„ï¼Œäºæ˜¯ä¾¿é€ æˆäº†å·¨å¤§çš„ç©ºé—´æµªè´¹-ä¸”è¿ç®—çš„æ—¶å€™ä¼šå¤šä¸€äº›æ²¡å¿…è¦çš„æ“ä½œï¼ˆå¤§é‡çš„-0ï¼‰"><a href="#æ¯”æ–¹å¯¹äºä¸‹é¢è¿™ä¸ªå¤šé¡¹å¼-è¡¨ç¤ºä¸º-è¿™æ ·ç”¨6ä¸ªåˆ†é‡æ¥è¡¨ç¤ºè¯¥å¤šé¡¹å¼-è¿™æ ·çš„è¡¨ç¤ºæ˜¯å¾ˆç®€å•çš„ï¼Œä¸”è¿ç®—ä¹Ÿæ–¹ä¾¿å¦‚å¯¹äºä¸¤ä¸ªå¤šé¡¹å¼çš„ç›¸åŠ ï¼Œå³å˜æˆäº†-ä¸¤ä¸ªæ•°ç»„å¯¹åº”åˆ†é‡çš„ç›¸åŠ ä½†è¯¥è¡¨ç¤ºæ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœæˆ‘ä»¬è¦å­˜å‚¨é‚£ä¹ˆéœ€è¦2001é•¿åº¦çš„æ•°ç»„æ¥è¡¨ç¤ºï¼Œè€Œè¿™2001ä¸ªåˆ†é‡ï¼Œåªæœ‰ä¸¤é¡¹æ˜¯é0çš„ï¼Œäºæ˜¯ä¾¿é€ æˆäº†å·¨å¤§çš„ç©ºé—´æµªè´¹-ä¸”è¿ç®—çš„æ—¶å€™ä¼šå¤šä¸€äº›æ²¡å¿…è¦çš„æ“ä½œï¼ˆå¤§é‡çš„-0ï¼‰" class="headerlink" title="æ¯”æ–¹å¯¹äºä¸‹é¢è¿™ä¸ªå¤šé¡¹å¼:è¡¨ç¤ºä¸º:è¿™æ ·ç”¨6ä¸ªåˆ†é‡æ¥è¡¨ç¤ºè¯¥å¤šé¡¹å¼;è¿™æ ·çš„è¡¨ç¤ºæ˜¯å¾ˆç®€å•çš„ï¼Œä¸”è¿ç®—ä¹Ÿæ–¹ä¾¿å¦‚å¯¹äºä¸¤ä¸ªå¤šé¡¹å¼çš„ç›¸åŠ ï¼Œå³å˜æˆäº† ä¸¤ä¸ªæ•°ç»„å¯¹åº”åˆ†é‡çš„ç›¸åŠ ä½†è¯¥è¡¨ç¤ºæ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœæˆ‘ä»¬è¦å­˜å‚¨é‚£ä¹ˆéœ€è¦2001é•¿åº¦çš„æ•°ç»„æ¥è¡¨ç¤ºï¼Œè€Œè¿™2001ä¸ªåˆ†é‡ï¼Œåªæœ‰ä¸¤é¡¹æ˜¯é0çš„ï¼Œäºæ˜¯ä¾¿é€ æˆäº†å·¨å¤§çš„ç©ºé—´æµªè´¹;ä¸”è¿ç®—çš„æ—¶å€™ä¼šå¤šä¸€äº›æ²¡å¿…è¦çš„æ“ä½œï¼ˆå¤§é‡çš„+0ï¼‰"></a>æ¯”æ–¹å¯¹äºä¸‹é¢è¿™ä¸ªå¤šé¡¹å¼:<br><img src="http://cdn.zsenhe.com/36d1f3426b6b49fc95c27714b6a08de2" alt="image.png"><br>è¡¨ç¤ºä¸º:<br><img src="http://cdn.zsenhe.com/bfc44aec03804d0dae820ad42fe3ba7e" alt="image.png"><br>è¿™æ ·ç”¨6ä¸ªåˆ†é‡æ¥è¡¨ç¤ºè¯¥å¤šé¡¹å¼;è¿™æ ·çš„è¡¨ç¤ºæ˜¯å¾ˆç®€å•çš„ï¼Œä¸”è¿ç®—ä¹Ÿæ–¹ä¾¿<br>å¦‚å¯¹äºä¸¤ä¸ªå¤šé¡¹å¼çš„ç›¸åŠ ï¼Œå³å˜æˆäº† <strong>ä¸¤ä¸ªæ•°ç»„å¯¹åº”åˆ†é‡çš„ç›¸åŠ </strong><br>ä½†è¯¥è¡¨ç¤ºæ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœæˆ‘ä»¬è¦å­˜å‚¨<br><img src="http://cdn.zsenhe.com/QQ%E5%9B%BE%E7%89%8720230129004327.jpg" alt="http://cdn.zsenhe.com/QQ%E5%9B%BE%E7%89%8720230129004327.jpg"><br>é‚£ä¹ˆéœ€è¦2001é•¿åº¦çš„æ•°ç»„æ¥è¡¨ç¤ºï¼Œè€Œè¿™2001ä¸ªåˆ†é‡ï¼Œåªæœ‰ä¸¤é¡¹æ˜¯é0çš„ï¼Œäºæ˜¯ä¾¿é€ æˆäº†å·¨å¤§çš„ç©ºé—´æµªè´¹;ä¸”è¿ç®—çš„æ—¶å€™ä¼šå¤šä¸€äº›æ²¡å¿…è¦çš„æ“ä½œï¼ˆå¤§é‡çš„+0ï¼‰</h2><p>æœ‰æ²¡æœ‰å¯èƒ½åªè¡¨ç¤ºé0é¡¹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†å¤šé¡¹å¼çœ‹æˆä¸€ä¸ªç”± <strong>ç³»æ•°å’ŒæŒ‡æ•°</strong> ç»„æˆçš„äºŒå…ƒç»„é›†åˆï¼Œä½¿ç”¨ç»“æ„æ•°ç»„æ¥è¡¨ç¤ºè¿™æ ·çš„å¤šé¡¹å¼<br><img src="http://cdn.zsenhe.com/d8d5a0867b14463b9230d49d140a6c00" alt="image.png"><br>å¯¹äºå‰é¢çš„x+2x^2000,åªéœ€è¦ä½¿ç”¨ä¸¤ä¸ªåˆ†é‡æ¥å­˜å‚¨;ä¸”åŒæ ·è¿ç®—å¾ˆæ–¹ä¾¿ï¼Œå…¶ä¸­è¦ç‚¹æ˜¯æ¯ä¸€é¡¹æŒ‰æŒ‡æ•°å¤§å°é™åºå­˜å‚¨<br>ä¾‹å¦‚åŠ æ³•è¿ç®—ï¼Œå›¾ä¸­çš„ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œä»–ä»¬ç”¨åˆ†é‡è¡¨ç¤ºä¸º<br>p1:</p><blockquote><p>(9,12) (15,8) (3,2)</p></blockquote><p>p2:</p><blockquote><p>(26,19) (-4,8) (-13,6) (82,0)</p></blockquote><p>ä»å¤´å¼€å§‹ï¼Œæ¯”è¾ƒä¸¤ä¸ªå¤šé¡¹å¼å½“å‰æŒ‡æ•°è¾ƒå¤§çš„é‚£ä¸€é¡¹ï¼Œä¾‹å¦‚ç¬¬ä¸€é¡¹é€‰æ‹© (9,12) ä¸(26,19),å‰é¢æè¿‡æˆ‘ä»¬éœ€è¦æŒ‰ç…§æŒ‡æ•°å¤§å°é™åºæ’æ”¾ï¼Œé‚£ä¹ˆé€‰æ‹©è¾ƒå¤§é‚£ä¸€é¡¹è¾“å‡º(26,19),æ¥ä¸‹æ¥(9,12)ä¸(-4,8)æ¯”è¾ƒï¼Œæ˜¾ç„¶è¾“å‡ºï¼ˆ9,12) ;æ¥ä¸‹æ¥æ¯”è¾ƒçš„ä¸¤ä¸ªåˆ†é‡æŒ‡æ•°ç›¸åŒï¼Œç³»æ•°ç›¸å‡ï¼Œè¾“å‡ºå’Œï¼ˆ11,8ï¼‰ï¼Œæ¥ä¸‹æ¥çš„æ¯”è¾ƒè¾“å‡º(-13,6) (3,2);æœ€åæ˜¯p2çš„å‰©ä½™é¡¹(82,0)<br>æœ€åå¾—åˆ°æ–°çš„å¤šé¡¹å¼<br><img src="http://cdn.zsenhe.com/359ed7388c784507905677e02c005bc4" alt="image.png"><br>å¯¹æ¯”ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»“æ„ä½“çš„å½¢å¼å­˜å‚¨åœ¨æ•°ç»„ä¸­è¡¨ç¤ºé0é¡¹ï¼Œè¿™æ˜¯ä¸€ç§èŠ‚çœç©ºé—´çš„æ–¹æ³•<br>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ç§å…¶ä»–å½¢å¼å­˜å‚¨å¤šé¡¹å¼ <strong>é“¾è¡¨</strong><br>å®ƒçš„è¡¨ç¤ºæ–¹æ³•ä¸º: æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨å¤šé¡¹å¼ä¸­çš„ä¸€ä¸ªé0é¡¹ï¼ŒåŒ…æ‹¬ç³»æ•°å’ŒæŒ‡æ•°ä¸¤ä¸ªæ•°æ®åŸŸä»¥åŠä¸€ä¸ªæŒ‡é’ˆåŸŸ<br><img src="http://cdn.zsenhe.com/8f30601630374b568f2d66dfd35c283d" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">typedef struct PolyNode *Polynomial;</span><br><span class="line">struct PolyNode &#123;</span><br><span class="line">  int coef; //ç³»æ•°</span><br><span class="line">  int expon; //æŒ‡æ•°</span><br><span class="line">  Polynomial link; //æŒ‡å‘ä¸‹ä¸€é¡¹</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰é¢çš„ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œä»–ä»¬ä»¥é“¾è¡¨çš„å½¢å¼å­˜å‚¨çŠ¶æ€ä¸ºï¼š<br><img src="http://cdn.zsenhe.com/7eda2ff118144c53842f5fd16d50c231" alt="image.png"><br>è¿ç®—çš„é€»è¾‘è¿‡ç¨‹ä¸æ•°ç»„è¡¨ç°çš„å½¢å¼ä¸€æ ·</p><h2 id="çº¿æ€§è¡¨"><a href="#çº¿æ€§è¡¨" class="headerlink" title="çº¿æ€§è¡¨"></a>çº¿æ€§è¡¨</h2><p>ç”±å¤šé¡¹å¼çš„é—®é¢˜å¾—çŸ¥: åŒä¸€ä¸ªé—®é¢˜å¯ä»¥æœ‰ä¸åŒçš„è¡¨ç°æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„å­˜å‚¨æ–¹æ³•ï¼›å¯¹äºå¤šé¡¹å¼çš„è¡¨ç¤ºï¼Œè¦ä¹ˆä½¿ç”¨æ•°ç»„è¦ä¹ˆä½¿ç”¨é“¾è¡¨ã€‚å®é™…ä¸Šå¾ˆå¤šé—®é¢˜ä¸å¤šé¡¹å¼è¡¨ç¤ºæ˜¯æœ‰å…±æ€§çš„ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡éƒ½æ˜¯ï¼š<strong>ç®¡ç†ï¼Œç»„ç»‡ä¸€ä¸ªæœ‰åºçš„çº¿æ€§åºåˆ—ï¼Œå½’ç»“ä¸ºçº¿æ€§è¡¨é—®é¢˜</strong></p><h3 id="ä»€ä¹ˆæ˜¯çº¿æ€§è¡¨"><a href="#ä»€ä¹ˆæ˜¯çº¿æ€§è¡¨" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿æ€§è¡¨?"></a>ä»€ä¹ˆæ˜¯çº¿æ€§è¡¨?</h3><blockquote><p>ç”±åŒç±»å‹æ•°æ®å…ƒç´ æ„æˆæœ‰åºåºåˆ—çš„çº¿æ€§ç»“æ„:<br>è¡¨ä¸­å…ƒç´ ä¸ªæ•°ç§°ä¸ºçº¿æ€§è¡¨çš„ <strong>é•¿åº¦</strong><br>çº¿æ€§è¡¨æ²¡æœ‰å…ƒç´ æ—¶ç§°ä¸º <strong>ç©ºè¡¨</strong><br>è¡¨èµ·å§‹ä½ç½®ç§° <strong>è¡¨å¤´</strong>ï¼Œè¡¨ç»“æŸä½ç½®ç§° <strong>è¡¨å°¾</strong></p></blockquote><p>å¯¹çº¿æ€§è¡¨æ¥è¯´ï¼Œå®ƒçš„æŠ½è±¡æ•°æ®ç±»å‹æè¿°ä¸º:<br><img src="http://cdn.zsenhe.com/5c3aac5a926346f6bc156a613f393b81" alt="image.png"></p><h3 id="çº¿æ€§è¡¨çš„å­˜å‚¨"><a href="#çº¿æ€§è¡¨çš„å­˜å‚¨" class="headerlink" title="çº¿æ€§è¡¨çš„å­˜å‚¨"></a>çº¿æ€§è¡¨çš„å­˜å‚¨</h3><p>å­¦ä¹ æ•°æ®ç»“æ„æ—¶æˆ‘ä»¬æœ€å…³å¿ƒçš„æ˜¯å®ƒçš„å­˜å‚¨ï¼Œå¯¹äºçº¿æ€§è¡¨çš„å­˜å‚¨å…¶ä¸­æœ€ç®€å•çš„ä¸€ç§æ–¹å¼ä¾¿æ˜¯é¡ºåºå­˜å‚¨ï¼Œå³ä½¿ç”¨æ•°ç»„çš„æ–¹æ³•å®ç°<br><img src="http://cdn.zsenhe.com/5ea7f1ca13bb43589b4b7631976076fa" alt="image.png"><br>è¿™ç§æ–¹å¼éœ€è¦å…³å¿ƒçš„æ˜¯çº¿æ€§è¡¨çš„ <strong>æ•°æ®ç±»å‹</strong> ä»¥åŠ <strong>é•¿åº¦</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line">    ElementType data[MAXSIZE];</span><br><span class="line">    <span class="type">int</span> last;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> <span class="title">L</span>;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æŒ‡é’ˆ<strong>last</strong>ä»£è¡¨çº¿æ€§è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ,è®¿é—®é•¿åº¦æ—¶æ‰§è¡Œ <strong>L.last+1</strong><br>è¿™æ ·çš„ç»“æ„å°±å¯ä»¥æŠ½è±¡çš„å®ç°çº¿æ€§è¡¨,æ¯”å¦‚è¯´å½“æƒ³è¦è®¿é—®ä¸‹æ ‡ä¸ºiçš„å…ƒç´ æ—¶ä½¿ç”¨ <strong>L.Data[i]</strong></p><h3 id="ä¸»è¦æ“ä½œçš„å®ç°"><a href="#ä¸»è¦æ“ä½œçš„å®ç°" class="headerlink" title="ä¸»è¦æ“ä½œçš„å®ç°"></a>ä¸»è¦æ“ä½œçš„å®ç°</h3><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨æŒ‡é’ˆæ¥ä¼ é€’çº¿æ€§è¡¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXSIZE = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line">  <span class="type">char</span> data[MAXSIZE];</span><br><span class="line">  <span class="type">int</span> last;</span><br><span class="line">&#125;;<span class="keyword">typedef</span> LNode *List;</span><br></pre></td></tr></table></figure><p><strong>1.åˆå§‹åŒ–æ“ä½œ</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List <span class="title function_">MakeEmpty</span><span class="params">()</span>&#123;</span><br><span class="line">  List Ptrl;</span><br><span class="line">  Ptrl = (List )<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line">  Ptrl-&gt;last = <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">return</span> Ptrl;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆå§‹åŒ–æ—¶è¡¨é•¿åº¦ä¸º-1ï¼Œå³è¡¨ç¤ºæ•°ç»„é•¿åº¦ä¸º0<br><strong>2.æŸ¥æ‰¾æ“ä½œ</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">Find</span><span class="params">(<span class="type">char</span> x,List Ptrl)</span>&#123;</span><br><span class="line">  <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(i&lt;=Ptrl-&gt;last&amp;&amp;Ptrl-&gt;data[i]!=x) i++;</span><br><span class="line">  <span class="keyword">if</span>(i&gt;Ptrl-&gt;last) <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">//æœªå¯»æ‰¾åˆ°</span></span><br><span class="line">  <span class="keyword">return</span> i; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»0å¼€å§‹éå†è¡¨ï¼Œå½“whileå¾ªç¯é€€å‡ºæ—¶ï¼Œè¦ä¹ˆi&#x3D;&#x3D;ptrl-&gt;last+1è¦ä¹ˆdata[i]&#x3D;xï¼Œè¿™ä¸¤ç§æƒ…å†µåˆ†åˆ«å¯¹åº”ç€ <strong>æœªå¯»æ‰¾åˆ°å…ƒç´ </strong> å’Œ <strong>æ‰¾åˆ°å…ƒç´ </strong> å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¾ç„¶ä¸º<strong>O(n)</strong><br><strong>3.æ’å…¥</strong><br>æ’å…¥çš„ç›®çš„æ˜¯åœ¨çº¿æ€§è¡¨çš„ç¬¬iä¸ªä½ç½®ä¸Šæ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œä¼ å…¥çš„iæŒ‡çš„æ˜¯[1,last+1] (1å³æ˜¯è¡¨å¤´ï¼Œlast+1è¡¨å°¾);æ‰€ä»¥å®é™…ä¸Šæˆ‘ä»¬è¦æŠŠå…ƒç´ æ’å…¥åˆ°i-1çš„ä½ç½®ä¸Š<br><img src="http://cdn.zsenhe.com/b3454f8a7bdd4197b64f5b4b4fb40a06" alt="image.png"><br>é‚£ä¹ˆé¦–å…ˆè¦åšçš„å°±æ˜¯æŠŠi-1ä¹‹åçš„æ‰€æœ‰å…ƒç´ å¾€åæŒªåŠ¨ä¸€ä½ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå¾ªç¯æ¥åšè¿™ä»¶äº‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Insert</span><span class="params">(<span class="type">char</span> x,<span class="type">int</span> i,List Ptrl)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(Ptrl-&gt;last==MAXSIZE<span class="number">-1</span>)&#123;</span><br><span class="line">    <span class="comment">//è¡¨ç©ºé—´å·²æ»¡ï¼Œæ— æ³•æ’å…¥</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;full&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;Ptrl-&gt;last+<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ä½ç½®ä¸åˆæ³•&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> j=Ptrl-&gt;last;j&gt;=i<span class="number">-1</span>;j--) <span class="comment">//ä»å³å¼€å§‹æŒªåŠ¨å…ƒç´ </span></span><br><span class="line">    Ptrl-&gt;data[j+<span class="number">1</span>] = Ptrl-&gt;data[j];</span><br><span class="line">  Ptrl-&gt;data[i<span class="number">-1</span>] = x; <span class="comment">//æ’å…¥æ–°å…ƒç´ x</span></span><br><span class="line">  Ptrl-&gt;last++; <span class="comment">//lastä»æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>è¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯O(n)<br><strong>4.åˆ é™¤å…ƒç´ </strong><br>æˆ‘ä»¬è¦æŠŠç¬¬i-1ä¸ªå…ƒç´ ç§»å‡ºï¼Œé‚£ä¹ˆå®é™…ä¸Šè¦åšçš„æŠŠiåŠä¹‹åçš„å…ƒç´ å…¨éƒ¨å¾€å‰æŒªï¼Œè¿™ä¸ªè¿‡ç¨‹æŒ‰ä»å·¦å¾€å³çš„é¡ºåºåš</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Delete</span><span class="params">(<span class="type">int</span> i,List Ptrl)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;Ptrl-&gt;last+<span class="number">1</span>) <span class="keyword">return</span>; <span class="comment">//åˆ¤æ–­ä½ç½®æ˜¯å¦åˆæ³• </span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=Ptrl-&gt;last;j++) </span><br><span class="line">    Ptrl-&gt;data[j<span class="number">-1</span>] = Ptrl-&gt;data[j];</span><br><span class="line">  Ptrl-&gt;last--; </span><br><span class="line">  <span class="keyword">return</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é“¾å¼å­˜å‚¨"><a href="#é“¾å¼å­˜å‚¨" class="headerlink" title="é“¾å¼å­˜å‚¨"></a>é“¾å¼å­˜å‚¨</h3><p>çº¿æ€§è¡¨é™¤äº†ç”¨æ•°ç»„å®ç°ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨é“¾è¡¨æ¥ç»„ç»‡<br>çº¿æ€§è¡¨ä½¿ç”¨æ•°ç»„å®ç°æ—¶ï¼Œä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ä¸æ­¢é€»è¾‘ä¸Šæ˜¯ç›¸é‚»çš„ï¼Œåœ¨ç‰©ç†ä¸Šä¹Ÿæ˜¯ç›¸é‚»çš„ï¼ˆæ•°ç»„åœ¨å†…å­˜ä¸­ä¹Ÿæ˜¯è¿ç»­å­˜æ”¾çš„ä¸€ç‰‡ç©ºé—´ï¼‰ï¼›è€Œæˆ‘ä»¬ä½¿ç”¨é“¾è¡¨å®ç°æ—¶ï¼Œå®é™…ä¸Šæ˜¯<strong>è¦æ±‚ä¸¤ä¸ªå…ƒç´ åªåœ¨é€»è¾‘ä¸Šç›¸é‚»ï¼ˆé€šè¿‡â€œé“¾â€å»ºç«‹ï¼‰ï¼Œè€Œä¸è¦æ±‚ç‰©ç†ä¸Šç›¸é‚»</strong><br>è¿™æ ·çš„å¥½å¤„æ˜¯è¿›è¡Œæ’å…¥ï¼Œåˆ é™¤æ“ä½œæ—¶ï¼Œåªéœ€è¦ä¿®æ”¹â€œé“¾â€çš„æŒ‡å‘ï¼Œè€Œä¸éœ€è¦åƒæ•°ç»„å®ç°é‚£æ ·ç§»åŠ¨æ•´ä¸ªç©ºé—´ï¼Œè¿™ä¼šèŠ‚çœå¾ˆå¤šæ—¶é—´<br><img src="http://cdn.zsenhe.com/2e646ffaa2cf488691b0d5da3d8dcb81" alt="image.png"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">List</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line"><span class="type">char</span> data;</span><br><span class="line">List next;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ï¼Œé“¾è¡¨ä¸­æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰ä¸¤ä¸ªåˆ†é‡ï¼ŒDataæ˜¯èŠ‚ç‚¹æ‰€å¯¹åº”çš„æ•°æ®ï¼ŒNextæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p><h4 id="è®¿é—®åºå·ä¸ºiçš„å…ƒç´ -æ±‚çº¿æ€§è¡¨çš„é•¿åº¦ï¼Ÿ"><a href="#è®¿é—®åºå·ä¸ºiçš„å…ƒç´ -æ±‚çº¿æ€§è¡¨çš„é•¿åº¦ï¼Ÿ" class="headerlink" title="è®¿é—®åºå·ä¸ºiçš„å…ƒç´ ?æ±‚çº¿æ€§è¡¨çš„é•¿åº¦ï¼Ÿ"></a>è®¿é—®åºå·ä¸ºiçš„å…ƒç´ ?æ±‚çº¿æ€§è¡¨çš„é•¿åº¦ï¼Ÿ</h4><p>ä¸Šæ–‡æåˆ°é“¾å®ç°çº¿æ€§è¡¨åœ¨æ’å…¥åˆ é™¤æ–¹é¢æœ‰ç€æ•°ç»„æ— å¯æ¯”æ‹Ÿçš„é«˜æ•ˆ,é‚£é™¤æ­¤ä¹‹å¤–å‘¢?åœ¨æ•°ç»„å®ç°ä¸­è®¿é—®åºå·ä¸ºiçš„å…ƒç´ æ˜¯å¾ˆç®€å•çš„äº‹ï¼Œç›´æ¥ElelementType[i-1]å³å¯;åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å–lastæ¥çŸ¥é“çº¿æ€§è¡¨çš„é•¿åº¦.ä½†åœ¨é“¾è¡¨ä¸­ï¼Œè¿™ä¸¤ä¸ªæ“ä½œæ¯”èµ·æ•°ç»„å®ç°å°±å¤æ‚äº†è®¸å¤š<br><strong>æ±‚è¡¨é•¿</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">length</span><span class="params">(List ptrl)</span>&#123;</span><br><span class="line">  List p = ptrl; <span class="comment">//æŒ‡å‘é“¾è¡¨å¤´ç»“ç‚¹ </span></span><br><span class="line">  <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(p)&#123; <span class="comment">//å½“nextæŒ‡å‘nullæ—¶é€€å‡ºå¾ªç¯ï¼ˆä»£è¡¨å·²ç»èµ°åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹  äº† </span></span><br><span class="line">  p = p-&gt;next;</span><br><span class="line">  j++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºéœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n);åœ¨æ•°ç»„å®ç°ä¸­è¯¥æ“ä½œæ˜¯O(1)çš„<br><strong>æŒ‰åºå·è®¿é—®èŠ‚ç‚¹</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List <span class="title function_">findKth</span><span class="params">(<span class="type">int</span> k,List ptrl)</span>&#123;</span><br><span class="line">List p = ptrl; <span class="comment">//æŒ‡å‘å¤´ç»“ç‚¹ </span></span><br><span class="line"><span class="type">int</span> i=<span class="number">1</span>;  </span><br><span class="line"><span class="keyword">while</span>(!p&amp;&amp;i&lt;k)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==k) <span class="keyword">return</span> p; <span class="comment">//pä¸ä¸ºnullæ„å‘³ç€æ‰¾åˆ°äº†è¿™ä¸ªèŠ‚ç‚¹ </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“whileå¾ªç¯é€€å‡ºæ—¶ï¼Œæ„å‘³ç€!pæˆ–è€…i&lt;kè¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€è¢«ç ´åäº†ï¼Œå½“pä¸ä¸ºnullæ—¶ï¼Œå³æ‰¾åˆ°äº†ç›®æ ‡èŠ‚ç‚¹<br><strong>æŒ‰å€¼æŸ¥æ‰¾</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List <span class="title function_">findKth0</span><span class="params">(<span class="type">char</span> target,List ptrl)</span>&#123;</span><br><span class="line">List p = ptrl;</span><br><span class="line"><span class="keyword">while</span>(!p&amp;&amp;p-&gt;data!=target) p = p-&gt;next;</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ’å…¥ä¸åˆ é™¤"><a href="#æ’å…¥ä¸åˆ é™¤" class="headerlink" title="æ’å…¥ä¸åˆ é™¤"></a>æ’å…¥ä¸åˆ é™¤</h4><p><strong>æ’å…¥</strong><br>å°†æ•°æ®æ’å…¥åˆ°içš„ä½ç½®ä¸Šï¼Œæ„å‘³ç€æˆ‘ä»¬è¦å°†æ•°æ®æ’å…¥åˆ°i-1çš„åé¢ï¼Œä¸ºäº†å®Œæˆè¿™ä¸ªæ“ä½œ<br>æˆ‘ä»¬éœ€è¦è¿›è¡Œä»¥ä¸‹å‡ ä¸ªæ­¥éª¤çš„æ“ä½œ</p><blockquote><p>1.ç”³è¯·ä¸€ç‰‡æ–°çš„å†…å­˜ï¼Œä½¿ç”¨sæŒ‡å‘å®ƒ<br>2.æ‰¾åˆ°é“¾è¡¨çš„i-1ä¸ªèŠ‚ç‚¹ï¼Œä½¿ç”¨pæŒ‡å‘<br>3.ä¿®æ”¹æŒ‡é’ˆï¼Œæ’å…¥èŠ‚ç‚¹<br><img src="http://cdn.zsenhe.com/483d2237a9c34fcebce096079b166d8b" alt="image.png"><br>ä¿®æ”¹æŒ‡é’ˆçš„åŠ¨ä½œæœ‰ä¸¤æ­¥ï¼Œå°†s-&gt;nextæŒ‡å‘p-&gt;next,å†å°†p-&gt;nextæŒ‡å‘s(æ³¨æ„ä¸è¦æå)</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">List <span class="title function_">insert</span><span class="params">(<span class="type">char</span> x,<span class="type">int</span> i,List ptrl)</span>&#123;</span><br><span class="line">List p,s;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">s = (List)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line">s-&gt;data = x;</span><br><span class="line">s-&gt;next = ptrl;</span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line">p = findKth(i<span class="number">-1</span>,ptrl);</span><br><span class="line"><span class="keyword">if</span>(p==<span class="literal">NULL</span>)&#123;</span><br><span class="line"><span class="comment">//ç¬¬i-1ä¸ªèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">s = (List)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line">s-&gt;data = x;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = s;</span><br><span class="line"><span class="keyword">return</span> ptrl;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤</strong><br>åˆ é™¤åŒç†æ˜¯å¯¹æŒ‡é’ˆçš„ä¿®æ”¹ï¼ŒåŒæ ·çš„ä½¿ç”¨pæŒ‡å‘i-1,ç”³è¯·ä¸€ä¸ªæ–°çš„æŒ‡é’ˆsæŒ‡å‘p-&gt;next,æœ€åå°†p-&gt;nextæŒ‡å‘s-&gt;nextå³å¯ï¼›é€šè¿‡mallocç”³è¯·çš„ç©ºé—´è¦è®°å¾—freeå›å»</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">List <span class="title function_">Delete</span><span class="params">(<span class="type">int</span> i,List ptrl)</span> &#123;</span><br><span class="line">List p,s;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)&#123; <span class="comment">//å½“è¦åˆ é™¤è¡¨å¤´èŠ‚ç‚¹æ—¶ </span></span><br><span class="line">s = ptrl; <span class="comment">//æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ </span></span><br><span class="line"><span class="keyword">if</span>(ptrl!=<span class="literal">NULL</span>) ptrl = ptrl-&gt;next; <span class="comment">//ä»é“¾è¡¨ä¸­åˆ é™¤ </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="built_in">free</span>(s);</span><br><span class="line"><span class="keyword">return</span> ptrl;</span><br><span class="line">&#125;</span><br><span class="line">p = findKth(i<span class="number">-1</span>,ptrl);</span><br><span class="line"><span class="keyword">if</span>(p==<span class="literal">NULL</span>)&#123;</span><br><span class="line"><span class="comment">//i-1ä¸ªä½ç½®ä¸å­˜åœ¨ </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(p-&gt;next==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">//ç¬¬iä¸ªä½ç½®ä¸å­˜åœ¨ </span></span><br><span class="line">s = p-&gt;next;</span><br><span class="line">p-&gt;next = s-&gt;next;</span><br><span class="line"><span class="built_in">free</span>(s);</span><br><span class="line"><span class="keyword">return</span> ptrl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ä»£ç å­˜æ¡£:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;malloc.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXSIZE = <span class="number">1000</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line"><span class="type">char</span> data[MAXSIZE];</span><br><span class="line"><span class="type">int</span> last;</span><br><span class="line">&#125;;<span class="keyword">typedef</span> LNode *List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å»ºè¡¨ </span></span><br><span class="line">List <span class="title function_">MakeEmpty</span><span class="params">()</span>&#123;</span><br><span class="line">List Ptrl;</span><br><span class="line">Ptrl = (List )<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line">Ptrl-&gt;last = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">return</span> Ptrl;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾ </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Find</span><span class="params">(<span class="type">char</span> x,List Ptrl)</span>&#123;</span><br><span class="line"><span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(i&lt;=Ptrl-&gt;last&amp;&amp;Ptrl-&gt;data[i]!=x) i++;</span><br><span class="line"><span class="keyword">if</span>(i&gt;Ptrl-&gt;last) <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">//æœªå¯»æ‰¾åˆ°</span></span><br><span class="line"><span class="keyword">return</span> i; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Insert</span><span class="params">(<span class="type">char</span> x,<span class="type">int</span> i,List Ptrl)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(Ptrl-&gt;last==MAXSIZE<span class="number">-1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;Ptrl-&gt;last+<span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=Ptrl-&gt;last;j&gt;=i<span class="number">-1</span>;j--)</span><br><span class="line">Ptrl-&gt;data[j+<span class="number">1</span>] = Ptrl-&gt;data[j];</span><br><span class="line">Ptrl-&gt;data[i<span class="number">-1</span>] = x;</span><br><span class="line">Ptrl-&gt;last++;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Delete</span><span class="params">(<span class="type">int</span> i,List Ptrl)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;Ptrl-&gt;last+<span class="number">1</span>) <span class="keyword">return</span>; <span class="comment">//åˆ¤æ–­ä½ç½®æ˜¯å¦åˆæ³• </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=Ptrl-&gt;last;j++) Ptrl-&gt;data[j<span class="number">-1</span>] = Ptrl-&gt;data[j];</span><br><span class="line">Ptrl-&gt;last--; </span><br><span class="line"><span class="keyword">return</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">List L = MakeEmpty();</span><br><span class="line">Insert(<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,L);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; Find(<span class="string">&#x27;b&#x27;</span>,L);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;malloc.h&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">List</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line"><span class="type">char</span> data;</span><br><span class="line">List next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">length</span><span class="params">(List ptrl)</span>&#123;</span><br><span class="line">List p = ptrl; <span class="comment">//æŒ‡å‘é“¾è¡¨å¤´ç»“ç‚¹ </span></span><br><span class="line"><span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(p)&#123; <span class="comment">//å½“nextæŒ‡å‘nullæ—¶é€€å‡ºå¾ªç¯ï¼ˆä»£è¡¨å·²ç»èµ°åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹äº† </span></span><br><span class="line">p = p-&gt;next;</span><br><span class="line">j++;</span><br><span class="line">&#125;<span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾æ“ä½œ ï¼ˆæŒ‰åºå· </span></span><br><span class="line">List <span class="title function_">findKth</span><span class="params">(<span class="type">int</span> k,List ptrl)</span>&#123;</span><br><span class="line">List p = ptrl; <span class="comment">//æŒ‡å‘å¤´ç»“ç‚¹ </span></span><br><span class="line"><span class="type">int</span> i=<span class="number">1</span>;  </span><br><span class="line"><span class="keyword">while</span>(p&amp;&amp;i&lt;k)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==k) <span class="keyword">return</span> p; <span class="comment">//pä¸ä¸ºnullæ„å‘³ç€æ‰¾åˆ°äº†è¿™ä¸ªèŠ‚ç‚¹ </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‰å€¼æŸ¥æ‰¾ </span></span><br><span class="line">List <span class="title function_">findKth0</span><span class="params">(<span class="type">char</span> target,List ptrl)</span>&#123;</span><br><span class="line">List p = ptrl;</span><br><span class="line"><span class="keyword">while</span>(p&amp;&amp;p-&gt;data!=target) p = p-&gt;next;</span><br><span class="line"><span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">List <span class="title function_">insert</span><span class="params">(<span class="type">char</span> x,<span class="type">int</span> i,List ptrl)</span>&#123;</span><br><span class="line">List p,s;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">s = (List)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line">s-&gt;data = x;</span><br><span class="line">s-&gt;next = ptrl;</span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line">p = findKth(i<span class="number">-1</span>,ptrl);</span><br><span class="line"><span class="keyword">if</span>(p==<span class="literal">NULL</span>)&#123;</span><br><span class="line"><span class="comment">//ç¬¬i-1ä¸ªèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">s = (List)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> LNode));</span><br><span class="line">s-&gt;data = x;</span><br><span class="line">s-&gt;next = p-&gt;next;</span><br><span class="line">p-&gt;next = s;</span><br><span class="line"><span class="keyword">return</span> ptrl;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤</span></span><br><span class="line">List <span class="title function_">Delete</span><span class="params">(<span class="type">int</span> i,List ptrl)</span> &#123;</span><br><span class="line">List p,s;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)&#123; <span class="comment">//å½“è¦åˆ é™¤è¡¨å¤´èŠ‚ç‚¹æ—¶ </span></span><br><span class="line">s = ptrl; <span class="comment">//æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ </span></span><br><span class="line"><span class="keyword">if</span>(ptrl!=<span class="literal">NULL</span>) ptrl = ptrl-&gt;next; <span class="comment">//ä»é“¾è¡¨ä¸­åˆ é™¤ </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="built_in">free</span>(s);</span><br><span class="line"><span class="keyword">return</span> ptrl;</span><br><span class="line">&#125;</span><br><span class="line">p = findKth(i<span class="number">-1</span>,ptrl);</span><br><span class="line"><span class="keyword">if</span>(p==<span class="literal">NULL</span>)&#123;</span><br><span class="line"><span class="comment">//i-1ä¸ªä½ç½®ä¸å­˜åœ¨ </span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(p-&gt;next==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">//ç¬¬iä¸ªä½ç½®ä¸å­˜åœ¨ </span></span><br><span class="line">s = p-&gt;next;</span><br><span class="line">p-&gt;next = s-&gt;next;</span><br><span class="line"><span class="built_in">free</span>(s);</span><br><span class="line"><span class="keyword">return</span> ptrl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> <span class="title">L</span>;</span></span><br><span class="line">List Ptrl;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å­—èŠ‚é’è®­è¥2.1å•å…ƒæµ‹è¯•</title>
      <link href="/2023/01/18/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A521%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
      <url>/2023/01/18/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A521%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><img src="https://p4.itc.cn/q_70/images03/20210302/5f41916b1f4f43e28cf88e71b2fb7da6.gif" alt="https://p4.itc.cn/q_70/images03/20210302/5f41916b1f4f43e28cf88e71b2fb7da6.gif"></p><p>:::<br>::: hljs-center</p><p> <font size="6">å•å…ƒæµ‹è¯•</font></p><p>:::</p><p>åœ¨å­¦ä¹ é˜¶æ®µç»ƒæ‰‹çš„é¡¹ç›®é€šå¸¸ä¼šç›´æ¥ä¸¢åˆ°ç¯å¢ƒä¸Šå»è·‘ï¼Œæœ‰äº†BUGå°±ç°ä¿®;åœ¨ä¼ä¸šå¼€å‘æ—¶ï¼Œä¸€ä¸ªå°å°çš„BUGå¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„æŸå¤±ï¼Œå› æ­¤åœ¨ç¨‹åºä¸Šçº¿å‰å¯¹ç¨‹åºè¿›è¡Œæµ‹è¯•æ—¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p><p><img src="http://cdn.zsenhe.com/9508942dafaa4d54bdb47fb5d28a9816" alt="image.png"><br>æµ‹è¯•ç±»å‹åˆ†ä¸º <strong>å›å½’æµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•</strong></p><p>å›å½’æµ‹è¯•æ˜¯æŒ‡åœ¨å‘ç”Ÿä¿®æ”¹ä¹‹åé‡æ–°æµ‹è¯•å…ˆå‰çš„æµ‹è¯•ä»¥ä¿è¯ä¿®æ”¹çš„æ­£ç¡®æ€§ã€‚ç†è®ºä¸Šï¼Œè½¯ä»¶äº§ç”Ÿæ–°ç‰ˆæœ¬ï¼Œéƒ½éœ€è¦è¿›è¡Œå›å½’æµ‹è¯•ï¼ŒéªŒè¯ä»¥å‰å‘ç°å’Œä¿®å¤çš„é”™è¯¯æ˜¯å¦åœ¨æ–°è½¯ä»¶ç‰ˆæœ¬ä¸Šå†æ¬¡å‡ºç°;é›†æˆæµ‹è¯•åˆ™æ˜¯ä½¿ç”¨ä¸€äº›è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œè¿›è¡Œå¤šæ¬¡çš„å›å½’æµ‹è¯•æ“ä½œ</p><p>å•å…ƒæµ‹è¯•åˆ™æ˜¯åœ¨ä»£ç ç»´åº¦ï¼Œå¦‚å¼€å‘æ—¶å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•ã€‚ä»ä¸Šç”±ä¸‹çš„çš„è¦†ç›–ç‡å’Œæˆæœ¬æ˜¯é€æ­¥é™ä½çš„ï¼Œæ‰€ä»¥è¯´å•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡åœ¨å¾ˆé«˜ç¨‹åº¦ä¸Šå†³å®šç€è´¨é‡</p><p><strong><font size="4">å•å…ƒæµ‹è¯•çš„ç»„æˆéƒ¨åˆ†</font></strong></p><p><img src="http://cdn.zsenhe.com/c770fa5a060e435bac4225560098b142" alt="image.png"></p><p>å•å…ƒæµ‹è¯•çš„ç»„æˆéƒ¨åˆ†åŒ…æ‹¬: <strong>è¾“å…¥,æµ‹è¯•å•å…ƒ,è¾“å‡º,ä¸æœŸæœ›è¾“å‡ºçš„æ ¡å¯¹</strong> æµ‹è¯•å•å…ƒçš„åŒ…æ‹¬è¾ƒä¸ºå®½æ³›ï¼Œå¦‚åŒ…å«: å‡½æ•°ï¼Œæ¥å£ï¼Œæ¨¡å—ï¼Œèšåˆçš„ä¸€äº›å¤§å‡½æ•°;é€šè¿‡è¾“å‡ºä¸æœŸæœ›å€¼æ ¡å¯¹æ¥ååº”æ˜¯å¦å’Œé¢„æœŸçš„æ•ˆæœç›¸ç¬¦</p><p>é€šè¿‡å¤šä¸ªå•å…ƒæµ‹è¯•æˆ‘ä»¬å¯ä»¥ä¿è¯ä»£ç çš„è´¨é‡ï¼Œæ¯æ¬¡å¯¹æ–°çš„æ¨¡å—è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸€æ–¹é¢å¯ä»¥ä¿è¯æ–°æ¨¡å—çš„æ­£ç¡®æ€§ï¼Œå½“æ•´ä½“è·‘é€šæ—¶è¯æ˜æ–°çš„æ¨¡å—å¹¶æ²¡æœ‰å½±å“æ—§æ¨¡å—çš„æ­£ç¡®æ€§ï¼ˆæ—§çš„ä»£ç ä¹Ÿåšäº†å•å…ƒæµ‹è¯•ï¼‰</p><p>æ­¤å¤–å•å…ƒæµ‹è¯•åœ¨ä¸€å®šç¨‹åº¦ä¸‹ä¼šæå‡æ•ˆç‡ï¼Œè¿›è¡Œå•å…ƒæµ‹è¯•å¯ä»¥å¾ˆå¿«é€Ÿçš„å®šä½åˆ°é—®é¢˜ï¼Œè¿›è€Œé˜²æ­¢ä¸Šçº¿åæŸå¤±æ‰©å¤§åŒ–</p><p><strong><font size="4">å•å…ƒæµ‹è¯•çš„è§„åˆ™</font></strong></p><p><img src="http://cdn.zsenhe.com/9666ea5e25aa4868935fa7289344b40c" alt="image.png"></p><ol><li>æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ä»¥ <strong>_test.go</strong> ç»“å°¾ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿åŒºåˆ†å®šä½</li><li>æµ‹è¯•å‡½æ•°ä»¥é©¼å³°çš„å½¢å¼Testå¼€å¤´ï¼Œå¦‚TestTakePoint</li><li>åˆå§‹åŒ–é€»è¾‘æ”¾åœ¨TestMainä¸­</li></ol><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå•å…ƒæµ‹è¯•çš„ä¾‹å­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package Test</span><br><span class="line"></span><br><span class="line">import &quot;testing&quot;</span><br><span class="line"></span><br><span class="line">func HelloZyy() string &#123;</span><br><span class="line">return &quot;zsh&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestHelloZyy(t *testing.T) &#123;</span><br><span class="line">output := HelloZyy()</span><br><span class="line">expectOutput := &quot;zyy&quot;</span><br><span class="line">if output != expectOutput &#123;</span><br><span class="line">t.Errorf(&quot;Expected %s do not match actual %s&quot;, expectOutput, output)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç ä¸­HelloZyyæ˜¯æˆ‘ä»¬çš„<strong>æµ‹è¯•å•å…ƒ</strong>ï¼ŒexpectOutputä¸º<strong>æœŸæœ›å€¼</strong><br>outputä¸º<strong>è¾“å‡º</strong>ï¼Œifå†…æ¡ä»¶ä¸º<strong>æ ¡å¯¹</strong><br>ä½¿ç”¨go test HelloZyy_test.go è¿›è¡Œå•å…ƒæµ‹è¯•<br>ç»“æœæ˜¯<br><img src="http://cdn.zsenhe.com/27b5fd5e93d945088115edaeed8e3527" alt="image.png"><br>æ˜¾ç„¶ï¼Œè¿™æ¬¡æµ‹è¯•ç»“æœæ˜¯FAIL</p><p><strong><font size="4">æµ‹è¯•çš„è¦†ç›–ç‡</font></strong><br>é‚£ä¹ˆå¦‚ä½•è¡¡é‡ä»£ç æ˜¯å¦ç»è¿‡äº†è¶³å¤Ÿçš„æµ‹è¯•ä»¥åŠå¦‚ä½•è¯„ä»·é¡¹ç›®çš„æµ‹è¯•æ°´å‡†å‘¢ï¼Ÿé‚£ä¾¿æ˜¯<strong>ä»£ç è¦†ç›–ç‡</strong><br>ä»£ç è¦†ç›–ç‡è¶Šå®Œå¤‡å¯¹ä»£ç æ­£ç¡®æ€§è¶Šèƒ½æœ‰ä¿è¯ï¼Œç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­</p><p>judgement.go:</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">JudgePassLine</span><span class="params">(score <span class="type">int16</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">60</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>judgement_test.go</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package Test</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;github.com/stretchr/testify/assert&quot;</span><br><span class="line">&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func TestJudgePassLine(t *testing.T) &#123;</span><br><span class="line">isPass := JudgePassLine(70)</span><br><span class="line">assert.Equal(t, true, isPass)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>assertæ˜¯testifyåº“æä¾›çš„â€œæ–­è¨€â€åŠŸèƒ½ï¼Œæœ‰äº†å®ƒä¸ç”¨å†ä½¿ç”¨æ ‡å‡†åº“ä¸­testingæ¥ç¼–å†™å„ç§æ¡ä»¶åˆ¤æ–­<br>ç›´æ¥åœ¨æ§åˆ¶å°è¾“å…¥<strong>go get -u github.com&#x2F;stretchr&#x2F;testify</strong> ä»¥å®‰è£…åº“</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert.Equal(t, <span class="literal">true</span>, isPass)</span><br></pre></td></tr></table></figure><p>åœ¨è¿™è¡Œä»£ç ä¸­ï¼Œtrueæ˜¯æˆ‘ä»¬çš„æœŸæœ›å€¼<br>ä½¿ç”¨æŒ‡ä»¤ <strong>go test judgement_test.go judgement.go â€“cover</strong>æ¥æŸ¥è¯¢è¦†ç›–ç‡<br><img src="http://cdn.zsenhe.com/9b9bb48712d14019921df5d30448883d" alt="image.png"><br>å¯ä»¥çœ‹åˆ°coverageä¸º66.7%,è¿™ä¸ªæ•°å€¼æ˜¯æ€ä¹ˆå¾—å‡ºæ¥çš„å‘¢?æˆ‘ä»¬å¾€æµ‹è¯•å•å…ƒJudgePassLineå‡½æ•°ä¸­ä¼ å…¥äº†å‚æ•°70<br>å®ƒä¼šæ‰§è¡Œ </p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">60</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™åœ¨å‡½æ•°æ‰€æœ‰ä»£ç ä¸­å äº†2&#x2F;3ï¼Œè¦†ç›–ç‡è‡ªç„¶å°±æ˜¯66.7%äº†;æ¥ä¸‹æ¥ä¿®æ”¹ä¸€ä¸‹judgement_test.go</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;github.com/stretchr/testify/assert&quot;</span></span><br><span class="line"><span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestJudgePassLineTrue</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">isPass := JudgePassLine(<span class="number">70</span>)</span><br><span class="line">assert.Equal(t, <span class="literal">true</span>, isPass)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestJudgePassLineFail</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">isPass := JudgePassLine(<span class="number">59</span>)</span><br><span class="line">assert.Equal(t, <span class="literal">true</span>, isPass)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ–°çš„é€»è¾‘ä¸­ï¼ŒJudgePassLineï¼ˆï¼‰å‡½æ•°æ‰€æœ‰çš„ä»£ç éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå†æ¥çœ‹çœ‹è¦†ç›–ç‡<br><img src="http://cdn.zsenhe.com/a17d952acc99485795d90b5e1131f246" alt="image.png"><br>è¿™ä¸‹æ˜¯100%äº†<br>å®é™…é¡¹ç›®å¼€å‘ä¸­å¯¹è¦†ç›–ç‡åˆ°è¾¾100%æ˜¯å¯æœ›ä¸å¯åŠçš„ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯„åˆ¤è¦†ç›–ç‡çš„æ ‡å‡†</p><ol><li>ä¸€èˆ¬è¦†ç›–ç‡50~60%;è¾ƒé«˜è¦†ç›–ç‡80%+</li><li>æµ‹è¯•åˆ†æ”¯ç›¸äº’ç‹¬ç«‹ï¼Œå…¨é¢è¦†ç›–</li><li>æµ‹è¯•å•å…ƒç²’åº¦è¶³å¤Ÿå°ï¼Œå‡½æ•°å•ä¸€èŒè´£</li></ol><p>å½“è¾¾åˆ°ä¸€èˆ¬è¦†ç›–ç‡æ—¶ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å¯ä»¥ä¿è¯ä¸»æµç¨‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†ä¸€äº›å¼‚å¸¸çš„åˆ†æ”¯æ˜¯æ²¡æœ‰è¦†ç›–åˆ°çš„ï¼›å¯¹äºèµ„é‡‘ç±»çš„ä¸šåŠ¡ï¼ˆå¦‚è½¬è´¦ç­‰ï¼‰å¯¹è¦†ç›–ç‡çš„è¦æ±‚ä¼šæ›´é«˜ï¼Œåœ¨å­—èŠ‚ä¼šè¦æ±‚è¾¾åˆ°85%ä»¥ä¸Š</p><p><strong><font size="4">åŸºå‡†æµ‹è¯•</font></strong><br>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–æˆ–è¿›è¡Œæ€§èƒ½åˆ†æï¼Œgoçš„æ ‡å‡†åº“æä¾›äº†åŸºå‡†æµ‹è¯•çš„èƒ½åŠ›<br>ä»¥ä¸‹ä»£ç æ¨¡æ‹Ÿäº†è´Ÿè½½å‡è¡¡çš„åœºæ™¯ï¼Œåœ¨åä¸ªæœåŠ¡å™¨ä¸­éšæœºè¿”å›ä¸€ä¸ªï¼Œå¯¹Selectæ–¹æ³•è¿›è¡Œéå¹¶è¡Œå’Œå¹¶è¡Œçš„åŸºå‡†æµ‹è¯•</p><p><strong>randomSelectServer.go</strong>:</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math/rand&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ServerIndex [<span class="number">10</span>]<span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitServerIndex</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">ServerIndex[i] = i + <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Select</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line"><span class="keyword">return</span> ServerIndex[rand.Intn(<span class="number">10</span>)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>randomSelectServer_test.go</strong>:</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSelect</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">InitServerIndex()</span><br><span class="line">b.ResetTimer() <span class="comment">// é‡ç½®è®¡æ—¶å™¨ï¼ˆå› ä¸ºInitServerIndexä¸åœ¨æµ‹è¯•èŒƒå›´å†…ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">Select()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSelectParallel</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">InitServerIndex()</span><br><span class="line">b.ResetTimer()</span><br><span class="line">b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">Select()</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„: åŸºå‡†æµ‹è¯•æ–‡ä»¶å‘½åå­˜æ”¾ä¸å•å…ƒæµ‹è¯•ä¸€æ ·ï¼Œä½†åœ¨_test.goç»“å°¾æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•å‡½æ•°éœ€ä»¥<strong>Benchmark</strong>å¼€å¤´é©¼å³°å‘½å<br>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•:<br><img src="http://cdn.zsenhe.com/c9859774bd614e468f046449b93e53ad" alt="image.png"><br>è¿è¡Œï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°å‡½æ•°æ€§èƒ½å’Œæ‰§è¡Œæ¬¡æ•°</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å­—èŠ‚é’è®­è¥2Goå·¥ç¨‹è¿›é˜¶ä¸ä¾èµ–ç®¡ç†</title>
      <link href="/2023/01/17/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A52Go%E5%B7%A5%E7%A8%8B%E8%BF%9B%E9%98%B6%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/"/>
      <url>/2023/01/17/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A52Go%E5%B7%A5%E7%A8%8B%E8%BF%9B%E9%98%B6%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><img src="http://cdn.zsenhe.com/5f4357adb3f948ccbdf786942641a8f7" alt="image.png"></p><p>:::</p><p>::: hljs-center</p><p><font size="6">Goå·¥ç¨‹è¿›é˜¶ä¸ä¾èµ–ç®¡ç†</font></p><p>:::</p><p><strong><font size="5">å¹¶å‘ç¼–ç¨‹</font></strong></p><p><strong><font size="4">å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«</font></strong><br>åœ¨è°ˆåŠè¿™ä¸¤ä¸ªæ¦‚å¿µä¹‹å‰ï¼Œè¦å…ˆæ˜ç™½ä»–ä»¬è§£å†³çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆå…±åŒçš„é—®é¢˜ã€‚æˆ‘ä»¬çŸ¥é“åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä»»åŠ¡æ˜¯å µå¡çš„ï¼Œå½“ä¸€ä¸ªä»»åŠ¡åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªä»»åŠ¡åªèƒ½ç­‰å¾…å®ƒå®Œæˆæ‰èƒ½ç»§ç»­ã€‚<strong>å¦‚æœè¯´ç¨‹åºæœ¬èº«æ˜¯é«˜é€Ÿå…¬è·¯çš„æ”¶è´¹ç«™ï¼Œé‚£ä¹ˆä»»åŠ¡å°±æ˜¯è¦é€šè¡Œçš„è½¦è¾†ï¼Œåœ¨ä¸Šä¸€è¾†è½¦æ£€æŸ¥æ”¾è¡Œä¹‹å‰ï¼Œä½ åªèƒ½åœ¨åŸåœ°ç­‰ç€</strong>ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯æ•ˆç‡å¾ˆä½çš„ï¼Œè€ƒè™‘ä¸€ä¸ªwebåº”ç”¨ï¼Œåœ¨ä¸ç”¨æˆ·aé€šè®¯çš„æ—¶å€™ï¼Œbå¾—ç­‰aå®Œæˆäº¤äº’æ‰èƒ½ç»§ç»­ã€‚</p><p>é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨é«˜é€Ÿå…¬è·¯ä¸Šä¿®å»ºå¤šä¸ªæ”¶è´¹ç«™æˆ–è€…å¼€æ‹¬å¤šæ¡è½¦é“ï¼ŒåŒæ—¶è®©å¤šè¾†è½¦é€šè¿‡ï¼Œè¿™ä¾¿æ˜¯å¹¶å‘ã€‚è€ƒè™‘åœŸåœ°æ˜¯ç‰©ç†èµ„æºï¼Œåœ¨ä¸€æ¡é“ä¸Šè®¾ç«‹å¤šä¸ªæ”¶è´¹ç«™ä¾¿æ˜¯å¹¶å‘ï¼Œè€Œå¼€æ‹¬æ›´å¤šæ¡è½¦é“ä¾¿æ˜¯å¹¶è¡Œã€‚</p><p>æ˜¾ç„¶ç‰©ç†èµ„æºæ›´åŠ æ˜‚è´µï¼Œæˆ‘ä»¬åªèƒ½é‡‡ç”¨ç¬¬ä¸€ä¸ªæ–¹æ¡ˆäº†ï¼Œå¤§éƒ¨åˆ†è¯­è¨€ä½¿ç”¨äº†ä¸€ç§å†…æ ¸æ€çš„ç”±æ“ä½œç³»ç»Ÿæä¾›çš„è§£å†³æ–¹æ¡ˆâ€”â€”<strong>çº¿ç¨‹(thread)</strong></p><p>è¿˜æœ‰ä¸€ä¸ªæ›´æ°å½“çš„æ¯”æ–¹ï¼Œä¸€ä¸ªäººï¼ˆcpuï¼‰åŒæ—¶å–‚ä¸¤ä¸ªå°å­©åƒé¥­ï¼Œçœ‹ç€åƒä¸¤ä¸ªå°å­©åœ¨åƒé¥­ï¼Œå®é™…ä¸Šåªæœ‰ä¸€ä¸ªäººåœ¨å–‚ï¼ˆè¿™å³æ˜¯å¹¶å‘ï¼Œä¸€ä¸ªcpué€šè¿‡è°ƒåº¦ä¸åŒçš„ä»»åŠ¡ï¼Œå½“æœ‰ä¸€ä¸ªçº¿ç¨‹å”¤é†’æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¿…å®šå µå¡ï¼Œåªæ˜¯å› ä¸ºåˆ‡æ¢é€Ÿåº¦è¾ƒå¿«å¯¼è‡´çœ‹èµ·æ¥åƒåŒæ—¶è¿è¡Œï¼‰ã€‚è€Œå¹¶è¡Œå½“ç„¶å°±æ˜¯æœ‰ä¸¤ä¸ªäººåŒæ—¶åœ¨å–‚ä¸¤ä¸ªå°å­©åƒé¥­äº†</p><p><strong><font size="4">åç¨‹</font></strong><br>è¿™ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯æœ€å¥½çš„äº†å—ï¼Ÿçº¿ç¨‹åœ¨è®¡ç®—æœºä¸­ä¹Ÿæ˜¯éå¸¸æ˜‚è´µçš„èµ„æºï¼Œå•ä¸ªçº¿ç¨‹æ ˆçš„å†…å­˜å ç”¨å¯èƒ½è¾¾åˆ°MBçº§åˆ«!å› æ­¤åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´åŠ å»‰ä»·çš„è§£å†³æ–¹æ¡ˆ</p><p>è¿™ç§çœ‹ä¼¼æ˜¯çº¿ç¨‹å®é™…ä¸Šä¸æ˜¯çº¿ç¨‹çš„ä¸œè¥¿æˆ‘ä»¬é€šå¸¸ç§°å®ƒä¸ºâ€œåç¨‹â€ï¼Œåç¨‹å¯ä»¥ç†è§£ä¸ºè½»é‡çº§ï¼Œ<strong>ç”¨æˆ·çº§</strong>çš„çº¿ç¨‹ã€‚</p><p>åç¨‹çš„åˆ›å»ºå’Œè°ƒåº¦ç”±goæœ¬èº«å®Œæˆï¼Œåç¨‹çš„æ ˆä¸€èˆ¬åœ¨kbçº§åˆ«ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥è°ƒåº¦ä¸Šä¸‡çº§åˆ«çš„åç¨‹ï¼Œè¿™ä¹Ÿæ˜¯goæ›´åŠ é€‚åˆé«˜å¹¶å‘åœºæ™¯çš„åŸå› æ‰€åœ¨</p><p><strong><font size="4">Goroutineçš„ä½¿ç”¨</font></strong></p><p>æ¥ä¸‹æ¥çœ‹çœ‹Goä¸ºæˆ‘ä»¬æä¾›çš„<strong>Goroutine</strong><br>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨Gouroutineçš„ä¾‹å­</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(str <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">fmt.Println(str)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">go</span> say(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">say(<span class="string">&quot;zyy&quot;</span>)</span><br><span class="line"><span class="comment">//é˜»å¡äº†ä¸€ç§’ï¼Œä¸ºé˜²æ­¢å­åç¨‹æœªå®Œæˆä¹‹å‰ä¸»çº¿ç¨‹é€€å‡º</span></span><br><span class="line">time.Sleep(time.Second * <span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­å®šä¹‰äº†ä¸€ä¸ªsayå‡½æ•°ï¼Œå®ƒæ¯éš”ä¸€ç§’æ‰“å°ä¸€æ¬¡ä¼ å…¥çš„å­—ç¬¦ä¸²strï¼Œé‡å¤äº”æ¬¡ã€‚æ¥ä¸‹æ¥åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨äº†ä¸¤æ¬¡say(),å¹¶ä¼ å…¥ä¸¤ä¸ªä¸åŒçš„å‚æ•°(â€œhelloâ€å’Œâ€zyyâ€),æ³¨æ„åˆ°ç¬¬ä¸€ä¸ªsayå‡½æ•°ä¹‹å‰å£°æ˜äº† <strong>go</strong>ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªæ–°çš„Goroutineåç¨‹è¢«è¿è¡Œã€‚</p><p>çœ‹çœ‹è¾“å‡ºçš„ç»“æœï¼Œå°±åƒåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ä¸€æ ·ç¥å¥‡ã€‚<br><img src="http://cdn.zsenhe.com/2222c485ff2e4abcbfa5c15e8d764faf" alt="image.png"></p><p>å®é™…ä¸Šå¹¶ä¸æ˜¯çœŸæ­£çš„å¹¶è¡Œï¼Œå°†sayå‡½æ•°ä¸­çš„time.sleep(second)å»æ‰ã€‚å†è¿è¡Œä¸€é<br><img src="http://cdn.zsenhe.com/fdb7c2a027fd44d790ce0abea3bce52d" alt="image.png"><br>æ€ä¹ˆåˆä¸æ˜¯äº¤æ›¿æ‰“å°äº†ï¼Ÿå°±åƒå‰æ–‡è¯´çš„é‚£æ ·ï¼ŒåŒæ—¶æ‰§è¡Œåªæ˜¯ä¸€ç§é”™è§‰ï¼Œåªæœ‰åœ¨ä¸€ç«¯æœ‰ç©ºé—²ï¼ˆsleepçš„æ—¶å€™ï¼‰ï¼Œå¦ä¸€ç«¯æ‰ä¼šå»æ‰§è¡Œ</p><p><strong><font size="4">æœ‰å¯èƒ½å‘ç”Ÿçš„äº‹æ•…ï¼šä¸»çº¿ç¨‹æå‰ç»“æŸ</font></strong><br>æ³¨æ„åˆ°ä¸Šé¢ä»£ç mainå‡½æ•°ä¸­çš„</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time.Sleep(time.Second * <span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>äº†å—?å°†ä»–æ³¨é‡Šæ‰è¯•è¯•ã€‚<br><img src="http://cdn.zsenhe.com/a06165f4f0c041498652b522894b5f9d" alt="image.png"><br>ä¸ºä»€ä¹ˆä¸æ‰“å°â€helloâ€äº†ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨åç¨‹æœªå®Œæˆä»»åŠ¡æ—¶ä¸»çº¿ç¨‹é€€å‡ºäº†ã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ç§å¾ˆæš´åŠ›çš„æ–¹å¼ï¼Œè®©ä¸»çº¿ç¨‹ç¡ä¸Šåç§’é’Ÿï¼Œè¿™æ ·ä¸ç®¡æ€ä¹ˆæ ·éƒ½ä¼šå®Œæˆäº†ã€‚ä½†åœ¨çœŸæ­£å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ¯ä¸ªåç¨‹éƒ½ä¼šç¡ä¸Šä¸€ä¸¤ç§’ï¼Œå³æ˜¯è¯´æˆ‘ä»¬æ— æ³•é¢„æµ‹åç¨‹çš„å®Œæˆæ—¶é—´ã€‚<br>æ­£ç¡®çš„æ–¹æ³•æ˜¯ä½¿ç”¨goæ ‡å‡†åº“æä¾›çš„ <strong>WaitGroup</strong>ï¼Œå®ƒä¼šæ›´åŠ ä¼˜é›…</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">say</span><span class="params">(str <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">fmt.Println(str)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">wg.Add(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> wg.Done()</span><br><span class="line">say(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">&#125;()</span><br><span class="line">say(<span class="string">&quot;zyy&quot;</span>)</span><br><span class="line">wg.Wait()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸€ä¸‹<br><img src="http://cdn.zsenhe.com/c31da410aa2e4933b42e048279722b15" alt="image.png"><br>cool!ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆè¿è¡Œçš„å‘¢ï¼Ÿå›é¡¾ä¸€ä¸‹ä¸Šé¢çš„ä»£ç <br>time.Sleep(time.Second)è¢«ç§»é™¤ï¼Œè½¬è€Œä½¿ç”¨äº†wg.Wait()ï¼Œå®ƒä¼šå µå¡ä¸»çº¿ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™é‡Šæ”¾å‘¢ï¼Ÿ<br>çœ‹è¿™ä¸€è¡Œä»£ç </p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wg.Add(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¾€WaitGroup wgé‡Œä¼ å…¥äº†ä¸€ä¸ªå‚æ•°1ï¼Œè¿™å®é™…ä¸Šæ˜¯WaitGroupå†…éƒ¨å®ç°çš„ä¸€ä¸ªç±»ä¼¼è®¡æ•°å™¨çš„é€»è¾‘ï¼Œå½“å®ƒå½’0æ—¶ï¼ŒWaitçš„å µå¡ä¼šé‡Šæ”¾æ‰ï¼Œ<br>è€Œè®¡æ•°å™¨é€’å‡å‘ç”Ÿåœ¨</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> wg.Done()</span><br><span class="line">say(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure><p>defer wg.Done() è¿™ä¸€è¡Œä»£ç é‡Œ<br><strong>defer</strong> å£°æ˜çš„ä»£ç çš„ä¼šåœ¨å‡½æ•°é€€å‡ºæ—¶æ‰§è¡Œï¼Œé€šå¸¸ç”¨äºå…³é—­ioèµ„æºï¼Œæ•°æ®åº“è¿æ¥ç­‰<br>å®ƒæ‰€å£°æ˜çš„ä»£ç  wg.Done() ä¼šå°†WaitGroupçš„è®¡æ•°å™¨-1ï¼Œä¸Šé¢çš„ä»£ç ä¸­ä¼ å…¥çš„åˆå§‹å€¼ä¸º1<br>å³æ˜¯è¯´: <strong>è¿™ä¸ªåŒ¿åå‡½æ•°åœ¨é€€å‡ºæ—¶è°ƒç”¨wg.Doneè®©è®¡æ•°å™¨å½’0ï¼Œä¸»çº¿ç¨‹ä¹Ÿå®Œæˆäº†å µå¡é‡Šæ”¾æ‰</strong><br>æ€ä¹ˆæ ·?å¾ˆä¼˜é›…å§ï¼</p><p><strong><font size="4">å¹¶å‘å®‰å…¨Lock</font></strong></p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;sync&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="keyword">var</span> count <span class="type">int64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2000</span>; i++ &#123;</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">wg.Done()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line">wg.Add(<span class="number">5</span>)</span><br><span class="line"><span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line"><span class="keyword">go</span> add()</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">wg.Wait()</span><br><span class="line"><span class="built_in">print</span>(count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹ä¸€ä¸‹è¿™æ®µä»£ç ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡addä¼šè®©count+2000,è°ƒç”¨äº†äº”æ¬¡ï¼Œæ˜¾ç„¶ç»“æœæ˜¯10000å§ï¼Œæ¶¦ä¸€ä¸‹çœ‹çœ‹<br><img src="http://cdn.zsenhe.com/d0da386b08a448b78867fbcfefc65bf2" alt="image.png"><br>åœ¨å¤šæ¬¡è¿è¡Œåå‘ç°äº†ä¸å¯¹åŠ²ï¼Œ8333ï¼Ÿæ€ä¹ˆçœ‹éƒ½ä¸å¯èƒ½å§ï¼äº‹å®ä¸Šè¿™ç§äº‹æ•…æ˜¯å°æ¦‚ç‡äº‹ä»¶ï¼Œé€šå¸¸åœ¨å·¥ç¨‹ä»£ç ä¸­é‡åˆ°äº†éƒ½å¾ˆéš¾æ’æŸ¥<br>æ‰€ä»¥å¯¹å¹¶å‘å®‰å…¨çš„è®¤çŸ¥å¾ˆé‡è¦ï¼Œæˆ‘ä»¬éœ€è¦èƒ½æå‰é¢„æµ‹å‡ºå¯èƒ½å‘ç”Ÿçš„äº‹æ•…ã€‚å¯¹äºä¸€ä¸ªå˜é‡çš„ä¿®æ”¹å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼ŒåŸå­æ“ä½œæ„å‘³ç€å®ƒæ˜¯ä¸€æ­¥å®Œæˆçš„ï¼Œä½†+&#x3D;è¿™ä¸ªæ“ä½œæœ‰æ‹¥æœ‰ä¸‰ä¸ªæ“ä½œï¼Œå®ƒéœ€è¦<strong>å…ˆå–å‡ºå˜é‡ï¼Œä¿®æ”¹å˜é‡ï¼Œå†èµ‹å€¼å›å»</strong>;è¯•æƒ³ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªåç¨‹åœ¨è¿›è¡Œå–å‡ºå˜é‡è¿™ä¸ªæ“ä½œï¼Œæ­¤æ—¶åˆæœ‰ä¸€ä¸ªåç¨‹èµ‹å€¼äº†å˜é‡ï¼Œé‚£ä¸æ˜¯ä¹±å¥—äº†å—ï¼Œç»“æœè‚¯å®šå°±ä¸ä¼šæ¯æ¬¡éƒ½æ˜¯æ­£ç¡®çš„äº†ã€‚</p><p>ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œgoæä¾›äº†å®Œå–„çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨syncä¸‹çš„Mutexï¼Œä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç </p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="keyword">var</span> count <span class="type">int64</span></span><br><span class="line"><span class="keyword">var</span> lock sync.Mutex</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2000</span>; i++ &#123;</span><br><span class="line">lock.Lock()</span><br><span class="line">count += <span class="number">1</span></span><br><span class="line">lock.Unlock()</span><br><span class="line">&#125;</span><br><span class="line">wg.Done()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line">wg.Add(<span class="number">5</span>)</span><br><span class="line"><span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line"><span class="keyword">go</span> add()</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line">wg.Wait()</span><br><span class="line"><span class="built_in">print</span>(count)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é”çš„åŸç†æ˜¯ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨Mutex.Lockçš„æ—¶å€™ä¼šæ‰“ä¸ªæ ‡è®°ï¼Œå½“ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä¼šå µå¡ï¼Œç›´åˆ°å®ƒè¢«Unlockã€‚<br>ä½¿ç”¨é”æ—¶éœ€æ ¼å¤–è°¨æ…ï¼Œå°½é‡åªåœ¨æœ‰å¹¶å‘å®‰å…¨çš„åœ°æ–¹ä½¿ç”¨ï¼Œå®ƒä¼šå¾ˆæ˜æ˜¾çš„é™ä½æ€§èƒ½;æ­¤å¤–ï¼Œä½¿ç”¨é”éœ€æ£€æŸ¥å¥½é€»è¾‘ï¼Œæ­»é”çš„æƒ…å†µå¾ˆå®¹æ˜“å‘ç”Ÿ</p><p>ï¼ˆgoåº”è¯¥ä¹Ÿæœ‰ç±»ä¼¼javaçš„AtomicIntegeré‚£æ ·çš„åŸå­æ“ä½œåŒ…ï¼Ÿï¼‰</p><p><img src="http://cdn.zsenhe.com/1275ab62b318496c8421c12b61376864" alt="image.png"><br>è¿™ä¸‹ä¸è®ºå¦‚ä½•éƒ½èƒ½è¾“å‡ºæ­£ç¡®ç»“æœäº†</p><p><strong><font size="4">åç¨‹ä¹‹é—´çš„åŒæ­¥ Channel</font></strong></p><p>é‚£ä¹ˆåç¨‹ä¹‹é—´æ€ä¹ˆè¿›è¡Œæ•°æ®ä¼ è¾“é€šä¿¡å‘¢ï¼Ÿç›´æ¥å¼€ä¸€ä¸ªæ•°ç»„æˆ–è€…åˆ—è¡¨ä¹‹ç±»çš„ç»“æ„ï¼Œä¸åŒåç¨‹ç›´æ¥å–ç”¨ä¸å°±è¡Œäº†ï¼Œè¿™æ ·æ˜¯å¾ˆå±é™©çš„ã€‚goæå€¡ä½¿ç”¨ <strong>é€šé“ï¼ˆChannelï¼‰</strong> æ¥è¿›è¡Œå†…å­˜å…±äº«</p><p>é€šè¿‡å¦‚ä¸‹æ–¹å¼æ¥å£°æ˜ä¸€ä¸ªé€šé“</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">ch0 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>chä¸ºä¸€ä¸ªä¸å¸¦ç¼“å†²çš„é€šé“ï¼ŒæŒ‡å®šäº†ä¼ è¾“æ•°æ®ç±»å‹ä¸ºintï¼Œæ— ç¼“å†²æ„å‘³ç€æ¯ä¸ªæ•°æ®çš„å‘é€éƒ½å¾—ç­‰å¾…å¦ä¸€ç«¯æ¥æ”¶ï¼Œå¦åˆ™ä¼šå‘é€æ–¹ä¼šå‘ç”Ÿå µå¡ã€‚<br>è€Œå¸¦ç¼“å†²åŒºï¼ˆch0ï¼Œå£°æ˜äº†ç¼“å†²åŒºå¤§å°ä¸º3ï¼‰å¯ä»¥å­˜åœ¨å¤šä¸ªæ•°æ®æœªè¢«æ¥æ”¶ï¼Œæ­¤æ—¶å‘é€æ–¹å¯ç»§ç»­å‘é€è€Œä¸ä¼šå—åˆ°å µå¡ï¼Œå½“ç„¶æœªæ¥æ”¶çš„æ•°æ®ä¸èƒ½è¶…è¿‡å£°æ˜çš„å¤§å°</p><p>è¿™æ ·å‘ä¸€ä¸ªé€šé“ä¸­ä¼ è¾“æ•°æ®</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ch &lt;- i <span class="comment">//iä¸ºintç±»å‹å˜é‡</span></span><br></pre></td></tr></table></figure><p>æ¥å—æ•°æ®</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">receive <span class="type">int</span> := &lt;-ch <span class="comment">//èµ‹å€¼ç»™receive</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡for rangeå–å‡ºæ‰€æœ‰æ•°æ®ã€‚ï¼ˆfor rangeä¼šä¸€ç›´è¯»å–ä¸€ä¸ªé€šé“ï¼Œç›´åˆ°channelè¢«å…³é—­ï¼‰</p><p>æ¥çœ‹ä¸€æ®µä¾‹å­</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>)</span><br><span class="line">ch0 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">int</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">//åç¨‹a</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(ch)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">ch &lt;- i</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"><span class="comment">//åç¨‹a</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//å…³é—­channel</span></span><br><span class="line"><span class="keyword">defer</span> <span class="built_in">close</span>(ch0)</span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> ch &#123;</span><br><span class="line">ch0 &lt;- i * i</span><br><span class="line">&#125;</span><br><span class="line">&#125;()</span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> ch0 &#123;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥ç¨‹åºç”±ä¸‰ä¸ªåç¨‹ç»„æˆï¼Œaåç¨‹å°† 0-9 ä¼ å…¥é€šé“chï¼Œbåç¨‹å°†chä¸­æ•°æ®å–å‡ºåè¿›è¡Œå¹³æ–¹è®¡ç®—ä¼ å…¥ch0é€šé“ã€‚<br>æœ€åä¸»çº¿ç¨‹æ‰“å°å‡ºch0ä¸­çš„æ‰€æœ‰å¹³æ–¹åçš„ç»“æœ<br><img src="http://cdn.zsenhe.com/bd81c99d5b944f709262372be6495558" alt="image.png"></p><hr><p><strong><font size="5">ä¾èµ–ç®¡ç†</font></strong></p><blockquote><p><strong><font size="4"><em>ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š</em></font></strong></p></blockquote><p>åœ¨å®é™…å¼€å‘é¡¹ç›®ä¸­ï¼Œéœ€è¦å­¦ä¼šç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä½¿ç”¨ä»–äººå·²ç»å°è£…å¥½çš„ï¼Œç»è¿‡éªŒè¯çš„å·¥å…·åº“æ¥æå‡å¼€å‘æ•ˆç‡<br>å¹³å¸¸ç»ƒæ‰‹çš„ç©å…·é¡¹ç›®åŸºäºæ ‡å‡†åº“å³å¯å®Œæˆï¼Œä½†åœ¨å®é™…å·¥ç¨‹ä¸­è¾ƒä¸ºå¤æ‚ï¼Œä¸å¯èƒ½ä»0åˆ°1ç¼–ç æ­å»º<br>åº”æŠŠæ›´å¤šç²¾åŠ›æ”¾åœ¨ä¸šåŠ¡é€»è¾‘çš„å®ç°ä¸Šï¼Œå…¶ä»–ä¾èµ–ï¼ˆå¦‚æ—¥å¿—ï¼Œæ¡†æ¶ï¼Œé›†åˆï¼‰å¯é€šè¿‡sdkçš„æ–¹å¼å¼•å…¥</p><p><strong><font size="4"><em>Goçš„ä¾èµ–æ¼”å˜</em></font></strong><br>ä¾èµ–ç®¡ç†å¹¶ä¸æ˜¯Golangçš„ç‹¬åˆ›ï¼Œæ—©ä¹‹å‰ä¾¿æœ‰è®¸å¤šä¸åŒè¯­è¨€çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¦‚æˆ‘ä»¬javaç¨‹åºå‘˜ç†ŸçŸ¥çš„maven&#x2F;gradle,rustçš„cargoã€‚<br>Goè¯­è¨€çš„ä¾èµ–ç®¡ç†ç»å†äº† <strong>GOPATHï¼ŒGoVendorï¼ŒGoModule</strong> ä¸‰ä¸ªé˜¶æ®µçš„æ¼”å˜</p><p><strong><font size="3"><em>GOPATH</em></font></strong></p><p>åœ¨åˆå­¦Goé…ç¯å¢ƒçš„æ—¶å€™ä¼šæ³¨æ„åˆ°$GOPATHè¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒæŒ‡å‘åº”è¯¥ç›®å½•ï¼Œæ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šä¾èµ–è¿™ä¸ªç›®å½•ä¸‹çš„æºç ã€‚è¿™å°†å¯¼è‡´ä¸€ä¸ªé—®é¢˜:<br><strong>å¦‚æœæœ‰ä¸åŒçš„é¡¹ç›®åˆ†åˆ«ä¾èµ–äºä¸€ä¸ªä¾èµ–åº“çš„ä¸åŒç‰ˆæœ¬ï¼Œç”±äºå®ƒæ˜¯ä¸€ä¸ªå…¬å…±ç¯å¢ƒå˜é‡ï¼Œå¹¶æ²¡æœ‰ä»»ä½•ç®¡ç†ä¾èµ–ç‰ˆæœ¬çš„æªæ–½ï¼Œå°†å¯¼è‡´ç¼–è¯‘å‡ºé”™</strong></p><p><strong><font size="3"><em>GoVendor</em></font></strong></p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¼”è¿›å‡ºäº†GoVendor<br>åœ¨é¡¹ç›®ç›®å½•ä¸‹å¢åŠ vendoræ–‡ä»¶å¤¹ï¼Œå°†æ‰€æœ‰çš„ä¾èµ–åŒ…å‰¯æœ¬å½¢å¼å­˜æ”¾è¿›å»ã€‚ä¾èµ–å¯»æ‰¾æ—¶ä¼šä¼˜å…ˆä»vendorä¸‹è·å–ï¼Œæœªå¯»æ‰¾åˆ°å†æŸ¥è¯¢GOPATH</p><p><img src="http://cdn.zsenhe.com/91da94b2fd084b61824e491883c35e29" alt="image.png"></p><p>è¿™æ ·ä¹Ÿä¸æ˜¯åå…¨åç¾çš„ï¼Œè¿™ä¼šå¸¦æ¥ä¸€ä¸ªå¼Šç«¯ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­ï¼Œé¡¹ç›®Aä¾èµ–äº†PackageBå’ŒPackageCï¼Œè€ŒBå’ŒCåˆåŒæ—¶ä¾èµ–äº†Dçš„ä¸åŒç‰ˆæœ¬ï¼Œå®ƒä»¬ä½œä¸ºåŒä¸€ä¸ªé¡¹ç›®çš„ä¾èµ–è¢«åŒæ—¶å­˜æ”¾åœ¨ä¸€ä¸ªVendorä¸­ï¼Œè¿™æ ·å¾ˆå¤§æ¦‚ç‡ä¼šå‘ç”Ÿä¾èµ–å†²çª</p><p>å‘ç”Ÿè¿™ç§æƒ…å†µå½’æ ¹ç»“åº•æ˜¯å®ƒä¾æ—§ä¾èµ–ç€é¡¹ç›®æºç ï¼Œè€Œä¸èƒ½å¾ˆæ¸…æ™°çš„æ ‡æ³¨ä¾èµ–çš„ç‰ˆæœ¬</p><p><strong><font size="4"><em>GoModule</em></font></strong></p><p>äºæ˜¯ï¼ŒGoModuleåº”è¿è€Œç”Ÿäº†ï¼Œå®ƒè§£å†³äº†ä¹‹å‰ä¾èµ–ç®¡ç†ç³»ç»Ÿå‘¨å¤šå¼Šç«¯ï¼Œå¦‚åŒä¸€ä¸ªåº“å¤šä¸ªç‰ˆæœ¬ç­‰é—®é¢˜ã€‚</p><p>å®ƒä¼š<br>é€šè¿‡ <strong>go.mod</strong> æ–‡ä»¶ç®¡ç†ä¾èµ–åŒ…ç‰ˆæœ¬<br>é€šè¿‡ <strong>go get&#x2F;go mod</strong> æŒ‡ä»¤å·¥å…·ç®¡ç†ä¾èµ–åŒ…</p><p>å®ƒå®ç°äº†ä¾èµ–ç®¡ç†çš„ç»ˆæç›®æ ‡: <strong>å®šä¹‰ç‰ˆæœ¬è§„åˆ™å’Œç®¡ç†é¡¹ç›®ä¾èµ–å…³ç³»</strong></p><p><img src="http://cdn.zsenhe.com/62fb9de0b0f44c06886946a11348546b" alt="image.png"></p><p><font size="3"><strong>æè¿°ä¸€ä¸ªåˆæ³•çš„go.mod</strong></font></p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">module example/project/app</span><br><span class="line">â€‹</span><br><span class="line"><span class="keyword">go</span> <span class="number">1.16</span></span><br><span class="line">â€‹</span><br><span class="line">require (</span><br><span class="line"> Â   example/lib1 v1<span class="number">.0</span><span class="number">.2</span></span><br><span class="line"> Â   example/lib2 v1<span class="number">.0</span><span class="number">.0</span> <span class="comment">// indirect</span></span><br><span class="line"> Â   example/lib3 v0<span class="number">.1</span><span class="number">.0</span><span class="number">-20190725025543</span><span class="number">-5</span>a5fe074e612</span><br><span class="line"> Â   example/lib4 <span class="number">0.0</span><span class="number">.0</span><span class="number">-20180306012644</span>-bacd9c7efldd <span class="comment">// indirect</span></span><br><span class="line"> Â   example/lib5/v3 v3<span class="number">.0</span><span class="number">.2</span></span><br><span class="line"> Â   example/lib6 v3<span class="number">.2</span><span class="number">.0</span>+incompatible</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ go.mod æ–‡ä»¶ï¼Œå®ƒç”±ä¸»è¦çš„ä¸‰éƒ¨åˆ†ç»„æˆ</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">module example/project/app</span><br></pre></td></tr></table></figure><p>æ ‡æ³¨äº†ä¾èµ–ç®¡ç†çš„åŸºæœ¬å•å…ƒï¼Œå®ƒè®©æˆ‘ä»¬çŸ¥é“ä»å“ªæ‰¾åˆ°è¿™ä¸ªæ¨¡å—</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> <span class="number">1.16</span></span><br></pre></td></tr></table></figure><p>æ ‡æ³¨goåŸç”Ÿåº“</p><p><strong>require</strong> æ˜¯æœ€å…³é”®çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæè¿°äº†å•å…ƒä¾èµ–<br>æ¯ä¸€ä¸ªå•å…ƒä¾èµ–ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆ [Module Path] [Version&#x2F;Pseudo-version]</p><p>é€šè¿‡ä¾èµ–åç§°è·¯å¾„ï¼ˆModulePath)ï¼Œåé¢è·Ÿä¸Šæ‰€éœ€çš„ç‰ˆæœ¬æ¥å®šä½ä¸€ä¸ªä¾èµ–çš„æŸæ¬¡æäº¤;ç‰ˆæœ¬åº”éµå®ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬æˆ–åŸºäºcommitçš„ä¼ªç‰ˆæœ¬<br>è¯­ä¹‰åŒ–ç‰ˆæœ¬: <strong>${MAJOR}.${MINOR}.${PATCH}</strong><br>å¦‚: V1.3.0,V2.3.0<br>åŸºäºcommitä¼ªç‰ˆæœ¬: <strong>vX.0.0-yyyymmddhhmmss-abcdefgh1234</strong><br>ç¬¬äºŒéƒ¨åˆ†ä¸ºæ—¶é—´æˆ³ï¼Œæœ€åä¸€ä½ä¸ºæäº¤æ—¶å“ˆå¸Œç æ ¡éªŒç çš„12ä½å‰ç¼€</p><p>é—´æ¥ä¾èµ–ä¸ç›´æ¥ä¾èµ–:<br>éƒ¨åˆ†ä¾èµ–ä¼šä½¿ç”¨ <strong>&#x2F;&#x2F; indirect</strong> æ ‡æ³¨,è¿™ä»£è¡¨è¯¥ä¾èµ–å•å…ƒå¹¶éç”±é¡¹ç›®ç›´æ¥å¼•å…¥ï¼Œè€Œæ˜¯é€šè¿‡å…¶ä»–ä¾èµ–å•å…ƒé—´æ¥å¼•å…¥<br><img src="http://cdn.zsenhe.com/6996febdbfb943079bdb9c2a6370d89f" alt="image.png"></p><p>+incompatible æ˜¯ä¸ºäº†å…¼å®¹éè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¾èµ–</p><p><font size="3"><strong>ä¾èµ–åˆ†å‘</strong></font><br>æˆ‘ä»¬çš„ä¾èµ–å¯èƒ½æ¥è‡ªäºä¸–ç•Œå„åœ°ï¼Œå®ƒä»¬ä½¿ç”¨äº†ä¸åŒçš„ä»£ç æ‰˜ç®¡ï¼ˆgithub.gitlabç­‰),å®ƒä»¬æ¯åˆ†é’Ÿå¯èƒ½è¦æ¥æ”¶æ•°ä»¥ç™¾ä¸‡æ¬¡çš„ä½¿ç”¨è¯·æ±‚ï¼Œè¿™æ ·ä¼šå¢åŠ ç¬¬ä¸‰æ–¹æ‰˜ç®¡å¹³å°çš„å‹åŠ›</p><p>ä¸ºäº†è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå‡ºç°äº† GoProxy,å®ƒä½œä¸ºä¸€ä¸ªå­˜å‚¨ç«™ç‚¹ï¼Œä¼šç¼“å­˜åŸç«™ä¸­çš„å†…å®¹ï¼Œç¼“å­˜ä¸­çš„ç‰ˆæœ¬ä¹Ÿä¸ä¼šæ”¹å˜ï¼Œå®ç°äº†ç¨³å®šå¯é çš„ä¾èµ–åˆ†å‘ã€‚</p><p><img src="http://cdn.zsenhe.com/3a44c12d1dd945339417b6b97b403e87" alt="image.png"></p><p>å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ <strong>GOPROXY</strong> æ¥æŒ‡å®šproxyæœåŠ¡å™¨ï¼Œåœ¨ä¸­å›½å¤§é™†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªç«™ç‚¹å¢åŠ ç¨³å®šæ€§ã€‚å¯»å€çš„æ—¶å€™ä¼šä¼˜å…ˆé€‰æ‹©proxy1<br><a href="https://proxy1.cn/">https://proxy1.cn</a>,<a href="https://proxy2.cn/">https://proxy2.cn</a></p><p><font size="3"><strong>å·¥å…·å‘½ä»¤</strong></font></p><p><font size="3"><strong>go get</strong></font></p><p><img src="http://cdn.zsenhe.com/bfad3443439a41139a6aa557cb9a5652" alt="image.png"></p><p>é€šè¿‡go getæŒ‡ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ·»åŠ &#x2F;ç§»é™¤ä¾èµ–<br>å¦‚å›¾example.org&#x2F;pkg ä¸ºä»“åº“åœ°å€,åé¢å¯ä»¥è¿½åŠ ä»¥ä¸‹çš„å€¼</p><blockquote><p>@update é»˜è®¤å€¼ï¼Œæ‹‰å–æœ€æ–°çš„ç‰ˆæœ¬<br>@none åˆ é™¤ä¾èµ–<br>@v1.1.2 è¯­ä¹‰åŒ–ç‰ˆæœ¬<br>@23dfdd5 ä¼ªç‰ˆæœ¬<br>@master åˆ†æ”¯çš„æœ€æ–°æäº¤</p></blockquote><p><font size="3"><strong>go mod</strong></font></p><p><img src="http://cdn.zsenhe.com/00c7348e70b2401caf6d17e8d779c8a7" alt="image.png"><br>åœ¨é¡¹ç›®åˆ›å»ºæ—¶ä¾¿éœ€è¦ä½¿ç”¨ go mod init æ¥åˆå§‹åŒ–go.modæ–‡ä»¶ï¼Œè¿™æ˜¯æ¯ä¸€ä¸ªé¡¹ç›®å¼€å§‹å‰çš„å¿…è¦æ­¥éª¤<br>go tidyæ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„æŒ‡ä»¤ï¼Œåœ¨ç‰ˆæœ¬è¿­ä»£ä¸­é¡¹ç›®å¯èƒ½å †ç§¯äº†å¾ˆå¤šå·²ç»ç”¨ä¸ä¸Šçš„ä¾èµ–ï¼Œåœ¨æäº¤å‰å¯ä»¥æ‰§è¡Œä¸€éæ¥æ¸…é™¤</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å­—èŠ‚é’è®­è¥1.2Goçš„ç®€æ˜“è¯å…¸å®ç°</title>
      <link href="/2023/01/16/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A512Go%E7%9A%84%E7%AE%80%E6%98%93%E8%AF%8D%E5%85%B8%E5%AE%9E%E7%8E%B0/"/>
      <url>/2023/01/16/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A512Go%E7%9A%84%E7%AE%80%E6%98%93%E8%AF%8D%E5%85%B8%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><img src="http://cdn.zsenhe.com/d74d1dce1770458e94356c8202062abe" alt="a658ddf2a8dd440689d2ee9009e44084.jpg"></p><p>:::</p><p>ä½¿ç”¨httpè¯·æ±‚å®ç°çš„ç®€æ˜“è¯å…¸åŠŸèƒ½ï¼Œæ•ˆæœå¦‚å›¾<br><img src="http://cdn.zsenhe.com/134fd6bf25da4e929492f095f2e30bb5" alt="dict.png"></p><p>ä»£ç å®ç°:</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bufio&quot;</span></span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">TransType <span class="type">string</span> <span class="string">`json:&quot;trans_type&quot;&#x27;`</span></span><br><span class="line">Source    <span class="type">string</span> <span class="string">`json:&quot;source&quot;&#x27;`</span></span><br><span class="line">UserId    <span class="type">string</span> <span class="string">`json:&quot;user_id&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DictResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">Rc   <span class="type">int</span> <span class="string">`json:&quot;rc&quot;`</span></span><br><span class="line">Wiki <span class="keyword">struct</span> &#123;</span><br><span class="line">KnownInLaguages <span class="type">int</span> <span class="string">`json:&quot;known_in_laguages&quot;`</span></span><br><span class="line">Description     <span class="keyword">struct</span> &#123;</span><br><span class="line">Source <span class="type">string</span>      <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">Target <span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;target&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;description&quot;`</span></span><br><span class="line">ID   <span class="type">string</span> <span class="string">`json:&quot;id&quot;`</span></span><br><span class="line">Item <span class="keyword">struct</span> &#123;</span><br><span class="line">Source <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">Target <span class="type">string</span> <span class="string">`json:&quot;target&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;item&quot;`</span></span><br><span class="line">ImageURL  <span class="type">string</span> <span class="string">`json:&quot;image_url&quot;`</span></span><br><span class="line">IsSubject <span class="type">string</span> <span class="string">`json:&quot;is_subject&quot;`</span></span><br><span class="line">Sitelink  <span class="type">string</span> <span class="string">`json:&quot;sitelink&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;wiki&quot;`</span></span><br><span class="line">Dictionary <span class="keyword">struct</span> &#123;</span><br><span class="line">Prons <span class="keyword">struct</span> &#123;</span><br><span class="line">EnUs <span class="type">string</span> <span class="string">`json:&quot;en-us&quot;`</span></span><br><span class="line">En   <span class="type">string</span> <span class="string">`json:&quot;en&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;prons&quot;`</span></span><br><span class="line">Explanations []<span class="type">string</span>      <span class="string">`json:&quot;explanations&quot;`</span></span><br><span class="line">Synonym      []<span class="type">string</span>      <span class="string">`json:&quot;synonym&quot;`</span></span><br><span class="line">Antonym      []<span class="type">string</span>      <span class="string">`json:&quot;antonym&quot;`</span></span><br><span class="line">WqxExample   [][]<span class="type">string</span>    <span class="string">`json:&quot;wqx_example&quot;`</span></span><br><span class="line">Entry        <span class="type">string</span>        <span class="string">`json:&quot;entry&quot;`</span></span><br><span class="line">Type         <span class="type">string</span>        <span class="string">`json:&quot;type&quot;`</span></span><br><span class="line">Related      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;related&quot;`</span></span><br><span class="line">Source       <span class="type">string</span>        <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;dictionary&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">query</span><span class="params">(word <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">client := &amp;http.Client&#123;&#125;</span><br><span class="line">request := DictRequest&#123;TransType: <span class="string">&quot;en2zh&quot;</span>, Source: word&#125;</span><br><span class="line">buf, err := json.Marshal(request)</span><br><span class="line"><span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line">req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;api.interpreter.caiyunai.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;x-authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line"><span class="comment">//å‘èµ·è¯·æ±‚</span></span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"><span class="comment">//è¯»å–å“åº”</span></span><br><span class="line">bodyText, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> dictResponse DictResponse</span><br><span class="line">err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line">fmt.Println(<span class="string">&quot;                 &quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;æŸ¥è¯¢ç»“æœ:&quot;</span>)</span><br><span class="line">fmt.Println(word, <span class="string">&quot;UK:&quot;</span>, dictResponse.Dictionary.Prons.En, <span class="string">&quot;US:&quot;</span>, dictResponse.Dictionary.Prons.EnUs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> dictResponse.Dictionary.Explanations &#123;</span><br><span class="line">fmt.Println(item)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;                 &quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">reader := bufio.NewReader(os.Stdin)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·é”®å…¥ç¿»è¯‘çš„å•è¯&quot;</span>)</span><br><span class="line">readString, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">readString = strings.TrimSuffix(readString, <span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line">query(readString)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿”å›çš„Responseä½¿ç”¨<a href="https://oktools.net/json2go">https://oktools.net/json2go</a>è¿›è¡Œè½¬æ¢</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å­—èŠ‚é’è®­è¥1Goè¯­è¨€åŸºç¡€</title>
      <link href="/2023/01/15/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A51Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/01/15/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A51Go%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>::: hljs-center</p><p><img src="http://cdn.zsenhe.com/e5433b8341264f1ea0573e7fd29d95f6" alt="image.png"></p><p>:::</p><p>::: hljs-center</p><p><font size="6">Goè¯­è¨€åŸºç¡€</font></p><p>:::</p><h3 id="Goè¯­è¨€çš„ä¼˜åŠ¿"><a href="#Goè¯­è¨€çš„ä¼˜åŠ¿" class="headerlink" title="++Goè¯­è¨€çš„ä¼˜åŠ¿++"></a><strong>++Goè¯­è¨€çš„ä¼˜åŠ¿++</strong></h3><h4 id="1-é«˜æ€§èƒ½ï¼Œé«˜å¹¶å‘"><a href="#1-é«˜æ€§èƒ½ï¼Œé«˜å¹¶å‘" class="headerlink" title="1.é«˜æ€§èƒ½ï¼Œé«˜å¹¶å‘"></a><strong>1.é«˜æ€§èƒ½ï¼Œé«˜å¹¶å‘</strong></h4><p>æ‹¥æœ‰å’Œjavaï¼Œc++ç›¸åª²ç¾çš„æ€§èƒ½ï¼Œå†…åµŒäº†å¯¹é«˜å¹¶å‘çš„æ”¯æŒï¼ˆä¸éœ€å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼‰</p><h4 id="2-è¯­æ³•ç®€å•ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“"><a href="#2-è¯­æ³•ç®€å•ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“" class="headerlink" title="2.è¯­æ³•ç®€å•ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“"></a><strong>2.è¯­æ³•ç®€å•ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“</strong></h4><p>å¦‚ä¸‹ä»…ç”¨åè¡Œä»£ç å³å®ç°äº†å¯æ‰¿è½½é™æ€è®¿é—®ï¼Œæ”¯æŒé«˜å¹¶å‘çš„æœåŠ¡å™¨</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">http.Handle(<span class="string">&quot;/&quot;</span>,http.FileServer(http.Dir(<span class="string">&quot;.&quot;</span>)))</span><br><span class="line">http.ListenAndServe(<span class="string">&quot;:8080&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-ä¸°å¯Œçš„æ ‡å‡†åº“"><a href="#3-ä¸°å¯Œçš„æ ‡å‡†åº“" class="headerlink" title="3.ä¸°å¯Œçš„æ ‡å‡†åº“"></a><strong>3.ä¸°å¯Œçš„æ ‡å‡†åº“</strong></h4><p>goæä¾›å¤§é‡å¼ºå¤§çš„æ ‡å‡†åº“ï¼Œå¾ˆå¤šæ—¶å€™ä¸éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å³å¯å®ç°å¤æ‚çš„åŠŸèƒ½ï¼Œå¤§å¤§é™ä½äº†å­¦ä¹ æˆæœ¬</p><h4 id="4-å®Œå–„çš„å·¥å…·é“¾"><a href="#4-å®Œå–„çš„å·¥å…·é“¾" class="headerlink" title="4.å®Œå–„çš„å·¥å…·é“¾"></a><strong>4.å®Œå–„çš„å·¥å…·é“¾</strong></h4><p>åŒ…æ‹¬åŒ…ç®¡ç†ï¼Œideç­‰å®Œå–„ç¨³å®šçš„å·¥å…·</p><h4 id="5-é™æ€ç¼–è¯‘"><a href="#5-é™æ€ç¼–è¯‘" class="headerlink" title="5.é™æ€ç¼–è¯‘"></a><strong>5.é™æ€ç¼–è¯‘</strong></h4><p>åœ¨goè¯­è¨€ä¸­ï¼Œé»˜è®¤æ‰€æœ‰ç»“æœéƒ½æ˜¯é™æ€é“¾æ¥çš„ï¼Œåªéœ€æ‹·è´ç¼–è¯‘åçš„ä¸€ä¸ªå”¯ä¸€æ–‡ä»¶å³å¯éƒ¨ç½²è¿è¡Œï¼Œé•œåƒä½“ç§¯å¯ä»¥æ§åˆ¶çš„éå¸¸å°ï¼Œéƒ¨ç½²æ–¹ä¾¿å¿«æ·ã€‚</p><h4 id="6-å¿«é€Ÿç¼–è¯‘"><a href="#6-å¿«é€Ÿç¼–è¯‘" class="headerlink" title="6.å¿«é€Ÿç¼–è¯‘"></a><strong>6.å¿«é€Ÿç¼–è¯‘</strong></h4><p>æ‹¥æœ‰é™æ€è¯­è¨€ä¸­æœ€å¿«é€Ÿçš„ç¼–è¯‘é€Ÿåº¦ï¼Œåœ¨å­—èŠ‚è·³åŠ¨å¤§é‡çš„å¾®æœåŠ¡åœ¨çº¿ä¸Šéƒ¨ç½²ä¹‹å‰ç¼–è¯‘æ—¶é—´å°äºä¸€åˆ†é’Ÿï¼Œåœ¨çœŸæ­£æœ¬åœ°å¼€å‘çš„æ—¶å€™ï¼Œä¿®æ”¹å®Œä¸€è¡Œä»£ç éƒ½èƒ½åœ¨ä¸€ç§’é’Ÿä¹‹å†…å¢é‡ç¼–è¯‘å®Œæˆ</p><h4 id="7-è·¨å¹³å°"><a href="#7-è·¨å¹³å°" class="headerlink" title="7.è·¨å¹³å°"></a><strong>7.è·¨å¹³å°</strong></h4><h4 id="8-åƒåœ¾å›æ”¶"><a href="#8-åƒåœ¾å›æ”¶" class="headerlink" title="8.åƒåœ¾å›æ”¶"></a><strong>8.åƒåœ¾å›æ”¶</strong></h4><p>goè¯­è¨€å¸¦æœ‰ç±»ä¼¼javaçš„åƒåœ¾å›æ”¶èƒ½åŠ›ï¼Œå†™ä»£ç æ—¶åªéœ€ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€è€ƒè™‘å†…å­˜é‡Šæ”¾</p><h3 id="Goçš„åŸºç¡€è¯­æ³•"><a href="#Goçš„åŸºç¡€è¯­æ³•" class="headerlink" title="++Goçš„åŸºç¡€è¯­æ³•++"></a><strong>++Goçš„åŸºç¡€è¯­æ³•++</strong></h3><h4 id="goçš„hello-world"><a href="#goçš„hello-world" class="headerlink" title="goçš„hello world"></a><strong>goçš„hello world</strong></h4><p>goçš„helloworldé•¿è¿™æ ·:</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¨‹åºçš„å…¥å£åŒ…</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥äº†æ ‡å‡†åº“é‡Œçš„fmtï¼Œè¿™ä¸ªåº“ä¸»è¦ç”¨äºè¾“å‡ºæ ¼å¼åŒ–å­—ç¬¦ä¸²ç­‰</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ç¡¬ç›˜ä¸­ä»¥main.goä¿å­˜ï¼Œæƒ³ç›´æ¥è¿è¡Œç¨‹åºä½¿ç”¨</p><blockquote><p>go run main.go</p></blockquote><p>goæ”¯æŒç›´æ¥ç¼–è¯‘æˆäºŒè¿›åˆ¶è¿è¡Œï¼Œä½¿ç”¨</p><blockquote><p>go build main.go</p></blockquote><p>éšåè¾“å…¥</p><blockquote><p>.&#x2F;main</p></blockquote><p>ä¸å‡ºæ„å¤–å°†è¾“å‡º</p><blockquote><p>hello world</p></blockquote><h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a><strong>å˜é‡</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//goçš„å˜é‡å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//goæ‹¥æœ‰è‡ªåŠ¨æ¨æ–­å˜é‡ç±»å‹ï¼Œæ–¹å¼å¦‚ä¸‹</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="comment">//å½“ç„¶ä¹Ÿå¯ä»¥æ˜¾å¼çš„å£°æ˜å˜é‡ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">int</span> = <span class="number">2</span></span><br><span class="line"><span class="comment">//è¿˜æœ‰è¿™ç§æ›´å¸¸ç”¨çš„æ–¹å¼</span></span><br><span class="line">text := <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="comment">//å¸¸é‡çš„å£°æ˜</span></span><br><span class="line"><span class="comment">//æ­¤å¤–goçš„æµ®ç‚¹æ•°ä¸ä½¿ç”¨doubleï¼ŒfloatåŒºåˆ†</span></span><br><span class="line"><span class="comment">//float64ä»£è¡¨8ç²¾åº¦çš„æµ®ç‚¹æ•°ï¼Œ32ä»£è¡¨4ç²¾åº¦çš„æµ®ç‚¹æ•°(double)</span></span><br><span class="line"><span class="keyword">const</span> pi <span class="type">float64</span> = <span class="number">3.14</span></span><br><span class="line"></span><br><span class="line">fmt.Println(text, a, b, pi)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="if-else"><a href="#if-else" class="headerlink" title="if-else"></a><strong>if-else</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™æ³•ä¸å¤§éƒ¨åˆ†è¯­è¨€ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ifåé¢ä¸éœ€è¦æ‹¬å·</span></span><br><span class="line"><span class="comment">//ï¼ˆä¸æ˜¯å¾ˆä¹ æƒ¯ï¼Œå†™äº†æ‹¬å·ä¿å­˜äº†çš„æ—¶å€™ç¼–è¾‘å™¨è¿˜æ˜¯ä¼šå»æ‰æ‹¬å·)</span></span><br><span class="line"><span class="keyword">if</span> <span class="number">7</span>%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">fmt.Println(<span class="number">7</span>, <span class="string">&quot;is even&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="number">7</span>, <span class="string">&quot;is odd&quot;</span>)</span><br><span class="line">&#125; <span class="comment">//å¦å¤–ï¼Œå¤§æ‹¬å·æ˜¯å¿…è¦çš„ï¼Œåªæœ‰ä¸€è¡Œçš„é€»è¾‘çš„æ—¶å€™ä¹Ÿå»ä¸æ‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">if</span> num := <span class="number">9</span>; num &gt;= <span class="number">0</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;9 &gt;= 0&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> num &lt;= <span class="number">10</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;9 &lt;=10&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a><strong>å¾ªç¯</strong></h4><p>goä¸­æ²¡æœ‰while,do whileç­‰ï¼Œåªæœ‰forå¾ªç¯</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="comment">//æ­»å¾ªç¯</span></span><br><span class="line">fmt.Println(<span class="string">&quot;hhh&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n:=<span class="number">0</span>;n&lt;<span class="number">5</span>;n++&#123;</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="switch"><a href="#switch" class="headerlink" title="switch"></a><strong>switch</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">a := <span class="number">2</span></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;one&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;two&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;three&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>, <span class="number">5</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;four or five&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;other number&quot;</span>)</span><br><span class="line">&#125; <span class="comment">//golangä¸­çš„switchä¸ä¼šåƒjavaï¼Œcä¸€æ ·ä¸åŠ breakè¯­å¥é‡åˆ°ç¬¦åˆçš„å°†ç»§ç»­è¿è¡Œä¸‹å»</span></span><br><span class="line"><span class="comment">//å¦‚ç¨‹åºè¿™é‡Œæ‰§è¡Œåˆ°â€œcase 2â€çš„é€»è¾‘ä¾¿ä¼šè¿”å›</span></span><br><span class="line"></span><br><span class="line">t := time.Now()</span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="comment">// switchçš„åˆ†æ”¯ä¸­æ”¯æŒä½¿ç”¨æ¡ä»¶åˆ¤æ–­ï¼Œå¯ä»¥è¿™æ ·æ¥å–ä»£if-else</span></span><br><span class="line"><span class="keyword">case</span> t.Hour() &lt; <span class="number">12</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;it&#x27;s before noon&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;it&#x27;s after noon&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a><strong>åˆ‡ç‰‡</strong></h4><p>åœ¨çœŸæ­£ä¸šåŠ¡é€»è¾‘ä¸­å¾ˆå°‘ä½¿ç”¨æ•°ç»„ï¼Œæ›´å¤šä½¿ç”¨çš„æ˜¯ åˆ‡ç‰‡<br>åˆ‡ç‰‡ç›¸è¾ƒäºæ•°ç»„é•¿åº¦ä¸å¯å˜çš„å±€é™æ€§ï¼Œä½ å¯ä»¥ä»»æ„çš„å»æ›´æ”¹å®ƒçš„é•¿åº¦ï¼Œæ‹¥æœ‰æ›´å¤šä¸°å¯Œçš„æ“ä½œ</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨makeåˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡</span></span><br><span class="line">s := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="number">3</span>)</span><br><span class="line">s[<span class="number">0</span>] = <span class="string">&quot;a&quot;</span></span><br><span class="line">s[<span class="number">1</span>] = <span class="string">&quot;b&quot;</span></span><br><span class="line">s[<span class="number">2</span>] = <span class="string">&quot;c&quot;</span></span><br><span class="line">fmt.Println(<span class="string">&quot;get&quot;</span>, s[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="string">&quot;d&quot;</span>) <span class="comment">//å‘åˆ‡ç‰‡è¿½åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ </span></span><br><span class="line">fmt.Println(s)     <span class="comment">//è¾“å‡º a b c d</span></span><br><span class="line"></span><br><span class="line">c := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="built_in">len</span>(s))</span><br><span class="line"><span class="built_in">copy</span>(c, s) <span class="comment">//å°†sæ‹·è´è‡³cåˆ‡ç‰‡ä¸­</span></span><br><span class="line">fmt.Println(c)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‹¥æœ‰åƒpythoné‚£æ ·çš„åˆ‡ç‰‡æ“ä½œ</span></span><br><span class="line">fmt.Println(s[<span class="number">0</span>:<span class="number">2</span>]) <span class="comment">//è¾“å‡ºa,b åŒºé—´ä¸ºå·¦é—­å³å¼€</span></span><br><span class="line">fmt.Println(s[:<span class="number">4</span>])  <span class="comment">//è¾“å‡ºa,b,c,d</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="map"><a href="#map" class="headerlink" title="map"></a><strong>map</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>) <span class="comment">//string ä¸ºkeyç±»å‹ï¼Œintä¸ºvalueç±»å‹</span></span><br><span class="line">m[<span class="string">&quot;apple&quot;</span>] = <span class="number">10</span></span><br><span class="line">m[<span class="string">&quot;pen&quot;</span>] = <span class="number">20</span></span><br><span class="line">fmt.Println(m[<span class="string">&quot;pen&quot;</span>])</span><br><span class="line"></span><br><span class="line">r, contains := m[<span class="string">&quot;apple&quot;</span>]</span><br><span class="line">fmt.Println(r, contains) <span class="comment">//è¾“å‡º 10 true (contains æ¥æ”¶æ˜¯å¦å­˜åœ¨å…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="range"><a href="#range" class="headerlink" title="range"></a><strong>range</strong></h4><p>å¯¹äºåˆ‡ç‰‡æˆ–mapï¼Œå¯ä»¥ä½¿ç”¨rangeæ¥å¿«é€Ÿéå†ã€‚è¿™æ ·ä»£ç å°†æ›´åŠ ç®€æ´</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import &quot;fmt&quot;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">var arry [5]int</span><br><span class="line">arry[0] = 1</span><br><span class="line">arry[1] = 2</span><br><span class="line">arry[2] = 3</span><br><span class="line">arry[3] = 4</span><br><span class="line">arry[4] = 5</span><br><span class="line">//è¾“å‡ºç»“æœ:</span><br><span class="line">//idx= 0  value= 1</span><br><span class="line">//idx= 1  value= 2</span><br><span class="line">//idx= 2  value= 3</span><br><span class="line">//idx= 3  value= 4</span><br><span class="line">//idx= 4  value= 5</span><br><span class="line">for idx, value := range arry &#123;</span><br><span class="line">fmt.Println(&quot;idx=&quot;, idx, &quot; value=&quot;, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">m := make(map[string]int)</span><br><span class="line">m[&quot;apple&quot;] = 10</span><br><span class="line">m[&quot;pen&quot;] = 5</span><br><span class="line">for k, v := range m &#123;</span><br><span class="line">fmt.Println(&quot;item=&quot;, k, &quot; price=&quot;, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a><strong>å‡½æ•°</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›a+bçš„ç»“æœ</span></span><br><span class="line"><span class="comment">// æ³¨æ„å£°æ˜æ–¹å¼</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add0</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// goä¸­åŸç”Ÿæ”¯æŒè¿”å›å¤šä¸ªå€¼</span></span><br><span class="line"><span class="comment">// è¯¥å‡½æ•°è¿”å›æŒ‡å®škeyå¯¹åº”çš„å€¼ä»¥åŠæ˜¯å¦å­˜åœ¨è¯¥é”®å€¼å¯¹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exists</span><span class="params">(m <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>, k <span class="type">string</span>)</span></span> (value <span class="type">string</span>, contains <span class="type">bool</span>) &#123;</span><br><span class="line">v, ok := m[k]</span><br><span class="line"><span class="keyword">return</span> v, ok</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">res := add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fmt.Println(res) <span class="comment">//out: 3</span></span><br><span class="line"></span><br><span class="line">value, contains := exists(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>&#125;, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">fmt.Println(value, contains) <span class="comment">//out:A true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a><strong>æŒ‡é’ˆ</strong></h4><p>goä¹Ÿåˆæ­¥æ”¯æŒæŒ‡é’ˆï¼Œä½†è¿œæ²¡æœ‰cé‚£æ ·å¼ºå¤§ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è§†å›¾å°†n+2,ä½†å®é™…ä¸Šæ˜¯æ— æ•ˆçš„</span></span><br><span class="line"><span class="comment">// ä¼ è¿‡æ¥çš„nå‚æ•°ä»…ä¸ºä¸€ä¸ªæ‹·è´</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2</span><span class="params">(n <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">n += <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ‰æ•ˆçš„å†™æ³•ï¼ˆå°†æŒ‡é’ˆä½œä¸ºå‚æ•°å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2ptr</span><span class="params">(n *<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">*n += <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">n := <span class="number">2</span></span><br><span class="line">add2(n)</span><br><span class="line">fmt.Println(n) <span class="comment">//2</span></span><br><span class="line">add2ptr(&amp;n)</span><br><span class="line">fmt.Println(n) <span class="comment">//4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a><strong>ç»“æ„ä½“</strong></h4><p>ç±»ä¼¼javaä¸­çš„ç±»å¯¹è±¡</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">name     <span class="type">string</span></span><br><span class="line">password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æ„ä½“æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> resetPassword(newpassword <span class="type">string</span>) &#123;</span><br><span class="line">u.password = newpassword</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := user&#123;name: <span class="string">&quot;zsh&quot;</span>, password: <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line">b := user&#123;name: <span class="string">&quot;zyy&quot;</span>&#125;</span><br><span class="line">b.password = <span class="string">&quot;1024&quot;</span></span><br><span class="line">fmt.Println(a.name, <span class="string">&quot;password: &quot;</span>, a.password) <span class="comment">//out: zsh password: 1024</span></span><br><span class="line">a.resetPassword(<span class="string">&quot;zyy i love u&quot;</span>)</span><br><span class="line">fmt.Println(a.password) <span class="comment">//out: zyy i love u</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a><strong>å¼‚å¸¸å¤„ç†</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;errors&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">name     <span class="type">string</span></span><br><span class="line">password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// errorè¡¨ç¤ºå¯èƒ½å‡ºç°çš„é”™è¯¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findUser</span><span class="params">(users []user, name <span class="type">string</span>)</span></span> (v *user, err <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> _, u := <span class="keyword">range</span> users &#123;</span><br><span class="line"><span class="keyword">if</span> u.name == name &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;u, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœªå¯»æ‰¾åˆ°ç”¨æˆ·ï¼Œnewä¸€ä¸ªerrorsä½œä¸ºç¬¬äºŒä¸ªå‚æ•°è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">&quot;not found&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">u, err := findUser([]user&#123;&#123;<span class="string">&quot;zsh&quot;</span>, <span class="string">&quot;1024&quot;</span>&#125;&#125;, <span class="string">&quot;zsh&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(u.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a><strong>å­—ç¬¦ä¸²æ“ä½œ</strong></h4><p>stringsä¸‹åŒ…å«äº†è®¸å¤šå¯¹å­—ç¬¦ä¸²çš„å¤„ç†</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">text := <span class="string">&quot;zsh&quot;</span></span><br><span class="line">fmt.Println(strings.Contains(text, <span class="string">&quot;zs&quot;</span>))  <span class="comment">//out: true</span></span><br><span class="line">fmt.Println(strings.Contains(text, <span class="string">&quot;zyy&quot;</span>)) <span class="comment">//out: false</span></span><br><span class="line">fmt.Println(strings.Count(text, <span class="string">&quot;z&quot;</span>))      <span class="comment">//out: 1 (ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(text))                     <span class="comment">//out: 3 ï¼ˆç»Ÿè®¡é•¿åº¦</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(text))                     <span class="comment">//out: 3 ï¼ˆç»Ÿè®¡é•¿åº¦</span></span><br><span class="line">fmt.Println(strings.Split(text, <span class="string">&quot;-&quot;</span>))      <span class="comment">//out [z,s,h] (åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›æ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="JSONå¤„ç†"><a href="#JSONå¤„ç†" class="headerlink" title="JSONå¤„ç†"></a><strong>JSONå¤„ç†</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœkeyéœ€è¦å°å†™çš„è¯ï¼Œåœ¨åé¢è¿½åŠ `json: key&quot;</span></span><br><span class="line">idx      <span class="type">int</span> <span class="string">`json:&quot;idx&quot;`</span></span><br><span class="line">Name     <span class="type">string</span></span><br><span class="line">Password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">zsh := user&#123;idx: <span class="number">1</span>, Name: <span class="string">&quot;zsh&quot;</span>, Password: <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line"><span class="comment">//å°†ç»“æ„ä½“åºåˆ—åŒ–ä¸ºjsonæ–‡æœ¬</span></span><br><span class="line">buf, err := json.Marshal(zsh)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(buf)         <span class="comment">// [12334....]</span></span><br><span class="line">fmt.Println(<span class="type">string</span>(buf)) <span class="comment">// &#123;&quot;Name&quot;:&quot;zsh&quot;,&quot;Password&quot;:&quot;1024&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">var</span> zshCpy user</span><br><span class="line">json.Unmarshal(buf, &amp;zshCpy)</span><br><span class="line">fmt.Println(zshCpy.Name) <span class="comment">//zsh</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ—¶é—´å¤„ç†"><a href="#æ—¶é—´å¤„ç†" class="headerlink" title="æ—¶é—´å¤„ç†"></a><strong>æ—¶é—´å¤„ç†</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//è·å–å½“å‰æ—¶é—´</span></span><br><span class="line">now := time.Now()</span><br><span class="line">fmt.Println(now) <span class="comment">//out: 2023-01-16 05:51:18.9810204 +0800 CST m=+0.002828701</span></span><br><span class="line"><span class="comment">//æ„é€ ä¸€ä¸ªæ—¶é—´</span></span><br><span class="line">t := time.Date(<span class="number">2022</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">0</span>, time.UTC)</span><br><span class="line">fmt.Println(t.Year()) <span class="comment">//out: 2022</span></span><br><span class="line"><span class="comment">//å‡å»æ—¶é—´æ®µ</span></span><br><span class="line">diff := now.Sub(t)</span><br><span class="line">fmt.Println(diff) <span class="comment">//9097h33m1.4173081s</span></span><br><span class="line"><span class="comment">//è·å–æ—¶é—´æ¯«ç§’æ•°</span></span><br><span class="line">fmt.Println(now.Unix())</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢"><a href="#å­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢"></a><strong>å­—ç¬¦ä¸²ä¸æ•°å­—çš„è½¬æ¢</strong></h4><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//å‚æ•°ä¸º: å­—ç¬¦ä¸²ï¼Œç²¾åº¦</span></span><br><span class="line">f, _ := strconv.ParseFloat(<span class="string">&quot;1.234&quot;</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Println(f) <span class="comment">//1.234</span></span><br><span class="line"><span class="comment">//å‚æ•°ä¸º: å­—ç¬¦ä¸²ï¼Œè¿›åˆ¶ï¼ˆ0ä¸ºè‡ªåŠ¨æ¨æµ‹),ç²¾åº¦</span></span><br><span class="line">n, _ := strconv.ParseInt(<span class="string">&quot;10&quot;</span>, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Println(n) <span class="comment">//10</span></span><br><span class="line"></span><br><span class="line">n2, _ := strconv.Atoi(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">fmt.Println(n2) <span class="comment">//123</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿›ç¨‹ä¿¡æ¯"><a href="#è¿›ç¨‹ä¿¡æ¯" class="headerlink" title="è¿›ç¨‹ä¿¡æ¯"></a><strong>è¿›ç¨‹ä¿¡æ¯</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">&quot;fmt&quot;</span><br><span class="line">&quot;os&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">//ä½¿ç”¨å‘½ä»¤ go run main.go a b c d</span><br><span class="line">//è¾“å‡º:</span><br><span class="line">//[C:\Users\hasee\AppData\Local\Temp\go-build580179449\b001\exe\main.exe a b c d]</span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶åœ°å€ æ¥ä¸‹æ¥æ˜¯args</span><br><span class="line">fmt.Println(os.Args)</span><br><span class="line">//è·å–ç¯å¢ƒå˜é‡</span><br><span class="line">fmt.Println(os.Getenv(&quot;PATH&quot;))</span><br><span class="line">//å†™å…¥ç¯å¢ƒå˜é‡</span><br><span class="line">fmt.Println(os.Setenv(&quot;zsh&quot;, &quot;1024&quot;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="++å°ç»“++"></a><strong>++å°ç»“++</strong></h3><h4 id="æ ‡å‡†åº“"><a href="#æ ‡å‡†åº“" class="headerlink" title="æ ‡å‡†åº“"></a><strong>æ ‡å‡†åº“</strong></h4><blockquote><p><strong>fmt</strong> æä¾›æ ¼å¼åŒ–è¾“å…¥è¾“å‡º<br><strong>os</strong> æä¾›ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„å‡½æ•°<br><strong>string</strong> æä¾›å­—ç¬¦ä¸²æ“ä½œçš„å‡½æ•°<br><strong>net</strong> æä¾›ç½‘ç»œç¼–ç¨‹çš„å‡½æ•°<br><strong>strconv</strong> æä¾›æ•°å­—ä¸å­—ç¬¦ä¹‹é—´çš„è½¬æ¢æ“ä½œ<br><strong>time</strong> æ—¶é—´å¤„ç†<br><strong>encoding&#x2F;json</strong> jsonçš„ç›¸å…³æ“ä½œ</p></blockquote><p>ä¸€ä¸ªç»ƒä¹ çš„å°é¡¹ç›®ï¼ŒäºŒåˆ†æŸ¥æ‰¾çŒœè°œæ¸¸æˆ</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bufio&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math/rand&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨å½“å‰æ—¶é—´æˆ³åˆå§‹åŒ–éšæœºç§å­</span></span><br><span class="line"><span class="comment">//å¦åˆ™ä¼šè¾“å‡ºåŒä¸€ä¸ªæ•°</span></span><br><span class="line">rand.Seed(time.Now().UnixNano())</span><br><span class="line">maxNum := <span class="number">100</span></span><br><span class="line">rNumber := rand.Intn(maxNum)</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;Please input your anser&quot;</span>)</span><br><span class="line"><span class="comment">//è½¬æ¢ä¸ºä¸€ä¸ªåªè¯»çš„æµ</span></span><br><span class="line">reader := bufio.NewReader(os.Stdin)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">input, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤„ç†æ¢è¡Œç¬¦</span></span><br><span class="line">input = strings.TrimSuffix(input, <span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line">guess, err := strconv.Atoi(input)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;error input,it not is number&quot;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;your guess is&quot;</span>, guess)</span><br><span class="line"><span class="keyword">if</span> guess &gt; rNumber &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;ä½ è¾“å…¥çš„æ•°å­—å¤§äºç­”æ¡ˆï¼Œè¯·å†æ¬¡è¾“å…¥&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> guess &lt; rNumber &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;ä½ è¾“å…¥çš„æ•°å­—å°äºç­”æ¡ˆï¼Œè¯·å†æ¬¡è¾“å…¥&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Accept!&quot;</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿä¼šé¢„ç”Ÿæˆä¸€ä¸ª[0,100)çš„éšæœºæ•°<br>ç”¨æˆ·é€šè¿‡è¿ç»­çš„è¾“å…¥å°†å¾—åˆ°<br>â€œè¾“å…¥çš„æ•°å¤§äºç­”æ¡ˆâ€ or â€œè¾“å…¥çš„æ•°å°äºç­”æ¡ˆâ€<br>ç›´åˆ°çŒœæµ‹æ­£ç¡®å®Œæˆæ¸¸æˆ<br><img src="http://cdn.zsenhe.com/b8035b48030f4500a2770b91fdd9f7be" alt="Riddle.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linuxä¸‹å¯»æ‰¾æ­£åœ¨è¿è¡Œçš„shè„šæœ¬</title>
      <link href="/2023/01/07/linux%E4%B8%8B%E5%AF%BB%E6%89%BE%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84sh%E8%84%9A%E6%9C%AC/"/>
      <url>/2023/01/07/linux%E4%B8%8B%E5%AF%BB%E6%89%BE%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84sh%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<p>ä¸šåŠ¡æŒ‚äº†å¾ˆå¤šshè„šæœ¬ï¼Œç”¨çš„screenæ¥æŠŠä»–ä»¬ç»´æŠ¤èµ·æ¥ï¼Œä»Šå¤©è«åå…¶å¦™ä¸¤ä¸ªè§†çª—å ä¸€å—äº†ã€‚<br>å› ä¸ºç«¯å£å·²ç»ç¡®å®šäº†ï¼Œä¸å¾—ä¸æ€æ­»è¿›ç¨‹ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘æ€ä¹ˆçŸ¥é“shè„šæœ¬åœ¨å“ªå‘¢ï¼Ÿ<br>è°·æ­Œäº†å¥½ä¸€é˜µï¼Œè®°å½•ä¸€ä¸‹ä»¥å¤‡ç”¨</p><p>é¦–å…ˆè¾“å…¥</p><blockquote><p>ps -ef|grep sh</p></blockquote><p>æ¥å¯»æ‰¾æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„shè„šæœ¬è¿›ç¨‹<br><img src="http://cdn.zsenhe.com/d3309c2294664d0eae8937aa1f063d05" alt="QQå›¾ç‰‡20230108052852.png"><br>çº¢æ¡†æ‰€ç¤ºå³æ˜¯å®ƒçš„è¿›ç¨‹å·ï¼Œæœ‰çš„æ—¶å€™æ²¡æ³•é€šè¿‡ç»™å‡ºçš„ä¿¡æ¯æ¥è¾¨è®¤</p><p>è¿›å…¥ &#x2F;&#x2F;proc&#x2F;è¿›ç¨‹å· è¿™ä¸ªç›®å½•ï¼Œé”®å…¥</p><blockquote><p>ll -a</p></blockquote><p><img src="http://cdn.zsenhe.com/36b8edf9adbd4955a600053e6e93b525" alt="QQå›¾ç‰‡20230108053118.png"></p><p>ä»¥æ­¤æ¥ç¡®å®šæ˜¯å¦ä¸ºè¦æ‰¾çš„è¿›ç¨‹</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>spigotä½¿ç”¨sparkæŸ¥çœ‹å³°å€¼å¡é¡¿</title>
      <link href="/2023/01/07/spigot%E4%BD%BF%E7%94%A8spark%E6%9F%A5%E7%9C%8B%E5%B3%B0%E5%80%BC%E5%8D%A1%E9%A1%BF/"/>
      <url>/2023/01/07/spigot%E4%BD%BF%E7%94%A8spark%E6%9F%A5%E7%9C%8B%E5%B3%B0%E5%80%BC%E5%8D%A1%E9%A1%BF/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿™ä¹‹å‰å…ˆç§‘æ™®ä¸€ä¸‹ä»€ä¹ˆæ˜¯tickå¾ªç¯</p><p>å‡ ä¹æ‰€æœ‰çš„æ¸¸æˆï¼ˆåŒ…æ‹¬minecraft) éƒ½æœ‰ä¸€ä¸ªâ€œå¤§å¾ªç¯â€é©±åŠ¨ï¼Œæ¸¸æˆæœåŠ¡å™¨å’Œç©å®¶å‘ç”Ÿçš„äº‹ä»¶è¢«åˆ‡ç‰‡æˆä¸€ä¸ªä¸ªå°å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯â€tickâ€<br>å¯¹äºminecraftï¼Œæ¯æ¬¡tickå‘ç”Ÿæ—¶ï¼Œæ¸¸æˆæœåŠ¡å™¨ä¼šåšä»¥ä¸‹äº‹</p><blockquote><p>å¤„ç†ç©å®¶äº‹ä»¶ï¼ˆå¦‚ç§»åŠ¨ï¼Œæ”¾ç½®&#x2F;ç ´å æ–¹å—ï¼Œæ”»å‡»å®ä½“ï¼‰<br>æ›´æ–°ç©å®¶å’Œå…¶ä»–å®ä½“ä¹‹é—´çš„ä½ç½®<br>å°†æœåŠ¡å™¨å‘ç”Ÿçš„äº‹ä»¶æ›´æ–°è‡³å®¢æˆ·ç«¯(å¦‚æ–¹å—çŠ¶æ€æ”¹å˜ï¼Œå®ä½“ç§»åŠ¨æ“ä½œ)<br>â€¦..è¿˜æœ‰å¾ˆå¤š</p></blockquote><p>æ€»ä¹‹ï¼Œæ¯ä¸ªtickä¸­éƒ½åŒ…å«äº†å¤§é‡é€»è¾‘å¤„ç†<br>åœ¨minecraftä¸­ï¼Œæ¯50æ¯«ç§’ä¼šè¿è¡Œä¸€ä¸ªtickï¼Œå³ä¸€ç§’é’Ÿä¼šè¿è¡Œ20ä¸ªtick<br><img src="https://spark.lucko.me/docs/assets/images/ticks-linear-719b3df9e469b960429fa91e007e4a5b.png" alt="https://spark.lucko.me/docs/assets/images/ticks-linear-719b3df9e469b960429fa91e007e4a5b.png"><br>å½“ç„¶ï¼Œæ¯ä¸ªtickçš„å·¥ä½œé‡å¹¶ä¸ç›¸åŒï¼Œè¿™å–å†³äºæ¸¸æˆé‡Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Œäº‹å®ä¸Šæ°¸è¿œä¸ä¼šå¦‚æ­¤è§„å¾‹</p><p>å¯¹äºspigotæœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ­£å¸¸è¿è¡Œæ—¶æ‰§è¡Œä¸€ä¸ªtickçš„å®Œæ•´æ—¶é—´åº”å½“å°äºç­‰äº50msï¼Œå¦‚æœä¸€ä¸ªèŠ±è´¹æ—¶é—´å°äº50æ¯«ç§’ï¼ŒæœåŠ¡å™¨ä¼šè®©å®ƒä¼‘çœ ç›´è‡³ä¸‹ä¸€ä¸ªtickè¿è¡Œã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå¦‚æœæœåŠ¡å™¨ä¸å°†tickéš”å¼€ï¼Œé‚£ä¹ˆä¸€åˆ‡éƒ½ä¼šå‘ç”Ÿçš„å¾ˆâ€œå¿«â€<br><img src="http://cdn.zsenhe.com/79efd92426f84da8889b0b4f0be3d556" alt="image.png"><br>å¦‚å›¾ï¼Œè¿™æ˜¯sparkç”Ÿæˆçš„åˆ†ææŠ¥å‘Šï¼Œå…¶ä¸­åœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œæœ‰81%çš„æ—¶é—´ç”¨äºç­‰å¾…ä¸‹ä¸€ä¸ªtickå‘ç”Ÿã€‚æ•°æ®åˆ†ææ˜¯å¹³å‡è€Œè¨€çš„ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨è¿è¡Œè‰¯å¥½ï¼Œæ¯ä¸€ä¸ªtickéƒ½åœ¨ä¸åˆ°50mså†…è¢«å¤„ç†å®Œï¼Œå®Œå…¨ä¸ä¼šä½“éªŒåˆ°å¡é¡¿çš„æ„Ÿè§‰</p><p>æ³¨æ„ï¼Œå‰é¢æåˆ°æ•°æ®åˆ†ææ˜¯å¹³å‡çš„ï¼Œå‡è®¾æœåŠ¡å™¨å¤§å¤šæ•°æ—¶é—´éƒ½èƒ½è‰¯å¥½çš„è¿è¡Œtickï¼Œä½†å¶å°”æœ‰ä¸€ä¸ªtickå¤„ç†äº†1000msï¼Œå› ä¸ºæ•°æ®æ˜¯å¹³å‡è€Œè¨€çš„ï¼Œæå€¼è¢«æŠ¹æ‰äº†ï¼Œå¯¹ç€æ•°æ®æŠ¥å‘Šå®Œå…¨æ— ä»ä¸‹æ‰‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ€§èƒ½åˆ†æä¸éœ€è¦å¤ªé•¿æ—¶é—´çš„åŸå› ;é‚£ä¹ˆä¼šæœ‰ä»€ä¹ˆåæœ?åœ¨æ¸¸æˆä¸­ä¼šæ˜¯ä¸å®šæ—¶çš„é€ æˆå¡é¡¿ï¼Œå¯èƒ½æ˜¯å‡ åˆ†é’Ÿæ¥ä¸€æ¬¡ï¼Œä¸¥é‡çš„è¯ä¸»çº¿ç¨‹æŒ‚èµ·å¤ªä¹…ç›´æ¥å°±è¹¦äº†</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå½“å°‘é‡tickï¼ˆæˆ–ä¸€ä¸ªtickï¼‰éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½æ‰§è¡Œçš„æ—¶å€™å°±ä¼šå‘ç”Ÿâ€œå¡é¡¿å³°å€¼â€ï¼Œé€šè¿‡æ­£å¸¸ç”Ÿæˆçš„åˆ†ææ•°æ®æ˜¯å¾ˆéš¾æ‰¾å‡ºé—®é¢˜çš„ï¼Œå¹¸è¿çš„æ˜¯sparkæœ‰å·¥å…·èƒ½å¾ˆå¿«å®šä½åˆ°è¿™äº›çƒ¦äººçš„å³°å€¼</p><ol><li><p>ä½¿ç”¨ &#x2F;spark tickmonitor æ¥å®æ—¶æ£€æµ‹æ»å</p><blockquote><p>ä¸ºäº†ç¡®å®šå³°å€¼å¡é¡¿çš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†å³°å€¼å¡é¡¿ä¸å…¶ä»–æ»ååŒºåˆ†å¼€ã€‚åé¢å¯ä»¥è·Ÿä¸€ä¸ªå‚æ•°ï¼Œè¿™æ˜¯æœåŠ¡å™¨åˆå§‹å¿…é¡»èµ¶ä¸Šçš„å€¼ã€‚<br><img src="http://cdn.zsenhe.com/be0c1b3dc2824162b2ecef005d92ee9f" alt="image.png"><br>æ¥ä¸‹æ¥ï¼Œåªéœ€è¦ç­‰å¾…ï¼Œå°†æ¸¸æˆä¸­çš„å¡é¡¿ä¸è¾“å‡ºä¿¡æ¯å¯¹é½ï¼Œä¼šå¾ˆæ˜æ˜¾çš„çœ‹åˆ°â€œå¡é¡¿å³°å€¼â€<br>ï¼ˆæ‰‹åŠ¨åˆ¶é€ äº†ä¸€ä¸ªå¡é¡¿å³°å€¼hhï¼‰<br><img src="http://cdn.zsenhe.com/56c11996b3ac4d619e16f74bc79b95c7" alt="image.png"></p></blockquote></li><li><p>ä½¿ç”¨ &#x2F;spark profiler â€“only-ticks-over æŸ¥æ‰¾åŸå› </p><blockquote><p>åŠ ä¸Š â€“only-ticks-overé€‰é¡¹åsparkåªä¼šåˆ†ææŒç»­æ—¶é—´è¶…è¿‡ç»™å®šé˜ˆå€¼çš„tickã€‚è¿™æ„å‘³ç€è¿‡æ»¤æ‰äº†å¤§éƒ¨åˆ†æ­£å¸¸tickï¼Œåªç•™ä¸‹äº†é€ æˆå³°å€¼å¡é¡¿çš„tickã€‚å¦‚ä¸Šï¼Œè¿™ä¸ªtickè¶…è¿‡äº†3000msï¼Œæ‰§è¡Œ&#x2F;spark profiler â€“only-ticks-over 2000<br>æ³¨æ„ï¼Œåé¢è·Ÿç€çš„å€¼å¿…é¡»å°äºå¡é¡¿æ“ä½œè¿è¡Œçš„æ¯«ç§’æ•°ï¼Œè¿™é‡Œä½¿ç”¨2000ç¡®å®šèƒ½å°†è¯¥æ“ä½œçš„tickåŠ å…¥è¿›æ¥</p></blockquote></li></ol><p>æœ€åï¼Œè¿è¡Œ&#x2F;spark profiler â€“stop<br><img src="http://cdn.zsenhe.com/ff38ee6427b24662a0fe2de0e4667df3" alt="ZXWSFKAG`0MRXHB`_P.png"><br>é€ æˆå¡é¡¿çš„åŸå› éå¸¸æ˜æ˜¾äº†ï¼Œæ˜¯com.blank038.spring.RewardDataè¿™ä¸ªç±»ä¸‹ï¼Œæ¥ä¸‹æ¥èŒƒå›´å°±ç¼©å°äº†ï¼Œåªéœ€è¦æ³¨é‡ä¿®æ”¹æ’ä»¶çš„é”™è¯¯å°±å¥½äº†ã€‚æ­é…ä¸Šè¿™ä¸ªåŠ ä¸Šåˆç†åˆ©ç”¨timingså’Œsparkåˆ†ææŠ¥å‘Šï¼Œå°±èƒ½å‡†ç¡®çš„å¤„ç†æ¯ä¸€æ¬¡å¡é¡¿ä¸è‡³äºæŸæ‰‹æ— ç­–</p><p>å‚è€ƒ<a href="https://spark.lucko.me/docs">https://spark.lucko.me/docs</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç§‘å¯¼è®ºç¬”è®°â€”â€”(2)æ•°å­—ç³»ç»Ÿ</title>
      <link href="/2022/12/14/%E8%AE%A1%E7%A7%91%E5%AF%BC%E8%AE%BA%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94(2)%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/"/>
      <url>/2022/12/14/%E8%AE%A1%E7%A7%91%E5%AF%BC%E8%AE%BA%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94(2)%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p>æ•°å­—ç³»ç»Ÿå®šä¹‰äº†å¦‚ä½•ç”¨ç‹¬ç‰¹çš„ç¬¦å·æ¥è¡¨ç¤ºä¸€ä¸ªæ•°å­—ã€‚åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªæ•°å­—æœ‰ä¸åŒçš„è¡¨ç¤ºæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªæ•°å­— <strong>ï¼ˆ2Aï¼‰<del>16</del></strong><br>å’Œ <strong>ï¼ˆ52ï¼‰<del>8</del></strong> éƒ½æ˜¯æŒ‡åŒæ ·çš„æ•°é‡ <strong>ï¼ˆ42ï¼‰<del>10</del></strong> ,ä½†æ˜¯å®ƒä»¬çš„è¡¨ç¤ºæˆªç„¶ä¸åŒã€‚<br>æ­£å¦‚æˆ‘ä»¬å†è¯­è¨€ä¸­ä½¿ç”¨ç¬¦å·ï¼ˆå­—ç¬¦ï¼‰æ¥åˆ›å»ºå•è¯ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¦å·ï¼ˆæ•°ç ï¼‰æ¥è¡¨ç¤ºæ•°å­—ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“ä»»ä½•è¯­è¨€ä¸­çš„ç¬¦å·æ•°é‡éƒ½æ˜¯æœ‰é™çš„ã€‚æˆ‘ä»¬éœ€è¦é‡å¤å¹¶ç»„åˆå®ƒä»¬æ¥åˆ›å»ºå•è¯ã€‚æ•°å­—ä¹Ÿæ˜¯ä¸€æ ·ï¼šæˆ‘ä»¬ä½¿ç”¨æœ‰é™çš„æ•°å­—ç¬¦å·ï¼ˆæ•°ç ï¼‰æ¥è¡¨ç¤ºæ•°å­—ï¼Œè¿™æ„å‘³ç€æ•°ç éœ€è¦é‡å¤ä½¿ç”¨ã€‚<br>ä¸€äº›æ•°å­—ç³»ç»Ÿä»¥åŠåœ¨è¿‡å»å¹¿ä¸ºä½¿ç”¨ï¼Œå¹¶å¯ä»¥åˆ†ä¸ºä¸¤ç±»: <strong>ä½ç½®åŒ–ç³»ç»Ÿ</strong>å’Œ<strong>éä½ç½®åŒ–ç³»ç»Ÿ</strong>ï¼Œç€é‡è®¨è®ºå‰è€…</p><hr><h3 id="ä½ç½®åŒ–æ•°å­—ç³»ç»Ÿ"><a href="#ä½ç½®åŒ–æ•°å­—ç³»ç»Ÿ" class="headerlink" title="ä½ç½®åŒ–æ•°å­—ç³»ç»Ÿ"></a><strong>ä½ç½®åŒ–æ•°å­—ç³»ç»Ÿ</strong></h3><p>åœ¨ä½ç½®åŒ–æ•°å­—ç³»ç»Ÿä¸­ï¼Œæ•°å­—ä¸­ç¬¦å·æ‰€å æ®çš„ä½ç½®å†³å®šäº†è¡¨ç¤ºçš„å€¼ã€‚åœ¨è¯¥ç³»ç»Ÿï¼Œæ•°å­—è¿™æ ·è¡¨ç¤º:</p><blockquote><p>+-(S<del>k-1</del>â€¦â€¦..S<del>1</del>S<del>1</del>S<del>0</del>.S<del>-2</del>â€¦S<del>-L</del>)<del>b</del></p></blockquote><p>å®ƒçš„å€¼æ˜¯:</p><blockquote><p>n &#x3D; +-S<del>k-1</del>*b^k-1^+â€¦+S<del>1</del>*b^1^+S<del>0</del>*b^0^+S<del>-1</del>*b^-1^+S<del>-2</del>*b^-2^+â€¦.S<del>-L</del>*b^-L^</p></blockquote><p>å…¶ä¸­ï¼ŒSæ˜¯ä¸€å¥—ç¬¦å·é›†;bæ˜¯åº•ï¼ˆæˆ–è€…åŸºæ•°ï¼‰,å®ƒç­‰äºSç¬¦å·é›†ä¸­çš„ç¬¦å·ï¼ˆæ•°ç ï¼‰æ€»æ•°ï¼Œå…¶ä¸­S<del>k</del>å’ŒS<del>L</del>åˆ†åˆ«ä»£è¡¨æ•´ä¸ªæ•°å­—æˆ–è€…å°æ•°éƒ¨åˆ†çš„ç¬¦å·ã€‚æ³¨æ„æˆ‘ä»¬ä½¿ç”¨çš„è¡¨è¾¾å¼å¯ä»¥ä»å³è¾¹æˆ–è€…å·¦è¾¹æ‰©å±•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œbçš„å¹‚å¯ä»¥ä»ä¸€ä¸ªæ–¹å‘ç”±0åˆ°K-1ï¼Œä¹Ÿå¯ä»¥ä»0ä¸€ä¸ªæ–¹å‘ç”±-1åˆ°-Lã€‚bçš„éè´Ÿæ•°å¹‚ä¸è¯¥æ•°å­—çš„æ•´æ•°éƒ¨åˆ†æœ‰å…³ï¼Œè€Œè´Ÿæ•°å¹‚ä¸è¯¥æ•°å­—çš„å°æ•°éƒ¨åˆ†æœ‰å…³ã€‚+-ç¬¦å·è¡¨ç¤ºè¯¥æ•°å­—å¯æ­£å¯è´Ÿ</p><h4 id="åè¿›åˆ¶ç³»ç»Ÿ"><a href="#åè¿›åˆ¶ç³»ç»Ÿ" class="headerlink" title="åè¿›åˆ¶ç³»ç»Ÿ:"></a><strong>åè¿›åˆ¶ç³»ç»Ÿ:</strong></h4><p>é¦–å…ˆè®¨è®ºçš„ä½ç½®åŒ–ç³»ç»Ÿæ˜¯ <strong>åè¿›åˆ¶ç³»ç»Ÿ</strong> ã€‚åœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œåº•b&#x3D;10 å¹¶ä¸”æˆ‘ä»¬ç”¨10ä¸ªç¬¦å·æ¥è¡¨ç¤ºä¸€ä¸ªæ•°ã€‚ç¬¦å·é›†æ˜¯ <strong>{0,1,2,3,4,5,6,7,8,9}</strong><br>æ­£å¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œè¯¥ç³»ç»Ÿçš„ç¬¦å·å¸¸è¢«ç§°ä¸ºâ€œåè¿›åˆ¶æ•°ç â€æˆ–è€…ä»…ç§°ä¸º<strong>æ•°ç </strong>ã€‚æš‚æ—¶æˆ‘ä»¬ä½¿ç”¨+-æ¥è¡¨ç¤ºä¸€ä¸ªæ•°ç¬¦å·ï¼Œä½†è¿™äº›ç¬¦å·å¹¶ä¸å­˜å‚¨äºè®¡ç®—æœºä¸­â€”â€”è®¡ç®—æœºå¤„ç†è¯¥ç¬¦å·çš„æ–¹å¼ä¸åŒï¼Œä»¥åå†æ</p><p>åœ¨åè¿›åˆ¶ç³»ç»Ÿä¸­ï¼Œæ•°å­—å†™ä¸º:</p><blockquote><p>+-(S<del>k-1</del>â€¦.S<del>2</del>S<del>1</del>S<del>0</del>.S<del>-1</del>S<del>-2</del>S<del>-L</del>)<del>10</del></p></blockquote><p>ä¸ºäº†ç®€ä¾¿ï¼Œé€šå¸¸çœç•¥æ‹¬å·ï¼Œåº•å’Œæ­£å·ã€‚ä¾‹å¦‚å°†+(552.23)è¡¨ç¤ºä¸º552.23,åº•å’Œ+æ˜¯éšå¼å­˜åœ¨çš„ã€‚</p><h5 id="1-æ•´æ•°"><a href="#1-æ•´æ•°" class="headerlink" title="1.æ•´æ•°:"></a><strong>1.æ•´æ•°:</strong></h5><p>åœ¨åè¿›åˆ¶ç³»ç»Ÿä¸­ï¼Œ<strong>æ•´æ•°</strong>ï¼ˆæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼‰æ˜¯æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ï¼Œåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä½¿ç”¨æ•´æ•°ã€‚ä½¿ç”¨å®ƒæˆ‘ä»¬å·²ä¹ ä»¥ä¸ºå¸¸ã€‚æˆ‘ä»¬æŠŠæ•´æ•°è¡¨ç¤ºä¸º **+-(S<del>k-1</del>â€¦S<del>1</del>S<del>0</del>)<del>10</del>**ï¼Œå…¶å€¼è®¡ç®—ä¸º:</p><blockquote><p>N&#x3D;+-S<del>k-1</del>*10^k-1^+S<del>k-2</del>*10^k-2^â€¦+S<del>0</del>*10^0^</p></blockquote><p>å…¶ä¸­,S<del>i</del>æ˜¯ä¸€ä¸ªæ•°ç ï¼Œb&#x3D;10ä¸ºåº•ï¼ŒKæ˜¯æ•°ç çš„æ•°é‡ã€‚</p><h5 id="æœ€å¤§å€¼"><a href="#æœ€å¤§å€¼" class="headerlink" title="æœ€å¤§å€¼:"></a><strong>æœ€å¤§å€¼:</strong></h5><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦çŸ¥é“å¯ä»¥ç”¨æ•°ç Kè¡¨ç¤ºçš„åè¿›åˆ¶æ•°æ•´æ•°çš„æœ€å¤§å€¼ã€‚ç­”æ¡ˆæ˜¯<strong>N<del>max</del>&#x3D;10^K^-1</strong></p><h4 id="äºŒè¿›åˆ¶ç³»ç»Ÿ"><a href="#äºŒè¿›åˆ¶ç³»ç»Ÿ" class="headerlink" title="äºŒè¿›åˆ¶ç³»ç»Ÿ:"></a><strong>äºŒè¿›åˆ¶ç³»ç»Ÿ:</strong></h4><p>è®¨è®ºçš„ç¬¬äºŒç§ä½ç½®åŒ–æ•°å­—ç³»ç»Ÿæ˜¯<strong>äºŒè¿›åˆ¶ç³»ç»Ÿ</strong>ã€‚åœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œåº•b&#x3D;2, å¹¶ä¸”ç”¨ä¸¤ä¸ªç¬¦å·æ¥è¡¨ç¤ºä¸€ä¸ªæ•°ï¼Œå³S&#x3D;{0,1}ã€‚æ•°æ®ä¸ç¨‹åºéƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ¨¡å¼ï¼ˆå³ä½ä¸²ï¼‰å­˜å‚¨äºè®¡ç®—æœºä¸­çš„ã€‚è¿™æ˜¯å› ä¸ºè®¡ç®—æœºç”±ç”µå­å¼€å…³åˆ¶æˆï¼Œå®ƒä»¬ä»…æœ‰å¼€å’Œå…³ä¸¤ç§çŠ¶æ€ã€‚ä½1è¡¨ç¤ºè¿™ä¸¤çŠ¶æ€ä¹‹ä¸€ï¼Œä½0è¡¨ç¤ºå¦ä¸€ç§çŠ¶æ€ã€‚</p><h5 id="1-æ•´æ•°-1"><a href="#1-æ•´æ•°-1" class="headerlink" title="1.æ•´æ•°:"></a><strong>1.æ•´æ•°:</strong></h5><p>å¯ä»¥æŠŠæ•´æ•°è¡¨ç¤ºä¸º **+-(S<del>k-1</del>â€¦S<del>1</del>S<del>0</del>)<del>2</del>**ï¼Œå…¶å€¼è®¡ç®—ä¸º:</p><blockquote><p>N&#x3D;+-S<del>k-1</del>*2^k-1^+S<del>k-2</del>*2^k-2^â€¦+S<del>0</del>*2^0^</p></blockquote><p>å…¶ä¸­,S<del>i</del>æ˜¯ä¸€ä¸ªæ•°ç ï¼Œb&#x3D;2ä¸ºåº•ï¼ŒKæ˜¯æ•°ç çš„æ•°é‡</p><h5 id="2-å®æ•°"><a href="#2-å®æ•°" class="headerlink" title="2.å®æ•°:"></a><strong>2.å®æ•°:</strong></h5><p>åœ¨äºŒè¿›åˆ¶ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªå®æ•°ï¼ˆå¯å¸¦æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼‰å¯ä»¥ç”±å·¦è¾¹çš„Kä½å’Œå³è¾¹çš„Lä½ç»„æˆï¼Œå³ <strong>+-(S<del>k-1</del>â€¦S<del>1</del>S<del>0</del>.S<del>-1</del>S<del>-L</del>)<del>2</del></strong><br>å…¶å€¼è®¡ç®—ä¸º:</p><blockquote><p>N&#x3D;+-S<del>k-1</del>*2^k-1^+S<del>k-2</del>*2^k-2^â€¦+S<del>0</del>*2^0^+S<del>-1</del>*2^-1^â€¦.+S<del>-L</del>*2^-L^</p></blockquote><p>å…¶ä¸­,S<del>i</del>æ˜¯ä¸€ä¸ªæ•°ç ï¼Œb&#x3D;2ä¸ºåº•ï¼ŒKæ˜¯å°æ•°ç‚¹å·¦è¾¹ä½çš„æ•°é‡ï¼ŒLæ˜¯å°æ•°ç‚¹å³è¾¹ä½çš„æ•°é‡ã€‚æ³¨æ„: Kä»0å¼€å§‹ï¼ŒLä»-1å¼€å§‹ã€‚æœ€é«˜çš„å¹‚æ˜¯K-1ä¸”æœ€ä½çš„å¹‚æ˜¯-Lã€‚<img src="http://cdn.zsenhe.com/5ed25276f6d2466b8a5cbdfb962220e1" alt="å°æ•°éƒ¨åˆ†è½¬æ¢.jpg"></p><p>ä¾‹:</p><blockquote><p>ä»¥ä¸‹æ˜¾ç¤ºäº†ä¸åè¿›åˆ¶æ•°5.75ç­‰å€¼çš„äºŒè¿›åˆ¶æ•°(101.11)<del>2</del>ã€‚<br>B &#x3D; 1 0 1 Â· 1 1<br>R &#x3D; 1x2^2^ + 0x2^1^  + 1x2^0^ + 1x2^-1^ + 1x2^-2^</p></blockquote><h3 id="è½¬æ¢"><a href="#è½¬æ¢" class="headerlink" title="è½¬æ¢"></a><strong>è½¬æ¢</strong></h3><p>æˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•å°†ä¸€ä¸ªç³»ç»Ÿä¸­çš„æ•°å­—è½¬æ¢åˆ°å¦ä¸€ä¸ªç³»ç»Ÿä¸­ç­‰ä»·çš„æ•°å­—ã€‚å› ä¸ºæˆ‘ä»¬æœ‰åæ ¹æ‰‹æŒ‡ï¼Œäºæ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸ä¸­ä½¿ç”¨åè¿›åˆ¶æ•°ï¼Œé€šå¸¸çœ‹ä¸€ä¸ªä½ç½®ç³»ç»Ÿä¸­çš„æ•°å­—ï¼Œæˆ‘ä»¬å¤§æ¦‚ç‡ä¹Ÿæ˜¯æƒ³è¦çŸ¥é“ä»–åœ¨åè¿›åˆ¶ä¸­æ˜¯ä»€ä¹ˆæ•°ï¼Œé‚£ä¹ˆå…ˆçœ‹çœ‹æ€ä¹ˆä»å…¶ä»–è¿›åˆ¶è½¬åˆ°åè¿›åˆ¶å§ã€‚</p><h4 id="ä»å…¶ä»–è¿›åˆ¶åˆ°åè¿›åˆ¶çš„è½¬æ¢"><a href="#ä»å…¶ä»–è¿›åˆ¶åˆ°åè¿›åˆ¶çš„è½¬æ¢" class="headerlink" title="ä»å…¶ä»–è¿›åˆ¶åˆ°åè¿›åˆ¶çš„è½¬æ¢"></a><strong>ä»å…¶ä»–è¿›åˆ¶åˆ°åè¿›åˆ¶çš„è½¬æ¢</strong></h4><p>è¿™ç§è½¬æ¢æ˜¯ç®€ä¾¿è€Œè¿…é€Ÿã€‚æˆ‘ä»¬å°†æ•°ç ä¹˜ä»¥å…¶çš„ä½ç½®é‡å¹¶æ±‚å’Œæ¥å¾—åˆ°åœ¨åè¿›åˆ¶ä¸­çš„æ•°ï¼Œå¦‚å›¾:</p><p><img src="http://cdn.zsenhe.com/aa7bb03921dd48208b398a94bbbaa3b8" alt="å…¶ä»–è¿›åˆ¶åˆ°åè¿›åˆ¶çš„è½¬æ¢.jpg"></p><h4 id="åè¿›åˆ¶åˆ°å…¶ä»–è¿›åˆ¶çš„è½¬æ¢"><a href="#åè¿›åˆ¶åˆ°å…¶ä»–è¿›åˆ¶çš„è½¬æ¢" class="headerlink" title="åè¿›åˆ¶åˆ°å…¶ä»–è¿›åˆ¶çš„è½¬æ¢"></a><strong>åè¿›åˆ¶åˆ°å…¶ä»–è¿›åˆ¶çš„è½¬æ¢</strong></h4><p>æˆ‘ä»¬èƒ½å°†åè¿›åˆ¶æ•°è½¬æ¢åˆ°ä¸å…¶ç­‰ä»·çš„å…¶ä»–è¿›åˆ¶éœ€è¦ä¸¤ä¸ªè¿‡ç¨‹ã€‚ä¸€ä¸ªç”¨äºæ•´æ•°éƒ¨åˆ†ï¼Œä¸€ä¸ªç”¨äºå°æ•°éƒ¨åˆ†ã€‚<br>è½¬æ¢æ•´æ•°éƒ¨åˆ†:<br>æ•´æ•°éƒ¨åˆ†çš„è½¬æ¢å¯ä½¿ç”¨è¿é™¤<br><img src="http://cdn.zsenhe.com/faab8266eb0d487bb5e18de9d929e7a4" alt="åè¿›åˆ¶è½¬æ¢ä¸ºå…¶ä»–è¿›åˆ¶æ•´æ•°éƒ¨åˆ†.jpg"><br>ä¸€äº›ä¾‹å­ï¼š<br><img src="http://cdn.zsenhe.com/a616ca28301d450ca0f39a13ee675201" alt="åè¿›åˆ¶è½¬æ¢å…¶ä»–è¿›åˆ¶ä¾‹.jpg"></p><p>è½¬æ¢å°æ•°éƒ¨åˆ†:<br>å°æ•°éƒ¨åˆ†çš„è½¬æ¢ä½¿ç”¨è¿ä¹˜æ³•<br>å¦‚å›¾ï¼Œå°†åè¿›åˆ¶æ•°0.625è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°<br><img src="http://cdn.zsenhe.com/76d7997886d24988a6a08986b229e0ba" alt="å°æ•°éƒ¨åˆ†è½¬æ¢.jpg"><br>å› ä¸º0.625æ²¡æœ‰æ•´æ•°éƒ¨åˆ†ï¼Œè¯¥ä¾‹å­å¾ˆå¥½çš„è¡¨ç°äº†è¿ä¹˜æ³•çš„è¿‡ç¨‹ã€‚å·¦è¾¹æ˜¯åè¿›åˆ¶æ•°ï¼Œè¿ç»­ä¹˜2ï¼Œå¹¶è®°å½•ç»“æœçš„æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ã€‚å°æ•°éƒ¨åˆ†ç§»åˆ°å³è¾¹ä½œä¸ºæ–°çš„æºï¼Œæ•´æ•°éƒ¨åˆ†å†™åœ¨æ¯æ¬¡è¿ç®—çš„ä¸‹é¢ï¼Œå½“å°æ•°éƒ¨åˆ†ä¸º0æˆ–è¾¾åˆ°è¶³å¤Ÿçš„ä½æ•°æ—¶åœæ­¢ã€‚ç»“æœæ˜¯ï¼ˆ0.101ï¼‰<del>2</del></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mysqlè¿æ¥æŠ¥é”™Causedbycom.mysql.cj.exceptions.CJCommunicationsException:Communicationslink failure</title>
      <link href="/2022/11/28/mysql%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99Causedbycom.mysql.cj.exceptions.CJCommunicationsEx/"/>
      <url>/2022/11/28/mysql%E8%BF%9E%E6%8E%A5%E6%8A%A5%E9%94%99Causedbycom.mysql.cj.exceptions.CJCommunicationsEx/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: </span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: The last packet sent successfully to the server was <span class="number">0</span> milliseconds ago. The driver has not received any packets from the server.</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:<span class="number">77</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:<span class="number">45</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:<span class="number">499</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:<span class="number">480</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:<span class="number">61</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:<span class="number">105</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:<span class="number">151</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:<span class="number">167</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.a.NativeProtocol.negotiateSSLConnection(NativeProtocol.java:<span class="number">317</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.a.NativeAuthenticationProvider.connect(NativeAuthenticationProvider.java:<span class="number">203</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:<span class="number">1369</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.NativeSession.connect(NativeSession.java:<span class="number">133</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:<span class="number">948</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:<span class="number">818</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: ... <span class="number">25</span> more</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: Caused by: javax.net.ssl.SSLHandshakeException: No appropriate <span class="title function_">protocol</span> <span class="params">(protocol is disabled or cipher suites are inappropriate)</span></span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/sun.security.ssl.HandshakeContext.&lt;init&gt;(HandshakeContext.java:<span class="number">172</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/sun.security.ssl.ClientHandshakeContext.&lt;init&gt;(ClientHandshakeContext.java:<span class="number">103</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/sun.security.ssl.TransportContext.kickstart(TransportContext.java:<span class="number">240</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:<span class="number">448</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:<span class="number">426</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.ExportControlled.performTlsHandshake(ExportControlled.java:<span class="number">335</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.StandardSocketFactory.performTlsHandshake(StandardSocketFactory.java:<span class="number">194</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.a.NativeSocketConnection.performTlsHandshake(NativeSocketConnection.java:<span class="number">101</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: at com.mysql.cj.protocol.a.NativeProtocol.negotiateSSLConnection(NativeProtocol.java:<span class="number">308</span>)</span><br><span class="line">[<span class="number">19</span>:<span class="number">16</span>:<span class="number">40</span>] [Server thread/WARN]: ... <span class="number">30</span> more</span><br></pre></td></tr></table></figure><p>å¬ç½‘ä¸Šè¯´çš„æ›´æ”¹mysql wait-timeæœªç”Ÿæ•ˆï¼Œä¹Ÿä¸æ˜¯é©±åŠ¨ç‰ˆæœ¬çš„é—®é¢˜<br>ä»€ä¹ˆæ–¹æ³•éƒ½è¯•è¿‡äº†ï¼ŒæŠ˜è…¾äº†åŠå¤©å¿«ç»æœ›äº†çªç„¶çµæœºä¸€åŠ¨ï¼Œä¼šä¸ä¼šæ˜¯paramsé…ç½®é‚£å—çš„é—®é¢˜?<br>æ‰¾äº†åŠå¤©ï¼Œæ‰å‘ç°é…ç½®æ–‡ä»¶é‡ŒæŠŠâ€œparamsâ€æ‰“æˆâ€œparmâ€äº†ï¼Œå¼„åˆ°æœ€åè¿˜æ˜¯æœ€å¼€å§‹å°è¯•çš„æ–¹æ³•<br>åªè¦åŠ ä¸ŠuseSSL&#x3D;falseå°±å¥½äº†â€¦.<br>æœ€å¯æ€•çš„æ˜¯ï¼Œè¿™ä¸ªé—®é¢˜ä¸€ç›´ä¸¢ä¸šåŠ¡ä¸Šè·‘äº†ä¸€å¹´å¤šæ²¡å‘ç°ï¼Œæˆ‘å°±è¯´ä»¥å‰å†™çš„ä¸œè¥¿ï¼Œæ€ä¹ˆè¿™ä¹ˆå¤šé»„é»„çš„mysql wrong<br>ä¸è¿‡ä¹‹å‰ç”¨çš„æ•°æ®åº“æ˜¯è€ç‰ˆæœ¬ï¼Œç›´åˆ°ä»Šå¤©æ¢äº†æ–°çš„ä¸è®¾ç½®sslåè®®ä¸ç»™è¿æ¥äº†æ‰æªå‡ºæ¥ï¼ŒçœŸå‹¾å…«å¯æ€•</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å•è°ƒé˜Ÿåˆ—â€”â€”äºŒç»´æ»‘åŠ¨çª—å£æ¨¡å‹</title>
      <link href="/2022/11/05/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97%E2%80%94%E2%80%94%E4%BA%8C%E7%BB%B4%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%A8%A1%E5%9E%8B/"/>
      <url>/2022/11/05/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97%E2%80%94%E2%80%94%E4%BA%8C%E7%BB%B4%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.com.cn/problem/P2216">P2216 ç†æƒ³çš„æ­£æ–¹å½¢</a></p><p><img src="http://cdn.zsenhe.com/99870f7fbfc84b32a52c1681ad553a32" alt="QQæˆªå›¾20221105181039.png"></p><p>Acçš„ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1000</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> a,b,n;</span><br><span class="line"><span class="type">int</span> s[N][N],q[N],hh=<span class="number">0</span>,tt=<span class="number">-1</span>,d;</span><br><span class="line"><span class="type">int</span> anserA[N],anserB[N],anserC[N],anserD[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> rsMin[N][N],rsMax[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_max</span><span class="params">(<span class="type">int</span> * p,<span class="type">int</span> * f,<span class="type">int</span> col)</span></span>&#123;</span><br><span class="line">  hh=<span class="number">0</span>,tt=<span class="number">-1</span>,d=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;col;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i-n<span class="number">+1</span>&gt;q[hh]) hh++;</span><br><span class="line">    <span class="keyword">while</span>(hh&lt;=tt&amp;&amp;p[q[tt]]&lt;=p[i]) tt--;</span><br><span class="line">    q[++tt] = i;</span><br><span class="line">    <span class="keyword">if</span>(i&gt;=n<span class="number">-1</span>) f[d++] = p[q[hh]];</span><br><span class="line">  &#125;</span><br><span class="line">  f[N<span class="number">-1</span>] = d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_min</span><span class="params">(<span class="type">int</span> * p,<span class="type">int</span> * f,<span class="type">int</span> col)</span></span>&#123;</span><br><span class="line">  hh=<span class="number">0</span>,tt=<span class="number">-1</span>,d=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;col;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i-n<span class="number">+1</span>&gt;q[hh]) hh++;</span><br><span class="line">    <span class="keyword">while</span>(hh&lt;=tt&amp;&amp;p[q[tt]]&gt;=p[i]) tt--;</span><br><span class="line">    q[++tt] = i;</span><br><span class="line">    <span class="keyword">if</span>(i&gt;=n<span class="number">-1</span>) f[d++] = p[q[hh]];</span><br><span class="line">  &#125;</span><br><span class="line">  f[N<span class="number">-1</span>] = d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  cin&gt;&gt;a&gt;&gt;b&gt;&gt;n;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;a;i++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;b;j++) cin&gt;&gt;s[i][j];</span><br><span class="line">  <span class="comment">//è¿™ä¸€æ­¥ä¹‹åï¼ŒrsMax[i]å­˜å‚¨æ¯ä¸ªæ­£æ–¹å½¢å°è¯•çš„ä¸€æ¡è¾¹çš„æœ€å¤§å€¼ï¼ŒrsMinåŒç†</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;a;i++)&#123;</span><br><span class="line">    <span class="built_in">get_max</span>(s[i],rsMax[i],b);</span><br><span class="line">    <span class="built_in">get_min</span>(s[i],rsMin[i],b);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> anser = <span class="number">1e10</span>; <span class="comment">//å–åˆ°æœ€å¤§</span></span><br><span class="line"><span class="comment">//äºŒç»´åŒºé—´æ±‚æœ€å€¼é—®é¢˜ï¼Œä»åˆ—å¼€å§‹è€ƒè™‘ã€‚å³max&#123;a,b,c,d&#125; = max&#123;max&#123;a,b&#125;,max&#123;c,d&#125;&#125;</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;rsMax[<span class="number">0</span>][N<span class="number">-1</span>];i++)&#123;</span><br><span class="line">    <span class="comment">//å°†ä¸€åˆ—çš„å€¼å­˜å…¥ä¸´æ—¶æ•°ç»„anserA,anserB(æœ€å°å€¼)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;a;j++)&#123;</span><br><span class="line">      anserA[j] = rsMax[j][i];</span><br><span class="line">      anserB[j] = rsMin[j][i];</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//å°†åˆ—çš„å€¼ä¹Ÿè¿›è¡Œä¸€æ¬¡æ»‘åŠ¨çª—å£æ“ä½œï¼Œè¿™ä¸€æ­¥åanserC[i] ä»£è¡¨ç¬¬iä¸ªæ­£æ–¹å½¢å°è¯•çš„æœ€å¤§å€¼,anserDä¹Ÿä¸€æ ·</span></span><br><span class="line">    <span class="built_in">get_max</span>(anserA,anserC,a);</span><br><span class="line">    <span class="built_in">get_min</span>(anserB,anserD,a);</span><br><span class="line">    <span class="comment">// cout &lt;&lt; anserC[N-1] &lt;&lt; endl;</span></span><br><span class="line">  <span class="comment">//åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å°†ä¸€ä¸ªå­çŸ©é˜µä¸€ç»´åŒ–äº†ï¼Œæ¥ä¸‹æ¥å¥—æ¨¡æ¿å°±å®Œäº†</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;anserC[N<span class="number">-1</span>];k++) &#123;</span><br><span class="line">      anser = <span class="built_in">min</span>(anser,anserC[k]-anserD[k]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; anser;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ˜è…¾äº†ä¸€å¤©æ‰è¿‡ï¼ˆèœéº»äº†)ã€‚acwingå‘¨èµ›å¼€æ‰“äº†ï¼Œç­‰æ˜å¤©å†æ•´ç†ä¸‹å›¾æ–‡ç¬”è®°8<br><img src="http://cdn.zsenhe.com/657cc85c431f4b029ceb42c3409adda5" alt="p22167.png"></p><p><img src="http://cdn.zsenhe.com/39fa7acb677445cdab7608496464624d" alt="å¾®ä¿¡å›¾ç‰‡_20221105180907.jpg"><br>è¶…æ°´çš„ç¬”è®°ï¼ˆé€ƒ</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ç¬”è®°å½’æ¡£</title>
      <link href="/2022/11/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%94%E8%AE%B0%E5%BD%92%E6%A1%A3/"/>
      <url>/2022/11/03/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AC%94%E8%AE%B0%E5%BD%92%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºå­¦ç®—æ³•ä¸»è¦æ˜¯ä¸ºäº†åšé¢˜æ‰“æ‰“åŠ›æ‰£å‘¨èµ›ï¼Œä¸ºäº†æ•ˆç‡é«˜å¤šæ•°æ•°æ®ç»“æ„ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿã€‚</p><h4 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h4><ol><li><strong>å•é“¾è¡¨</strong> <a href="http://zsenhe.com/article/19">http://zsenhe.com/article/19</a></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+50</span>;</span><br><span class="line"><span class="type">int</span> e[N],ne[N],idx,head;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å•é“¾è¡¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">  head = <span class="number">-1</span>;</span><br><span class="line">  idx = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ’å…¥å¤´èŠ‚ç‚¹x</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">inser_head</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">  e[idx] = x,ne[idx] = head;head = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨kèŠ‚ç‚¹åæ’å…¥x</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">  e[idx] = x,ne[idx] = ne[k],ne[k] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤kèŠ‚ç‚¹åçš„ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">  ne[k] = ne[ne[k]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>åŒé“¾è¡¨</strong><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+50</span>;</span><br><span class="line"><span class="type">int</span> l[N],r[N],e[N],idx;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">//0å·¦ç«¯ç‚¹ï¼Œ1å³ç«¯ç‚¹</span></span><br><span class="line">  r[<span class="number">0</span>] = <span class="number">1</span>,l[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">  idx = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨èŠ‚ç‚¹kåæ’å…¥x</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">inset</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">  e[idx] = x;</span><br><span class="line">  l[idx] = k;</span><br><span class="line">  r[idx] = r[k];</span><br><span class="line">  l[r[k]] = idx,r[k] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤èŠ‚ç‚¹k</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">  l[r[k]] = l[k];</span><br><span class="line">  r[l[k]] = r[k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><strong>tip: å½“éœ€åœ¨kå·¦è¾¹æ’å…¥å…ƒç´ æ—¶ï¼Œè°ƒç”¨insert(l[k],x)å³å¯</strong></li></ol><h4 id="æ ˆå’Œé˜Ÿåˆ—"><a href="#æ ˆå’Œé˜Ÿåˆ—" class="headerlink" title="æ ˆå’Œé˜Ÿåˆ—"></a>æ ˆå’Œé˜Ÿåˆ—</h4><ol><li><p><strong>æ ˆ:</strong> <a href="http://zsenhe.com/article/25">http://zsenhe.com/article/25</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> stk[N],tt=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†xå‹å…¥æ ˆ</span></span><br><span class="line">stk[++tt] = x;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼¹å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="type">int</span> tt = stk[tt--];</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ ˆä¸ä¸ºç©º</span></span><br><span class="line"><span class="keyword">return</span> tt&gt;<span class="number">0</span>;</span><br></pre></td></tr></table></figure></li><li><p><strong>é˜Ÿåˆ—</strong> <a href="http://zsenhe.com/article/27">http://zsenhe.com/article/27</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"><span class="comment">//é˜Ÿå¤´ç´¢å¼•</span></span><br><span class="line"><span class="type">int</span> hh;</span><br><span class="line"><span class="comment">//é˜Ÿå°¾ç´¢å¼•</span></span><br><span class="line"><span class="type">int</span> tt = <span class="number">-1</span>;</span><br><span class="line"><span class="comment">//åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">  q[++tt] = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡ºé˜Ÿ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">return</span> q[hh++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">return</span> hh &gt; tt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>..æ•´ç†ä¸­</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¤§éƒ¨åˆ†äººéƒ½æ˜¯è‡ªæ‹ï¼Œå¯»æ‰¾ä¸€ä¸ªèƒ½ä¸è‡ªå·±äº¤é…çš„è‡ªå·±</title>
      <link href="/2022/10/28/%E5%A4%A7%E9%83%A8%E5%88%86%E4%BA%BA%E9%83%BD%E6%98%AF%E8%87%AA%E6%81%8B%EF%BC%8C%E5%AF%BB%E6%89%BE%E4%B8%80%E4%B8%AA%E8%83%BD%E4%B8%8E%E8%87%AA%E5%B7%B1%E4%BA%A4%E9%85%8D%E7%9A%84%E8%87%AA%E5%B7%B1/"/>
      <url>/2022/10/28/%E5%A4%A7%E9%83%A8%E5%88%86%E4%BA%BA%E9%83%BD%E6%98%AF%E8%87%AA%E6%81%8B%EF%BC%8C%E5%AF%BB%E6%89%BE%E4%B8%80%E4%B8%AA%E8%83%BD%E4%B8%8E%E8%87%AA%E5%B7%B1%E4%BA%A4%E9%85%8D%E7%9A%84%E8%87%AA%E5%B7%B1/</url>
      
        <content type="html"><![CDATA[<p>èµ„æœ¬ç”¨è½¯è‰²æƒ…é™ä½äº†æ‰€è°“çˆ±æƒ…çš„è¾¹ç•Œæ„Ÿï¼Œç°ä»£çš„çˆ±æƒ…å˜æˆäº†æ€§æ¬²ï¼Œæ€§æ¬²å˜æˆäº†è‰²æƒ…ã€‚è£¸éœ²çš„è¶Šå¤šï¼Œç¥ç§˜æ„Ÿè¶Šå°‘ï¼Œæ€§æ¬²è¶Šä¸å®¹æ˜“äº§ç”Ÿ</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå›¾ä¹¦ç®¡ç†å‘˜ã€‹è®°å¿†c++ stringç±» (å¿«æ’+å­—ç¬¦ä¸²é«˜ç²¾åº¦æ¨¡æ‹Ÿ)</title>
      <link href="/2022/10/28/%E3%80%8A%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E5%91%98%E3%80%8B%E8%AE%B0%E5%BF%86c++%20string%E7%B1%BB%20(%E5%BF%AB%E6%8E%92+%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%B2%BE%E5%BA%A6%E6%A8%A1%E6%8B%9F)/"/>
      <url>/2022/10/28/%E3%80%8A%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E5%91%98%E3%80%8B%E8%AE%B0%E5%BF%86c++%20string%E7%B1%BB%20(%E5%BF%AB%E6%8E%92+%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%AB%98%E7%B2%BE%E5%BA%A6%E6%A8%A1%E6%8B%9F)/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/4258d247b5824680bb0fc6624b0b3a5b" alt="æ•è·.PNG"><img src="http://cdn.zsenhe.com/d996122b69c5449d95d252316c4440a2" alt="æ•è·2.PNG"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1000</span><span class="number">+50</span>;</span><br><span class="line"></span><br><span class="line">vector&lt;string&gt; bookCode;</span><br><span class="line">vector&lt;string&gt; userCode;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//return true s1æ¯”s2å¤§</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check</span><span class="params">(string s1,string s2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s<span class="number">1.</span><span class="built_in">size</span>()==s<span class="number">2.</span><span class="built_in">size</span>()&amp;&amp;s<span class="number">1.f</span>ind(s2)!=string::npos) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(s<span class="number">1.</span><span class="built_in">size</span>()==s<span class="number">2.</span><span class="built_in">size</span>()) &#123;</span><br><span class="line">        <span class="type">int</span> m = s<span class="number">1.</span><span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;<span class="built_in">i</span>&lt;m;i++)&#123;</span><br><span class="line">          <span class="keyword">if</span>((s1[i]-<span class="string">&#x27;0&#x27;</span>)&gt;(s2[i]-<span class="string">&#x27;0&#x27;</span>)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span>((s1[i]-<span class="string">&#x27;0&#x27;</span>)&lt;(s2[i]-<span class="string">&#x27;0&#x27;</span>)) <span class="keyword">return</span> <span class="number">0</span>;            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s<span class="number">1.</span><span class="built_in">size</span>()&gt;s<span class="number">2.</span><span class="built_in">size</span>()?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">quick_sort</span><span class="params">(vector&lt;string&gt; &amp;bookCode,<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span>;</span><br><span class="line">  string x = bookCode[(l+r)&gt;&gt;<span class="number">1</span>];</span><br><span class="line">  <span class="type">int</span> xl = x.<span class="built_in">size</span>(),i=l<span class="number">-1</span>,j=r<span class="number">+1</span>;</span><br><span class="line">  <span class="keyword">while</span>(i&lt;j)&#123;</span><br><span class="line">    <span class="keyword">do</span> i++;<span class="keyword">while</span>(<span class="built_in">check</span>(bookCode[i],x)==<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">do</span> j--;<span class="keyword">while</span>(<span class="built_in">check</span>(bookCode[j],x)==<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(i&lt;j) &#123;</span><br><span class="line">      string tmp = bookCode[i];</span><br><span class="line">      bookCode[i] = bookCode[j];</span><br><span class="line">      bookCode[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">quick_sort</span>(bookCode,l,j);</span><br><span class="line">  <span class="built_in">quick_sort</span>(bookCode,j<span class="number">+1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">getUserCode</span><span class="params">(string userCode)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;bookCode.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">      string sub = bookCode[i].<span class="built_in">size</span>()&gt;userCode.<span class="built_in">size</span>()?bookCode[i].<span class="built_in">substr</span>(bookCode[i].<span class="built_in">size</span>()-userCode.<span class="built_in">size</span>()):bookCode[i];</span><br><span class="line">    <span class="keyword">if</span>(sub.<span class="built_in">find</span>(userCode)!=string::npos) <span class="keyword">return</span> bookCode[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> n,q;</span><br><span class="line">  cin&gt;&gt;n&gt;&gt;q;</span><br><span class="line">  string s;</span><br><span class="line">  <span class="keyword">while</span>(n--) &#123;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    bookCode.<span class="built_in">push_back</span>(s);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">quick_sort</span>(bookCode,<span class="number">0</span>,bookCode.<span class="built_in">size</span>()<span class="number">-1</span>);</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;q;i++)&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    string y;</span><br><span class="line">    cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    userCode.<span class="built_in">push_back</span>(y);</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;userCode.<span class="built_in">size</span>();i++) cout &lt;&lt; <span class="built_in">getUserCode</span>(userCode[i]) &lt;&lt; endl;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆå…¶å®æ•°æ®èŒƒå›´å°±1e7ï¼Œç”¨ä¸ä¸Šå¿«æ’+å­—ç¬¦ä¸²é«˜ç²¾åº¦ï¼Œç›´æ¥æš´åŠ›ä¹Ÿèƒ½acã€‚çº¯å½“ç†Ÿæ‚‰ä¸‹c++çš„stringç±»äº†ï¼‰<br>ä»¥ä¸Šä»£ç å°±æ˜¯å•çº¯çš„æ¨¡æ‹Ÿï¼Œè®°å½•ä¸€ä¸‹stringä¸‹çš„å¸¸ç”¨åº“å‡½æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span> <span class="comment">//å¤´æ–‡ä»¶</span></span></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¸¸ç”¨å‡½æ•°</span></span><br><span class="line">str.<span class="built_in">size</span>():<span class="type">int</span> <span class="comment">//è¿”å›strçš„é•¿åº¦</span></span><br><span class="line">str.<span class="built_in">find</span>(string v):string <span class="comment">//è¿”å›våœ¨strä¸­å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæœªå‡ºç°è¿‡åˆ™è¿”å› string::npos (è¿™æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ•°)</span></span><br><span class="line">str.<span class="built_in">substr</span>(<span class="type">int</span> start,<span class="type">int</span> end):string <span class="comment">//æˆªå–å­ä¸²</span></span><br><span class="line">str.<span class="built_in">substr</span>(<span class="type">int</span> idx):string <span class="comment">//åŒä¸Šï¼Œä»idxæˆªå–åˆ°å°¾</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯çœŸé¢˜â€”â€”åˆ†å·§å…‹åŠ›ï¼ˆäºŒåˆ†ï¼‰</title>
      <link href="/2022/10/27/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%9F%E9%A2%98%E2%80%94%E2%80%94%E5%88%86%E5%B7%A7%E5%85%8B%E5%8A%9B%EF%BC%88%E4%BA%8C%E5%88%86%EF%BC%89/"/>
      <url>/2022/10/27/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%9F%E9%A2%98%E2%80%94%E2%80%94%E5%88%86%E5%B7%A7%E5%85%8B%E5%8A%9B%EF%BC%88%E4%BA%8C%E5%88%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/6e043934d49d4169bf8daa3635b322d8" alt="æ•è·.PNG"><img src="http://cdn.zsenhe.com/91883ce2014e4db1aa1748558dbdb577" alt="æ•è·2.PNG"></p><p>æ€è·¯: </p><p>ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾[1,1e5]ï¼Œæ¯æ¬¡å–ä¸­å€¼ä½œä¸ºæ­£æ–¹å½¢è¾¹é•¿xï¼Œç»Ÿè®¡åœ¨æ‰€æœ‰å·§å…‹åŠ›ä¸­èƒ½åˆ†å‰²å‡ºå¤šå°‘å—è¾¹é•¿ä¸ºxçš„æ­£æ–¹å½¢<br>å½“æ­£æ–¹å½¢æ•°é‡å°äºkæ—¶ï¼Œæˆ‘ä»¬çŸ¥é“è¾¹é•¿è¶Šå¤§èƒ½åˆ†å‰²çš„æ•°é‡è¶Šå°‘ï¼Œæ­¤æ—¶å°†åŒºé—´æ›´æ–°ä¸º [l,mid-1] ç»§ç»­æŸ¥æ‰¾ã€‚<br>å½“æ­£æ–¹å½¢æ•°é‡å¤§äºç­‰äºkæ—¶ï¼ŒçŒœæµ‹xå¯ä»¥æ›´å¤§ä¸”èƒ½æ»¡è¶³&gt;&#x3D;kï¼Œå°†åŒºé—´æ›´æ–°ä¸º[mid,r]</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N  = <span class="number">1e5</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> n,k;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­˜å‚¨æ¯å—å·§å…‹åŠ›çš„é•¿å®½</span></span><br><span class="line"><span class="type">int</span> qkl[N][<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡æ‰€æœ‰å·§å…‹åŠ›èƒ½åˆ‡å‰²å‡ºå¤šå°‘å—è¾¹é•¿ä¸ºxçš„æ­£æ–¹å½¢</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">  <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    sum+= (qkl[i][<span class="number">0</span>]/x)*(qkl[i][<span class="number">1</span>]/x);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    cin&gt;&gt;qkl[i][<span class="number">0</span>]&gt;&gt;qkl[i][<span class="number">1</span>];</span><br><span class="line">  <span class="type">int</span> l=<span class="number">1</span>,r=<span class="number">1e5</span>;</span><br><span class="line">  <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">    <span class="type">int</span> mid = l+r<span class="number">+1</span>&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">count</span>(mid)&lt;k) r=mid<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> l = mid;</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; l;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>POJ1135 å¥‡æ€ªçš„ç”µæ¢¯ DFSæ·±æœ</title>
      <link href="/2022/10/21/POJ1135%20%E5%A5%87%E6%80%AA%E7%9A%84%E7%94%B5%E6%A2%AF%20DFS%E6%B7%B1%E6%90%9C/"/>
      <url>/2022/10/21/POJ1135%20%E5%A5%87%E6%80%AA%E7%9A%84%E7%94%B5%E6%A2%AF%20DFS%E6%B7%B1%E6%90%9C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸé¢˜é“¾æ¥ï¼š <a href="https://www.luogu.com.cn/problem/P1135">https://www.luogu.com.cn/problem/P1135</a></p></blockquote><p><img src="http://cdn.zsenhe.com/b6c55b1d5253465c9d9212177e25c20f" alt="å¾®ä¿¡æˆªå›¾_20221021201154.png"></p><p>è€ƒè™‘ç”¨dfsæ¥åšçš„è¯ï¼Œå•çº¯çš„æ·±æœä¼šè¶…æ—¶ï¼Œè€Œä¸”ä¸ä¸€å®šæœå‡ºæ¥çš„å°±æ˜¯æœ€å°çš„(bfs: ?)<br>æˆ‘ä»¬éœ€è¦ä¸€è¾¹åˆ¤æ–­å½“å‰æœåˆ°çš„æŒ‰æŒ‰é’®æ•°ï¼Œå–æœ€å°çš„å­˜ä¸‹æ¥ï¼ŒåŒæ—¶å­˜ä¸‹çŠ¶æ€è¿›è¡Œè®°å¿†åŒ–æœç´¢ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">220</span>;</span><br><span class="line"><span class="type">int</span> p[N];</span><br><span class="line"><span class="type">int</span> n,x,y;</span><br><span class="line"><span class="type">int</span> ox[] = &#123;<span class="number">1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="type">int</span> count = <span class="number">1e5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dst[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> u)</span></span>&#123;</span><br><span class="line">    <span class="comment">//å½“æŒ‰æŒ‰é’®çš„æ¬¡æ•°å·²è¶…è¿‡ä¸Šæ¬¡å–çš„æœ€å°å€¼ï¼Œè¿›è¡Œå‰ªæ</span></span><br><span class="line">    <span class="keyword">if</span>(u&gt;count) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//èµ°åˆ°ç›®çš„åœ°äº†ï¼Œåˆ¤æ–­ä¸Šæ¬¡å­˜ä¸‹æ¥çš„æ¬¡æ•°ï¼Œå–min</span></span><br><span class="line">    <span class="keyword">if</span>(x==y)&#123;</span><br><span class="line">    count = u&lt;count?u:count;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//æ¯æ¬¡å›æº¯å‰çš„æœç´¢ï¼Œæ¯ä¸ªç‚¹éƒ½åªèƒ½è¢«èµ°ä¸€æ¬¡</span></span><br><span class="line">    dst[x] = <span class="number">1</span>;</span><br><span class="line">   <span class="comment">//å¾€æ·±å¤„æœ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">    <span class="type">int</span> nx = x+(ox[i]*p[x]);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­è¾¹ç•Œ</span></span><br><span class="line">    <span class="keyword">if</span>(nx&gt;=<span class="number">1</span>&amp;&amp;nx&lt;=y&amp;&amp;nx!=x&amp;&amp;!dst[nx])&#123;</span><br><span class="line">    <span class="built_in">dfs</span>(nx,y,u<span class="number">+1</span>);</span><br><span class="line">                <span class="comment">//å›æº¯(å›åˆ°è¿™é‡Œçš„æ—¶å€™,nxä¼šè¢«æ ‡è®°ä¸ºä¸å¯ç”¨,ä¸ºäº†è®©iæ¥ç€èµ°,éœ€è¦æ¢å¤ç°åœº)</span></span><br><span class="line">    dst[nx]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) cin&gt;&gt;p[i];</span><br><span class="line">    <span class="built_in">dfs</span>(x,y,<span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; (count==<span class="number">1e5</span>?<span class="number">-1</span>:count) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/dfdec702ab344d7b84e855e27564d2ab" alt="å¾®ä¿¡å›¾ç‰‡_20221021201212.png"></p><p>å½“ç„¶ï¼Œå¹¶ä¸æ˜¯ä¸€å¸†é£é¡ºâ€¦<br><img src="http://cdn.zsenhe.com/d90e99c720e14ecbbade35755ecd402e" alt="å¾®ä¿¡æˆªå›¾_20221021202122.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯çœŸé¢˜â€”â€”è·¯å¾„ä¹‹è°œï¼ŒDFSæ·±æœ</title>
      <link href="/2022/10/21/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%9F%E9%A2%98%E2%80%94%E2%80%94%E8%B7%AF%E5%BE%84%E4%B9%8B%E8%B0%9C%EF%BC%8CDFS%E6%B7%B1%E6%90%9C/"/>
      <url>/2022/10/21/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%9F%E9%A2%98%E2%80%94%E2%80%94%E8%B7%AF%E5%BE%84%E4%B9%8B%E8%B0%9C%EF%BC%8CDFS%E6%B7%B1%E6%90%9C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®é“¾æ¥: <a href="https://www.lanqiao.cn/problems/89/learning/">https://www.lanqiao.cn/problems/89/learning/</a></p></blockquote><p><img src="http://cdn.zsenhe.com/0ec1a184854645ac951161ca0ed5298d" alt="1666344976897.png"><img src="http://cdn.zsenhe.com/a7be9ec5d20346d8ac06ad76bcc82463" alt="1666345003061.png"></p><p>ACä»£ç å¦‚ä¸‹:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//colPåŒ—å¢™ï¼ŒrowPè¥¿å¢™é¶å­æ•°</span></span><br><span class="line"><span class="type">int</span> colP[N],rowP[N];</span><br><span class="line"><span class="comment">//stateæ•°ç»„ï¼Œå­˜å‚¨çŠ¶æ€ï¼ˆå“ªä¸ªæ ¼å­å·²ç»è¢«èµ°è¿‡äº†ï¼‰</span></span><br><span class="line"><span class="type">int</span> dst[N][N];</span><br><span class="line"><span class="comment">//x,yå››ä¸ªæ–¹å‘çš„åç§»é‡</span></span><br><span class="line"><span class="type">int</span> ox[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;,oy[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//åŒç«¯é˜Ÿåˆ—</span></span><br><span class="line">deque&lt;<span class="type">int</span>&gt; path;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥é¶å­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkComp</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(colP[i]!=<span class="number">0</span>||rowP[i]!=<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥æ˜¯å¦è¶Šç•Œ</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span>&amp;&amp;x&lt;n&amp;&amp;y&gt;=<span class="number">0</span>&amp;&amp;y&lt;n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="comment">//çœ‹ä¸‹æ–¹è§£é‡Š</span></span><br><span class="line">   <span class="comment">//    if(rowP[x]==0||colP[y]==0) &#123;</span></span><br><span class="line">    <span class="comment">//    return;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">//æ‰£é™¤é¶å­ä¸Šçš„ç®­çŸ¢</span></span><br><span class="line">    rowP[x] --,colP[y]--;</span><br><span class="line">    <span class="comment">//å°†å½“å‰æ ¼å­æ ‡è®°ä¸ºå·²èµ°è¿‡</span></span><br><span class="line">    dst[x][y] = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//åœ¨é˜Ÿå°¾å­˜å‚¨å½“å‰æ ¼å­ ï¼ˆè¾“å‡ºçš„æ ¼å­ç¼–å·ä¸ºn*x+yï¼‰</span></span><br><span class="line">    path.<span class="built_in">push_back</span>(n*x+y);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¦‚æœå·²ç»èµ°åˆ°äº†ç»ˆç‚¹æ ¼ï¼Œåˆ¤æ–­é¶å­æ•°æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="comment">//ä¸ºç©ºåˆ™è¾“å‡ºæ­£ç¡®è·¯å¾„</span></span><br><span class="line">    <span class="keyword">if</span>(x==n<span class="number">-1</span>&amp;&amp;y==n<span class="number">-1</span>&amp;&amp;<span class="built_in">checkComp</span>())&#123;</span><br><span class="line">        <span class="keyword">while</span> (!path.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, path.<span class="built_in">front</span>());</span><br><span class="line">            path.<span class="built_in">pop_front</span>();</span><br><span class="line">            <span class="built_in">printf</span>(path.<span class="built_in">empty</span>() ? <span class="string">&quot;\n&quot;</span> : <span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åªå–ä¸€æ¡è·¯å¾„å³å¯ï¼Œç›´æ¥exitè¿›ç¨‹</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æšä¸¾ä¸Šä¸‹å·¦å³å››ä¸ªåç§»é‡ï¼Œä¾æ¬¡èµ°è¿‡å»</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">        <span class="type">int</span> nx = x+ox[i],ny=y+oy[i];</span><br><span class="line">        <span class="comment">//æ£€æŸ¥è¾¹ç•Œï¼Œé¶å­ç®­çŸ¢æ•°æ˜¯å¦å·²ç©º</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(nx,ny)&amp;&amp;!dst[nx][ny]&amp;&amp;</span><br><span class="line">rowP[nx]&gt;<span class="number">0</span>&amp;&amp;colP[ny]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//èµ°è¿‡å»</span></span><br><span class="line">            <span class="built_in">dfs</span>(nx,ny);</span><br><span class="line">            <span class="comment">//å¦‚æœä¸Šé¢çš„dfsæ²¡æœ‰èµ°åˆ°å¤´ï¼Œåˆ™éœ€è¦å›æº¯çŠ¶æ€ï¼Œä»i+1å¼€å§‹ç»§ç»­å°è¯•</span></span><br><span class="line">            path.<span class="built_in">pop_back</span>();</span><br><span class="line">            dst[nx][ny] = <span class="number">0</span>;</span><br><span class="line">            ++rowP[nx],++colP[ny];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) cin&gt;&gt;colP[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) cin&gt;&gt;rowP[i];</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¥ä¸ºåšDFSé¢˜æ—¶æœ€è¯¥ä¼˜å…ˆè€ƒè™‘çš„æ˜¯é€’å½’çš„é¡ºåºï¼Œå¦‚æœæ²¡æœ‰ç»è¿‡é‡å¤æ€è€ƒè¾¹ç•Œæ¡ä»¶å°±å¼€å§‹åŠ¨æ‰‹ï¼Œdebugçš„è¿‡ç¨‹ä¸­ä¼šå› ä¸ºç†ä¸æ¸…é€’å½’å±‚å¾—æŠ‘éƒç—‡ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œè€ƒè™‘çš„æ—¶å€™ä»»ä½•ä¸€ä¸ªç»†èŠ‚éƒ½ä¸åº”è¯¥æ”¾è¿‡ï¼Œåƒä¸Šé¢è¿™é“é¢˜<br>å¦‚æœæˆ‘ä»¬å°†è¿™æ®µåˆ¤æ–­é¶å­ç®­çŸ¢æ˜¯å¦ä¸ºç©ºçš„ä»£ç æ”¾åœ¨å‡½æ•°å…¥å£å¤„</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(rowP[x]==<span class="number">0</span>||colP[y]==<span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œä¸åœ¨æšä¸¾å››ä¸ªæ–¹å‘æ—¶åˆ¤æ–­é¶å­æ•°é‡å†è¿›è¡Œdfsï¼Œé‚£ä¹ˆå›æº¯å›æ¥æ—¶ï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸€æ¬¡ä¸å¿…è¦çš„</p><blockquote><p>++rowP,++colP</p></blockquote><p>è¿™ä¼šå½±å“æœ€åçš„ç»“æœï¼Œå›æº¯çš„æ—¶å€™æ¯ä¸ªçŠ¶æ€éƒ½å¾ˆé‡è¦ï¼Œç¨åŠ ä¸æ…ä¼šåšåˆ°ç¼ºæ¼æˆ–å½±å“æ­£ç¡®ç»“æœ</p><p><img src="http://cdn.zsenhe.com/1129f0c7d5924ef18656a7fb7d45c03c" alt="å¾®ä¿¡æˆªå›¾_20221021175336.png"></p><p>è¿™å‘¨æ‰“ç®—å¤šåˆ·ç‚¹DFSé¢˜ï¼Œå‘¨æ—¥ä¼šæ•´ç†åˆ°ç½‘ç«™ä¸Š</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è½¬è½½çš„ä¸€ç¯‡æœ‰å…³å­¦ä¹ çš„æ–‡ç« </title>
      <link href="/2022/10/21/%E8%BD%AC%E8%BD%BD%E7%9A%84%E4%B8%80%E7%AF%87%E6%9C%89%E5%85%B3%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%96%87%E7%AB%A0/"/>
      <url>/2022/10/21/%E8%BD%AC%E8%BD%BD%E7%9A%84%E4%B8%80%E7%AF%87%E6%9C%89%E5%85%B3%E5%AD%A6%E4%B9%A0%E7%9A%84%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åŸæ–‡åœ°å€: <a href="https://www.zhangxinxu.com/life/2019/03/study/">https://www.zhangxinxu.com/life/2019/03/study/</a><br>å¼ é‘«æ—­è€å¸ˆçœŸæ˜¯å¾è¾ˆå‰è¿›çš„ç¯å¡”</p></blockquote><p>æ‹›è˜é«˜å³°å­£ï¼Œæœ€è¿‘é¢è¯•äº†ä¸€äº›äººï¼ŒèŠåˆ°å…³äºå­¦ä¹ è¯é¢˜çš„æ—¶å€™ï¼Œå‘ç°å¾ˆå¤šäººæœ‰å­¦ä¸è¿›å»ï¼Œæ²¡æ—¶é—´å­¦çš„é—®é¢˜ï¼ŒåŠ ä¸Šä¹‹å‰æ–­æ–­ç»­ç»­æœ‰å¾ˆå¤šäººå’¨è¯¢æˆ‘å…³äºå¦‚ä½•å­¦ä¹ çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—å¯ä»¥å¥½å¥½è®²è®²æˆ‘å¯¹äºå­¦ä¹ è¿™ä»¶äº‹çš„ä¸€äº›ç»éªŒå’Œçœ‹æ³•ã€‚</p><p>è¿™äº›ç»éªŒä¸çœ‹æ³•ä¸å±€é™äºITæŠ€æœ¯çš„å­¦ä¹ ã€‚</p><h3 id="ä¸€ã€å­¦ä¸è¿›å»"><a href="#ä¸€ã€å­¦ä¸è¿›å»" class="headerlink" title="ä¸€ã€å­¦ä¸è¿›å»"></a>ä¸€ã€å­¦ä¸è¿›å»</h3><ol><li>ä¸ºä»€ä¹ˆä½ å­¦ä¸è¿›å»ï¼Ÿ<br>æˆ‘è®¤ä¸ºâ€œå­¦ä¸è¿›å»â€åˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯çœŸå­¦ä¸è¿›å»ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ä¸“ä¸šæŠ€æœ¯å­¦ä¸è¿›å»ã€‚</li></ol><p>â€œçœŸå­¦ä¸è¿›å»â€ä¸»è¦å‡ºç°åœ¨æŠ‘éƒç—‡æ‚£è€…ä¸Šï¼Œå¯¹ä»€ä¹ˆéƒ½ä¸æ„Ÿå…´è¶£ï¼Œçœ‹å‰§ï¼Œæ¸¸æˆï¼Œå¨±ä¹éƒ½æä¸èµ·å…´è¶£ï¼Œæ•´ä¸ªäººå……æ»¡æ— åŠ›ä¸å¿§ä¼¤ï¼Œå»ºè®®ä¸“ä¸šæ²»ç–—ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯ç”Ÿç†åŸå› å¯¼è‡´ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ˜¯â€œä¸“ä¸šæŠ€æœ¯å­¦ä¸è¿›å»â€ï¼Œè¿™ç±»äººæ˜¯å¤§å¤šæ•°ã€‚å…·ä½“è¡¨ç°ä¸ºçœ‹ç”µè§†å‰§çœ‹ç»¼è‰ºå¯ä»¥ä¹æ­¤ä¸ç–²ï¼Œç†¬å¤œæ²¡é—®é¢˜ï¼Œä»˜è´¹è§‚çœ‹æ²¡é—®é¢˜ï¼›åˆæˆ–è€…æ¸¸æˆç©å¾—ä¸äº¦ä¹ä¹ï¼Œæ€æ€æ€ï¼Œå¥¶å¥¶å¥¶ï¼Œè€¶è€¶è€¶ï¼Œä¸­åˆä¼‘æ¯ä¹Ÿä¼šæ¥ä¸¤ç›˜ã€‚è¿™ç§å­¦ä¸è¿›å»æ˜¯æœ‰å¸Œæœ›å¿«é€Ÿæ”¹è¿›çš„ã€‚</p><p>ä¸€ä¸ªäººï¼Œå¦‚æœèƒ½å¤Ÿä¸“æ³¨å‡ ä¸ªå°æ—¶çœ‹ç”µè§†ï¼Œçœ‹å°è¯´ï¼Œæˆ–è€…ç©æ¸¸æˆï¼Œè¯´æ˜è¿™ä¸ªäººå¾ˆæœ‰æ½œåŠ›ï¼Œæˆä¸ºæŠ€æœ¯é«˜æ‰‹æ˜¯æœ‰å¯èƒ½çš„å‘€ã€‚ä½ æƒ³å•Šï¼Œåªè¦ä»–ä¹Ÿèƒ½æŒç»­ä¸“æ³¨å­¦ä¹ ä¸“ä¸šæŠ€æœ¯ï¼Œæˆä¸ºæŠ€æœ¯é«˜æ‰‹é‚£å¯æ˜¯æŒ‡æ—¥å¯å¾…å•Šã€‚</p><p>å…³é”®é—®é¢˜æ˜¯ï¼Œè¿™äº›äººä¸€æ‹¿èµ·ä¹¦ï¼Œä¸€çœ‹åˆ°é‚£äº›å­¦ä¹ èµ„æ–™ â€”â€” å“å‘€ï¼Œæˆ‘æ€ä¹ˆå¥½åƒæœ‰äº›é¥¿äº†ï¼›å“å‘€ï¼Œå¤©æ°”è¿™ä¹ˆå¥½ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥å‡ºå»èµ°èµ°ï¼›å“å‘€ï¼Œéƒ½è¿™ä¹ˆæ™šäº†ï¼Œè¯¥æ´—æ´—ç¡äº†ï¼Œæ˜å¤©å†è¯´å§ã€‚</p><p>è¡¨é¢åŸå› å¥½åƒæ˜¯å¤–éƒ¨å¹²æ‰°ï¼Œå®¢è§‚ç¯å¢ƒä¸å¥½ï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸ºä¸“ä¸šå­¦ä¹ è¿™ä»¶äº‹æƒ…ç¼ºå°‘çŸ­æœŸæ¿€åŠ±ï¼Œæ— æ³•åŠæ—¶å¸¦æ¥æ»¡è¶³æ„Ÿå’Œæ„‰æ‚¦æ„Ÿã€‚</p><p>çœ‹å‰§çœ‹å°è¯´æƒ…ç»ªè·Ÿç€åŠ¨ï¼Œæˆ–æ‚²ä¼¤æˆ–æ¬¢ç¬‘ï¼›ç©æ¸¸æˆæœ‰äº’åŠ¨ï¼Œæœ‰åé¦ˆï¼Œç´§å¼ åˆºæ¿€ï¼Œè¦æ˜¯èµ¢äº†è¿˜æœ‰å·¨å¤§çš„èƒœåˆ©çš„å–œæ‚¦ã€‚è¿™äº›äº‹æƒ…éƒ½èƒ½å¿«é€Ÿå¸¦æ¥ç²¾ç¥ä¸Šçš„å¥–åŠ±å’Œåé¦ˆã€‚ä½†æ˜¯ï¼Œå­¦ä¹ ä¸“ä¸šæŠ€æœ¯è¿™ä»¶äº‹æƒ…ï¼Œå”‰â€¦â€¦å°±åƒç¡¬ç€å¤´çš®å–äº†ä¸€ç¢—ç™½å¼€æ°´ï¼Œå›å¤´ä¸€çœ‹ï¼Œéº»é¸­ï¼Œè¿˜æœ‰ä¸€ç¼¸ç™½å¼€æ°´è¦å–ï¼Œè€Œä¸”æ˜¯å¸é©¬å…‰ç ¸ç¼¸æ•‘äººé‚£ä¹ˆå¤§çš„ä¸€å£ç¼¸ã€‚è¿™ç™½å¼€æ°´æ·¡è€Œæ— å‘³ï¼Œé‡åˆå¤§ï¼Œè€Œä¸”å–äº†å‡ ç¢—å•¥æ•ˆæœä¹Ÿçœ‹ä¸åˆ°ï¼Œæƒ³äº†æƒ³ï¼Œè¿˜æ˜¯å»çœ‹å‰§ç©æ¸¸æˆæœ‰æ„æ€ï¼Œæœ€ç»ˆè¡¨ç°ä¸ºæœ‰å¿ƒæƒ³å­¦ï¼Œæ— åŠ›å­¦ä¹ ã€‚</p><ol start="2"><li>å¦‚ä½•å­¦å¾—è¿›å»ï¼Ÿ<br>æˆ‘æ€»ç»“ä¸ºä¸‹é¢3ä¸ªæ–¹é¢ï¼š</li></ol><blockquote><p>æ–¹æ³•<br>è‡ªèº«<br>å†…å®¹</p></blockquote><p>å„ç±»æƒå¨æŒ‡å—ï¼Œè¿˜æœ‰MDNæ–‡æ¡£æ˜¯éå¸¸å¥½çš„å­¦ä¹ èµ„æ–™ï¼Œå¯ä»¥å¾ˆå¥½åœ°æ‰å®åŸºç¡€ã€‚ä½†æ˜¯ï¼Œè¿™äº›å­¦ä¹ èµ„æ–™å¦‚ç™½å¼€æ°´ä¸€èˆ¬æ¯ç‡¥ï¼Œä¹Ÿæ²¡æœ‰æ ‡æ³¨å“ªäº›æ˜¯ç²¾ååŠ¡å¿…æŒæ¡å“ªäº›æ˜¯ç³Ÿç²•å¯ä»¥ä¸ç”¨å­¦ä¹ ã€‚å¦‚æœä½ å­¦ä¸è¿›å»ï¼Œä¸è¦å‹‰å¼ºï¼Œæœæ–­æ”¾å¼ƒä¹‹ï¼Œæ²¡å¿…è¦è®©è‡ªå·±ç—›è‹¦ï¼Œå»å¯»æ‰¾é‚£äº›äºŒæ¬¡å°è£…çš„æ¯”è¾ƒç³»ç»Ÿçš„å­¦ä¹ èµ„æ–™ã€‚æ‰€è°“äºŒæ¬¡å°è£…ï¼Œå°±æ˜¯æŒ‡æ˜äº†ç²¾åå’Œç³Ÿç²•ï¼Œä¸å¼€å‘å®è·µèµ°å¾—å¾ˆè¿‘çš„å­¦ä¹ èµ„æ–™ã€‚è¿™ç§ç±»å‹çš„ä¹¦ç±åŒ…æ‹¬ã€ŠJavaScriptè¯­è¨€ç²¾ç²¹ã€‹ï¼Œè¿˜æœ‰æˆ‘çš„ã€ŠCSSä¸–ç•Œã€‹ä»¥åŠåç»­ä¸€äº›è‘—ä½œã€‚</p><p>å»å¯»æ‰¾é‚£ç§â€œæ¸¸æˆå¼â€çš„å­¦ä¹ è¯¾ç¨‹ï¼Œé—¯å…³é‚£ç§ï¼Œå…³é”®è¦ç³»ç»Ÿï¼Œè¿™æ ·çš„è¯¾ç¨‹å…¶å®ä¸å°‘ï¼Œå¤šå›½å¤–å¼€å‘è€…å¼€å‘çš„ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œå¯»æ‰¾ã€‚å› ä¸ºæˆ‘æ²¡æœ‰è¿™æ–¹é¢éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå¹³æ—¶æ²¡è®°å½•ï¼Œä½†æˆ‘ä¹‹å‰æœ‰è§è¿‡ã€‚</p><p>å»å¯»æ‰¾é‚£ç§æ‰€è§æ‰€å¾—çš„å­¦ä¹ è¯¾ç¨‹ï¼Œ10åˆ†é’Ÿä»¥å†…çŸ­å°ç²¾æ‚é‚£ç§ï¼Œä¸€å®šè¦è§†è§‰å¯è§ï¼ŒåŠæ—¶åé¦ˆï¼Œå¦åˆ™ä½ ä»¬è‚¯å®šåšæŒä¸ä¸‹å»ï¼Œæˆ‘äº†è§£ä½ ä»¬çš„ã€‚khanacademy.orgæœ‰ä¸€äº›è¿™ç§å…è´¹è¯¾ç¨‹ï¼Œå…¶å®ƒç±»ä¼¼å­¦ä¹ è¯¾ç¨‹å¤§å®¶è‡ªè¡Œå¯»æ‰¾ï¼Œæˆ‘æ¥ä¸‹æ¥ä¹Ÿä¼šå°è¯•å†™æŠ€æœ¯æ–‡ç« åŒæ—¶é…å¥—å¯¹åº”çš„è¯­éŸ³è§†è§‰åŒ–è¯¾ç¨‹ã€‚</p><p><strong>æ–¹æ³•</strong><br>æ¯å­¦ä¸€ä¸ªé˜¶æ®µï¼Œéƒ½è¦ç»™è‡ªå·±ä¸€äº›å¥–åŠ±ï¼Œä¾‹å¦‚ï¼Œæ¯çœ‹å®Œä¸€ç¯‡æ–‡ç« ï¼Œæˆ–è€…çœ‹å®Œä¸€ä¸ªçŸ­è§†é¢‘æ•™ç¨‹æˆ‘å°±å¥–åŠ±è‡ªå·±ç©ä¸€ç›˜æ¸¸æˆã€‚ä¸è¿‡è¿™ç§å¥–åŠ±æ˜¯è‡ªå·±è®¾å®šçš„ï¼Œå¾ˆå®¹æ˜“ä¸éµå®ˆï¼Œæ­¤æ—¶å¯ä»¥æ±‚åŠ©åˆ«äººï¼Œä¾‹å¦‚å¥³æœ‹å‹ï¼šâ€œå“ˆå°¼ï¼Œå¦‚æœæˆ‘ä»Šå¤©å†™å®Œè¿™ç¯‡5000å­—çš„æŠ€æœ¯æ–‡ç« ï¼Œä½ å°±å¥–åŠ±æˆ‘æ™šä¸Šå˜¿å˜¿å˜¿â€¦â€¦â€æ˜¯ä¸æ˜¯åŠ¨åŠ›åè¶³ã€‚</p><p>é¡¹ç›®é©±åŠ¨ï¼Œå®ä¾‹å…¥æ‰‹ã€‚æ–‡æ¡£æ˜¯æ¯ç‡¥çš„ï¼Œå®ä¾‹æ˜¯é²œæ´»çš„ï¼Œå¯ä»¥åŠæ—¶åé¦ˆçš„ã€‚å› æ­¤ï¼Œä¸“ä¸šå­¦ä¹ ï¼Œå°¤å…¶åœ¨åˆæœŸï¼Œå…¶å®æ˜¯æ¯”è¾ƒæ¨èä»å®ä¾‹å…¥æ‰‹å­¦ä¹ çš„ï¼Œå› ä¸ºå¯ä»¥ç«‹é©¬çœ‹åˆ°æ•ˆæœï¼Œæœ‰æˆå°±æ„Ÿï¼Œå®¹æ˜“äº§ç”Ÿå…´è¶£ã€‚ç­‰ç†Ÿç»ƒåå†å»ç†Ÿæ‚‰å„ç±»APIç»†èŠ‚å’Œæ–‡æ¡£ï¼Œå°±æ¯”è¾ƒå®¹æ˜“äº†ã€‚æ²¡å¿…è¦ä¸€å¼€å§‹å°±å»çœ‹æ–‡æ¡£å•¥çš„ã€‚</p><p>å­¦ä¼šä»»åŠ¡åˆ†è§£ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸€ç¼¸ç™½å¼€æ°´æ”¾åœ¨ä¸€ä¸ªä¸€ä¸ªçš„å°ç¢—é‡Œï¼Œæ¯å¤©å–ä¸€ç¢—ï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œå¯¹å§ã€‚ä½†æ˜¯ï¼Œå¦‚æœç›´æ¥å¯¹ç€ä¸ªå¤§ç¼¸å°±å¼€å§‹å–ï¼Œå–äº†ä¸€ä¸ªæœˆï¼Œç»“æœç¼¸é‡Œçš„æ°´å¥½åƒå°±æ²¡å°‘ï¼Œå¦‚èšèœ‰æ’¼æ ‘ï¼Œå¾ˆå®¹æ˜“æœ›è€Œç”Ÿæ€¯çš„ã€‚</p><p>å­¦ä¼šæ”¾çºµè‡ªå·±ã€‚æœ‰æ—¶å€™å¿ƒæƒ…ä¸å¥½ï¼Œä¸æƒ³å­¦ä¹ ï¼Œä¸è¦å‹‰å¼ºè‡ªå·±ï¼Œç¡¬ç€å¤´çš®å»å­¦ï¼Œæ—¢å­¦ä¸åˆ°ä¸œè¥¿ï¼Œåˆæµªè´¹äº†æ—¶é—´ã€‚è¿™ä¸ªæ—¶å€™ä½ åº”è¯¥ç—›å¿«å»ç©ï¼Œç©æ¸¸æˆç©åˆ°æ˜å¤©æš—åœ°ï¼Œè¿½å‰§è¿½åˆ°å¤©è’åœ°è€ï¼Œç›´åˆ°è´Ÿç½ªæ»¡æ»¡å†å»å­¦ä¹ ã€‚è¿™æ ·æ—¢ç©å¾—å¼€å¿ƒï¼Œåˆå­¦å¾—è¿›å»ï¼Œå¾ˆå¥ˆæ–¯ï¼</p><p><strong>è‡ªèº«</strong><br>è¿™ä¸ªæ‰æ˜¯æœ€æ ¹æœ¬çš„è§£å†³ä¹‹é“ï¼Œé¦–å…ˆè¦ç›®å…‰é•¿è¿œï¼Œå…¶æ¬¡å°±æ˜¯æƒ³åŠæ³•é”»ç‚¼è‡ªå·±å»¶è¿Ÿæ»¡è¶³çš„èƒ½åŠ›ã€‚</p><p>å¯èƒ½å¤§å®¶å¬è¿‡è‘—åçš„â€œç³–æœå®éªŒâ€ï¼Œ1960å¹´ç”±ç¾å›½å¿ƒç†å­¦å®¶ç“¦ç‰¹Â·ç±³ä¼½å°”ç»™ä¸€äº›ä¸‰å››å²çš„å­©å­æ¯äººå‘ä¸€é¢—éå¸¸å¥½åƒçš„è½¯ç³–ï¼ŒåŒæ—¶å‘Šè¯‰ä»–ä»¬å¯ä»¥åƒç³–ï¼Œå¦‚æœé©¬ä¸Šåƒï¼Œåªèƒ½åƒ1é¢—ï¼›å¦‚æœç­‰20åˆ†é’Ÿï¼Œåˆ™èƒ½åƒ2é¢—ã€‚æœ‰äº›å­©å­æ€¥ä¸å¯å¾…ï¼Œé©¬ä¸ŠæŠŠç³–åƒæ‰äº†ã€‚å¦ä¸€äº›å­©å­å´èƒ½ç­‰å¾…å¯¹ä»–ä»¬æ¥è¯´æ˜¯æ— å°½çš„20åˆ†é’Ÿã€‚ä¸ºäº†ä½¿è‡ªå·±è€ä½æ€§å­ï¼Œä»–ä»¬é—­ä¸Šçœ¼ç›ä¸çœ‹ç³–ï¼Œæˆ–å¤´æ•åŒè‡‚ï¼Œè‡ªè¨€è‡ªè¯­ï¼Œå”±æ­Œï¼Œæœ‰çš„ç”šè‡³ç¡ç€äº†ï¼Œæœ€ç»ˆä»–ä»¬åƒåˆ°äº†2é¢—ç³–ã€‚</p><p>é€šè¿‡å¯¹ç³–æœå®éªŒåæœŸçš„è¿½è¸ªç ”ç©¶ï¼Œç§‘å­¦å®¶å‘ç°ï¼Œåå‡ å¹´åï¼Œä¸¤ç§å­©å­åœ¨æƒ…ç»ªä¸ç¤¾ä¼šæ€§æ–¹é¢çš„å·®å¼‚éå¸¸æ˜¾è‘—ã€‚å…‹åˆ¶å‹çš„å­©å­ï¼Œæ˜¾å¾—ç¤¾ä¼šé€‚åº”åŠ›è¾ƒå¼ºï¼Œè¾ƒä¸ºè‡ªä¿¡ï¼Œèƒ½å¤Ÿç§¯æè¿æ¥æŒ‘æˆ˜ï¼Œä¸è½»è¨€æ”¾å¼ƒã€‚åœ¨è¿½æ±‚ç›®æ ‡æ—¶ï¼Œä¹Ÿèƒ½å’Œå°æ—¶å€™ä¸€æ ·å‹æŠ‘å³æ—¶å¾—åˆ°æ»¡è¶³çš„å†²åŠ¨ã€‚å†²åŠ¨å‹çš„å­©å­ï¼Œçº¦æœ‰1&#x2F;3ç¼ºä¹è¿™ç§ç‰¹è´¨ï¼Œå®¹æ˜“å› æŒ«æŠ˜è€Œä¸§å¤±æ–—å¿—ï¼Œé‡åˆ°å‹åŠ›å®¹æ˜“é€€ç¼©æˆ–è€…å½·å¾¨å¤±æªã€‚</p><p>ä¸“ä¸šå­¦ä¹ å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„éœ€è¦å…‹åˆ¶æ‰èƒ½æœ‰æ˜æ˜¾æ”¶ç›Šçš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯ä½ å»¶è¿Ÿæ»¡è¶³èƒ½åŠ›è¶Šå¼ºï¼Œä½ æ—¥åçš„æ”¶ç›Šåè€Œè¶Šé«˜ã€‚</p><p>ä½ ä¸€ä¸¤å¤©çš„å†²åŠ¨å­¦ä¹ æ˜¯çœ‹ä¸åˆ°æ•ˆæœçš„ï¼Œä½ éœ€è¦æŒç»­å­¦ä¹ ï¼Œç³»ç»Ÿä¸”æ·±å…¥ï¼Œä¹…è€Œä¹…ä¹‹æ‰èƒ½çœ‹åˆ°æ˜æ˜¾çš„æŠ€æœ¯çš„æˆé•¿ã€‚è€Œä¸”ï¼ŒæŠ€æœ¯çš„æˆé•¿å¸¦æ¥çš„æ”¶ç›Šä¹Ÿæ˜¯æ‚„æ— å£°æ¯ï¼Œæ¯”è¾ƒæ¼«é•¿çš„ã€‚</p><p>å¤§å¤šæ•°çš„äººçš„æŠ€æœ¯å­¦ä¹ å…¨éƒ¨æ¥æºè‡ªå·¥ä½œä¸­çš„é¡¹ç›®å¼€å‘ï¼Œå› ä¸ºè¿™äº›ä»˜å‡ºå¯ä»¥æœ‰ç«‹ç«¿è§å½±çš„å›æŠ¥ï¼Œå·¥èµ„å’Œå¥–é‡‘ã€‚ä½†æ˜¯ï¼Œå·¥ä½œä¹‹ä½™çš„å­¦ä¹ å¸¦æ¥çš„æ”¶ç›Šå´åƒæ˜¯ä¸ªé»‘æ´ï¼Œä½ çœ‹ä¸è§æ‘¸ä¸ç€ï¼Œæ— æ³•å³æ—¶åé¦ˆï¼Œæ²¡æœ‰ç‰©è´¨å¥–åŠ±ï¼Œå³ä½¿ä½ çŸ¥é“ä»¥åä¼šæœ‰ç”¨ï¼Œä½†æ˜¯ä¸€æƒ³åˆ°æ¼«é•¿ä»˜å‡ºçš„è‰°è¾›ï¼Œä»¥åŠä¸‡ä¸€å­¦çš„ä¸œè¥¿æ²¡ç”¨çš„å¿ƒæ€ï¼Œå¯¼è‡´å·¥ä½œä¹‹ä½™çš„å­¦ä¹ åšæŒä¸ä¸‹å»ï¼Œæ”¾å¼ƒäº†ï¼Œç€å®å¯æƒœã€‚</p><p>è¯·è®°ä½è¿™å¥è¯ï¼šæŠ€æœ¯æ¯”äººæƒ…æ›´å¯é ï¼Œä½ æ‰€å­¦ä¹ çš„æŠ€æœ¯çŸ¥è¯†ï¼Œç§¯ç´¯çš„é‚£äº›ç»†èŠ‚å’Œç»éªŒï¼Œç™¾åˆ†ä¹‹ä¸€ç™¾æ—¥åå¯ä»¥ç»™ä½ å¸¦æ¥ä»¤ä½ æ¬£å–œçš„ä»·å€¼ï¼Œè€Œä¸”è¿™ä¸ªä»·å€¼è¿ç»µä¸ç»ï¼ŒæŒç»­ä¸æ–­ï¼Œè¶Šç­‘è¶Šé«˜ã€‚å› ä¸ºæŠ€æœ¯ä¸åƒäººï¼ŒæŠ€æœ¯ä¸ä¼šæ¬ºéª—ä½ ï¼Œè€Œä¸”è¶ŠåŸºç¡€çš„æŠ€æœ¯è¶Šå¿ è¯šã€‚</p><p>ä½ æ‹¼å‘½å­¦ä¹ äº†1å¹´ï¼ŒæŠ€æœ¯æ˜æ˜¾ä¼˜äºå…¶å®ƒåŒäº‹ï¼Œæœ‰ç‚¹æ•°çš„å…¬å¸è‚¯å®šä¼šç»™ä½ æ¶¨å·¥èµ„ï¼Œä¸æ¶¨ï¼Œä½ æŠ€æœ¯åœ¨æ‰‹ï¼Œèµ°äººä¾¿æ˜¯ï¼Œä¸€å®šæœ‰åœ°æ–¹å¯ä»¥æä¾›ç»™ä½ æŠ€èƒ½åŒ¹é…çš„è–ªèµ„çš„ã€‚ä½ çš„æŠ€æœ¯å­¦ä¹ ä»˜å‡ºä¸€å®šä¼šæœ‰æ”¶ç›Šï¼Œä¸€å®šè¦åšä¿¡è¿™ä¸€ç‚¹ã€‚</p><p>æˆ‘å°±æ˜¯å¾ˆå¥½çš„ä¾‹å­ï¼Œæˆ‘ä»ä»€ä¹ˆéƒ½æ²¡æœ‰çš„å±Œä¸ï¼Œé€šè¿‡æŒç»­ä¸æ–­çš„ä¸“ä¸šå­¦ä¹ ï¼Œä½ çœ‹ï¼Œç°åœ¨ç‰©è´¨ä¸ç²¾ç¥éƒ½å¯Œè¶³ï¼Œç°åœ¨è¿˜æœ‰å¿ƒæƒ…ç»™ä½ ä»¬ç…²é¸¡æ±¤ã€‚</p><p>æœ‰äº†ä¿¡å¿ƒï¼Œå‰©ä¸‹çš„å°±æ˜¯é”»ç‚¼è‡ªå·±å»¶æ—¶æ»¡è¶³çš„èƒ½åŠ›ã€‚å¾ˆå¤šäººï¼Œæˆ‘å°±ç®—å‘Šè¯‰ä»–ï¼Œä½ åªè¦æ¯å¤©ç³»ç»Ÿå­¦ä¹ ä¸€ä¸ªå°æ—¶ï¼Œ1å¹´åå·¥èµ„å¿…å¢åŠ 20%ï¼Œä»–è¿˜æ˜¯åšä¸åˆ°ï¼Œå°±åƒè‚¡å¸‚ï¼Œæ€»æœ‰ä¸€å¤©ä¼šæœ‰å†å²æ–°é«˜ï¼ŒæŒ‡æ•°ç¿»ç¿»æ˜¯å¿…ç„¶ï¼Œä½†ä»–å°±æ˜¯æ”¾ä¸åˆ°é‚£ä¸€å¤©ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦æ¢ä¸€ç§æ€ç»´æ–¹å¼ï¼Œ1å¹´åå·¥èµ„å¿…å¢åŠ 20%ï¼ŒåŸæ¥1ä¸‡ä¸€ä¸ªæœˆï¼Œç°åœ¨æ¯å¹´å¤š2.4ä¸‡ï¼Œå·¥ä½œ10å¹´å°±æ˜¯24ä¸‡ï¼Œç®—ä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯ä½ åªè¦æ¯å¤©è¾›è‹¦å­¦ä¹ 1å°æ—¶ï¼Œæ¯å¤©è´¦æˆ·é‡Œè‡³å°‘å¯ä»¥å¢åŠ æ”¶å…¥674å…ƒï¼Œä½ æ˜¯ä¸æ˜¯å¾ˆä¹æ„å»å­¦ã€‚é‚£å°±å¯¹å•¦ï¼ä¸“ä¸šæŠ€æœ¯çš„å­¦ä¹ çš„æ”¶ç›Šåªä¸è¿‡æ˜¯åœ¨æ—¥åä¸€èµ·æ”¯ä»˜ç»™ä½ ï¼Œä¸ºä»€ä¹ˆä¸å»å­¦ä¹ å‘¢ï¼Ÿåªæ˜¯æ”¶ç›Šæ™šå‡ å¹´åˆ°ä½ è´¦ä¸Šè€Œå·²ã€‚å…»è€ä¿é™©æ˜¯60å²ä¹‹ååˆ°è´¦ä½ éƒ½æ„¿æ„äº¤ï¼Œè¿™ä¸ªæ¯”å…»è€ä¿é™©åˆ’ç®—1ä¸‡å€çš„ç»ˆèº«å—ç›Šçš„ä¸“ä¸šå­¦ä¹ ä»˜å‡ºä¸ºä»€ä¹ˆä¸æ„¿æ„åšå‘¢ï¼Ÿ</p><h3 id="äºŒã€æ²¡æ—¶é—´å­¦"><a href="#äºŒã€æ²¡æ—¶é—´å­¦" class="headerlink" title="äºŒã€æ²¡æ—¶é—´å­¦"></a>äºŒã€æ²¡æ—¶é—´å­¦</h3><p>é²è¿…æ›¾ç»è¯´è¿‡ï¼šâ€œæ—¶é—´å°±åƒæµ·ç»µé‡Œçš„æ°´ï¼Œåªè¦ä½ æ„¿æ„æŒ¤ï¼Œæ€»è¿˜æ˜¯æœ‰çš„ã€‚â€</p><ol><li>å¤§å®¶æ˜¯ä¸æ˜¯å¯¹â€œæ²¡æ—¶é—´â€æœ‰ä»€ä¹ˆè¯¯è§£<br>é¢è¯•çš„æ—¶å€™é—®é“ï¼šâ€œä¸šä½™æ—¶é—´ä¸ºä»€ä¹ˆä¸å­¦ç‚¹å…¶å®ƒä¸œè¥¿å‘¢ï¼Ÿâ€</li></ol><p>â€œå¹³æ—¶ä¸Šç­å¾ˆè¾›è‹¦ï¼Œç»å¸¸åŠ ç­ï¼Œæ²¡æ—¶é—´ã€‚â€</p><p>æˆ‘æƒ³åˆ°äº†å¹´è½»çš„æ—¶å€™ï¼Œéƒ½æ˜¯åŠ ç­åˆ°å‡Œæ™¨ï¼Œå¯¹äºç°åœ¨çš„å°æœ‹å‹ï¼Œè¦æ˜¯ä¹Ÿè¿™ä¹ˆæ™šï¼Œè¿˜è®©ä»–ä»¬å»å­¦ç‚¹ä»€ä¹ˆï¼Œç¡®å®æœ‰äº›ä¸ºéš¾ï¼Œäºæ˜¯å¼±å¼±åœ°é—®äº†ä¸€å¥ï¼šâ€œé‚£ä½ å¹³æ—¶éƒ½ä»€ä¹ˆæ—¶å€™ä¸‹ç­å•Šï¼Ÿâ€</p><p>â€œè¦ä¸ƒå…«ç‚¹â€¦â€¦â€</p><p>æˆ‘è„‘è¢‹ä¸Šæ–¹ç«‹é©¬å‡ºç°äº†ç‚¹ç‚¹ç‚¹ï¼Œç»§ç»­é—®é“ï¼šâ€œé‚£å‘¨æœ«å‘¢ï¼Ÿâ€</p><p>æ”¯æ”¯å¾å¾åˆç­”ä¸ä¸Šæ¥ã€‚</p><p>æˆ‘å°±å¾ˆå¥‡æ€ªäº†ï¼Œéš¾é“ä¸‹ç­å›å®¶åˆ°ç¡è§‰å…¶ä¸­æœ‰2ï¼Œ3ä¸ªå°æ—¶çš„è‡ªç”±æ—¶é—´ä¸æ˜¯æ—¶é—´å—ï¼Ÿéš¾é“å‘¨æœ«ä¸¤å¤©è¿˜æœ‰é‚£ä¹ˆå¤šèŠ‚å‡æ—¥ä¸æ˜¯æ—¶é—´å—ï¼Ÿæ€ä¹ˆä¼šè¯´æ²¡æ—¶é—´å­¦å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¤§å®¶å¯¹â€œæ²¡æ—¶é—´â€æœ‰ä»€ä¹ˆè¯¯è§£ï¼Ÿ</p><p>åæ¥ä¸€ç•ªæ€è€ƒï¼Œæˆ‘æ˜ç™½äº†ï¼Œæ˜¯å¿ƒç†è´¦æˆ·åœ¨ä½œç¥Ÿã€‚</p><p>å¦‚æœä»Šå¤©æ™šä¸Šä½ æ‰“ç®—å»å¬ä¸€åœºéŸ³ä¹ä¼šï¼Œç¥¨ä»·æ˜¯200å…ƒï¼Œåœ¨ä½ é©¬ä¸Šè¦å‡ºå‘çš„æ—¶å€™ï¼Œä½ å‘ç°ä½ æŠŠæœ€è¿‘ä¹°çš„ä»·å€¼200å…ƒçš„ç”µè¯å¡å¼„ä¸¢äº†ã€‚ä½ æ˜¯å¦è¿˜ä¼šå»å¬è¿™åœºéŸ³ä¹ä¼šï¼Ÿå®éªŒè¡¨æ˜ï¼Œå¤§éƒ¨åˆ†çš„å›ç­”è€…ä»æ—§å»å¬ã€‚å¯æ˜¯å¦‚æœæƒ…å†µå˜ä¸€ä¸‹ï¼Œå‡è®¾ä½ æ˜¨å¤©èŠ±äº†200å…ƒé’±ä¹°äº†ä¸€å¼ ä»Šå¤©æ™šä¸ŠéŸ³ä¹ä¼šé—¨ç¥¨ã€‚åœ¨ä½ é©¬ä¸Šè¦å‡ºå‘çš„æ—¶å€™ï¼Œçªç„¶å‘ç°ä½ æŠŠé—¨ç¥¨å¼„ä¸¢äº†ã€‚å¦‚æœä½ æƒ³è¦å¬éŸ³ä¹ä¼šï¼Œå°±å¿…é¡»å†èŠ±200å…ƒé’±ä¹°å¼ é—¨ç¥¨ï¼Œä½ æ˜¯å¦è¿˜ä¼šå»å¬ï¼Ÿç»“æœå´æ˜¯ï¼Œå¤§éƒ¨åˆ†äººå›ç­”è¯´ä¸å»äº†ã€‚</p><p>å¯ä»”ç»†æƒ³ä¸€æƒ³ï¼Œä¸Šé¢è¿™ä¸¤ä¸ªå›ç­”å…¶å®æ˜¯è‡ªç›¸çŸ›ç›¾çš„ã€‚ä¸ç®¡ä¸¢çš„æ˜¯ç”µè¯å¡è¿˜æ˜¯éŸ³ä¹ä¼šé—¨ç¥¨ï¼Œæ€»ä¹‹æ˜¯ä¸¢å¤±äº†ä»·å€¼200å…ƒçš„ä¸œè¥¿ï¼Œä»æŸå¤±çš„é‡‘é’±ä¸Šçœ‹ï¼Œå¹¶æ²¡æœ‰åŒºåˆ«ã€‚ä¹‹æ‰€ä»¥å‡ºç°ä¸Šé¢ä¸¤ç§ä¸åŒçš„ç»“æœï¼Œå…¶åŸå› å°±æ˜¯å¤§å¤šæ•°äººçš„å¿ƒç†è´¦æˆ·çš„é—®é¢˜ã€‚</p><p>äººä»¬åœ¨è„‘æµ·ä¸­ï¼ŒæŠŠç”µè¯å¡å’ŒéŸ³ä¹ä¼šé—¨ç¥¨å½’åˆ°äº†ä¸åŒçš„è´¦æˆ·ä¸­ï¼Œæ‰€ä»¥ä¸¢å¤±äº†ç”µè¯å¡ä¸ä¼šå½±å“éŸ³ä¹ä¼šæ‰€åœ¨çš„è´¦æˆ·çš„é¢„ç®—å’Œæ”¯å‡ºï¼Œå¤§éƒ¨åˆ†äººä»æ—§é€‰æ‹©å»å¬éŸ³ä¹ä¼šã€‚ä½†æ˜¯ä¸¢äº†çš„éŸ³ä¹ä¼šé—¨ç¥¨å’Œåæ¥éœ€è¦å†ä¹°çš„é—¨ç¥¨éƒ½è¢«å½’å…¥äº†åŒä¸€ä¸ªè´¦æˆ·ï¼Œæ‰€ä»¥çœ‹ä¸Šå»å°±å¥½åƒè¦èŠ±400å…ƒå¬ä¸€åœºéŸ³ä¹ä¼šäº†ã€‚äººä»¬å½“ç„¶è§‰å¾—è¿™æ ·ä¸åˆ’ç®—äº†ã€‚</p><p>è¯´æ²¡æ—¶é—´å­¦ä¹ å…¶å®ä¹Ÿæ˜¯è¿™ä¹ˆå›äº‹ã€‚æœ‰ä¸€éƒ¨åˆ†äººï¼ŒæŠŠå·¥ä½œå’Œç”Ÿæ´»åŒºåˆ†å¾—å¾ˆå¼€ï¼Œå¿ƒé‡Œé¢æœ‰ä¸€ä¸ªå·¥ä½œæ—¶é—´è´¦æˆ·ï¼Œè¿˜æœ‰ä¸€ä¸ªç”Ÿæ´»æ—¶é—´è´¦æˆ·ï¼Œå…¶ä¸­å·¥ä½œæ—¶é—´è´¦æˆ·æ˜¯æ¯å‘¨40å°æ—¶ï¼Œå¦‚æœç»å¸¸åŠ ç­ï¼Œæ¯å¤©åœ¨å…¬å¸å¾…10ä¸ªå°æ—¶ï¼Œæ˜¾ç„¶ï¼Œå·¥ä½œè´¦æˆ·ä¸­çš„æ—¶é—´ä¸ä»…ç”¨å…‰ï¼Œè€Œä¸”æ˜¯ä¸¥é‡é€æ”¯ï¼Œè€Œä¸“ä¸šå­¦ä¹ ä¹Ÿæ˜¯å·¥ä½œèŒƒç•´ï¼Œç›¸å½“äºè¦ä»ç”Ÿæ´»è´¦æˆ·é‡Œé¢å†åˆ’æ—¶é—´åˆ°å·¥ä½œè´¦æˆ·ï¼Œå¿ƒç†ä¸Šä¼šè§‰å¾—ä¸åˆ’ç®—ï¼Œå°±ä¸æ„¿ç†å»å­¦ä¹ ï¼Œé—®å…¶åŸå› ï¼Œç­”æ›°â€œæ²¡æ—¶é—´â€ï¼Œå…¶å®æŒ‡çš„æ˜¯æˆ‘è®¡åˆ’ç”¨æ¥å·¥ä½œçš„æ—¶é—´å·²ç»ç”¨å®Œäº†ã€‚</p><p>å®é™…ä¸Šï¼Œé’±å°±æ˜¯é’±ï¼Œåªè¦é‡‘é¢ä¸€æ ·å°±æ˜¯ä¸€æ ·çš„ï¼Œåƒä¸‡ä¸è¦æˆ¿å­98æŠ˜ä½ è§‰å¾—å¼€å‘å•†æ²¡è¯šæ„ï¼Œç™½èœ3æŠ˜è§‰å¾—èµšå¤§å‘äº†ã€‚å‡è®¾200ä¸‡çš„æˆ¿å­å‰è€…å¯ä»¥èŠ‚çœ4ä¸‡å—ï¼Œå¤Ÿä½ ä¹°ä¸€è¾ˆå­çš„ç™½èœçš„å•¦ï¼è‚¯å®šæ˜¯å‰è€…èµšå¤§å‘å‘€ï¼</p><p>æ—¶é—´å°±æ˜¯æ—¶é—´ï¼Œåªè¦è·¨åº¦ä¸€æ ·å¥¹å°±ä¸€æ ·ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚ä½ æ¯å¤©è·¯ä¸Šé€šå‹¤1~2ä¸ªå°æ—¶ä¸ä»¥ä¸ºç„¶ï¼Œå¶å°”ä¸‹ç­æ™šä¸€ä¸ªå°æ—¶å´æš´è·³å¦‚é›·ï¼ä¸æ˜¯å¾ˆå¥‡æ€ªå—ï¼Ÿ</p><p>å¤§å®¶å¯ä»¥ç”¨æ¥å­¦ä¹ çš„ä¸šä½™æ—¶é—´æ˜¯å¦‚æ­¤å……è£•ï¼Œæ ¹æœ¬å°±è½®ä¸åˆ°é€šè¿‡â€œæŒ¤æµ·ç»µâ€æ¥é¢„ç•™ã€‚</p><p>è™½ç„¶è¯´äº†è¿™ä¹ˆå¤šï¼Œä½†æˆ‘çŸ¥é“çš„ï¼Œæ²¡ç”¨çš„ï¼Œæ²¡æ—¶é—´å°±æ˜¯æ²¡æ—¶é—´ï¼Œå¦‚æœéšä¾¿è®²ä¸¤å¥è¯å°±èƒ½æé«˜ï¼Œäººç±»æ—©å°±éå¸ƒé“¶æ²³ç³»äº†ã€‚</p><p>æ‰€ä»¥æœ‰å¿…è¦ä»å¦å¤–ä¸€ä¸ªè§’åº¦è®²è®²ä¸ºä»€ä¹ˆè¦ä»ç”Ÿæ´»æ—¶é—´è´¦æˆ·é‡Œåˆ’ä¸€éƒ¨åˆ†æ—¶é—´åˆ°å·¥ä½œæ—¶é—´è´¦æˆ·ã€‚</p><ol start="2"><li>ä¸ºäº†æœ‰æ›´å¥½çš„ç”Ÿæ´»<br>é—®é—®è‡ªå·±ï¼Œæˆ‘å·¥ä½œæ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿ</li></ol><p>æœ‰äººæ˜¯ä¸ºäº†æˆå°±äººç”Ÿä»·å€¼ï¼Œè¿™æ ·çš„äººè‡ªé©±èƒ½åŠ›éƒ½å¾ˆå¼ºï¼Œä¸éœ€è¦çœ‹æœ¬æ–‡ï¼›æœ‰äººæ˜¯ä¸ºäº†æ‰“å‘æ—¶é—´ï¼Œæ¯•ç«Ÿå®¶é‡Œæœ‰çŸ¿ï¼Œè¯·å‡ºé—¨å·¦è½¬ä¸é€ï¼›æ›´å¤šçš„äººæ˜¯ä¸ºäº†é’±ï¼Œä¸ºäº†å…»å®¶ç³Šå£ï¼Œä¸ºäº†æ›´å¥½çš„ç”Ÿæ´»ã€‚</p><p>æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè¿™ä¹ˆæƒ³æŒºå¥½ï¼Œæœ‰æ¬²æœ›å°±èƒ½æœ‰åŠ¨åŠ›ã€‚</p><p>ç°åœ¨å†é—®é—®é—®è‡ªå·±ï¼Œæˆ‘ç°åœ¨çš„ç”Ÿæ´»å¥½å—ï¼Ÿè¿‡å¾—å¼€å¿ƒå—ï¼Ÿ</p><p>å¦‚æœä½ è§‰å¾—ä¸é”™ï¼Œæ— å¿§æ— è™‘ï¼Œé‚£ç»§ç»­ä¿æŒå°±å¥½äº†ã€‚ä½†æ˜¯å¦‚æœä½ ç°åœ¨ç”Ÿæ´»ä¸å¥½ï¼Œå ç”¨ç³Ÿç³•çš„ç”Ÿæ´»æ—¶é—´ç”¨æ¥å­¦ä¹ ï¼Œæ”¹å˜ç°åœ¨ä¸å¥½çš„ç”Ÿæ´»çŠ¶æ€ï¼Œä¸æ˜¯ç†æ‰€å½“ç„¶çš„äº‹æƒ…å—ï¼Ÿ</p><p>ç‰ºç‰²ä¸€ç‚¹ç”Ÿæ´»å¨±ä¹æ—¶é—´ï¼Œç”¨æ¥å­¦ä¹ ï¼Œæé«˜è‡ªå·±ï¼ŒæŠ•èµ„è‡ªå·±ï¼Œä»¥åèµšæ›´å¤šçš„é’±ï¼Œä¸å°±æœ‰æ›´å¥½çš„ç”Ÿæ´»äº†ï¼Ÿä»€ä¹ˆè½¦å˜å­ï¼Œä¹°ä¹°ä¹°ï¼Œä»€ä¹ˆé¦™æ¤¿ï¼Œä¹°ä¹°ä¹°ï¼Œå²‚ä¸çˆ½å“‰ï¼äº’è”ç½‘è¡Œä¸šç›¸å¯¹å…¬å¹³ï¼Œä¸“ä¸šæˆé•¿çš„ä»˜å‡ºå¿…æœ‰å›æŠ¥ï¼Œæƒ³è¦æ‘†è„±ç°åœ¨ä¸å¦‚æ„çš„ç”Ÿæ´»ï¼ŒæŒç»­å­¦ä¹ å§ï¼Œç”Ÿæ´»ä¸€å®šä¼šè¶Šæ¥è¶Šå¥½ã€‚</p><p>ä»€ä¹ˆæˆ‘éœ€è¦æ—¶é—´é™ªå¥³æœ‹å‹å•¦ï¼Œé™ªå®¶äººå•¦ï¼Œåˆ«è‡ªæˆ‘æ„ŸåŠ¨å•¦ã€‚ç›¸ä¿¡æˆ‘ï¼Œä½ å¥³æœ‹å‹æœ€éœ€è¦çš„ä¸æ˜¯é™ªä¼´ï¼Œä½ å®¶äººæœ€éœ€è¦çš„ä¹Ÿä¸æ˜¯é™ªä¼´ï¼Œä¸è¦è¢«å±Œä¸ç¼–å‰§å†™çš„ç”µè§†å‰§ç»™è¯¯å¯¼äº†ã€‚ä½ å¥³æœ‹å‹æ›´å¸Œæœ›çœ‹åˆ°ä½ ä¸æ–­å­¦ä¹ ä¸Šè¿›æœ‰äº‹ä¸šå¿ƒèƒ½èµšé’±ï¼Œå¥³æœ‹å‹æ¥å¤§å§¨å¦ˆäº†ä½ å‘100æ¡åœ¨å—å¹²å˜›å¤šå–çƒ­æ°´æœ‰æ¯›çº¿ç”¨ï¼Œç›´æ¥è½¬ä¸ª5000å—é’±ï¼Œæ¥ï¼Œå®è´ï¼Œå»ä¹°ç‚¹çƒ­æ°´å–æ‰æ˜¯ä½ å¥³æœ‹å‹éœ€è¦çš„ã€‚ä½ å®¶äººä¹Ÿä¸éœ€è¦ä½ é™ªä¼´ï¼Œä½ æ¯ä¸ªæœˆè½¬ä»–ä»¬5000å—é’±ï¼Œä»–ä»¬ä¸è¦è¿‡çš„å¤ªå¼€å¿ƒå“¦ï¼</p><p>è´«è´±å¤«å¦»ç™¾äº‹å“€ã€‚æ‰€æœ‰å®¶åº­çŸ›ç›¾çš„æœ¬æºéƒ½æ˜¯é’±ã€‚è¯·è®°ä½è¿™ä¸¤å¥è¯ï¼Œä¸ºäº†æ›´å¥½çš„ç”Ÿæ´»ï¼Œæƒ³è¦æ‘†è„±ç°åœ¨çš„å›°å¢ƒï¼Œå°‘ç‚¹å¨±ä¹ï¼Œå¤šç‚¹å­¦ä¹ ï¼Œä¸€ç‚¹ä¹Ÿä¸è¿‡åˆ†ï¼Œå†µä¸”æœ¬èº«å°±æ˜¯ä¸ªç¨³èµšä¸èµ”çš„ä¹°å–å•Šã€‚</p><p>ä¸è¿‡å¦‚æœä½ å¸Œæœ›èººåœ¨å®¶é‡Œå°±èƒ½å‡èŒåŠ è–ªï¼Œå‡ºé—¨å³è½¬ï¼Œèµ·ç‚¹çˆ½æ–‡åœ†ä½ ç¾æ¢¦ã€‚</p><ol start="3"><li>é‡‘é’±æ¢æ—¶é—´æ¢æ›´å¤šçš„é‡‘é’±<br>å¦‚æœä½ è¿˜æ˜¯ä¸æ„¿æ„ç‰ºç‰²ç”Ÿæ´»æ—¶é—´ç”¨æ¥å­¦ä¹ ï¼Œé‚£è¿˜æ˜¯æœ‰åŠæ³•çš„ï¼Œé‚£å°±æ˜¯é€šè¿‡é‡‘é’±æ¢æ—¶é—´æ¢æ›´å¤šçš„é‡‘é’±ã€‚</li></ol><p>ä¸Šä¸‹ç­çš„é€šå‹¤æ—¶é—´å°±å¯ä»¥ç”¨é‡‘é’±è´­ä¹°ï¼Œå¾ˆå¤šå¹´è½»äººç§Ÿæˆ¿å­ä½ï¼Œä¸ºäº†çœæˆ¿ç§Ÿï¼Œä½å¾—ç¦»å…¬å¸æ¯”è¾ƒè¿œï¼Œä¸Šä¸‹ç­é€šå‹¤åŠ èµ·æ¥ç”šè‡³å¿«2ä¸ªå°æ—¶ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå·¨äºçš„ä¹°å–ï¼Œè¯´æ„šè ¢ä¹Ÿä¸ä¸ºè¿‡ã€‚</p><p>æˆ‘å»ºè®®åˆšæ¯•ä¸šçš„å¹´è½»äººä¸€å®šè¦ä½åœ¨å…¬å¸é™„è¿‘ï¼Œæœ€å¥½æ­¥è¡Œ10åˆ†é’Ÿä»¥å†…å°±èƒ½ä¸Šç­ã€‚ä¸è¦è¯´ä¸ºäº†çœåƒæŠŠå—é’±æˆ¿ç§Ÿä½åœ¨å¾ˆè¿œçš„åœ°æ–¹ã€‚</p><p>æ²¡é”™ï¼Œå¯¹äºåˆšå°±ä¸šçš„å°å¹´è½»å¤š1000å—é’±çš„æˆ¿ç§Ÿæ˜¯ä¸å°çš„æˆæœ¬ï¼Œä½†è¿™1000å—é’±ç”¨æ¥ä¹°30ä¸ªå°æ—¶ï¼ˆæ¯ä¸ªå·¥ä½œæ—¥èŠ‚çº¦1.5å°æ—¶ï¼‰ï¼Œé‚£æ˜¯ç»å¯¹åˆ’ç®—çš„ï¼Œ30å—é’±ä¹°ä¸€ä¸ªå°æ—¶ï¼Œå¦ˆå‘€ï¼Œåšæ¢¦éƒ½è¦ç¬‘é†’ï¼Œæƒ³æƒ³çœ‹ä½ çš„æ—¶è–ªæ˜¯å¤šå°‘ï¼Œè¿™ä¸ªæ—¶é—´ç”¨æ¥å·¥ä½œäº§å‡ºï¼Œæˆ–è€…è‡ªæˆ‘å­¦ä¹ æˆé•¿ï¼Œç»å¯¹æ˜¯èµšçš„å‘€ï¼Œè€Œä¸”è¿˜æ˜¯ç›¸æ¯”å½“ä¸‹æ”¶ç›Šï¼Œè€ƒè™‘åˆ°ä½ å·¥ä½œè¡¨ç°å’Œå‡èŒåŠ è–ªå¸¦æ¥çš„æ—¥åæ”¶ç›Šï¼Œ10å€æ”¶ç›Šä¸æ­¢ï¼Œç›®æ ‡è¦é•¿è¿œï¼Œè¦å­¦ä¼šçœ‹åˆ°éšæ€§æ”¶ç›Šã€‚</p><p>æ—¶é—´æ˜¯æ²¡æœ‰å¿ƒç†è´¦æˆ·çš„ï¼Œå¹´è½»æ—¶å€™çš„æ—¶é—´å’Œå¹´é•¿æ—¶å€™çš„æ—¶é—´æ˜¯ç­‰åŒçš„ï¼Œå¹´è½»æ—¶å€™ä½ 1000å—é’±ä¹°30ä¸ªå°æ—¶ä½ è§‰å¾—è´µï¼Œç­‰ä½ ä¸­å¹´æ—¶å€™å†çœ‹å°±ä¸è´µäº†ï¼Œç­‰ä½ å¹´è€æ¿’æ­»æ—¶å€™æƒ³è¦å†èŠ±1000å—é’±ä¹°30ä¸ªå°æ—¶ï¼ŒæŠ±æ­‰ï¼Œè™½ç„¶ä½ è§‰å¾—æ¯”ç™½èœè¿˜ä¾¿å®œï¼Œä½†æ˜¯å·²ç»ä¹°ä¸åˆ°äº†ã€‚å¹´è½»æ—¶å€™çš„æ—¶é—´å’Œå¹´è€æ—¶å€™ä¸€æ ·å€¼é’±ï¼ŒèŠ±é’±ä¹°æ—¶é—´ï¼Œç¨³èµšä¸èµ”ã€‚è€Œä¸”è¿™æ˜¯ä¸ªè‰¯æ€§å¾ªç¯ï¼Œä¹°æ¥çš„æ—¶é—´å¯ä»¥æ¢æˆæ›´å¤šçš„é‡‘é’±ï¼Œæ›´å¤šçš„é‡‘é’±å¯ä»¥ä¹°æ›´å¤šçš„æ—¶é—´ï¼Œä¾‹å¦‚ä¹°ä¸ªå°è½¦ä¸Šä¸‹ç­æ›´æ–¹ä¾¿æ›´çœæ—¶é—´ï¼›åŒ»é™¢æŒ‚å·éƒ½æ˜¯æŒ‚å‡ ç™¾å—é’±çš„ç‰¹éœ€å°‘æ’é˜Ÿï¼›æœ‰èµ„æœ¬ä¸éœ€è¦åº”ä»˜æ— èŠçš„åº”é…¬ï¼›è¯·é˜¿å§¨å¸®å¿™æ‰“æ‰«å«ç”Ÿåšé¥­ç­‰ã€‚</p><p>æˆ‘ç°åœ¨å°±å¾ˆåº†å¹¸å¹´è½»æ—¶å€™çš„å†³å®šï¼Œæˆ‘å°±ä½åœ¨å…¬å¸é™„è¿‘ï¼Œèµ°è·¯5åˆ†å¤šé’Ÿï¼Œä¸ºäº†èŠ‚çº¦æ—¶é—´ï¼Œè¡£æœå…¨éƒ¨éƒ½ç»™å¹²æ´—åº—å¹²æ´—ã€‚æŒ‰ç…§å½“æ—¶å‡ åƒå—é’±çš„å·¥èµ„çœ‹ï¼Œæ˜¯ç¬”ä¸å°çš„å¼€é”€ï¼Œä½†æ˜¯ç°åœ¨å›è¿‡å¤´åœ¨çœ‹ï¼Œè¿™äº›å¹´è‡ªå·±çš„æˆé•¿ã€äº§å‡ºä¸æ”¶è·ï¼Œä¹‹å‰è´­ä¹°æ—¶é—´çš„èŠ±è´¹çš„é‚£ç‚¹æˆæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p><p>ä½ çš„ä¸€ç”Ÿä¸­ï¼Œæœ€å®è´µçš„å°±æ˜¯æ—¶é—´ï¼Œä»€ä¹ˆæ—¶å€™ä½ èƒ½å­¦ä¼šèŠ±é’±ä¹°æ—¶é—´ï¼Œä½ å°±èµ°åœ¨äº†å¿«é€Ÿä¸Šå‡çš„é˜¶æ¢¯ä¸Šäº†ã€‚</p><ol start="4"><li>æˆ‘æ˜¯å¦‚ä½•èŠ‚çº¦ä¸ç®¡ç†æ—¶é—´çš„ï¼Ÿ<br>ä¹Ÿæœ‰éƒ¨åˆ†äººç¡®å®æ—¶é—´æ¯”è¾ƒç´§ï¼Œæ¯”æ–¹è¯´å®¶é‡Œæœ‰å°æœ‹å‹ï¼Œè€äººåˆä¸æ–¹ä¾¿å¸¦ï¼Œä¸å¯èƒ½å…¨éƒ¨éƒ½äº¤ç»™è€å©†ï¼Œæ­¤æ—¶å°±å¾ˆéš¾æœ‰å¤§æ®µçš„ç©ºä½™æ—¶é—´ã€‚</li></ol><p>è¿™é‡Œæˆ‘ä»‹ç»ä¸€ç‚¹è‡ªå·±çš„ç»éªŒï¼Œå¸Œæœ›å¯ä»¥æœ‰æ‰€å¸®åŠ©ã€‚</p><p>èŠ‚çº¦æ—¶é—´<br>æˆ‘å·¥ä½œå¤´å‡ å¹´èŠ‚çº¦æ—¶é—´çš„åšæ³•ï¼š</p><p>ä¸ç©æ¸¸æˆä¸çœ‹å‰§ï¼›<br>ä¸ç¤¾äº¤ï¼›<br>ä¸çº¿ä¸‹è´­ç‰©ã€‚è´­ç‰©ä¸èŠå¤©ä¸ç ä»·ç›´æ¥ä¹°ï¼Œä¹°åˆ°ä¸åˆé€‚ä»ä¸é€€è´§ï¼Œå°†å°±æˆ–å†ä¹°ä¸€ä¸ªï¼›<br>ä¸æ‰“æ‰®ï¼›<br>ä½å…¬å¸é™„è¿‘ï¼›<br>ä¸è‡ªå·±åšé¥­åšèœï¼Œå¤–é¢åƒï¼›<br>ä¸è‡ªå·±æ´—è¡£æœï¼Œæ´—è¡£åº—ï¼›<br>å¤§å°å·ä½¿ç”¨ç¦»é—¨æœ€è¿‘çš„å‘ä½ï¼›<br>ä¸Šå¤§å·å¿…å¸¦ç¬”çœ‹ä¹¦ï¼›<br>å¤§ç“¶è£…æ°´ï¼Œå¯ä»¥å‡å°‘å»é¥®æ°´æœºæ¬¡æ•°ï¼›<br>å†³ä¸æ’é˜Ÿä¹°ä¸œè¥¿ï¼›<br>ç”šè‡³è€å©†éƒ½æ˜¯ä»å¯¹é¢å±‹å­çš„æ‰¾çš„ã€‚<br>çœä¸‹æ¥æ—¶é—´ç”¨æ¥å­¦ä¹ ä¸åˆ›ä½œï¼Œæé«˜è‡ªå·±åŒæ—¶ä¸æ–­åˆ›é€ ä»·å€¼ã€‚</p><p>äººç”Ÿå¦‚æ­¤å®è´µï¼Œä¸è¦åœ¨æ— æ„ä¹‰çš„äº‹æƒ…ä¸Šæµªè´¹ã€‚</p><p>ç®¡ç†æ—¶é—´<br>ä¸»è¦è®²ä¸‹ä¸šä½™æ—¶é—´çš„ç®¡ç†ï¼Œç°åœ¨å®¶é‡Œæœ‰2ä½å°æœ‹å‹ï¼Œæˆ‘æ˜¯å¦‚ä½•æŠ½å‡ºæ—¶é—´å­¦ä¹ çš„ã€‚</p><p>æœ‰æ—¶é—´å­¦ä¹ çš„ä¸»è¦åŸå› æ˜¯ä¸ˆæ¯å¨˜ï¼Œåœ¨å®¶å¸®å¿™å¸¦å­©å­ï¼Œæ´—è¡£å’Œåšé¥­ï¼Œå“ˆå“ˆå“ˆï¼Œè€å©†å¤§äººä¹Ÿå¸®äº†å¾ˆå¤šå¿™ã€‚</p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯è¡¨è±¡ï¼ŒèƒŒåæ·±å±‚æ¬¡åŸå› åœ¨äºï¼Œä¸€æ–¹é¢æˆ‘äººè¿˜ä¸é”™ï¼Œå¯¹è€å©†å¾ˆä¸Šå¿ƒï¼›å¦ä¸€æ–¹é¢æ˜¯å……åˆ†åˆ©ç”¨å®¶äººå¸®æˆ‘çœä¸‹çš„æ—¶é—´æˆé•¿æé«˜åˆ›é€ ä»·å€¼ç»™å®¶åº­å¸¦æ¥æ”¶ç›Šï¼Œå®¶é‡Œäººæ„¿æ„æ”¯æŒã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªè‰¯æ€§å¾ªç¯ï¼ŒåŠªåŠ›ä¸Šè¿›ï¼Œå®¶äººæ”¯æŒï¼Œæœ‰æ›´å¤šçš„æ—¶é—´åŠªåŠ›ä¸Šè¿›ï¼Œå¸¦æ¥æ›´å¤§çš„å®¶åº­å—ç›Šï¼Œå¾—åˆ°æ›´å¤šæ”¯æŒã€‚</p><p>è¦æ˜¯ä¸€ä¸ªæ•´å¤©å°±çŸ¥é“ç©æ¸¸æˆçš„å¥³å©¿ï¼Œå•§å•§å•§ï¼Œè‚¯å®šä¼šè®©ä½ å¸®å¿™å¸¦å­©å­çš„ï¼Œæ¯ä¸ªäººå¯¹å®¶åº­çš„è´¡çŒ®è¦å‡ç­‰ï¼Œå¦åˆ™å®¹æ˜“å‡ºçŸ›ç›¾ã€‚</p><p>æœ‰äº›å®¶åº­æœ‰å°èˆ…å­ï¼Œä¸ˆæ¯å¨˜è¿‡ä¸æ¥ï¼Œå©†åª³å…³ç³»æ˜¯éšæ‚£ï¼Œåªèƒ½å¤«å¦»ä¸¤äººè‡ªå·±å¸¦å°å­©ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘å»ºè®®ï¼Œæš‚æ—¶è‹¦ä¸€ç‚¹ï¼ŒæŠŠæ´—è¡£åšé¥­è¿™ç§å®¶åŠ¡å¤–åŒ…å‡ºå»ï¼Œå‰©ä¸‹æ—¶é—´ç”¨æ¥æˆé•¿ä¸æé«˜ï¼Œè™½ç„¶æš‚æ—¶å¯èƒ½å…¥ä¸æ•·å‡ºï¼Œä½†æ˜¯é•¿è¿œæ¥çœ‹ï¼Œæ˜¯ç»å¯¹åˆ’ç®—çš„ä¹°å–ã€‚</p><p>ä¸šä½™å­¦ä¹ <br>æˆ‘å¹³æ—¶9<del>10ç‚¹æ‰åˆ°å®¶ï¼Œä¸€å®šä¼šå¼€ç”µè„‘å¿™ç‚¹ä¸œè¥¿ï¼Œå½“ç„¶ä¸æ˜¯ä¸€å¼€ç”µè„‘å°±é¸¡è¡€æ»¡æ»¡ï¼Œä¼šå…ˆè¿½æ–°ç•ªï¼Œæ—¥æ¼«è¿˜æœ‰é˜…æ–‡è‡ªå®¶åšçš„å›½æ¼«æ”’æ”’ç²¾ç¥åŠ›ï¼Œç„¶åå¼€å§‹å¿™ä¸œè¥¿ã€‚ç ”ç©¶æ–°ç‰¹æ€§ï¼Œç ”ç©¶åŸºç¡€ç»†èŠ‚ï¼Œæˆ–æŠ€æœ¯åˆ›ä½œï¼Œæˆ–å†™å†™å°è¯´ï¼Œæˆ–ç½‘ç«™ç»´æŠ¤ç­‰ã€‚ç°åœ¨ä¸Šå¹´çºªäº†ï¼Œå‡Œæ™¨1ç‚¹å°±è¦ç¡äº†ï¼Œå¶å°”å‘æ–‡ç« çš„æ—¶å€™ä¼šæ‹–åˆ°2</del>3ç‚¹ï¼Œç„¶åè¢«è€å©†æ‰¹è¯„ï¼Œå“ˆå“ˆã€‚æœ‰æ—¶å€™åŠ ç­åˆ°æ™šä¸Šé›¶ç‚¹æ‰åˆ°å®¶ï¼Œåè€Œç¡å¾—æ—©ï¼Œå› ä¸ºè¿™ç‚¹æ—¶é—´å¿™ä¸äº†ä»€ä¹ˆï¼Œå°±ç›´æ¥æ´—æ´—ç¡äº†ã€‚</p><p>å‘¨æœ«ä¸¤å¤©æ˜¯é‡è¦çš„å­¦ä¹ æ—¶é—´ï¼Œå› ä¸ºæœ‰éš¾å¾—çš„å¤§æ®µæ—¶é—´ï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ä¸åˆ›ä½œã€‚ä¸è¿‡å¶å°”ä¹Ÿä¼šå»é’“å‡ ä¸ªå°æ—¶é±¼ï¼Œå’Œè€å©†ä¸€èµ·çœ‹çœ‹ç”µå½±ï¼Œåƒä¸ªå¤§é¤å•¥çš„ã€‚å…¶ä½™æ—¶é—´å°±æ˜¯åœ¨å­¦ä¹ ã€‚æˆ‘å¾ˆå–œæ¬¢æ”¾å‡ï¼Œä¸æ˜¯å› ä¸ºå¯ä»¥ç©ï¼Œè€Œæ˜¯å› ä¸ºæ”¾å‡å¯ä»¥æœ‰å¤§æ®µè¿ç»­çš„æ—¶é—´å†™ä»£ç ï¼Œå“ˆå“ˆã€‚</p><p>åŸæœ¬ä»¥ä¸ºå¤§å®¶éƒ½æ˜¯è¿™æ ·çš„ï¼Œåæ¥æ‰å‘ç°åŸæ¥å°±æˆ‘æ˜¯è¿™æ ·çš„ï¼ŒåŒäº‹è¯´æˆ‘ä¸æ˜¯ä¸€èˆ¬äººã€‚</p><p>ä¹Ÿæœ‰äººä¼šè§‰å¾—æˆ‘ç”Ÿæ´»æ²¡æœ‰ä¹è¶£ï¼Œäººç”Ÿæ²¡æœ‰äº†ç²¾å½©ï¼Œç¬‘è€Œä¸è¯­ã€‚</p><p>ä¸‰ã€å­¦ä¹ ç§˜ç¬ˆ<br>éæœ¬æ–‡é‡ç‚¹ï¼Œç®€å•æä¸¤å¥ï¼Œæ—¥åå¯ä»¥ä¸“é—¨æ¢è®¨ã€‚</p><p>æˆ‘è®¤ä¸ºå­¦ä¹ çš„ç§˜ç¬ˆå°±æ˜¯è¦æŠ“ä½å­¦ä¹ çš„æœ¬è´¨ï¼Œäº†è§£ä½ è¦å­¦ä¹ å†…å®¹çš„æœ¬æ€§å’Œç‰¹è´¨ï¼Œäº†è§£è‡ªå·±å­¦ä¹ çš„ä¼˜åŠ¿å’Œæ½œåŠ›ï¼Œäº†è§£äººä¸ºä»€ä¹ˆèƒ½å¤Ÿè®°ä½çŸ¥è¯†ï¼Œè®°å¿†æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Œè®¤çŸ¥æœ¬è´¨æ˜¯ä»€ä¹ˆç­‰ã€‚</p><p>è¿™äº›ç»Ÿç§°ä¸ºå­¦ä¹ çš„èƒ½åŠ›ï¼Œè€Œæ‰€è°“çš„å­¦ä¹ æ–¹æ³•ï¼Œå› äººè€Œå¼‚ï¼Œä½†æ˜¯è¿™ä¸ªå­¦ä¹ èƒ½åŠ›æ˜¯é€šç”¨çš„ã€‚</p><p>æˆ‘è§‰å¾—è¦æƒ³æœ‰è¶…å¼ºçš„å­¦ä¹ èƒ½åŠ›ï¼Œå…³é”®æ˜¯è¦å¤šçœ‹ä¹¦ï¼Œå„ä¸ªæ–¹é¢çš„ä¼˜ç§€ä¹¦ç±ï¼Œæœ‰åˆ©äºä½ æ˜ç™½äº‹ç‰©çš„è¿è¡Œè§„å¾‹ï¼ŒæŠ“ä½äº‹ç‰©çš„æœ¬è´¨ï¼Œçœ‹æ¸…æœ€ç»ˆçš„å‘å±•æ–¹å‘ã€‚</p><p>åˆ«å¬é‚£äº›ä»€ä¹ˆâ€œè¯»ä¹¦æ— ç”¨è®ºâ€çš„ç‹—å±è¯´æ³•ï¼Œå¤šè¯»ä¹¦ï¼Œæœ‰æ—¶å€™ä½ å­¦ä¹ ä¸å¾—åŠ²ï¼Œä¸æ˜¯ä½ ä¸å¤ŸåŠªåŠ›ï¼Œè€Œæ˜¯å…¶å®ƒçŸ¥è¯†ç§¯ç´¯ä¸è¶³ï¼Œè®¤çŸ¥ä¸æ¸…æ™°å¯¼è‡´ã€‚</p><p>æœ€åï¼Œå‘Šè¯‰å¤§å®¶ä¸€ä¸ªå­¦ä¹ æœ€å¤§çš„ç§˜ç¬ˆï¼Œé‚£å°±æ˜¯â€œåšæŒâ€ï¼</p><p>ä½ ä¸å¿…åƒæˆ‘å¹³å‡æ¯å¤©éƒ½å­¦å¥½å‡ ä¸ªå°æ—¶ï¼Œæˆ‘ä¸æ˜¯ä¸€èˆ¬äººï¼Œä½ ä»¬å­¦ä¸æ¥çš„ï¼Œè¿™æ˜¯å¤©èµ‹ã€‚</p><p>ä½ ä»¬å¯ä»¥é¢‘æ¬¡é™ä½ï¼Œåªè¦æˆ‘çš„1&#x2F;10å­¦ä¹ æ—¶é—´å°±å¯ä»¥äº†ï¼Œæ¯å‘¨2å°æ—¶ï¼Œæ¯å‘¨éƒ½åšæŒï¼Œä½ å·²ç»å¯ä»¥æ¯”90%çš„äººä¼˜ç§€äº†ï¼Œå› ä¸º90%çš„äººéƒ½åšæŒä¸ä¸‹å»ã€‚</p><p>å°±è¿™ä¹ˆç®€å•ã€‚</p><p>ï¼ˆå®Œï¼‰</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•ä¸­ä¸€äº›å…³äºè´¨æ•°çš„æ¦‚å¿µä»¥åŠæ¨¡æ¿æ•´ç†</title>
      <link href="/2022/10/14/%E7%AE%97%E6%B3%95%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E8%B4%A8%E6%95%B0%E7%9A%84%E6%A6%82%E5%BF%B5%E4%BB%A5%E5%8F%8A%E6%A8%A1%E6%9D%BF%E6%95%B4%E7%90%86/"/>
      <url>/2022/10/14/%E7%AE%97%E6%B3%95%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E8%B4%A8%E6%95%B0%E7%9A%84%E6%A6%82%E5%BF%B5%E4%BB%A5%E5%8F%8A%E6%A8%A1%E6%9D%BF%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="é¦–å…ˆè´¨æ•°çš„æ¦‚å¿µä¸º"><a href="#é¦–å…ˆè´¨æ•°çš„æ¦‚å¿µä¸º" class="headerlink" title="é¦–å…ˆè´¨æ•°çš„æ¦‚å¿µä¸º:"></a>é¦–å…ˆè´¨æ•°çš„æ¦‚å¿µä¸º:</h1><blockquote><p>è´¨æ•°ï¼ˆPrime numberï¼Œåˆç§°ç´ æ•°ï¼‰ï¼Œ[1] æŒ‡åœ¨å¤§äº1çš„è‡ªç„¶æ•°ä¸­ï¼Œé™¤äº†1å’Œè¯¥æ•°è‡ªèº«å¤–ï¼Œæ— æ³•è¢«å…¶ä»–è‡ªç„¶æ•°æ•´é™¤çš„æ•°</p></blockquote><h4 id="1-æ€ä¹ˆé«˜æ•ˆåˆ¤æ–­æ•°næ˜¯å¦ä¸ºè´¨æ•°ï¼Ÿ"><a href="#1-æ€ä¹ˆé«˜æ•ˆåˆ¤æ–­æ•°næ˜¯å¦ä¸ºè´¨æ•°ï¼Ÿ" class="headerlink" title="1. æ€ä¹ˆé«˜æ•ˆåˆ¤æ–­æ•°næ˜¯å¦ä¸ºè´¨æ•°ï¼Ÿ"></a>1. æ€ä¹ˆé«˜æ•ˆåˆ¤æ–­æ•°næ˜¯å¦ä¸ºè´¨æ•°ï¼Ÿ</h4><p>æœ€ä¸ºæš´åŠ›çš„æ–¹æ³•ä¾¿æ˜¯ä»2~n-1ä¸­é€ä¸ªéå†å¾—iï¼Œåˆ¤æ–­n%i&#x3D;&#x3D;0æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæˆç«‹è¯´æ˜nä¸ä¸ºè´¨æ•°ï¼ˆå¦‚ä¸‹ä»£ç ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;x<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!(x%i)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥ä»£ç æ—¶é—´å¤æ‚åº¦ä¸ºO(n),æˆ‘ä»¬å¯ä»¥å°†ä»–ä¼˜åŒ–ä¸€ä¸‹ï¼Œå°†éå†åŒºé—´ä» $[2,n-1]$ ä¼˜åŒ–åˆ° $[2,âˆšn]$ï¼Œè¿™æ˜¯ä¸€ä¸ªè´¨çš„é£è·ƒï¼<br>ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·åšå‘¢ï¼Ÿæˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹åœ¨åŒºé—´[2,n-1]ä¹‹é—´éå†ï¼Œçº¦æ•°æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå‡å¦‚å–åˆ°iå¯ä»¥æ•´é™¤n å³ $n%i&#x3D;&#x3D;0$<br>é‚£ä¹ˆ ä¹Ÿä¼šæ»¡è¶³ $n%(n%i)&#x3D;&#x3D;0$ï¼Œç”±æ­¤çœ‹æ¥æˆ‘ä»¬åªéœ€æšä¸¾çº¦æ•°å¯¹ä¸­è¾ƒå°çš„é‚£ä¸ªå³å¯ï¼Œå³å¾ªç¯ç»§ç»­æ¡ä»¶æ”¹ä¸º $i&lt;&#x3D;n&#x2F;i$ï¼Œ<br>æˆ‘ä»¬æ•´ç†ä¸€ä¸‹ï¼Œæœ‰</p><p>(ä¸¾ä¸ªä¾‹å­,ä¾‹å¦‚nä¸º12ï¼Œiä¸º4ï¼Œ12å¯ä»¥è¢«4æ•´é™¤ï¼Œä¹Ÿå¯ä»¥è¢«12&#x2F;4(3)æ•´é™¤ã€‚ï¼‰</p><blockquote><p>$$i&lt;&#x3D;n&#x2F;i i^{2}^&lt;&#x3D;n,i&lt;&#x3D;âˆšn$$</p></blockquote><p>é—®é¢˜å¾—è¯ï¼Œæˆ‘ä»¬å°†èƒŒä¸‹ä»¥ä¸‹è¿™ä¸ªæ¨¡æ¿</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= x / i; i ++ )</span><br><span class="line">        <span class="keyword">if</span> (x % i == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-åˆ†è§£è´¨å› æ•°"><a href="#2-åˆ†è§£è´¨å› æ•°" class="headerlink" title="2.åˆ†è§£è´¨å› æ•°"></a>2.åˆ†è§£è´¨å› æ•°</h4><p>å…ˆè¡¥å……ä¸€ä¸‹è´¨å› æ•°çš„æ¦‚å¿µ</p><blockquote><p>æ¯ä¸ªåˆæ•°éƒ½å¯ä»¥å†™æˆå‡ ä¸ªè´¨æ•°ç›¸ä¹˜çš„å½¢å¼ï¼Œå…¶ä¸­æ¯ä¸ªè´¨æ•°éƒ½æ˜¯è¿™ä¸ªåˆæ•°çš„å› æ•°ï¼ŒæŠŠä¸€ä¸ªåˆæ•°ç”¨è´¨å› æ•°ç›¸ä¹˜çš„å½¢å¼è¡¨ç¤ºå‡ºæ¥ï¼Œå«åšåˆ†è§£è´¨å› æ•°ã€‚å¦‚30&#x3D;2Ã—3Ã—5 ã€‚åˆ†è§£è´¨å› æ•°åªé’ˆå¯¹åˆæ•°ã€‚</p></blockquote><p>å†å›å¿†ä¸€ä¸‹åˆä¸­çš„æ•°å­¦çŸ¥è¯†ï¼Œæˆ‘ä»¬æ˜¯æ€ä¹ˆæ‰‹åŠ¨åˆ†è§£å‡ºè´¨å› æ•°çš„<br><img src="http://cdn.zsenhe.com/13c80c83eb5d4c628a34625f57656569" alt="342ac65c103853437c8a621e9813b07eca80884c.png"></p><p>å…ˆä»å®šä¹‰å‡ºå‘ä½¿ç”¨æœ€æš´åŠ›çš„æ–¹æ³•æ¥æ±‚å‡ºæ‰€æœ‰è´¨å› æ•°,ä»£ç å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;=x; i ++ )</span><br><span class="line">        <span class="keyword">if</span> (x % i == <span class="number">0</span>) <span class="comment">//ä¸‹é¢æ³¨é‡Šçš„åˆ†ææˆç«‹ï¼Œé‚£ä¹ˆiä¸€å®šæ˜¯è´¨æ•°</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> s = <span class="number">0</span>; <span class="comment">//sä¸ºè´¨å› å­çš„æ¬¡æ•°</span></span><br><span class="line">            <span class="keyword">while</span> (x % i == <span class="number">0</span>) x /= i, s ++ ; <span class="comment">//æ³¨æ„è¿™é‡Œçš„/=æ“ä½œï¼Œè¿›å…¥iåˆ¤æ–­æ—¶ï¼Œnä¸­æ˜¯ä¸å†æœ‰2~i-1çš„å› æ•°äº†ã€‚</span></span><br><span class="line">            cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒåˆ¤æ–­è´¨æ•°é‚£æ ·ï¼ŒæŠŠæ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°Oï¼ˆâˆšnï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">divide</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=x/i;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>((x%i)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="type">int</span> s = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (x%i==<span class="number">0</span>) x/=i,s++;</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(x&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆå¯ä»¥è¿™ä¹ˆåšå‘¢ï¼ŸåŸå› æ˜¯nä¸­åªä¼šåŒ…å«ä¸€ä¸ªå¤§äºâˆšnçš„è´¨å› å­ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¥½è¯æ˜çš„</p><blockquote><p>å› ä¸º âˆšn x âˆšn &#x3D; nï¼Œå¦‚æœæœ‰2ä¸ªä»¥ä¸Šçš„è´¨å› å­å¤§äºâˆšnï¼Œé‚£ä¹ˆç»“æœå°±çŸ›ç›¾äº†ã€‚</p></blockquote><p><strong>å½“ç„¶ï¼Œæœ€åéœ€è¦ç‰¹åˆ¤ä¸€ä¸‹xæ˜¯å¦å¤§äº1ï¼Œå¦‚æœå¤§äº1ï¼Œé‚£ä¹ˆxä¾¿æ˜¯å”¯ä¸€çš„å¤§äºæ ¹å·nçš„è´¨å› å­</strong></p><h3 id="åŸƒæ°ç­›æ³•"><a href="#åŸƒæ°ç­›æ³•" class="headerlink" title="åŸƒæ°ç­›æ³•:"></a>åŸƒæ°ç­›æ³•:</h3><p>å½“éœ€è¦æ±‚2~nä¸­æ‰€æœ‰è´¨æ•°æ—¶ï¼Œä½¿ç”¨åŸƒæ°ç­›æ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span><span class="number">+10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> st[N],cnt,as[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!st[i])&#123;</span><br><span class="line">            as[cnt++] = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;=n;j+=i) st[j] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; cnt;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>NOI2001 é£Ÿç‰©é“¾ï¼ˆå¸¦æƒå¹¶æŸ¥é›†ï¼‰</title>
      <link href="/2022/10/08/NOI2001%20%E9%A3%9F%E7%89%A9%E9%93%BE%EF%BC%88%E5%B8%A6%E6%9D%83%E5%B9%B6%E6%9F%A5%E9%9B%86%EF%BC%89/"/>
      <url>/2022/10/08/NOI2001%20%E9%A3%9F%E7%89%A9%E9%93%BE%EF%BC%88%E5%B8%A6%E6%9D%83%E5%B9%B6%E6%9F%A5%E9%9B%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/dda61582ce57447b87aa58714d6ca7c2" alt="http://cdn.zsenhe.com/dda61582ce57447b87aa58714d6ca7c2"><br>å…ˆæ•´ç†ä¸€ä¸‹æ€è·¯:<br>AåƒB,BåƒC,CåƒAï¼Œç”±æ­¤å½¢æˆä»¥ä¸‹çš„ç¯å½¢å…³ç³»<br><img src="http://cdn.zsenhe.com/3bd0c93e747e4135ba0d917ca398addf" alt="http://cdn.zsenhe.com/3bd0c93e747e4135ba0d917ca398addf"><br>å› ä¸ºä¼šä¸€ç›´å¾ªç¯ï¼ˆå³å¯¹3å–ä½™åšæ¡ä»¶ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¹¶æŸ¥é›†æ¥ç»´æŠ¤æŸ¥è¯¢ä»–ä»¬çš„èº«ä»½<br><img src="http://cdn.zsenhe.com/e4bd9bad00a24ef4ad146c3f0d93a468" alt="http://cdn.zsenhe.com/e4bd9bad00a24ef4ad146c3f0d93a468"></p><blockquote><p>æƒ³è±¡ä¸€ä¸ªé£Ÿäººæ—å®¶åº­æ¥è¯´æ˜ä»–ä»¬ä¹‹é—´çš„å…³ç³»<br>ç¬¬1ä»£åƒæ‰ç¬¬0ä»£ï¼Œç¬¬2ä»£åƒæ‰ç¬¬1ä»£ï¼Œç¬¬3ä»£åƒç¬¬2ä»£ï¼Œç¬¬0ä»£ä¼šåƒæ‰ç¬¬3ä»£<br>é‚£ä¹ˆå¦‚æœæœ‰åƒæ‰ç¬¬3ä»£çš„ç¬¬4ä»£ï¼Œé‚£ä¹ˆä»–å¿…å®šä¸ç¬¬0ä»£æ˜¯åŒä¸€ä»£</p></blockquote><p>é‡‡ç”¨å¹¶æŸ¥é›†ï¼Œç»´æŠ¤å¤šä¸€ä¸ªæ•°ç»„dæ¥è¡¨ç¤ºå½“å‰èŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·ç¦»ï¼Œåˆå§‹åŒ–ä¸º0ï¼ˆè‡ªèº«åˆ°è‡ªèº«çš„è·ç¦»ä¸º0ï¼‰<br>è¿™ä¸ªè·ç¦»å¯¹3å–æ¨¡ååªèƒ½æœ‰ä¸‰ç§æƒ…å†µ</p><blockquote><p>0 1 2</p></blockquote><p>è·¯å¾„å‹ç¼©:<br>å‡è®¾å½“å‰å¹¶æŸ¥é›†çŠ¶æ€å¦‚ä¸‹ï¼š<br><img src="https://cdn.acwing.com/media/article/image/2019/11/10/2388_7853096e03-iShot-----2019-11-10-16.45.24.jpg" alt="https://cdn.acwing.com/media/article/image/2019/11/10/2388_7853096e03-iShot-----2019-11-10-16.45.24.jpg"><br>å‹ç¼©å:<br><img src="https://cdn.acwing.com/media/article/image/2019/11/10/2388_fe8fcda003-iShot-----2019-11-10-16.49.04.jpg" alt="https://cdn.acwing.com/media/article/image/2019/11/10/2388_fe8fcda003-iShot-----2019-11-10-16.49.04.jpg"><br>è·¯å¾„å‹ç¼©çš„ä»£ç :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">if</span> (p[x] != x)</span><br><span class="line">   &#123;</span><br><span class="line"><span class="comment">//å¯»æ‰¾p[x]çš„æ ¹èŠ‚ç‚¹ (ä¼šæ›´æ–°d[])</span></span><br><span class="line">       <span class="type">int</span> t = <span class="built_in">find</span>(p[x]);</span><br><span class="line"><span class="comment">//xåˆ°p[x]çš„è·ç¦»åŠ ä¸Šp[x]åˆ°æ ¹èŠ‚ç‚¹rootçš„è·ç¦» = xåˆ°rootçš„è·ç¦»</span></span><br><span class="line">       d[x] += d[p[x]];</span><br><span class="line"><span class="comment">//å°†p[x]æŒ‡å‘æ ¹èŠ‚ç‚¹root</span></span><br><span class="line">       p[x] = t;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>è¯¢é—®ç±»å‹ 1 xå’Œyæ˜¯åŒç±»:<br>é¦–å…ˆåˆ¤æ–­ x å’Œ yæ˜¯å¦ â€œåœ¨ä¸€é¢—æ ‘ä¸Šâ€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœåœ¨xå’Œyçš„çˆ¶èŠ‚ç‚¹rootç›¸åŒçš„è¯ï¼Œè¯´æ˜å·²ç»åœ¨å…ˆå‰çš„è¯¢é—®ä¸­å¤„ç†è¿‡å…³ç³»è·ç¦»äº†</span></span><br><span class="line"><span class="comment">//é‚£ä¹ˆåˆ¤æ–­ d[x]%3==d[y]%3 æ˜¯å¦æˆç«‹ï¼Œå¦‚æœä¸æˆç«‹çš„è¯ï¼Œè°è¨€æ¬¡æ•°+1</span></span><br><span class="line"><span class="keyword">if</span>(o==<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="type">int</span> px = <span class="built_in">find</span>(x),py= <span class="built_in">find</span>(y);</span><br><span class="line">    <span class="keyword">if</span>(px==py&amp;&amp;((d[x]%<span class="number">3</span>)!=(d[y]%<span class="number">3</span>))) res++;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="comment">//å¦‚æœæ ¹èŠ‚ç‚¹ä¸ç›¸åŒçš„è¯ï¼Œè¿›è¡Œåˆå¹¶</span></span><br><span class="line">     p[px] = py;</span><br><span class="line">     d[px] = d[y]-d[x];</span><br><span class="line">    <span class="comment">//åˆå¹¶çš„æ—¶å€™éœ€è¦è®¡ç®—ä» pxæ¥åˆ°py è¿™æ¡è¾¹çš„é•¿åº¦</span></span><br><span class="line">    <span class="comment">// d[px]+d[x] = d[y] -&gt; d[px] = d[y]-d[x]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¢é—®ç±»å‹ 2 xå¯ä»¥åƒæ‰y<br>æ ¹æ®ä»¥ä¸Šçš„åˆ†æ,xæ—¢ç„¶å¯ä»¥åƒæ‰yï¼Œxä¸æ ¹èŠ‚ç‚¹çš„è·ç¦»å¿…å®šæ¯”yä¸æ ¹èŠ‚ç‚¹çš„è·ç¦»å¤§1ï¼ˆå¯¹3å–æ¨¡ä¹‹å)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (d[x]%3-d[y]%3)=1 -&gt; (d[x]-d[y]-1)%3==0 ï¼ˆæ¡ä»¶æ»¡è¶³æ—¶ä¸ºè°è¨€)</span></span><br><span class="line"><span class="keyword">if</span>(px==py&amp;&amp; (d[x]-d[y]<span class="number">-1</span>)%<span class="number">3</span>) res++;</span><br><span class="line"><span class="comment">// å¦åˆ™æ‰§è¡Œåˆå¹¶æ“ä½œ</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(px!=py)&#123;</span><br><span class="line">     p[px] = py;</span><br><span class="line">     d[px] = d[y] + <span class="number">1</span> - d[x];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">50000</span><span class="number">+10</span>;</span><br><span class="line"><span class="type">int</span> p[N],d[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥è¯¢çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(p[x]!=x)&#123;</span><br><span class="line">        <span class="type">int</span> t = <span class="built_in">find</span>(p[x]);</span><br><span class="line">        d[x]+=d[p[x]];</span><br><span class="line">        p[x] = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,k;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) p[i] = i;</span><br><span class="line">    <span class="comment">//(((d[x]%3)-(d[y]%3))!=1)</span></span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(k--)&#123;</span><br><span class="line">        <span class="type">int</span> o,x,y;</span><br><span class="line">        cin&gt;&gt;o&gt;&gt;x&gt;&gt;y;</span><br><span class="line">        <span class="keyword">if</span>(x&gt;n||y&gt;n) res++;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> px = <span class="built_in">find</span>(x),py= <span class="built_in">find</span>(y);</span><br><span class="line">            <span class="keyword">if</span>(o==<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(px==py&amp;&amp;(d[x] - d[y]) % <span class="number">3</span>) res++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(px!=py)&#123;</span><br><span class="line">                    p[px] = py;</span><br><span class="line">                    d[px] = d[y]-d[x];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(px==py&amp;&amp; (d[x]-d[y]<span class="number">-1</span>)%<span class="number">3</span>) res++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(px!=py)&#123;</span><br><span class="line">                    p[px] = py;</span><br><span class="line">                    d[px] = d[y] + <span class="number">1</span> - d[x];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; res;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å‰‘æŒ‡ Offer II 067. æœ€å¤§çš„å¼‚æˆ– ï¼ˆä½¿ç”¨Trieæ ‘æ±‚è§£ï¼‰</title>
      <link href="/2022/10/05/%E5%89%91%E6%8C%87%20Offer%20II%20067.%20%E6%9C%80%E5%A4%A7%E7%9A%84%E5%BC%82%E6%88%96%20%EF%BC%88%E4%BD%BF%E7%94%A8Trie%E6%A0%91%E6%B1%82%E8%A7%A3%EF%BC%89/"/>
      <url>/2022/10/05/%E5%89%91%E6%8C%87%20Offer%20II%20067.%20%E6%9C%80%E5%A4%A7%E7%9A%84%E5%BC%82%E6%88%96%20%EF%BC%88%E4%BD%BF%E7%94%A8Trie%E6%A0%91%E6%B1%82%E8%A7%A3%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><a href="https://leetcode.cn/problems/ms70jA/">å‰‘æŒ‡ Offer II 067. æœ€å¤§çš„å¼‚æˆ–</a></p><p>é¢˜ç›®å¦‚ä¸‹ï¼š</p><p><img src="http://cdn.zsenhe.com/daf3837bfd4c4c50a87d2178da34421b" alt="QQæˆªå›¾20221005221031.png"></p><p>é¦–å…ˆè€ƒè™‘ä½¿ç”¨æœ´ç´ ç®—æ³•å®Œæˆ,æ•°æ®çš„é•¿åº¦ä¸º10^5^,O(n^2^)çš„å¤æ‚åº¦ç›´æ¥çˆ†äº†,è‚¯å®šä¼šTL<br>å›é¡¾ä¸€ä¸‹Trieæ ‘çš„ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°äºŒè¿›åˆ¶å½¢å¼é¢„å¤„ç†å‡ºæ¥ä¸€é¢—å­—å…¸æ ‘</p><p>å¦‚å¯¹äº [3,2,1] è¿™ä¸ªåºåˆ—:</p><p><img src="http://cdn.zsenhe.com/c0ae8456a69242ef8c40ac03add9763e" alt="QQæˆªå›¾20221005221621.png"></p><p>åœ¨ç¬¬ä¸€å±‚éå†ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€‰æ‹© 3 è¿™ä¸ªæ•° ï¼Œé‚£ä¹ˆåºåˆ—ä¸­ä»€ä¹ˆæ•°ä¸3å¼‚æˆ–åæœ€å¤§å‘¢? è§‚å¯Ÿ3çš„äºŒè¿›åˆ¶å½¢å¼</p><blockquote><p> â€¦. 1 0 1</p></blockquote><p>æœ€å¤§æ•°ä¸ºå…¨1ï¼Œæˆ‘ä»¬è¦å°½é‡å¾€è¿™ä¸ªå€¼é æ‹¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªbitå¼‚æˆ–ä¹‹åçš„ç»“æœæ˜¯1ä¼šæ˜¯æœ€ä¼˜è§£<br>æˆ‘ä»¬å°†ä»å·¦åˆ°å³éå†æ‰€æœ‰ä½çš„bitï¼Œåœ¨å­—å…¸æ ‘ä¸­æ‰¾åˆ°!bitçš„å­èŠ‚ç‚¹ï¼ˆå¦‚æœæ‰¾ä¸åˆ°çš„è¯å½“ç„¶åªèƒ½ç»§ç»­èµ°äº†)<br>èµ°åˆ°å°¾ä¹‹åçš„å€¼ä¾¿æ˜¯å¯¹äºå½“å‰æ•°å¼‚æˆ–ä¹‹åçš„æœ€å¤§ç»“æœã€‚</p><p>å¦‚å¯¹äº3è¿™ä¸ªå€¼ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹© 0-&gt;1-&gt;0 (å³åè¿›åˆ¶æ•°2) </p><p>acçš„ä»£ç å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100010</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 3000000</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> max(a, b) (((a) &gt; (b)) ? (a) : (b))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//sonå­˜å‚¨å­—å…¸æ ‘ idxä¸ºå½“å‰å¯ç”¨ä¸‹æ ‡(æ¯ä¸€å±‚)</span></span><br><span class="line"><span class="type">int</span> son[M][<span class="number">2</span>],idx;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å­—å…¸æ ‘æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> p=<span class="number">0</span>; </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">30</span>;~i;i--)&#123;</span><br><span class="line">        <span class="type">int</span> bit = x&gt;&gt;i&amp;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(!son[p][bit]) son[p][bit] = ++idx;</span><br><span class="line">        p = son[p][bit];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯»æ‰¾æœ€å¤§æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> p=<span class="number">0</span>,res=p;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">30</span>;~i;i--)&#123;</span><br><span class="line">        <span class="type">int</span> bit = x&gt;&gt;i&amp;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(son[p][!bit])&#123;</span><br><span class="line">            res += <span class="number">1</span>&lt;&lt;i;</span><br><span class="line">            p = son[p][!bit];</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            p = son[p][bit];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">findMaximumXOR</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memset</span>(son, <span class="number">0</span>, <span class="built_in">sizeof</span>(son));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;numsSize;i++)&#123;</span><br><span class="line">        <span class="built_in">insert</span>(nums[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; numsSize; i ++ ) res = <span class="built_in">max</span>(res, <span class="built_in">search</span>(nums[i]));</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/5e7d18e2d1104833b95afc80fb6bec20" alt="QQæˆªå›¾20221005222322.png"></p><p>(ä¸€å¼€å§‹ä¸çŸ¥é“ä¸ºä»€ä¹ˆåŠ›æ‰£çš„æäº¤ç»“æœå’Œè°ƒè¯•ç»“æœä¸ä¸€æ ·ï¼Œç¢ç£¨äº†å¥½ä¹…æ‰çŸ¥é“è¦memsetâ€¦)</p><p>è¡¥ä¸€ä¸‹trieæ ‘çš„æ¨¡æ¿</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//idxä¸ºå½“å‰å¯ç”¨çš„å†…å­˜åœ°å€,cntä½œä¸ºç»“å°¾æ ‡è®°</span></span><br><span class="line"><span class="type">int</span> son[N][N],idx,cnt[N];</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">char</span> * str)</span></span>&#123;</span><br><span class="line">  <span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;str[i];i++)&#123;</span><br><span class="line">    <span class="type">int</span> u = mapper<span class="comment">//æ˜ å°„;</span></span><br><span class="line">    <span class="keyword">if</span>(!son[p][u]) son[p][u]=++idx;</span><br><span class="line">    p = son[p][u]</span><br><span class="line">  &#125;</span><br><span class="line">  cnt[p]++;<span class="comment">//è®°å½•å•è¯æ¬¡æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å•è¯æ¬¡æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">char</span> * word)</span></span>&#123;</span><br><span class="line">  <span class="type">int</span> p = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;word[i];i++)&#123;</span><br><span class="line">    <span class="type">int</span> u = mapper;</span><br><span class="line">    <span class="keyword">if</span>(!son[p][u]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    p = son[p][u]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cnt[p];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—ä¸å•è°ƒé˜Ÿåˆ—</title>
      <link href="/2022/10/04/%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E9%98%9F%E5%88%97%E4%B8%8E%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
      <url>/2022/10/04/%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E9%98%9F%E5%88%97%E4%B8%8E%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>é˜Ÿåˆ—å³æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æœ€å‰é¢çš„å…ƒç´ ç§°ä¸º <strong>é˜Ÿå¤´</strong> å°¾éƒ¨å…ƒç´ ç§°ä¸º <strong>é˜Ÿå°¾</strong></p><p><img src="https://cdn.acwing.com/media/article/image/2022/07/15/55289_e51b136403-1.png" alt="é˜Ÿåˆ—"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="type">int</span> q[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">//[hh, tt] ä¹‹é—´ä¸ºé˜Ÿåˆ—ï¼ˆå·¦é—­å³é—­ï¼‰</span></span><br><span class="line"><span class="type">int</span> hh = <span class="number">0</span>;<span class="comment">//é˜Ÿå¤´ä½ç½®</span></span><br><span class="line"><span class="type">int</span> tt = <span class="number">-1</span>;<span class="comment">//é˜Ÿå°¾ä½ç½®</span></span><br><span class="line"><span class="comment">//æ“ä½œæ¬¡æ•°</span></span><br><span class="line"><span class="type">int</span> m;</span><br><span class="line"><span class="comment">//æ“ä½œæ–¹å¼</span></span><br><span class="line">string s;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¥é˜Ÿï¼šé˜Ÿå°¾å…ˆå¾€åç§»åŠ¨ä¸€æ ¼ï¼Œå†æ”¾å…¥è¦æ’å…¥çš„æ•°æ®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    q[++tt] = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡ºé˜Ÿï¼šé˜Ÿå¤´å¾€åç§»åŠ¨ä¸€æ ¼</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">    hh++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//[hh, tt]è¡¨ç¤ºé˜Ÿåˆ—åŒºé—´ï¼Œå½“tt &gt;= hhæ—¶ï¼ŒåŒºé—´ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(tt &gt;= hh) cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//hhæŒ‡å‘é˜Ÿå¤´ï¼Œq[hh]ä»£è¡¨é˜Ÿå¤´å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">query</span> <span class="params">()</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; q[hh] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥åŠä¸€é“å’Œå•è°ƒæ ˆç±»ä¼¼çš„æ¨¡æ¿é¢˜<br><img src="http://cdn.zsenhe.com/32015f25c3b04a68a628e6fc41fd5483" alt="QQæˆªå›¾20221004211239.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span><span class="number">+10</span>;</span><br><span class="line"><span class="comment">//q[]ä½œä¸ºåŒç«¯é˜Ÿåˆ—(æ»‘åŠ¨çª—å£)</span></span><br><span class="line"><span class="type">int</span> p[N],q[N],n,k,hh,tt=<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;p[i]);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line"><span class="comment">//åˆ¤æ–­é˜Ÿå¤´æ˜¯å¦å·²æ»‘å‡ºçª—å£ (æ³¨æ„p[]å­˜å‚¨çš„æ˜¯ä¸‹æ ‡)</span></span><br><span class="line">        <span class="keyword">if</span>(hh&lt;=tt&amp;&amp;q[hh]&lt;i-k<span class="number">+1</span>) hh++;</span><br><span class="line"><span class="comment">//åˆ¤æ–­é˜Ÿå°¾æ˜¯å¦å¤§äºå½“å‰å…ƒç´ ,å¦‚æœå¤§äº,è¯´æ˜p[i]æ¯”p[tt]æ›´åˆé€‚,å°†é˜Ÿå°¾å¼¹å‡º</span></span><br><span class="line">        <span class="keyword">while</span>(hh&lt;=tt&amp;&amp;p[q[tt]]&gt;=p[i]) tt--;</span><br><span class="line"><span class="comment">//å°†å½“å‰å…ƒç´ åŠ å…¥çª—å£</span></span><br><span class="line">        q[++tt] = i;</span><br><span class="line"><span class="comment">//å¤„ç†å®Œä¹‹åé˜Ÿåˆ—ä¸ºå•è°ƒé€’å¢,é˜Ÿå¤´å³æ˜¯å½“å‰çª—å£çš„æœ€å°å…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span>(i&gt;=k<span class="number">-1</span>) cout &lt;&lt; p[q[hh]] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    </span><br><span class="line">    hh=<span class="number">0</span>,tt=<span class="number">-1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//çª—å£å†…æœ€å¤§å…ƒç´ åªéœ€å¯¹é½åš</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(hh&lt;=tt&amp;&amp;q[hh]&lt;i-k<span class="number">+1</span>) hh++;</span><br><span class="line">        <span class="keyword">while</span>(hh&lt;=tt&amp;&amp;p[q[tt]]&lt;=p[i]) tt--;</span><br><span class="line">        q[++tt] = i;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;=k<span class="number">-1</span>) cout &lt;&lt; p[q[hh]] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€è¿‘å·¥ä½œæœ‰ç‚¹å¿™ï¼Œæœ‰æ—¶é—´å†æ¥è¡¥å……è¯¦ç»†å§hh</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ ˆçš„åº”ç”¨â€”â€”å•è°ƒæ ˆ</title>
      <link href="/2022/10/03/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94%E5%8D%95%E8%B0%83%E6%A0%88/"/>
      <url>/2022/10/03/%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8%E2%80%94%E2%80%94%E5%8D%95%E8%B0%83%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/43a691a544784aa5b575a75bef180d0a" alt="QQæˆªå›¾20221004001300.png"><br>æˆ‘ä»¬å…ˆè€ƒè™‘æš´åŠ›åšæ³•:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> arry[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">cin</span> &gt;&gt; arry[i];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;-1 &quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="type">int</span> j=i;</span><br><span class="line">        <span class="keyword">do</span> j--;<span class="keyword">while</span>(arry[j]&gt;=arry[i]);</span><br><span class="line">        <span class="keyword">if</span>(j&lt;<span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;-1 &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; arry[j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æŒ‡é’ˆiä»å·¦åˆ°å³éå†å…ƒç´ ,æŒ‡é’ˆjä»i<span class="number">-1</span>çš„ä½ç½®å¼€å§‹å¾€å·¦æ‰«æï¼Œé‡åˆ°æœ€è¿‘ä¸€ä¸ª&lt;içš„å…ƒç´ ä¾¿è¾“å‡º;</span><br></pre></td></tr></table></figure><p>ç»“æœå½“ç„¶æ˜¯æ„‰å¿«çš„è¶…æ—¶å’¯<br><img src="http://cdn.zsenhe.com/72c68f26dc0b46949fcf26537dd5d094" alt="QQæˆªå›¾20221004003536.png"></p><p>å•è°ƒæ ˆçš„è€ƒè™‘æ€è·¯ç±»ä¼¼åŒæŒ‡é’ˆ<br>å‡è®¾ä»å·¦åˆ°å³æ‰«æï¼Œæ¯å¤„ç†ä¸€ä¸ªå…ƒç´ a<del>n</del>æ—¶ï¼Œåœ¨å®ƒå…¥æ ˆå‰ï¼Œæ ˆstk[]ä¸­ç»´æŠ¤çš„æ˜¯ [a<del>1</del>â€¦a<del>n-1</del>]<br>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“stkä¸­æ‹¥æœ‰å…ƒç´ a<del>x</del> a<del>y</del>ä¸”æ»¡è¶³ </p><blockquote><p><strong>a<del>x</del>&gt;a<del>y</del>; x&lt;y</strong></p></blockquote><p>è¿™æ ·çš„è¯ï¼Œä¸è®ºåç»­çš„å…ƒç´ æ˜¯ä»€ä¹ˆï¼Œa<del>y</del>éƒ½ä¼šæ˜¯æ›´ä¼˜çš„é€‰æ‹©ï¼Œé¢˜ç›®è¦æ±‚çš„æ˜¯ <strong>â€œé å³ä¸”æ›´å°çš„å…ƒç´ â€</strong><br><img src="http://cdn.zsenhe.com/57914e10ed9244f7b1432ef75f238db7" alt="QQæˆªå›¾20221004004646.png"><br>å¦‚å›¾ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„çº¢è‰²é€†åºå¯¹å…¨éƒ¨åˆ é™¤åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªå•è°ƒä¸Šå‡çš„åŒºé—´<br>å¯¹äºéšåæ¯æ¬¡æ‰«æçš„a<del>n</del>,ä»æ ˆé¡¶å¼€å§‹éå†ï¼Œå½“æ ˆé¡¶çš„å€¼&gt;&#x3D;a<del>n</del>ï¼Œä¾¿æ»¡è¶³äº†ä¸Šæ–‡æ‰€è¯´çš„æ€§è´¨ï¼Œa<del>n</del>æ¯”a<del>tt</del><strong>æ›´å°ä¸”æ›´é å³</strong><br>æ­¤æ—¶æ ˆé¡¶å¼¹å‡ºï¼Œå³ä»£ç ä¸­çš„è¿™ä¸€æ®µ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(tt&amp;&amp;stk[tt]&gt;=x) tt--;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥è¿›è¡Œå®Œï¼Œå¦‚æœæ ˆä¸­è¿˜æœ‰å…ƒç´ ï¼Œé‚£å¿…å®šæ˜¯æ»¡è¶³æ€§è´¨çš„å€¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">       <span class="keyword">if</span>(tt) <span class="built_in">cout</span> &lt;&lt; stk[tt] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">       <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;-1 &quot;</span>;</span><br><span class="line"><span class="comment">//å¦åˆ™è¾“å‡º-1</span></span><br></pre></td></tr></table></figure><p>åšå®Œåˆ«å¿˜äº†æŠŠæ–°çš„å€¼å‹å…¥æ ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stk[++tt] = x;</span><br></pre></td></tr></table></figure><p><strong>å®Œæ•´çš„acä»£ç </strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> stk[N],tt;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; tt &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        <span class="keyword">while</span>(tt&amp;&amp;stk[tt]&gt;=x) tt--;</span><br><span class="line">        <span class="keyword">if</span>(tt) <span class="built_in">cout</span> &lt;&lt; stk[tt] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;-1 &quot;</span>;</span><br><span class="line">        stk[++tt] = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠä»ç¤¾åŒºå·çš„ä¸€å¼ dalaoç”»çš„æµç¨‹å›¾<br><img src="https://img-blog.csdnimg.cn/20201211221031165.gif#pic_center" alt="lc"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„æ¨¡æ‹Ÿæ ˆ</title>
      <link href="/2022/10/03/%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E6%A0%88/"/>
      <url>/2022/10/03/%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<p>æ•°ç»„æ¨¡æ‹Ÿæ ˆ</p><p><img src="https://img-blog.csdnimg.cn/20210218204524571.png#pic_center" alt="æ ˆ"></p><blockquote><p>stk[N] æ ˆ; ttè¡¨ç¤ºæ ˆé¡¶æ‰€åœ¨ç´¢å¼•ä¸‹æ ‡ï¼ˆåˆå§‹æ—¶tt&#x3D;0,è¡¨ç¤ºæ ˆä¸ºç©ºï¼‰</p></blockquote><ol><li>å…¥æ ˆ: ++ttï¼Œå­˜å…¥xã€‚ stk[++tt] &#x3D; x;</li><li>å‡ºæ ˆ: ttâ€“</li><li>empty: tt&lt;&#x3D;0æ—¶æ ˆä¸ºç©º.top &lt;&#x3D; 0 ? â€œemptyâ€ : â€œnot emptyâ€;</li><li>query: è¿”å›æ ˆé¡¶å…ƒç´  stk[tt]</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> stk[N],tt=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¥æ ˆ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span>&#123;</span><br><span class="line">    stk[++tt] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡ºæ ˆ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">pop</span><span class="params">()</span>&#123;</span><br><span class="line">   tt --;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> tt&lt;=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥çœ‹æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">query</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> stk[tt];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="built_in">string</span> user;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;user;</span><br><span class="line">        <span class="type">int</span> x;</span><br><span class="line">        <span class="keyword">if</span>(user==<span class="string">&quot;push&quot;</span>)&#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">            push(x);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(user==<span class="string">&quot;pop&quot;</span>)&#123;</span><br><span class="line">            pop();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(user==<span class="string">&quot;empty&quot;</span>)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; (isEmpty()?<span class="string">&quot;YES&quot;</span>:<span class="string">&quot;NO&quot;</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(user==<span class="string">&quot;query&quot;</span>)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; query() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä¸º:</p><blockquote><p>10<br>push 5<br>query<br>push 6<br>pop<br>query<br>pop<br>empty<br>push 4<br>query<br>empty</p></blockquote><p>è¾“å‡º:</p><blockquote><p>5<br>5<br>YES<br>4<br>NO</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿå•é“¾è¡¨ç»“æ„</title>
      <link href="/2022/09/30/%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E5%8D%95%E9%93%BE%E8%A1%A8%E7%BB%93%E6%9E%84/"/>
      <url>/2022/09/30/%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E6%A8%A1%E6%8B%9F%E5%8D%95%E9%93%BE%E8%A1%A8%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨æ•°ç»„æ¨¡æ‹Ÿé“¾è¡¨ç›¸å¯¹äºä½¿ç”¨ç»“æ„æŒ‡é’ˆ,æ‹¥æœ‰æ›´é«˜çš„æ•ˆç‡ï¼ˆçœå»äº†åŠ¨æ€åˆ†é…å†…å­˜çš„ç¯èŠ‚)</p><blockquote><p>c++ä»£ç </p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e6</span><span class="number">+10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤´æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> head;</span><br><span class="line"><span class="comment">//ä¸‹ä¸€ä¸ªå¯ç”¨çš„ä½ç½®</span></span><br><span class="line"><span class="type">int</span> idx;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­˜å‚¨é“¾è¡¨å€¼</span></span><br><span class="line"><span class="type">int</span> e[N];</span><br><span class="line"><span class="comment">//å­˜å‚¨nextæŒ‡é’ˆ</span></span><br><span class="line"><span class="type">int</span> ne[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–é“¾è¡¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    head = <span class="number">-1</span>;</span><br><span class="line">    idx = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å¤´èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert_head</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    e[idx] = x;</span><br><span class="line">    ne[idx] = head;</span><br><span class="line">    head = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘kèŠ‚ç‚¹åé¢è¿½åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> k,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    e[idx] = x;</span><br><span class="line">    ne[idx] = ne[k];</span><br><span class="line">    ne[k] = idx++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤kèŠ‚ç‚¹åé¢çš„ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">    ne[k] = ne[ne[k]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†é“¾è¡¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">out</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=head;i!=<span class="number">-1</span>;i=ne[i])&#123;</span><br><span class="line">        <span class="type">int</span> value = e[i];</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯å›¾è§£å„ä¸ªæ“ä½œçš„æ‰§è¡Œæµç¨‹</p><blockquote><p>åˆå§‹åŒ–é“¾è¡¨<br><img src="http://cdn.zsenhe.com/abc936b953e44dd798b931bbe2836904" alt="åˆå§‹åŒ–.PNG"><br>(æ‰“é”™å­—äº†ï¼Œä¸æ˜¯â€œæ‰§è¡Œâ€ï¼Œæ˜¯æŒ‡å‘)</p></blockquote><blockquote><p>æ’å…¥å¤´èŠ‚ç‚¹<br><img src="http://cdn.zsenhe.com/99c07c73b13a4b0380fc25eb4f4966ec" alt="æ’å…¥å¤´èŠ‚ç‚¹.PNG"></p></blockquote><blockquote><p>åœ¨kåæ–¹æ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹<br><img src="http://cdn.zsenhe.com/1459e11868f344dc9a19ee6708965774" alt="æ’å…¥æ–°èŠ‚ç‚¹.PNG"></p></blockquote><blockquote><p>åˆ é™¤kçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<br><img src="http://cdn.zsenhe.com/6191f255fa3d49f9940cc589c2bf701b" alt="åˆ é™¤èŠ‚ç‚¹.PNG"></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å½’å¹¶æ’åºç¬”è®°,ä»£ç æ¨¡æ¿</title>
      <link href="/2022/09/29/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E7%AC%94%E8%AE%B0,%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%9D%BF/"/>
      <url>/2022/09/29/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E7%AC%94%E8%AE%B0,%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h3 id="å½’å¹¶æ’åºæ¨¡æ¿"><a href="#å½’å¹¶æ’åºæ¨¡æ¿" class="headerlink" title="å½’å¹¶æ’åºæ¨¡æ¿"></a>å½’å¹¶æ’åºæ¨¡æ¿</h3><p>å½’å¹¶å’Œ <a href="http://127.0.0.1:8080/article/17">å¿«æ’</a> åŒæ ·å±äºåˆ†æ²»ç®—æ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> tmp[N];</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">merge_sort</span><span class="params">(<span class="type">int</span> * p,<span class="type">int</span> l,<span class="type">int</span> r)</span>&#123;</span><br><span class="line">    <span class="comment">//é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//1.ç¡®å®šå­é—®é¢˜åˆ†ç•Œç‚¹</span></span><br><span class="line">    <span class="type">int</span> mid = l+r&gt;&gt;<span class="number">1</span>,i=l,j=mid+<span class="number">1</span>,k=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//2.é€’å½’å¤„ç†å­é—®é¢˜</span></span><br><span class="line">    merge_sort(p,l,mid);</span><br><span class="line">    merge_sort(p,mid+<span class="number">1</span>,r);</span><br><span class="line">    <span class="comment">//3.å­é—®é¢˜åˆå¹¶</span></span><br><span class="line">    <span class="keyword">while</span>(i&lt;=mid&amp;&amp;j&lt;=r)&#123;</span><br><span class="line">        <span class="keyword">if</span>(p[i]&lt;=p[j]) tmp[k++] = p[i++];</span><br><span class="line">        <span class="keyword">else</span> tmp[k++] = p[j++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=mid) tmp[k++] = p[i++];</span><br><span class="line">    <span class="keyword">while</span>(j&lt;=r) tmp[k++] = p[j++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=l,j=<span class="number">0</span>;i&lt;=r;i++) p[i] = tmp[j++];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨åˆå¹¶å­é—®é¢˜æ—¶,<strong>[lâ€¦mid] [mid+1â€¦r]</strong> åˆ†åˆ«éƒ½æ˜¯æœ‰åºåŒºé—´ã€‚<br>ä¸ºä»€ä¹ˆé€’å½’å¤„ç†ä¹‹åä¼šæ˜¯æœ‰åºçš„å‘¢ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸‹ä»¥ä¸‹è¿™ä¸ªåºåˆ—</p><blockquote><p>1 4 3 6 8 7 5 </p></blockquote><p>è¿›å…¥å‡½æ•°æ—¶,midå–åˆ° 6<del>3</del>,äºæ˜¯é€’å½’çš„ä¸¤ä¸ªåŒºé—´è¢«åˆ†ä¸º</p><blockquote><p>[0â€¦3] [4â€¦6]</p></blockquote><p>è¿›å…¥ç¬¬ä¸€ä¸ªåŒºé—´çš„é€’å½’,è¿‡ç¨‹å¦‚å›¾</p><p><img src="http://cdn.zsenhe.com/547a2ebd1b0c44aeb9b37007a2d48764" alt="ht.png"></p><p>å³è¾¹çš„ [4â€¦6]åŒºé—´ä¹Ÿæ˜¯è¿™æ ·å¤„ç†ï¼Œå›åˆ° midä¸º 6<del>3</del>è¿™é‡Œï¼Œå½“ä¸¤è½®é€’å½’ç»“æŸï¼Œå·¦å³åŒºé—´å·²ç»æ˜¯æœ‰åºçš„äº†ã€‚<br>æ­¤æ—¶å†æ‰§è¡Œä¸å­åŒºé—´ç›¸åŒçš„å½’å¹¶æ“ä½œï¼Œå½“æ•´ä¸ªåŒºé—´å¤„ç†å®Œ(l&gt;&#x3D;ræ—¶)ï¼Œé—®é¢˜ä¹Ÿå°±è§£å†³äº†ã€‚</p><h3 id="æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†æ"><a href="#æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†æ" class="headerlink" title="æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†æ:"></a>æ’åºçš„æ—¶é—´å¤æ‚åº¦åˆ†æ:</h3><p>æ¯å±‚é€’å½’æˆ‘ä»¬ä¼šå°†åºåˆ—ä¸€åˆ†ä¸ºäºŒï¼Œå³ç¬¬ä¸€å±‚åˆ†ä¸º2æ®µ n&#x2F;2 ç¬¬ä¸‰å±‚åˆ†ä¸º4æ®µ n&#x2F;4 çš„åŒºé—´ â€¦.<br>æ¯å±‚æˆ‘ä»¬çš„å…ƒç´ éƒ½è‡³å°‘ä¼šè¢«æ‰«æä¸€æ¬¡ï¼Œå³æ¯å±‚é€’å½’çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºOn<br> <img src="http://cdn.zsenhe.com/e122fe15f3cb46b688b44664d582c25b" alt="ht2.png"></p><p>né™¤ä»¥2è¦é™¤å¤šå°‘æ¬¡ä¼šå¾—åˆ°1å‘¢ï¼Œç­”æ¡ˆè‡ªç„¶æ˜¯log2n,æ¯å±‚éƒ½æ˜¯Onçš„æ—¶é—´.æ‰€ä»¥å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º <strong>nlogn</strong><br>ä¸å¿«æ’çš„åŒºåˆ«æ˜¯å¿«æ’åœ¨æ•°æ®è¾ƒçƒ‚ï¼Œæœ€åçš„æƒ…å†µä¸‹ä¼šè¾¾åˆ° <strong>n^2^</strong> çš„æ—¶é—´å¤æ‚åº¦ï¼Œè€Œå½’å¹¶æ’åºæ˜¯ç¨³å®šçš„ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦æ°¸è¿œéƒ½æ˜¯nlogn</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¿«æ’ç¬”è®°,ä»£ç æ¨¡æ¿</title>
      <link href="/2022/09/27/%E5%BF%AB%E6%8E%92%E7%AC%94%E8%AE%B0,%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%9D%BF/"/>
      <url>/2022/09/27/%E5%BF%AB%E6%8E%92%E7%AC%94%E8%AE%B0,%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/39fa3f0dbe3e4554b73a8641866e607e" alt="QQæˆªå›¾20210516105844.png"><br>å¿«æ’å±äºåˆ†æ²»ç®—æ³•ï¼Œåˆ†æ²»ç®—æ³•éƒ½æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p><p><strong>1.åˆ†æˆå­é—®é¢˜ -&gt; 2.é€’å½’å¤„ç†å­é—®é¢˜ -&gt; 3.åˆå¹¶å­é—®é¢˜</strong></p><p>å¿«æ’çš„æ­¥éª¤åˆ†ä¸º:</p><blockquote><p>1.ç¡®å®šåŸºå‡†å€¼ <strong>x</strong> ,å¯å–éšæœºä¸€ä¸ªå…ƒç´ <br>2.è°ƒæ•´åŒºé—´,ä½¿å¾— <strong>[l,x]&lt;&#x3D;x** , **[x,r]&gt;&#x3D;x</strong><br>3.é€’å½’å¤„ç†å·¦å³åŒºé—´</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">quick_sort</span><span class="params">(<span class="type">int</span> q[], <span class="type">int</span> l, <span class="type">int</span> r)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//é€’å½’çš„ç»ˆæ­¢æƒ…å†µ(åˆæ³•æƒ…å†µl==ræ—¶ç»ˆæ­¢é€’å½’,å³åŒºé—´å†…åªæœ‰ä¸€ä¸ªæ•°)</span></span><br><span class="line">    <span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€æ­¥ï¼šåˆ†æˆå­é—®é¢˜</span></span><br><span class="line">    <span class="type">int</span> i = l - <span class="number">1</span>, j = r + <span class="number">1</span>, x = q[l + r &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i] &lt; x);</span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j] &gt; x);</span><br><span class="line">        <span class="keyword">if</span>(i &lt; j) swap(q[i], q[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒæ­¥ï¼šé€’å½’å¤„ç†å­é—®é¢˜</span></span><br><span class="line">    quick_sort(q, l, j), quick_sort(q, j + <span class="number">1</span>, r);</span><br><span class="line">    <span class="comment">//ç¬¬ä¸‰æ­¥ï¼šå­é—®é¢˜åˆå¹¶.å¿«æ’è¿™ä¸€æ­¥ä¸éœ€è¦æ“ä½œï¼Œä½†å½’å¹¶æ’åºçš„æ ¸å¿ƒåœ¨è¿™ä¸€æ­¥éª¤</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°è¯•è¯æ˜åœ¨whileå¾ªç¯ç»“æŸå <strong>[l,j]&lt;&#x3D;x,[j+1,r]&gt;x</strong><br>å¾ªç¯ä¸å˜å¼: </p><blockquote><p>q[l..i] &lt;&#x3D; x q[j..r] &gt;&#x3D; x</p></blockquote><p>1.åœ¨å¾ªç¯å¼€å§‹ä¹‹å‰,i&#x3D;l-1,j&#x3D;r+1<br>åˆ™q[l..i],q[j..r]ä¸ºç©º,å¾ªç¯ä¸å˜å¼æˆç«‹</p><p>2.æŸè½®å¾ªç¯å¼€å§‹å‰(å¾ªç¯ä¸å˜å¼æˆç«‹) æ‰§è¡Œä»£ç </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i]&lt;x);</span><br><span class="line">ä½¿å¾—q[l..i<span class="number">-1</span>] &lt;=x,q[i]&gt;=x</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j]&lt;x);</span><br><span class="line">ä½¿å¾—q[j+<span class="number">1.</span>.r] &gt;=x,q[j]&lt;=x</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(i&lt;j) swap(q[i],q[j]);</span><br><span class="line">ä½¿å¾—q[l..i]&lt;=x,q[j..r] &gt;= x</span><br></pre></td></tr></table></figure><p>ç…§ä¸Šé¢çš„é€»è¾‘ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯å¼€å§‹ä¹‹å‰ï¼Œä¸å˜å¼ä¾ç„¶æˆç«‹</p><p>3.å¾ªç¯ç»ˆæ­¢</p><p>å¾ªç¯ç»“æŸæ—¶, <strong>i&gt;&#x3D;j,q[l..i]&lt;&#x3D;x,q[j..r]&gt;&#x3D;x</strong><br>æŒ‰ç…§jæ¥åˆ’åˆ†, å¯ä»¥å¾—åˆ° <strong>q[l..j] &lt;&#x3D;x,q[j+1..r]&gt;&#x3D;x</strong></p><p>å¦‚ä½•è¯æ˜è¿™ä¸ªç»“è®ºæ˜¯æ­£ç¡®çš„å‘¢,å…³é”®åœ¨äºæœ€åä¸€è½®å¾ªç¯<br>å› ä¸ºi&gt;&#x3D;j,æ‰€ä»¥swapæ“ä½œå¹¶ä¸ä¼šè¿›è¡Œ,å³æˆ‘ä»¬åªèƒ½ä¿è¯<br><strong>p[l,i-1]&lt;&#x3D;x,p[i]&gt;&#x3D;x,p[j+1,r]&gt;&#x3D;x,p[j]&lt;&#x3D;x**<br>å› ä¸º **p[l,i-1]&lt;&#x3D;x,i&gt;&#x3D;j(i-1&gt;&#x3D;j-1)</strong> ä»¥åŠ <strong>p[j]&lt;&#x3D;x** å¯ä»¥å¾—åˆ° **p[l,j]&lt;&#x3D;x**<br>åˆå› ä¸º **p[j+1,r]&gt;&#x3D;x (ä¸Šé¢çš„è¯æ˜)</strong> ï¼Œæ‰€ä»¥é—®é¢˜å¾—è¯ </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>leetcode209é•¿åº¦æœ€å°çš„å­æ•°ç»„ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ±‚è§£</title>
      <link href="/2022/09/25/leetcode209%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84%E4%BD%BF%E7%94%A8%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B1%82%E8%A7%A3/"/>
      <url>/2022/09/25/leetcode209%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84%E4%BD%BF%E7%94%A8%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B1%82%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/fce0973c2cc54228ad2083bfdc7d4b41" alt="leetcode209.jpg"></p><h3 id="é¢˜è§£"><a href="#é¢˜è§£" class="headerlink" title="é¢˜è§£:"></a>é¢˜è§£:</h3><p>é¢˜ç›®æ ‡ç­¾æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œä½†ç»™å‡ºæ•°ç»„æ˜¯æ— åºçš„ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•éœ€æ–°å»ºä¸€ä¸ª<br><strong>sum[numberSize]</strong> æ•°ç»„ï¼Œ<strong>sum[i]</strong> å­˜å‚¨ <strong>nums[0]</strong>- <strong>nums[i]</strong> çš„å’Œ<br>å› ä¸ºé¢˜ç›®ç»™å‡ºçš„æ˜¯æ­£æ•´æ•°ï¼Œè¿™æ ·å¯ä»¥ç¡®è®¤<strong>sum</strong> æ•°ç»„æ˜¯å•è°ƒé€’å¢çš„ã€‚æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ° <strong>sum[k]-sum[j]&gt;&#x3D;target</strong> ,é‚£ä¹ˆ<strong>k-j</strong> ä¾¿æ˜¯å’Œå¤§äºç­‰äºtargetä¸”è¿ç»­çš„å­æ•°ç»„ï¼Œå½“ç„¶ä¸ä¸€å®šæ˜¯æœ€å°çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç›´æŸ¥æ‰¾æ¯”è¾ƒã€‚</br><br>å†ä½¿ç”¨ä¸€å±‚forå¾ªç¯æ¥éå†<strong>k</strong>å—?è¿™æ ·æ•ˆç‡ä¸ä¼šæ¯”æš´åŠ›ç®—é«˜å¾ˆå¤šï¼Œå‰é¢æè¿‡<strong>sum[]</strong> æ•°ç»„æ˜¯å•è°ƒé€’å¢çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç­‰å¼ä¸¤è¾¹å˜æ¢ä¸€ä¸‹ï¼Œæ”¹ä¸º <strong>sum[k] &gt;&#x3D; sum[j]+target</strong>,è¿™æ ·æˆ‘ä»¬æ¯æ¬¡éƒ½å°†targetå’Œå‰ké¡¹å’Œç›¸åŠ ä½œä¸ºå‚æ•°ä¼ å…¥äºŒåˆ†æŸ¥æ‰¾ï¼Œæ¥å–å¾— <strong>k</strong> (sum[j]+targetçš„ä¸Šç•Œ)ã€‚</br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å–å¾—targetçš„ä¸Šç•Œ </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">upperBound</span><span class="params">(<span class="type">int</span>* nums,<span class="type">int</span> target,<span class="type">int</span> numsSize)</span>&#123;</span><br><span class="line"><span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> r = numsSize;</span><br><span class="line"><span class="type">int</span> rnIndex = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line"><span class="type">int</span> mid = l+(r-l)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(nums[mid]==target)&#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(nums[mid]&gt;target)&#123;</span><br><span class="line">rnIndex = mid;</span><br><span class="line">r = mid<span class="number">-1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">l = mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> rnIndex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, <span class="type">int</span>* nums, <span class="type">int</span> numsSize)</span>&#123;</span><br><span class="line"><span class="type">int</span> sum[numsSize+<span class="number">1</span>];</span><br><span class="line">sum[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//å‰ç¼€å’Œ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=numsSize;++i)&#123;</span><br><span class="line">sum[i] = sum[i<span class="number">-1</span>]+nums[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> len = <span class="number">2147483647</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=numsSize;++i)&#123;</span><br><span class="line"><span class="type">int</span> s = sum[i]+target;</span><br><span class="line"><span class="type">int</span> index = upperBound(sum,s,numsSize);</span><br><span class="line"><span class="keyword">if</span>(index!=<span class="number">-1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>((index-i)&lt;len)&#123;</span><br><span class="line">len = (index-i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(len==<span class="number">2147483647</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></br>æŠ˜ç£¨äº†ä¸€æ™šä¸Š,æœ€åçš„æäº¤ç»“æœ<p><img src="http://cdn.zsenhe.com/ac67f1ac6c5247f0ab68d5a3b6294d46" alt="leetcode209ac.jpg"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä»å¤±è´¥ä¸­ç´¯ç§¯ç»éªŒï¼Œè®©è‡ªå·±å‰è¿›çš„æ­¥ä¼æ›´å¿«ï¼Œè¿™ä¾¿æ˜¯KMPï¼&#39;</title>
      <link href="/2022/07/25/%E4%BB%8E%E5%A4%B1%E8%B4%A5%E4%B8%AD%E7%B4%AF%E7%A7%AF%E7%BB%8F%E9%AA%8C%EF%BC%8C%E8%AE%A9%E8%87%AA%E5%B7%B1%E5%89%8D%E8%BF%9B%E7%9A%84%E6%AD%A5%E4%BC%90%E6%9B%B4%E5%BF%AB%EF%BC%8C%E8%BF%99%E4%BE%BF%E6%98%AFKMP%EF%BC%81&#39;/"/>
      <url>/2022/07/25/%E4%BB%8E%E5%A4%B1%E8%B4%A5%E4%B8%AD%E7%B4%AF%E7%A7%AF%E7%BB%8F%E9%AA%8C%EF%BC%8C%E8%AE%A9%E8%87%AA%E5%B7%B1%E5%89%8D%E8%BF%9B%E7%9A%84%E6%AD%A5%E4%BC%90%E6%9B%B4%E5%BF%AB%EF%BC%8C%E8%BF%99%E4%BE%BF%E6%98%AFKMP%EF%BC%81&#39;/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.acwing.com/problem/content/833/">AcWing831.KMPå­—ç¬¦ä¸² é¢˜ç›®é“¾æ¥</a></p><p>é¢˜ç›®å¦‚ä¸‹:</p><p><img src="http://cdn.zsenhe.com/49b515c09ce5449c8ed6ccbd01c04850" alt="ac831.jpg"></p><p>KMPæ˜¯çœŸå‹¾å…«éš¾ï¼ŒæŠ˜è…¾äº†ä¸€æ™šä¸Šæ‰å‹‰å¼ºæ•´æ˜ç™½ï¼Œç‰¹åˆ«æ˜¯æ¨å¯¼nextæ•°ç»„çš„æ­¥éª¤ï¼Œçœ‹äº†å¥½å‡ ç¯‡åšå®¢ä»£ç éƒ½ä¸ä¸€æ ·ï¼Œåœ¨çº¸ä¸Šè·Ÿç€æ¨äº†ä¸€éæ‰çœ‹æ˜ç™½ã€‚</br></p><p><img src="https://cdn.acwing.com/media/article/image/2020/10/03/42785_c47d341805-730C14E2D23214EBA8C23FCD4855C40C.jpg"><br>(å·ä¸€æ³¢ç¤¾åŒºdalaoçš„æ¨å¯¼ï¼Œ<a href="https://www.acwing.com/solution/content/23907/">é“¾æ¥åœ¨è¿™</a>)<br>æœ€åACçš„ä»£ç å’Œæ³¨é‡Š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">100010</span>, M = <span class="number">1000010</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> ne[N];</span><br><span class="line"><span class="type">char</span> s[M], p[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//ä¸ºäº†æ–¹ä¾¿ä»1å¼€å§‹ç´¢å¼•</span></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; p + <span class="number">1</span> &gt;&gt; m &gt;&gt; s + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    è¯¥å¾ªç¯æ¨å¯¼nextæ•°ç»„</span></span><br><span class="line"><span class="comment">        next[]æ•°ç»„å«ä¹‰:</span></span><br><span class="line"><span class="comment">            next[i]ä¸­å­˜å‚¨çš„å€¼ä¸º [0,i]çš„æœ€é•¿å…¬å…±å‰åç¼€å¤§å° (å³å‰ç¼€çš„å°¾éƒ¨ç´¢å¼•)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨æ„ j ä» 0 å¼€å§‹ï¼Œå› ä¸ºåˆ¤æ–­æ—¶å–p[j+1]</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>,j=<span class="number">0</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¦‚æœå½“å‰p[i]!=p[j+1]çš„è¯,æ­¤æ—¶jä¸ºä¸Šä¸€æ­¥(æˆ–ä¸º0),å°†next[j]èµ‹ç»™j</span></span><br><span class="line"><span class="comment">        è¯¥whileå¾ªç¯åœ¨p[i]==p[j+1]æˆ–j==0(å³é€€æ— å¯é€€ï¼Œä¸Šä¸€æ­¥åªèƒ½ä»1å¼€å§‹åŒ¹é…)æ—¶é€€å‡º</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">while</span>(j&amp;&amp;p[i]!=p[j+<span class="number">1</span>]) j = ne[j];</span><br><span class="line">        <span class="comment">//ä»£ç æ‰§è¡Œåˆ°è¿™ï¼Œj+1æœ‰å¯èƒ½ç­‰äºjçš„å…¬å…±å‰åç¼€æœªç´¢å¼•ï¼Œä¹Ÿæœ‰å¯èƒ½j=0</span></span><br><span class="line">        <span class="comment">//åˆ¤æ–­ä¸€ä¸‹å½“å½“å‰å­—ç¬¦p[i]ç­‰äºne[j]å…¬å…±å‰åç¼€+1å­—ç¬¦çš„è¯ï¼Œne[i]çš„å…¬å…±å‰åç¼€é•¿åº¦+1</span></span><br><span class="line">        <span class="keyword">if</span>(p[i]==p[j+<span class="number">1</span>]) j++;</span><br><span class="line">        <span class="comment">//å½“ç„¶ä¹Ÿæœ‰å¯èƒ½æ˜¯0</span></span><br><span class="line">        ne[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    è¯¥å¾ªç¯åœ¨Sä¸²ä¸­å¯»æ‰¾å­ä¸²Pï¼Œè¿”å›é¦–ç´¢å¼•</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, j = <span class="number">0</span>; i &lt;= m; i ++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ä¸æ±‚nextæ•°ç»„ç›¸åŒï¼Œå¦‚æœå½“å‰s[i]!=p[j+1]çš„è¯ï¼Œå¯»æ‰¾[1,j]çš„å…¬å…±å‰åç¼€é•¿åº¦èµ‹ç»™j</span></span><br><span class="line">        <span class="comment">//å¦‚æœé€€æ— å¯é€€çš„è¯ï¼Œjè¿™ä¸€æ­¥ä¹‹åä¼šç­‰äº0ï¼Œå³ä¸‹ä¸€æ¬¡å¾ªç¯å­ä¸²ä»å¤´å¼€å§‹åŒ¹é…</span></span><br><span class="line">        <span class="keyword">while</span> (j &amp;&amp; s[i] != p[j + <span class="number">1</span>]) j = ne[j];</span><br><span class="line">        <span class="comment">//å¦‚æœå­—ç¬¦ç›¸åŒçš„è¯ï¼Œå­ä¸²çš„jæŒ‡é’ˆç»§ç»­å¾€åèµ°</span></span><br><span class="line">        <span class="keyword">if</span> (s[i] == p[j + <span class="number">1</span>]) j ++ ;</span><br><span class="line">        <span class="comment">//jä¼šä¸€ç›´å›æº¯æˆ–å‰è¿›ï¼Œå½“jå’Œpçš„å­—ç¬¦æ•°ç›¸ç­‰æ—¶ï¼Œè¯´æ˜å·²ç»åŒ¹é…å®Œæˆ</span></span><br><span class="line">        <span class="keyword">if</span> (j == n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, i - n);</span><br><span class="line">            j = ne[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äºŒç»´å‰ç¼€å’Œä¸å·®åˆ†ç¬”è®°</title>
      <link href="/2022/06/14/%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/06/14/%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰ç¼€å’Œ"><a href="#å‰ç¼€å’Œ" class="headerlink" title="å‰ç¼€å’Œ"></a>å‰ç¼€å’Œ</h2><p>ä»€ä¹ˆæ˜¯å‰ç¼€å’Œï¼Ÿ</br><br>ç»™å‡ºæ•°ç»„ <strong>a[]</strong> (a[1],a[2],â€¦.a[n])<br>è®¾æ•°ç»„ <strong>b[]</strong> ä¸ºæ•°ç»„ <strong>a[]</strong> çš„å‰ç¼€å’Œæ•°ç»„ï¼Œå³</br></p><p><strong><em>b[i] &#x3D; a[1] + a[2] + a[3] + â€¦. + a[i]</em></strong></p><p>å‰ç¼€å’Œçš„ä¸‹æ ‡ä¸€å®šè¦ä»1å¼€å§‹ï¼Œé¿å…æ— å¿…è¦çš„å¯¹ä¸‹æ ‡è¿›è¡Œè½¬æ¢</p><p>å‰ç¼€å’Œçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨äºå¿«é€Ÿç­›é€‰å‡ºä¸€æ®µåŒºé—´çš„å’Œã€‚å¦‚å¯¹äº <strong>a[]</strong> æ•°ç»„æƒ³è¦å¾—å‡º <strong>[l,r]</strong> åŒºé—´å†…çš„å’Œï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„ä¾¿æ˜¯æš´åŠ›éå†çš„æ–¹å¼ã€‚ä½†å¯¹äºå¤šæ¬¡è¯¢é—®ï¼Œæˆ‘ä»¬å¯ä»¥ç‰ºç‰²ä¸€ç‚¹ç©ºé—´æ„é€ å‡ºå‰ç¼€å’Œæ•°ç»„ <strong>sum[]</strong> ï¼Œä¹‹åå¯¹äºæ¯æ¬¡è¯¢é—®æˆ‘ä»¬éƒ½å¯ä»¥ç”¨ <strong>O(1)</strong> çš„æ—¶é—´å¤æ‚åº¦å¾ˆæ–¹ä¾¿çš„å¾—å‡ºç­”æ¡ˆ</br></p><h3 id="ä¸€ç»´å‰ç¼€å’Œ"><a href="#ä¸€ç»´å‰ç¼€å’Œ" class="headerlink" title="ä¸€ç»´å‰ç¼€å’Œ"></a>ä¸€ç»´å‰ç¼€å’Œ</h3><p><strong><em>å…·ä½“å¤„ç†</em></strong>:<br>åšä¸€ä¸ªé¢„å¤„ç†ï¼Œå®šä¹‰ä¸€ä¸ª <strong>sum[]</strong> æ•°ç»„ï¼Œ<strong>sum[i]</strong> ä»£è¡¨ a æ•°ç»„ä¸­å‰ <strong>i</strong> é¡¹çš„å’Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const int N=1e5+10;</span><br><span class="line">int sum[N],a[N]; //sum[i]=a[1]+a[2]+a[3].....a[i];</span><br><span class="line">for(int i=1;i&lt;=n;i++)</span><br><span class="line">&#123; </span><br><span class="line">    sum[i]=sum[i-1]+a[i];   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>æŸ¥è¯¢æ“ä½œ</em></strong>:<br>å¯¹äºæ¯æ¬¡æŸ¥è¯¢ï¼Œåªéœ€è¿”å› <strong>sum[r]-sum[l-1]</strong> ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <strong><em>O(1)</em></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scanf(&quot;%d%d&quot;,&amp;l,&amp;r);</span><br><span class="line">printf(&quot;%d\n&quot;, sum[r]-sum[l-1]);</span><br></pre></td></tr></table></figure><h3 id="äºŒç»´å‰ç¼€å’Œ"><a href="#äºŒç»´å‰ç¼€å’Œ" class="headerlink" title="äºŒç»´å‰ç¼€å’Œ"></a>äºŒç»´å‰ç¼€å’Œ</h3><p><img src="http://cdn.zsenhe.com/4a2032f066b64f619bebc7138f159251" alt="lk013.jpg"></p><p>æˆ‘ä»¬å¯ä»¥ç”¨å‰ç¼€å’Œçš„æ€æƒ³æ¥åšè¿™é“é¢˜ï¼Œé¦–å…ˆæ„å»ºä¸€ä¸ªæ–°çš„äºŒç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰ <strong>sum[][]</strong> æ¥å­˜å‚¨å‰ç¼€å’Œ</p><p><img src="http://cdn.zsenhe.com/db910879b21d41908369834c01fa9b7b" alt="sum.png"><br>æˆ‘ä»¬éœ€è¦åšä¸€ä¸ªé¢„å¤„ç†è®© <strong>sum[i][j]</strong> ä¸º <strong>(i,j)</strong> å·¦ä¸Šè§’æ‰€æœ‰ä¸‹æ ‡å…ƒç´ çš„å’Œã€‚</br><br>ç»“åˆå›¾ç‰‡å¾—å‡ºäºŒç»´å‰ç¼€å’Œé¢„å¤„ç†å…¬å¼</br><br><strong>sum[i][j] &#x3D; sum[i][j-1]+sum[i-1][j]-sum[i-1][j-1]+a[i][j]</strong><br>(sum[i][j-1]+sum[i-1][j]æ—¶sum[i-1][j-1]è¢«åŠ äº†ä¸¤æ¬¡ï¼Œéœ€è¦å‡æ‰ä¸€æ¬¡)<br>ä»£ç è¿™ä¹ˆå†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for (int i = 1; i &lt;= n; i++)</span><br><span class="line">    for (int j = 1; j &lt;= m; j++) &#123;</span><br><span class="line">        scanf(&quot;%d&quot;, &amp;a[i][j]);</span><br><span class="line">        s[i][j] = s[i][j - 1] + s[i - 1][j] - s[i - 1][j - 1] + a[i][j]; // æ±‚å‰ç¼€å’Œ</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/45a827e668c34de1b32b2de491de7c80" alt="sum2.png"><br>å›åˆ°é¢˜ç›®ä¸Šï¼Œç»™å‡ºå­çŸ©é˜µå·¦ä¸Šè§’ <strong>(x1,y1)</strong> åŠå³ä¸‹è§’ <strong>(x2,y2)</strong> ï¼Œæ±‚è¯¥çŸ©é˜µå†…æ‰€æœ‰å…ƒç´ çš„å’Œã€‚<br>æœ‰äº†å‰é¢å‰ç¼€å’Œåçš„å¤„ç†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠé¢ç§¯æ¨å¯¼ä¸€ä¸‹å°±å¥½äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦ä¾ç„¶æ˜¯ <strong><em>O(1)</em></strong> ï¼Œæ˜¯ä¸æ˜¯æ¯”éå†ä¸€éå¿«å¤šäº†ï¼Ÿ</br></p><p>å¾—å‡º(x1,y1),(x2,y2)å­çŸ©é˜µçš„å’Œä¸º:</br></p><p><strong>sum[x2][y2]-sum[x1-1][y2]-sum[x2][y1-1]+sum[x1-1][y1-1]</strong></p><p>è¯¥é¢˜å®Œæ•´ä»£ç å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">const int N=1010;</span><br><span class="line">int n,m,q;</span><br><span class="line">int a[N][N],s[N][N];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    scanf(&quot;%d %d %d&quot;,&amp;n,&amp;m,&amp;q);</span><br><span class="line">    for(int i=1;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int j=1;j&lt;=m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            scanf(&quot;%d&quot;,&amp;a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    for(int i=1;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        for(int j=1;j&lt;=m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[i][j]=s[i-1][j]+s[i][j-1]+a[i][j]-s[i-1][j-1];  //æ±‚å‰ç¼€å’Œ</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    while(q--)</span><br><span class="line">    &#123;</span><br><span class="line">        int x1,y1,x2,y2;</span><br><span class="line">        scanf(&quot;%d%d%d%d&quot;,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">        printf(&quot;%d\n&quot;,s[x2][y2]-s[x2][y1-1]-s[x1-1][y2]+s[x1-1][y1-1]);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹å‰åšè¿‡ä¸€é“æ ‡ç­¾æ˜¯äºŒåˆ†å‰ç¼€å’Œçš„é¢˜ç›®:</br><br><a href="http://zsenhe.com/posts/225216/">leetcode209 é•¿åº¦æœ€å°çš„å­æ•°ç»„ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ±‚è§£</a></p><h2 id="å·®åˆ†"><a href="#å·®åˆ†" class="headerlink" title="å·®åˆ†"></a>å·®åˆ†</h2><p>ç»™å®šä¸€ä¸ªåŸå®šæ•°ç»„ <strong>a[]</strong> , æ„é€ ä¸€ä¸ª <strong>b[]</strong> æ•°ç»„ï¼Œä½¿å¾—<br><strong>a[i] &#x3D; b[1]+b[2]+â€¦..+b[i]</strong><br>ä¹Ÿå°±æ˜¯è¯´ <strong>a[]</strong> æ˜¯ <strong>b[]</strong> çš„å‰ç¼€å’Œæ•°ç»„ï¼Œåè¿‡æ¥ <strong>b[]</strong> æ˜¯ <strong>a[]</strong> çš„å·®åˆ†æ•°ç»„</br><br>æˆ‘ä»¬è€ƒè™‘æ€ä¹ˆæ„å»ºå·®åˆ†æ•°ç»„ <strong>b[]</strong> ï¼Œå¦‚ä¸‹</br><br><strong>b[1] &#x3D; a[1]-a[0],</strong><br><strong>b[2] &#x3D; a[2]-a[1],</strong><br><strong>â€¦â€¦..</strong><br><strong>b[n] &#x3D; a[n]-a[n-1]</strong><br></br></p><p>æˆ‘ä»¬åªè¦æœ‰äº† <strong>b[]</strong> æ•°ç»„ï¼Œå°±å¯ä»¥é€šè¿‡å‰ç¼€å’Œè¿ç®— åœ¨ <strong><em>O(1)</em></strong> çš„æ—¶é—´å¤æ‚åº¦å†…å¾—åˆ°åŸæ•°ç»„ <strong>a[]</strong> ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥å°†å·®åˆ†ç†è§£ä¸ºå‰ç¼€å’Œçš„é€†è¿ç®—</br></p><p><strong>é‚£ä¹ˆå·®åˆ†æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</strong> è®©æˆ‘ä»¬çœ‹è¿™ä¹ˆä¸€ä¸ªé—®é¢˜</br></p><blockquote><p>ç»™å®šåŒºé—´ <strong>[l,r]</strong> ,è®©æˆ‘ä»¬ä¸ºæ•°ç»„ <strong>a[]</strong> ä¸­çš„è¿™æ®µåŒºé—´æ¯ä¸ªå…ƒç´ éƒ½åŠ ä¸Š<strong>c</strong></p></blockquote><p>æœ€å®¹æ˜“æƒ³åˆ°æš´åŠ›çš„åšæ³•ï¼Œæˆ‘ä»¬éå†ä¸€éè¯¥åŒºé—´ï¼Œåˆ†åˆ«ä¸ºæ¯ä¸ªå…ƒç´ åŠ ä¸Šcã€‚å¦‚æœæˆ‘ä»¬è¦è¿›è¡Œmæ¬¡æ“ä½œï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦å°±æ˜¯ <strong><em>O(N*M)</em></strong> ã€‚æœ‰æ›´é«˜æ•ˆçš„åšæ³•å—ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·®åˆ†æ¥æ“ä½œ</p><p>è®¾ <strong>b[]</strong> ä¸º <strong>a[]</strong> çš„å·®åˆ†æ•°ç»„ï¼Œè€ƒè™‘é€šè¿‡ <strong>b[]</strong> æ¥æ±‚å¾— <strong>a[]</strong> æ•°ç»„ï¼Œä»»ä¸€ä¸ª <strong>b[i]</strong> çš„æ”¹å˜ä¼šå½±å“ <strong>a[i]</strong> åŠä¹‹åçš„å…ƒç´ æ±‚å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¿›è¡Œä»¥ä¸‹ä¸¤æ­¥æ“ä½œå³å¯å®Œæˆå¯¹æŸæ®µåŒºé—´+c</br></p><p><strong><em>b[l]+&#x3D;c,b[r+1]-&#x3D;c</em></strong></p><p>ç”»ä¸€ä¸ªå›¾æ¥è§£é‡Šè¯¥å…¬å¼</br></p><p><img src="http://cdn.zsenhe.com/36ce226a8f51464a8e55e47443849def" alt="di.png"></p><p><strong>b[l]+&#x3D;c</strong> ä½¿å¾— <strong>a[]</strong> ä¸­ låŠåé¢çš„å…ƒç´ éƒ½åŠ ä¸Š <strong>c</strong> (çº¢è‰²éƒ¨åˆ†)ã€‚ä½†æˆ‘ä»¬æ‰€è¦æ±‚çš„åªæ˜¯[l,r]ä¹‹é—´åŠ ä¸Šcï¼Œäºæ˜¯è¿˜éœ€è¦æ‰“ä¸€ä¸ªè¡¥ä¸ï¼Œè®© <strong>b[r+1]-&#x3D;c</strong> å³ <strong>råé¢çš„éƒ¨åˆ†å‡å»å‰é¢åŠ çš„c</strong> ï¼ˆç»¿è‰²éƒ¨åˆ†ï¼‰ï¼Œè¿™æ ·råé¢çš„åŒºé—´ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–</br></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>äºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³å’Œè§£é¢˜æ­¥éª¤ç¬”è®°ï¼Œæ¨¡æ¿</title>
      <link href="/2022/05/30/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E6%80%9D%E6%83%B3%E5%92%8C%E8%A7%A3%E9%A2%98%E6%AD%A5%E9%AA%A4%E7%AC%94%E8%AE%B0%EF%BC%8C%E6%A8%A1%E6%9D%BF/"/>
      <url>/2022/05/30/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%9A%84%E6%80%9D%E6%83%B3%E5%92%8C%E8%A7%A3%E9%A2%98%E6%AD%A5%E9%AA%A4%E7%AC%94%E8%AE%B0%EF%BC%8C%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>äºŒåˆ†è™½ç„¶æ€æƒ³ç®€å•ï¼Œåšäº†ä¸¤å¤©çš„é¢˜ä¸‹æ¥å‘ç°å®é™…åº”ç”¨åˆ°é¢˜ç›®ä¸­å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆè½»æ¾,åœ¨æ­¤è®°å½•ä¸‹ç¬”è®°å’Œå½’çº³æ€»ç»“ä¸€ä¸‹å‡ é“é¢˜ç›®çš„acè¿‡ç¨‹ä»¥å¤‡ä»¥åå¤ä¹ æ—¶ä½¿ç”¨ã€‚</br><br></br><br>äºŒåˆ†çš„æ€æƒ³å¾ˆç®€å•ï¼Œä»¥ä¸‹ç»™å‡ºå®šä¹‰ã€‚<br></br></p><blockquote><p>ç»™å®šä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ <strong>nums</strong> ï¼Œåœ¨å…¶ä¸­å¯»æ‰¾æŸä¸ªå€¼<strong>target</strong>ï¼Œè®¾ä¸¤ä¸ªæŒ‡é’ˆ <strong><em>l</em></strong> <strong><em>r</em></strong> åˆ†åˆ«æŒ‡å‘&gt; æ•°ç»„å·¦å³è¾¹ç•Œï¼Œæ¯æ¬¡å–åŒºé—´çš„ä¸­ç‚¹ l+r&gt;&gt;1 ä¸º <strong>mid</strong> ï¼Œå½“ <strong>nums[mid]&gt;targer</strong> çš„æ—¶å€™è¯´æ˜å…ƒç´ åœ¨ <strong>[l, mid-1]</strong> ä¹‹é—´ï¼Œåä¹‹åˆ™åœ¨ <strong>[mid+1,r]</strong> ï¼Œå½“ä¸¤ç§æƒ…å†µéƒ½ä¸æ»¡è¶³ï¼Œåˆ™ <strong>nums[mid]</strong> å¿…å®šä¸ºè¦å¯»æ‰¾çš„ <strong>target</strong><br></br></p></blockquote><p>å¦‚æœå…‰çŸ¥é“å®šä¹‰æ˜¯ä¸è¶³ä»¥åº”ç”¨åˆ°é¢˜ç›®ä¹‹ä¸­çš„ï¼Œåœ¨è¿ç»­åšäº†å‡ å¤©çš„äºŒåˆ†é¢˜çœ‹äº†ä¸€å †é¢˜è§£åï¼Œæˆ‘å‘è§‰è¦äºŒåˆ†çš„ä¸æ˜¯æŸä¸ªå€¼ï¼Œè€Œæ˜¯æ»¡è¶³æŸä¸ªæ€§è´¨çš„åŒºé—´çš„è¾¹ç•Œï¼Œå½“æ•°ç»„å¯ä»¥ä¾ç…§<strong>æŸç§æ€§è´¨</strong>ä¸€åˆ†ä¸ºäºŒï¼Œå³ä¸€è¾¹ <strong>æ»¡è¶³æ€§è´¨</strong> ï¼Œå¦ä¸€è¾¹ <strong>ä¸æ»¡è¶³æ€§è´¨</strong> ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½æŠŠæ»¡è¶³æˆ–ä¸æ»¡è¶³æ€§è´¨çš„è¾¹ç•Œç»™äºŒåˆ†å‡ºæ¥ï¼Œè€Œå¾€å¾€è¿™ä¸ªè¾¹ç•Œå°±æ˜¯éœ€è¦è¿”å›çš„ç­”æ¡ˆã€‚è¿™ä¹ˆè¯´å¤šå°‘æœ‰ç‚¹æŠ½è±¡ï¼Œä¸‹é¢æ˜¯ç»™å‡ºçš„ç¤ºä¾‹</br><br>å¦‚leetcodeä¸Šè¿™é“æ¨¡æ¿é¢˜</br><br><img src="http://cdn.zsenhe.com/1fed011529aa48eb911aca19680610de" alt="ef1.jpg"><br></br><br><img src="http://cdn.zsenhe.com/3759b08937e448e6ab5f327b75a9f960" alt="ef2.jpg"></p><p>å¦‚è¿™é¢˜ï¼Œæˆ‘ä»¬å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œè“è‰²æ˜¯æ»¡è¶³æ€§è´¨( <strong>&lt;&#x3D;target</strong> çš„åŒºé—´)ï¼Œç´«è‰²æ˜¯ä¸æ»¡è¶³æ€§è´¨(<strong>&gt;target</strong>)çš„åŒºé—´</p></br><p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å¯»æ‰¾è¿™ä¸ªè“è‰²åŒºé—´çš„å³è¾¹ç•Œï¼Œæ¯æ¬¡äºŒåˆ†ä¸€ä¸ªä¸­å€¼ <strong>nums[mid]</strong> ï¼Œ<br>å½“ <strong>nums[mid]&lt;&#x3D;target</strong> çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„è¾¹ç•Œå¿…å®šåœ¨ <strong>[mid,r]</strong> ä¹‹é—´(æ³¨æ„midæ˜¯æœ‰å¯èƒ½å–åˆ°ç­”æ¡ˆçš„),<strong>nums[mid]&gt;target</strong> çš„æ—¶å€™ï¼Œè¾¹ç•Œå¿…å®šåœ¨ <strong>[l,mid-1]</strong> è¿™ä¸ªåŒºé—´ï¼Œæ¯æ¬¡éƒ½ç¼©å°èŒƒå›´ã€‚</br><br>å½“ä½¿ç”¨è¾¹ç•Œçš„æ€æƒ³ï¼Œé¢å¯¹ä¸€äº›æ— å•è°ƒæ€§ä½†è¦æ±‚åœ¨**<em>logn</em>**æ—¶é—´å¤æ‚åº¦å†…åšå‡ºçš„é¢˜ç›®æ—¶ï¼Œä¹Ÿä¸è‡³äºæ‰‹è¶³æ— æªï¼Œè‡³å°‘å¯ä»¥å°è¯•å¯»æ‰¾æ˜¯å¦æœ‰ä¸€ä¸ªæ€§è´¨èƒ½å°†åŒºé—´ä¸€åˆ†ä¸ºå¤š(èœé¸¡è½æ³ª)è¿›è€Œå¯»æ‰¾åˆ°è¾¹ç•Œ</br><br>å®ç°ä»£ç å¦‚ä¸‹</br></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int search(int* nums, int numsSize, int target)&#123;</span><br><span class="line">    int l=0,r=numsSize-1;</span><br><span class="line">    while(l&lt;r)&#123;</span><br><span class="line">        int mid = l + r + 1 &gt;&gt; 1;</span><br><span class="line">        if(nums[mid]&lt;=target) l = mid;</span><br><span class="line">         else r = mid - 1;</span><br><span class="line">    &#125;</span><br><span class="line">    if(nums[l]!=target) return -1;</span><br><span class="line">    return l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></br><p>ç–‘æƒ‘çš„ä¸€ç‚¹æ˜¯å–ä¸­å€¼çš„æ—¶å€™ä¸ºä»€ä¹ˆæ˜¯ <strong><em>l+r+1&gt;&gt;1</em></strong> è€Œä¸æ˜¯ <strong>l+r&gt;&gt;1</strong> ï¼Œè¿™æ˜¯å› ä¸ºåœ¨cä¸­é™¤æ³•æ˜¯å‘ä¸‹å–æ•´çš„ï¼Œè¿™<br>æ ·ä¼šå¯¼è‡´å½“æŸ¥æ‰¾åŒºé—´ä¸º <strong>[r-1,r]</strong> çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯<strong>l+r&#x2F;2</strong>ï¼Œé‚£ä¹ˆåŒºé—´ä¼šæ›´æ–°ä¸º**_[l,r]_<strong>ï¼Œä¸‹æ¬¡æŸ¥æ‰¾è¿˜æ˜¯ <strong>[l,r]</strong> å¯¼è‡´æ­»å¾ªç¯ï¼Œå½“</strong><em>mid</em>**è½åœ¨å³åŒºé—´æ—¶ï¼Œå³æˆ‘ä»¬éœ€è¦å¯»æ‰¾çš„æ˜¯è“è‰²åŒºåŸŸçš„è¾¹ç•Œï¼ˆæ»¡è¶³æ€§è´¨ï¼‰éœ€è¦è¡¥ä¸Š+1</br><br>è®°ä¸€ä¸‹åƒé”¤ç™¾ç‚¼çš„æ¨¡æ¿</br></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">int bsearch_1(int l, int r)</span><br><span class="line">&#123;</span><br><span class="line">    while (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        int mid = l + r &gt;&gt; 1;</span><br><span class="line">        if (check(mid)) r = mid;    // check()åˆ¤æ–­midæ˜¯å¦æ»¡è¶³æ€§è´¨</span><br><span class="line">        else l = mid + 1;</span><br><span class="line">    &#125;</span><br><span class="line">    return l;</span><br><span class="line">&#125;</span><br><span class="line">// åŒºé—´[l, r]è¢«åˆ’åˆ†æˆ[l, mid - 1]å’Œ[mid, r]æ—¶ä½¿ç”¨ï¼š</span><br><span class="line">int bsearch_2(int l, int r)</span><br><span class="line">&#123;</span><br><span class="line">    while (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        int mid = l + r + 1 &gt;&gt; 1;</span><br><span class="line">        if (check(mid)) l = mid;</span><br><span class="line">        else r = mid - 1;</span><br><span class="line">    &#125;</span><br><span class="line">    return l;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></br>ç”±ä»¥ä¸Šæ€»ç»“å‡º</br><p><strong><em>å…·æœ‰å•è°ƒæ€§çš„é¢˜ä¸€å®šå¯ä»¥äºŒåˆ†ï¼Œä¸å…·æœ‰å•è°ƒæ€§ä½†å¯ä»¥å°†åŒºé—´ä¸€åˆ†ä¸ºäºŒçš„é¢˜æœ‰å¯èƒ½å¯ä»¥äºŒåˆ†</em></strong><br></br><br>åœ¨å°†åšäºŒåˆ†é¢˜çš„æ­¥éª¤æŠ½è±¡äº†ä¹‹åï¼Œå°è¯•åšäº†ä¸€é“é¢˜åŠ æ·±å°è±¡</br><br><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/">leetcode34 æ•°çš„èŒƒå›´</a></br><br>é¢˜ç›®è¦æ±‚: </br><br><img src="http://cdn.zsenhe.com/a00dfe3704ca45d1aaa807169497d471" alt="ef3.jpg"><br></br></p><p>æŒ‰ä¸Šé¢çš„æ€è·¯å°†é¢˜ç›®ç¿»è¯‘ä¸€ä¸‹ï¼Œæˆ‘ä»¬è¦å¯»æ‰¾çš„æ˜¯ ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª <strong>&gt;&#x3D;targert</strong> çš„æ•°ï¼Œå³æ±‚ä¸Šä¸‹ç•Œçš„ç´¢å¼•ä½ç½®</br><br>ä»¥ <strong>[5,7,7,8,8,10]</strong> ä¸ºä¾‹,é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€ä¸ªæ€§è´¨ï¼Œèƒ½å°†æ•°ç»„ä¸€åˆ†ä¸ºäºŒï¼Œä¸éš¾å‘ç°æˆ‘ä»¬å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªåŒºé—´</br><br><img src="http://cdn.zsenhe.com/34c1486f814b4468897815165502e1b4" alt="ef4.jpg"><br></br></p><p>å³ <strong>&lt;target</strong> çš„æ•°åˆ†ä¸ºè“è‰²åŒºé—´ï¼Œ <strong>&gt;&#x3D;target</strong> çš„æ•°åˆ†ä¸ºç´«è‰²åŒºé—´<br></br><br>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¦å–çš„å…ƒç´ æ˜¯ç´«è‰²åŒºé—´çš„å·¦è¾¹ç•Œã€‚è®¾ <strong><em>mid</em></strong> ä¸ºæ•°ç»„çš„ä¸­å€¼ï¼Œä¹‹ååˆ¤æ–­æ˜¯å¦æ»¡è¶³ <strong>nums[mid]&gt;&#x3D;target</strong>ï¼Œ</br></p><p>å¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆè¦æŸ¥æ‰¾çš„å…ƒç´ è‚¯å®šåœ¨ <strong>[l,mid]</strong> ä¹‹é—´(_å› ä¸ºnums[mid]å¦‚æœå¤§äºtargetï¼Œåé¢çš„å…ƒç´ å°±ä¸å¯èƒ½æ˜¯targetï¼Œå¦‚æœ<strong>nums[mid]&#x3D;&#x3D;target</strong>ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœ€åä¸€ä¸ª<strong>target</strong>ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‰åŠæ®µç»§ç»­æŸ¥æ‰¾)_ï¼Œå½“ <strong>l&#x3D;r</strong> æ—¶åŒºé—´é‡Œåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ª<strong>target</strong></p></br>è¿™é‡Œçš„äºŒåˆ†è¿™ä¹ˆå†™<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line">int l=0,r=numsSize-1;</span><br><span class="line">//æˆ‘ä»¬éœ€è¦åˆ¤æ–­ä¸€ä¸‹æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºçš„è¯ç›´æ¥è¿”å›[-1,-1](åœ¨å‰é¢ç•¥è¿‡ä»£ç å¤„å·²å®šä¹‰)</span><br><span class="line">if(r==-1)</span><br><span class="line">    return ret;</span><br><span class="line">while(l&lt;r)&#123;</span><br><span class="line">    int mid = l+r&gt;&gt;1;</span><br><span class="line">    if(nums[mid]&gt;=target)</span><br><span class="line">        r = mid;</span><br><span class="line">    else l = mid+1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çš„æŸ¥æ‰¾æœ€åä¸€ä¸ª <strong>&gt;&#x3D;target</strong> çš„å…ƒç´ å°±å¹¶ä¸é‚£ä¹ˆå®¹æ˜“äº†ï¼ŒåŒæ ·æˆ‘ä»¬ä¾ç…§ä¸Šé¢çš„æ€§è´¨å°†åŒºé—´ä¸€åˆ†ä¸ºäºŒ</br><br><img src="http://cdn.zsenhe.com/a553ce075d7a44bd919d76d5f07a5bb5" alt="ef5.jpg"><br></br></p><p>è“è‰²åŒºé—´æ»¡è¶³ <strong>&lt;&#x3D;target</strong> ç´«è‰²åŒºé—´æ»¡è¶³ <strong>&gt;target</strong></br><br>æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œå®é™…ä¸Šæ˜¯è“è‰²åŒºé—´çš„ å³è¾¹ç•Œ ï¼Œç°åœ¨æˆ‘ä»¬è¦æŠŠå®ƒäºŒåˆ†å‡ºæ¥</br><br>åŒæ ·å–ä¸­å€¼ <strong><em>mid</em><strong>ï¼Œåˆ¤æ–­ <strong>nums[mid]&gt;target</strong> æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæˆç«‹çš„è¯ï¼Œç­”æ¡ˆä¸€å®šåœ¨ <strong>[l,mid-1]</strong> è¿™ä¸ªåŒºé—´é‡Œï¼Œå¦‚æœä¸æˆç«‹ï¼ˆå³å°äºç­‰äºtargetï¼‰ï¼Œæˆ‘ä»¬å°†åŒºé—´ç¼©å°ä¸º <strong>[mid,r]</strong> (_åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼Œå¦‚æœ</strong>nums[mid]&#x3D;&#x3D;target</strong>çš„è¯ï¼Œä¸ä¸€å®šæ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­å¾€å³è¾¹æŸ¥æ‰¾ï¼Œå°†åŒºé—´è®¾ç½®ä¸º <strong>[mid,r]</strong>_)<br></br></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">while(l&lt;r)&#123;</span><br><span class="line">   //ä¸Šé¢å·²ç»è®°è¿‡ä¸ºä»€ä¹ˆè¦+1äº†</span><br><span class="line">int mid = l+r+1&gt;&gt;1;</span><br><span class="line">if(nums[mid]&gt;target)&#123;</span><br><span class="line">r = mid;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">l = mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></br>å®Œæ•´ä»£ç å¦‚ä¸‹:</br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">int* searchRange(int* nums, int numsSize, int target,int* returnSize)&#123;</span><br><span class="line">    *returnSize = 2;</span><br><span class="line">int * ret = (int *)malloc(sizeof(int) * 2);</span><br><span class="line">    ret[0] = -1;</span><br><span class="line">    ret[1] = -1;</span><br><span class="line"></span><br><span class="line">    int l=0,r=numsSize-1;</span><br><span class="line">    if(r==-1)</span><br><span class="line">        return ret;</span><br><span class="line">    while(l&lt;r)&#123;</span><br><span class="line">        int mid = l+r&gt;&gt;1;</span><br><span class="line">        if(nums[mid]&gt;=target)</span><br><span class="line">            r = mid;</span><br><span class="line">        else l = mid+1;</span><br><span class="line">    &#125;</span><br><span class="line">    if(nums[l]==target) ret[0] = l;</span><br><span class="line">    l=0,r=numsSize-1;</span><br><span class="line">    while(l&lt;r)&#123;</span><br><span class="line">        int mid = l+r+1&gt;&gt;1;</span><br><span class="line">        if(nums[mid]&gt;target) r = mid-1;</span><br><span class="line">        else l=mid;</span><br><span class="line">    &#125;</span><br><span class="line">    if(nums[l]==target) ret[1] = r;</span><br><span class="line">    return ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://cdn.zsenhe.com/e2f081d159eb49e08ec37cc30afd77ca" alt="ef6.jpg"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“æŠ¥é”™ 144</title>
      <link href="/2022/04/09/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%A5%E9%94%99144/"/>
      <url>/2022/04/09/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8A%A5%E9%94%99144/</url>
      
        <content type="html"><![CDATA[<p><img src="http://cdn.zsenhe.com/712ae9652b754ea2b9f087fde52dbf0e" alt="mysql144.png"><br>æ—©ä¸Šçªç„¶è¿ä¸è¿›ç©å®¶è·¨æœåŒæ­¥èƒŒåŒ…çš„æ•°æ®åº“äº†ï¼ŒæŸ¥è¯¢äº†ä¸€ä¸‹æ–‡æ¡£</br><br>å¤§è‡´åŸå› æ˜¯æ„å¤–æ–­ç”µå¯¼è‡´çš„è¡¨æŸå,å°è¯•äº†ä¸€ä¸‹navictè‡ªå¸¦çš„ä¿®å¤æœªæˆåŠŸ</br><br>è¿›å…¥mysqlæ ¹ç›®å½•ä¸‹ä½¿ç”¨</br></p><blockquote><p>myisamchk -r ..&#x2F;playerdatasql.MYI</p></blockquote><p>æ‰§è¡ŒåæŠ¥å¦‚ä¸‹é”™è¯¯</br><br><img src="http://cdn.zsenhe.com/66e3659ae2c04779a740f300bcee2823" alt="mysql1442.png"><br>åŸå› æ˜¯æ•°æ®è®°å½•æ•°å¤ªé•¿ï¼Œå†…å­˜ä¸è¶³,å°†åŸå…ˆæŒ‡ä»¤å¢åŠ å‚æ•°â€“max-record-length&#x3D;1667331167</p><blockquote><p>myisamchk â€“max-record-length&#x3D;1667331167 -r ..&#x2F;playerdatasql.MYI</p></blockquote><p><img src="http://cdn.zsenhe.com/36e16e7ad2a5430bb4bad2fd98183a76" alt="mysql1443.png"><br></br>è¿™æ ·å°±å®Œæˆè¡¨ä¿®å¤çš„å·¥ä½œäº†</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‡å®šæ—¶é—´åŒºé—´å†…è®¡ç®—ä¸åŒé—´éš”å‘¨æœŸçš„å°å®ç°</title>
      <link href="/2022/02/23/%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E5%8C%BA%E9%97%B4%E5%86%85%E8%AE%A1%E7%AE%97%E4%B8%8D%E5%90%8C%E9%97%B4%E9%9A%94%E5%91%A8%E6%9C%9F%E7%9A%84%E5%B0%8F%E5%AE%9E%E7%8E%B0/"/>
      <url>/2022/02/23/%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E5%8C%BA%E9%97%B4%E5%86%85%E8%AE%A1%E7%AE%97%E4%B8%8D%E5%90%8C%E9%97%B4%E9%9A%94%E5%91%A8%E6%9C%9F%E7%9A%84%E5%B0%8F%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>æ¥åˆ°ä¸€ä¸ªå°éœ€æ±‚ï¼Œéœ€è¦åœ¨æŒ‡å®šæ—¶é—´æ®µé‡Œæ¯éš”xåˆ†é’Ÿè·‘ä¸€æ®µé€»è¾‘ï¼ˆå¦‚9:0:0-3:0:0 æ¯éš”90åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡)<br>åŸå…ˆæ‰“ç®—ç”¨Quartzå®ç°ï¼Œç¿»é˜…äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œä¼¼ä¹æ— æ³•åšåˆ°59åˆ†é’Ÿä¹‹å¤–çš„å¢é‡ã€‚è€Œä¸”ä¸ºäº†è¿™ä¹ˆå°ä¸€ä¸ªéœ€æ±‚ç¡¬å¡ä¸€ä¸ªåº“è¿›å»æ„Ÿè§‰æœ‰ç‚¹ä¸å¦¥<br>æŠ˜è…¾äº†ä¸€ä¸‹åˆï¼Œåœ¨æ­¤æŠŠä»£ç è®°å½•ä¸€ä¸‹ï¼Œæœ‰ç©ºåŠ è¿›è‡ªå·±çš„ç±»åº“æ•´ç†æˆå·¥å…·ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TrSchedule</span>&#123;</span><br><span class="line">    <span class="comment">//èµ·å§‹æ—¶é—´ 24å°æ—¶åˆ¶</span></span><br><span class="line">    LocalDateTime startDate;</span><br><span class="line">    <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">    LocalDateTime endDate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é—´éš”åˆ†é’Ÿ</span></span><br><span class="line">    <span class="type">long</span> delay;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TrSchedule</span><span class="params">(String text)</span>&#123;</span><br><span class="line">        String[] split = text.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        String[] startDateSplit = split[<span class="number">0</span>].split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        startDate = LocalDateTime.now();</span><br><span class="line">        startDate = startDate.withHour(Integer.valueOf(startDateSplit[<span class="number">0</span>]))</span><br><span class="line">                .withMinute(Integer.valueOf(startDateSplit[<span class="number">1</span>])).withSecond(Integer.valueOf(startDateSplit[<span class="number">2</span>]));</span><br><span class="line">        String[] endDateSplit = split[<span class="number">1</span>].split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        endDate = LocalDateTime.now();</span><br><span class="line">        endDate = endDate.withHour(Integer.valueOf(endDateSplit[<span class="number">0</span>]))</span><br><span class="line">                .withMinute(Integer.valueOf(endDateSplit[<span class="number">1</span>])).withSecond(Integer.valueOf(endDateSplit[<span class="number">2</span>]));</span><br><span class="line">        delay = Long.parseLong(split[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getStartDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> startDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> LocalDateTime <span class="title function_">getEndDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> endDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getDelay</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> delay;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•ç”¨ï¼Œå­˜å‚¨æ—¶é—´</span></span><br><span class="line">    <span class="keyword">static</span> LocalDateTime nextTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å­˜å‚¨æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">    <span class="keyword">static</span> <span class="type">long</span> time;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">DateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">        time = <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¾“å‡ºå½“å‰æ—¶é—´</span></span><br><span class="line">        nextTime = LocalDateTime.now();</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰æ—¶é—´:&quot;</span>+nextTime);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¡¨è¾¾å¼ (æ—©ä¸Š</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">cron</span> <span class="operator">=</span> <span class="string">&quot;9:0:0,3:0:0,90&quot;</span>;</span><br><span class="line">        <span class="type">TrSchedule</span> <span class="variable">trSchedule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TrSchedule</span>(cron);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++)&#123;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="type">long</span> <span class="variable">m</span> <span class="operator">=</span> getLastNextTimeM(nextTime,trSchedule);</span><br><span class="line">            time = (time==<span class="number">0L</span>)?System.currentTimeMillis()+(m*<span class="number">60</span>*<span class="number">1000</span>):time+(m*<span class="number">60</span>*<span class="number">1000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;å¼€å§‹ç¬¬&quot;</span>+i+<span class="string">&quot;å‘¨æœŸä»»åŠ¡è¿˜éœ€&quot;</span>+m+<span class="string">&quot;åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:&quot;</span>+dateFormat.format(<span class="keyword">new</span> <span class="title class_">Date</span>(time))+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getLastNextTimeM</span><span class="params">(LocalDateTime currentDate,TrSchedule trSchedule)</span>&#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">startDate</span> <span class="operator">=</span> trSchedule.getStartDate().withDayOfMonth(currentDate.getDayOfMonth()).withDayOfYear(currentDate.getDayOfYear());</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">endDate</span> <span class="operator">=</span> trSchedule.getEndDate().withDayOfMonth(currentDate.getDayOfMonth()).withDayOfYear(currentDate.getDayOfYear());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœåŒºé—´ç»“æŸæ—¶é—´åœ¨å¼€å§‹æ—¶é—´ä¹‹å‰(å¦‚8:00:0-3:0:0)</span></span><br><span class="line">        <span class="keyword">if</span>(endDate.isBefore(startDate))</span><br><span class="line">            <span class="comment">//å°†ç»“æŸæ—¶é—´è°ƒæ•´ä¸ºä¸‹ä¸€å¤©</span></span><br><span class="line">            endDate = endDate.plusDays(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å½“å‰æ—¶é—´åœ¨åŒºé—´ç»“æŸæ—¶é—´ä¹‹åæ—¶</span></span><br><span class="line">        <span class="keyword">if</span>(currentDate.isAfter(endDate))&#123;</span><br><span class="line">            nextTime = startDate.plusDays(<span class="number">1</span>).plusMinutes(trSchedule.getDelay());</span><br><span class="line">            <span class="keyword">return</span> getLast(currentDate,startDate.getHour(),startDate.getMinute(),startDate.getSecond())+trSchedule.getDelay();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å½“å‰æ—¶é—´åœ¨å¼€å§‹æ—¶é—´ä¹‹å‰</span></span><br><span class="line">        <span class="keyword">if</span>(currentDate.isBefore(startDate))&#123;</span><br><span class="line">            <span class="comment">// è®¡ç®—è·ç¦»å¼€å§‹æ—¶é—´è¿˜æœ‰å¤šä¹…ï¼Œå†åŠ ä¸Šé—´éš”æ—¶é—´è¿”å›</span></span><br><span class="line">            <span class="type">long</span> <span class="variable">rm</span> <span class="operator">=</span> getLast(currentDate,startDate.getHour(),startDate.getMinute(),startDate.getSecond())+trSchedule.getDelay();</span><br><span class="line">            nextTime = currentDate.plusMinutes(rm);</span><br><span class="line">            <span class="keyword">return</span> rm;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(currentDate.isAfter(startDate))&#123;</span><br><span class="line">            <span class="comment">//è¿”å›çš„æ—¶é—´è¶…å‡ºåŒºé—´æ—¶</span></span><br><span class="line">            <span class="keyword">if</span>(currentDate.plusMinutes(trSchedule.getDelay()).isAfter(endDate))&#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">rm</span> <span class="operator">=</span> getLast(currentDate,startDate.getHour(),startDate.getMinute(),startDate.getSecond())+trSchedule.getDelay();</span><br><span class="line">                nextTime = currentDate.plusMinutes(rm);</span><br><span class="line">                <span class="keyword">return</span> rm;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¿”å›çš„æ—¶é—´æœªè¶…å‡ºåŒºé—´</span></span><br><span class="line">            nextTime = currentDate.plusMinutes(trSchedule.getDelay());</span><br><span class="line">            <span class="keyword">return</span> trSchedule.getDelay();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¡ç®— currentTime ä¸ ä¼ å…¥ æ—¶åˆ†ç§’ è¿˜é—´éš”å¤šå°‘åˆ†é’Ÿ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getLast</span><span class="params">(LocalDateTime currentTime,<span class="type">int</span> hour, <span class="type">int</span> minute,<span class="type">int</span> s)</span> &#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">time</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        time = time.withHour(hour);</span><br><span class="line">        time = time.withMinute(minute);</span><br><span class="line">        time = time.withSecond(<span class="number">0</span>);</span><br><span class="line">        time = time.withDayOfMonth(currentTime.getDayOfMonth());</span><br><span class="line">        time = time.withDayOfYear(currentTime.getDayOfYear());</span><br><span class="line">        <span class="keyword">if</span> (time.isBefore(currentTime))</span><br><span class="line">            time = time.plusDays(<span class="number">1L</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">re</span> <span class="operator">=</span> time.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli();</span><br><span class="line">        <span class="keyword">return</span> (re - currentTime.atZone(ZoneId.systemDefault()).toInstant().toEpochMilli()) / <span class="number">1000L</span>/<span class="number">60L</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>printæµ‹è¯•ä¸€ä¸‹å§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰æ—¶é—´:2022-02-23T01:16:55.351</span><br><span class="line">å¼€å§‹ç¬¬0å‘¨æœŸä»»åŠ¡è¿˜éœ€553åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 10:29:55)</span><br><span class="line">å¼€å§‹ç¬¬1å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 11:59:55)</span><br><span class="line">å¼€å§‹ç¬¬2å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 13:29:55)</span><br><span class="line">å¼€å§‹ç¬¬3å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 14:59:55)</span><br><span class="line">å¼€å§‹ç¬¬4å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 16:29:55)</span><br><span class="line">å¼€å§‹ç¬¬5å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 17:59:55)</span><br><span class="line">å¼€å§‹ç¬¬6å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 19:29:55)</span><br><span class="line">å¼€å§‹ç¬¬7å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 20:59:55)</span><br><span class="line">å¼€å§‹ç¬¬8å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 22:29:55)</span><br><span class="line">å¼€å§‹ç¬¬9å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-23 23:59:55)</span><br><span class="line">å¼€å§‹ç¬¬10å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 01:29:55)</span><br><span class="line">å¼€å§‹ç¬¬11å‘¨æœŸä»»åŠ¡è¿˜éœ€540åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 10:29:55)</span><br><span class="line">å¼€å§‹ç¬¬12å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 11:59:55)</span><br><span class="line">å¼€å§‹ç¬¬13å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 13:29:55)</span><br><span class="line">å¼€å§‹ç¬¬14å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 14:59:55)</span><br><span class="line">å¼€å§‹ç¬¬15å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 16:29:55)</span><br><span class="line">å¼€å§‹ç¬¬16å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 17:59:55)</span><br><span class="line">å¼€å§‹ç¬¬17å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 19:29:55)</span><br><span class="line">å¼€å§‹ç¬¬18å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 20:59:55)</span><br><span class="line">å¼€å§‹ç¬¬19å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 22:29:55)</span><br><span class="line">å¼€å§‹ç¬¬20å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-24 23:59:55)</span><br><span class="line">å¼€å§‹ç¬¬21å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 01:29:55)</span><br><span class="line">å¼€å§‹ç¬¬22å‘¨æœŸä»»åŠ¡è¿˜éœ€540åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 10:29:55)</span><br><span class="line">å¼€å§‹ç¬¬23å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 11:59:55)</span><br><span class="line">å¼€å§‹ç¬¬24å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 13:29:55)</span><br><span class="line">å¼€å§‹ç¬¬25å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 14:59:55)</span><br><span class="line">å¼€å§‹ç¬¬26å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 16:29:55)</span><br><span class="line">å¼€å§‹ç¬¬27å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 17:59:55)</span><br><span class="line">å¼€å§‹ç¬¬28å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 19:29:55)</span><br><span class="line">å¼€å§‹ç¬¬29å‘¨æœŸä»»åŠ¡è¿˜éœ€90åˆ†é’Ÿ(æ‰§è¡Œæ—¶é—´:2022-02-25 20:59:55)</span><br></pre></td></tr></table></figure><p>ä¸¢ç”Ÿäº§ç¯å¢ƒä¸Šè·‘ï¼Œæ ¹æ®ä¸åŒæ—¶é—´åˆ†é…ä¸åŒçš„è¡¨è¾¾å¼ï¼Œç®—æ˜¯å®Œæˆäº†ä»»åŠ¡ï¼Œæœ‰æ—¶é—´å†æƒ³åŠæ³•ä¼˜åŒ–ä»£ç 8<br><img src="http://cdn.zsenhe.com/54d45468deb347639f9581cba57d905c" alt="cron.png"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linuxä¸‹å¤šç”¨æˆ·ç®¡ç†åŠæƒé™çš„æè¿°</title>
      <link href="/2022/02/14/linux%E4%B8%8B%E5%A4%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%8F%8A%E6%9D%83%E9%99%90%E7%9A%84%E6%8F%8F%E8%BF%B0/"/>
      <url>/2022/02/14/linux%E4%B8%8B%E5%A4%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%8F%8A%E6%9D%83%E9%99%90%E7%9A%84%E6%8F%8F%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å°†hexoåšå®¢è¿ç§»åˆ°äº†è…¾è®¯äº‘çš„linux(centos)æœåŠ¡å™¨ä¸Š,åœ¨è¿™é‡Œè®°å½•linuxä¸‹å¤šç”¨æˆ·ç®¡ç†ç»„çš„ä¸€äº›çŸ¥è¯†ç‚¹,æ–¹ä¾¿ç”¨çš„æ—¶å€™æŸ¥é˜…</p><h2 id="ç»„çš„æ¦‚å¿µ"><a href="#ç»„çš„æ¦‚å¿µ" class="headerlink" title="ç»„çš„æ¦‚å¿µ"></a>ç»„çš„æ¦‚å¿µ</h2><blockquote><p>Linuxä½œä¸ºå¤šç”¨æˆ·æ“ä½œç³»ç»Ÿï¼Œä½¿ç”¨ç»„çš„æ¦‚å¿µæ¥æ›´æ–¹ä¾¿çš„ç®¡ç†æƒé™ã€‚åœ¨linuxä¸­æ¯ä¸ªç”¨æˆ·éƒ½å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œä¸èƒ½ç‹¬ç«‹äºç»„ä¹‹å¤–ã€‚æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤æ¥ç®¡ç†ç»„</p></blockquote><p>groupadd [group] åˆ›å»ºç»„<br>groupdel [group] åˆ é™¤ç»„<br>åˆ›å»ºç”¨æˆ·æ—¶ï¼Œå¯ä»¥è¿½åŠ -gæ¥æŒ‡å®šç»„ã€‚å¦‚ä¸æŒ‡å®šç»„ï¼Œå°†è‡ªåŠ¨åˆ›å»ºç”¨æˆ·åŒåç»„æ¥å…³è”ç”¨æˆ·ã€‚<br>useradd -g [group] [user]</p><h3 id="å¯¹äºæ–‡ä»¶"><a href="#å¯¹äºæ–‡ä»¶" class="headerlink" title="å¯¹äºæ–‡ä»¶"></a>å¯¹äºæ–‡ä»¶</h3><p>å¯¹äºæ–‡ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µ:<br><img src="http://cdn.zsenhe.com/4cb3c5c98db94b628000bbdeabc3f206" alt="filegroup.png"><br>å¦‚å›¾æ‰€ç¤º,æ–‡ä»¶å¯ä»¥åˆ†é…ä»¥ä¸‰ä¸ªå±‚æ¬¡ä¸åŒçš„æƒé™</p><blockquote><p>æ‰€æœ‰è€…(ä¸€èˆ¬ä¸ºæ–‡ä»¶çš„åˆ›å»ºè€…)ã€æ‰€åœ¨ç»„(é»˜è®¤ä¸ºåˆ›å»ºæ–‡ä»¶ç”¨æˆ·æ‰€åœ¨ç»„)ã€å…¶ä»–ç»„(éæ‰€æœ‰è€…,æ‰€åœ¨ç»„ä»¥å¤–çš„æ‰€æœ‰ç”¨æˆ·)</p></blockquote><h2 id="Linuxä¸­æƒé™çš„è¡¨ç¤º"><a href="#Linuxä¸­æƒé™çš„è¡¨ç¤º" class="headerlink" title="Linuxä¸­æƒé™çš„è¡¨ç¤º"></a>Linuxä¸­æƒé™çš„è¡¨ç¤º</h2><p>åœ¨äº†è§£äº†ç»„çš„æ¦‚å¿µåï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥å¼•å‡ºæƒé™çš„è¡¨ç¤ºã€‚ä»¥ä¸‹æ˜¯ls -lå‘½ä»¤æ‰“å°å‡ºçš„æ–‡ä»¶ä¿¡æ¯</p><blockquote><p>-rwxrâ€“rw-. 1 root root 13 2æœˆ  14 09:18 example.txt</p></blockquote><p><strong>-rwxrâ€“rw-</strong><br>è¿™é‡Œä¾¿æ˜¯æƒé™çš„è¡¨ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨0-9çš„ç´¢å¼•ä¸ºå®ƒè¿›è¡Œåˆ†ç±»è§£é‡Š<br>é¦–ä½ä»£è¡¨æ–‡ä»¶ç±»å‹ (ç¤ºä¾‹ä¸­çš„-è¡¨ç¤ºæ™®é€šæ–‡ä»¶,è¿˜æœ‰dåˆ™ä»£è¡¨ç›®å½•,bä»£è¡¨å—æ–‡ä»¶ç­‰)<br>ä¹‹åæ¯3ä¸ªå­—ç¬¦æ‹†åˆ†ï¼Œè¡¨ç¤ºåˆ†é…ä¸åŒçš„æƒé™ç»™3ä¸ªè§’è‰²<br>ä¾æ¬¡ä¸ºä»¥ä¸Šç»„æ¦‚å¿µä¸­è§£é‡Šçš„ æ‰€æœ‰è€…(u),æ‰€åœ¨ç»„(g),å…¶ä»–ç»„(o)<br>linuxä¸­æ–‡ä»¶è‡³å°‘æœ‰ä¸‰ç§æƒé™ï¼Œå¸¸è§çš„å¦‚ä¸‹<br><strong>r(read)</strong> è¯»å–:<br>    å¦‚ä½œç”¨äºç›®å½•ï¼Œåˆ™æ§åˆ¶æ˜¯å¦å¯ä»¥åˆ—å‡ºç›®å½•å†…å®¹(lså‘½ä»¤)<br><strong>w(write)</strong> å†™å…¥:<br>    å¦‚ä½œç”¨äºç›®å½•ï¼Œåˆ™æ§åˆ¶æ˜¯å¦å¯åˆ›å»ºåˆ é™¤å†…å®¹<br><strong>x(execute)</strong> æ‰§è¡Œ:<br>    å¦‚ä½œç”¨äºç›®å½•ï¼Œåˆ™æ§åˆ¶æ˜¯å¦å¯ä»¥è®¿é—®ç›®å½•å†…å®¹<br>(å¦‚ä»¥ä¸Šçš„ä¾‹å­,1-3ç´¢å¼•çš„å†…å®¹ â€œrwxâ€ åˆ™ä»£è¡¨æ‰€æœ‰è€…è¯»å†™æ‰§è¡Œçš„æƒé™,æœªå¼€æ”¾çš„æƒé™ä½¿ç”¨â€-â€œå ä½)</p><h3 id="chmodç”¨æˆ·ã€ç»„æƒé™ç®¡ç†"><a href="#chmodç”¨æˆ·ã€ç»„æƒé™ç®¡ç†" class="headerlink" title="chmodç”¨æˆ·ã€ç»„æƒé™ç®¡ç†"></a>chmodç”¨æˆ·ã€ç»„æƒé™ç®¡ç†</h3><p>ä¿®æ”¹æ–‡ä»¶å¯¹ä¸åŒè§’è‰²çš„æƒé™ï¼Œä½¿ç”¨chmodå‘½ä»¤è¿›è¡Œæ“ä½œï¼Œå¦‚ä¸‹<br><strong>chmod o&#x3D;rw example.txt</strong><br>oæŒ‡ä»£å…¶ä»–ç»„(Otherçš„ç®€å†™,æ­¤å¤–è¿˜æœ‰æ‰€æœ‰è€…â€uâ€,æ‰€åœ¨ç»„â€gâ€)<br>&#x3D;ä»£è¡¨è®¾ç½®æƒé™ï¼Œé™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨â€+â€ã€â€-â€œå•ç‹¬å¢åˆ æƒé™ï¼Œå¦‚ä¸‹</p><blockquote><p>chmod u-r example.txt</p></blockquote><p>è¿™ä¾¿æ˜¯åˆ é™¤æ‰€æœ‰è€…(User)çš„è¯»å–(Read)æƒé™</p><h3 id="ç”¨äºŒè¿›åˆ¶æ–¹æ³•è¡¨ç¤ºæƒé™"><a href="#ç”¨äºŒè¿›åˆ¶æ–¹æ³•è¡¨ç¤ºæƒé™" class="headerlink" title="ç”¨äºŒè¿›åˆ¶æ–¹æ³•è¡¨ç¤ºæƒé™"></a>ç”¨äºŒè¿›åˆ¶æ–¹æ³•è¡¨ç¤ºæƒé™</h3><p>æƒé™é»˜è®¤ä½¿ç”¨rwxæ¥åˆ†åˆ«è¡¨ç¤ºè¯»å†™æ‰§è¡Œï¼Œä¸ºç®€åŒ–è¯¥è¾“å…¥æ“ä½œï¼Œlinuxå¼•å…¥äº†äºŒè¿›åˆ¶è¡¨ç¤ºæ–¹æ³•<br>å¦‚æœ‰æƒé™è¡¨ç¤º1,æ— æƒé™è¡¨ç¤º0,æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„ç­‰ä»·å…³ç³»<br>rwx &#x3D; 111<br>rw- &#x3D; 110<br>r-x &#x3D; 101<br>râ€“ &#x3D; 100<br>æˆ‘ä»¬å°†ä»–è½¬åŒ–ä¸ºåè¿›åˆ¶<br>rwx &#x3D; 111 &#x3D; 4+2+1 &#x3D; 7<br>rw- &#x3D; 110 &#x3D; 6<br>r-x &#x3D; 101 &#x3D; 5<br>râ€“ &#x3D; 100 &#x3D; 4<br>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°<br>r&#x3D;4,w&#x3D;2,x&#x3D;1<br>è¿™æ ·ï¼Œä»¥ä¸Šçš„æ“ä½œå°±éƒ½å¯ä»¥ç®€åŒ–æ‰äº†<br>chmod u&#x3D;rwx,g&#x3D;rw-,o&#x3D;râ€“ example.txt<br>ç­‰ä»·äº<br>chmod 764 example.txt<br>è¾“å‡ºä»¥ä¸‹çœ‹çœ‹æƒé™è¡¨ç¤º</p><blockquote><p>-rwxrw-râ€“. 1 root root 13 2æœˆ  14 09:18 example.txt</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaçš„åå°„æœºåˆ¶åŠä½¿ç”¨ç¬”è®°</title>
      <link href="/2022/01/18/Java%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E5%8F%8A%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/01/18/Java%E7%9A%84%E5%8F%8D%E5%B0%84%E6%9C%BA%E5%88%B6%E5%8F%8A%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>åå°„æ˜¯æŒ‡javaåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿè·å–å¹¶è°ƒç”¨ä»»æ„ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•;<br>å¦‚åŒæ˜¯ç±»åŠ è½½çš„è¿‡ç¨‹,å°†ç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…æˆå…¶ä»–å¯¹è±¡ï¼ˆField,Method,Constructor),è¿™ä¾¿å®Œæˆäº†ä¸€æ¬¡åå°„<br><img src="http://cdn.zsenhe.com/96e8b05847264b5580234aac23f00fe2" alt="åå°„.png"><br>(ç³»ç»Ÿè‡ªå¸¦çš„ç”»å›¾åšè¿™ç§å›¾æŒºé¡ºæ‰‹çš„</p><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨åå°„ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨åå°„ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨åå°„ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨åå°„ï¼Ÿ</h3><p>åœ¨åå°„é¢å‰,æ²¡æœ‰ä»»ä½•æƒé™ä¿®é¥°çš„æ¦‚å¿µ,è¿ç”¨åå°„å¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ“ä½œä»»æ„å¯¹è±¡;åŒæ—¶å¯ä»¥è§£è€¦ï¼Œæé«˜ç¨‹åºçš„å¯æ‰©å±•æ€§ï¼Œä»£ç çš„çµæ´»æ€§ã€‚</p><h2 id="ä½¿ç”¨åå°„"><a href="#ä½¿ç”¨åå°„" class="headerlink" title="ä½¿ç”¨åå°„"></a>ä½¿ç”¨åå°„</h2><h3 id="è·å–Classå¯¹è±¡"><a href="#è·å–Classå¯¹è±¡" class="headerlink" title="è·å–Classå¯¹è±¡"></a>è·å–Classå¯¹è±¡</h3><p>åœ¨è¿›è¡Œæ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è·å–Classå¯¹è±¡</p><ul><li>è·å–Classå¯¹è±¡çš„æ–¹å¼<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.Class.forName(&quot;ç±»å&quot;); å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œå¹¶è¿”å›Classå¯¹è±¡(è¯¦ç»†åŒ…è·¯å¾„)</span><br><span class="line">2.ç±»å.class; é€šè¿‡ç±»åçš„classå±æ€§æ¥è·å–Classå¯¹è±¡</span><br><span class="line">3.Object.getClass(); é€šè¿‡ç»§æ‰¿Objectç±»ä¸‹çš„getClass()æ¥è·å–Classå¯¹è±¡</span><br></pre></td></tr></table></figure></li></ul><p>æŠ½è±¡äº†ä¸€ä¸ªæµ‹è¯•ç”¨çš„Bookç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> price;</span><br><span class="line">    <span class="keyword">public</span> String author;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(String name)</span>&#123;&#125;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥è·å–Classå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class bookClass = Book.class;</span><br><span class="line">System.out.println(bookClass);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æ§åˆ¶å°æ‰“å°</p><blockquote><p>class reflect.Book</p></blockquote><p>ä¸åŒçš„è·å–Classæ–¹æ³•é€‚ç”¨äºä¸åŒçš„ä½¿ç”¨åœºæ™¯,ä½†éœ€çŸ¥ä¸€ä¸ªç±»åªä¼šäº§ç”Ÿä¸€ä¸ªclasså¯¹è±¡.</p><h3 id="è·å–Field"><a href="#è·å–Field" class="headerlink" title="è·å–Field"></a>è·å–Field</h3><p>åœ¨è·å–Classå¯¹è±¡åï¼Œä¾¿å¯ä»¥è°ƒç”¨å…¶ä¸­çš„æˆå‘˜å˜é‡äº†<br>Classä½¿ç”¨Fieldæè¿°æˆå‘˜å˜é‡ï¼Œä»¥ä¸‹æ˜¯è·å–æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.Field[] getFields(); è·å–æ‰€æœ‰publicä¿®é¥°çš„æˆå‘˜å˜é‡</span><br><span class="line">2.Field getField(String name); æ ¹æ®æˆå‘˜å˜é‡åè·å–</span><br><span class="line">3.Field[] getDeclaredFields(); è·å–æ‰€æœ‰æˆå‘˜å˜é‡(åŒ…æ‹¬ç§æœ‰å˜é‡)</span><br><span class="line">4.Field getDeclaredField(String name); æ ¹æ®æˆå‘˜å˜é‡åè·å–(åŒ…æ‹¬ç§æœ‰å˜é‡)</span><br></pre></td></tr></table></figure><ul><li>åœ¨è·å–æˆå‘˜å˜é‡Fieldåï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè·å–ä¸è®¾ç½®å€¼æ“ä½œ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set(Object obj,Object value); è®¾ç½®å€¼</span><br><span class="line">get(Object obj); è·å–å€¼</span><br></pre></td></tr></table></figure></li></ul><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">bookClass</span> <span class="operator">=</span> Book.class;</span><br><span class="line">    System.out.println(bookClass);</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;ç²¾çµå®é’»&quot;</span>,<span class="string">&quot;æ‰˜å°”é‡‘&quot;</span>,<span class="number">80</span>);</span><br><span class="line">    <span class="comment">//è·å–æ‰€æœ‰publicä¿®é¥°çš„æˆå‘˜å˜é‡</span></span><br><span class="line">    Field[] fields = bookClass.getFields();</span><br><span class="line">    <span class="keyword">for</span>(Field field : fields)&#123;</span><br><span class="line">        System.out.println(field);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;---------&quot;</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">author</span> <span class="operator">=</span> bookClass.getField(<span class="string">&quot;author&quot;</span>);</span><br><span class="line">    <span class="comment">//è·å–bookå¯¹è±¡æˆå‘˜å˜é‡authorçš„å€¼</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> author.get(book);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">    System.out.println(<span class="string">&quot;---------&quot;</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®bookå¯¹è±¡æˆå‘˜å˜é‡authorçš„å€¼</span></span><br><span class="line">    author.set(book,<span class="string">&quot;çº¦ç¿°Â·ç½—çº³å¾·Â·ç‘å°”Â·æ‰˜å°”é‡‘&quot;</span>);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">    <span class="comment">//è·å–ç§æœ‰æˆå‘˜å˜é‡Price</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">priceField</span> <span class="operator">=</span> bookClass.getDeclaredField(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">    <span class="comment">//å¿½ç•¥è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥(æš´åŠ›åå°„)</span></span><br><span class="line">    priceField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">value2</span> <span class="operator">=</span> priceField.get(book);</span><br><span class="line">    System.out.println(value2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡º</p><blockquote><p>class reflect.Book<br>public java.lang.String reflect.Book.author<br>&#x2F;â€”â€”â€”<br>æ‰˜å°”é‡‘<br>&#x2F;â€”â€”â€”<br>çº¦ç¿°Â·ç½—çº³å¾·Â·ç‘å°”Â·æ‰˜å°”é‡‘<br>80</p></blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è®¿é—®ç§æœ‰æˆå‘˜å˜é‡(æš´åŠ›åå°„)çš„æ—¶å€™ï¼Œéœ€è¦å…ˆä½¿ç”¨setAccessible(boolean bool)æ¥å¿½ç•¥æƒé™ä¿®é¥°ç¬¦</p><h3 id="è·å–Constructor"><a href="#è·å–Constructor" class="headerlink" title="è·å–Constructor"></a>è·å–Constructor</h3><p>Constructorç”¨ä»¥æè¿°ç±»æ„é€ å™¨,ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥è·å–Constructorå¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.Constructor&lt;?&gt;[] getConstructors()  </span><br><span class="line">2.Constructor&lt;T&gt; getConstructor(ç±»&lt;?&gt;... parameterTypes)  </span><br><span class="line"></span><br><span class="line">3.Constructor&lt;?&gt;[] getDeclaredConstructors()  </span><br><span class="line">4.Constructor&lt;T&gt; getDeclaredConstructor(ç±»&lt;?&gt;... parameterTypes)</span><br><span class="line">æ–¹æ³•çš„æè¿°ä¸ä¸Šæ–‡ä¸­Fieldçš„è·å–ç›¸åŒ,æ•…ä¸å†èµ˜è¿°</span><br></pre></td></tr></table></figure><ul><li>Constructorä¸‹æœ‰å‡ ç§æ–¹æ³•ç”¨ä»¥åˆ›å»ºæ–°çš„ç±»å¯¹è±¡<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T newInstance(Object... initargs);</span><br><span class="line">å€¼çš„ç•™æ„çš„æ˜¯,å½“ä½¿ç”¨ç©ºå‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡æ—¶ï¼Œç›´æ¥ä½¿ç”¨Classä¸‹çš„newInstace()å³å¯</span><br></pre></td></tr></table></figure></li></ul><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">bookClass</span> <span class="operator">=</span> Book.class;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;ç²¾çµå®é’»&quot;</span>,<span class="string">&quot;æ‰˜å°”é‡‘&quot;</span>,<span class="number">80</span>);</span><br><span class="line">    <span class="comment">//è·å–æ„é€ å™¨å¯¹è±¡constructor</span></span><br><span class="line">    Constructor&lt;Book&gt; constructor = bookClass.getConstructor(String.class);</span><br><span class="line">    <span class="comment">//ä½¿ç”¨æ„é€ å™¨åˆ›å»ºæ–°çš„å¯¹è±¡</span></span><br><span class="line">    <span class="type">Book</span> <span class="variable">newBook</span> <span class="operator">=</span> constructor.newInstance(<span class="string">&quot;é­”æˆ’&quot;</span>);</span><br><span class="line">    System.out.println(newBook.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡º</p><blockquote><p>é­”æˆ’</p></blockquote><h3 id="è·å–Method"><a href="#è·å–Method" class="headerlink" title="è·å–Method"></a>è·å–Method</h3><p>Methodä»£è¡¨æˆå‘˜æ–¹æ³•,ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼è·å–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.Method[] getMethods()  </span><br><span class="line">2.Method getMethod(String name, ç±»&lt;?&gt;... parameterTypes)  </span><br><span class="line"></span><br><span class="line">3.Method[] getDeclaredMethods()  </span><br><span class="line">4.Method getDeclaredMethod(String name, ç±»&lt;?&gt;... parameterTypes)</span><br></pre></td></tr></table></figure><ul><li>Methodä¸‹çš„æ–¹æ³•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object invoke(Object obj, Object... args); æ‰§è¡Œæ–¹æ³•</span><br></pre></td></tr></table></figure></li></ul><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">bookClass</span> <span class="operator">=</span> Book.class;</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;ç²¾çµå®é’»&quot;</span>,<span class="string">&quot;æ‰˜å°”é‡‘&quot;</span>,<span class="number">80</span>);</span><br><span class="line">    <span class="comment">//è·å–Method</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> bookClass.getMethod(<span class="string">&quot;setName&quot;</span>,String.class);</span><br><span class="line">    <span class="comment">//æ‰§è¡ŒMethodæ–¹æ³•</span></span><br><span class="line">    method.invoke(book,<span class="string">&quot;è´ä¼¦ä¸éœ²è¥¿æ©&quot;</span>);</span><br><span class="line">    System.out.println(book.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°è¾“å‡º</p><blockquote><p>è´ä¼¦ä¸éœ²è¥¿æ©</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
