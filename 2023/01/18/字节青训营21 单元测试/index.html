<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="zsh-blog"><title>å­—èŠ‚é’è®­è¥2.1å•å…ƒæµ‹è¯• | meteor(zsh)</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">å­—èŠ‚é’è®­è¥2.1å•å…ƒæµ‹è¯•</h1><a id="logo" href="/.">meteor(zsh)</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> ç®€å†</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">å­—èŠ‚é’è®­è¥2.1å•å…ƒæµ‹è¯•</h1><div class="post-meta">2023-01-18<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.4k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 5</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><div class="post-content"><p>::: hljs-center</p>
<p><img src="https://p4.itc.cn/q_70/images03/20210302/5f41916b1f4f43e28cf88e71b2fb7da6.gif" alt="https://p4.itc.cn/q_70/images03/20210302/5f41916b1f4f43e28cf88e71b2fb7da6.gif"></p>
<p>:::<br>::: hljs-center</p>
<p> <font size="6">å•å…ƒæµ‹è¯•</font></p>
<p>:::</p>
<p>åœ¨å­¦ä¹ é˜¶æ®µç»ƒæ‰‹çš„é¡¹ç›®é€šå¸¸ä¼šç›´æ¥ä¸¢åˆ°ç¯å¢ƒä¸Šå»è·‘ï¼Œæœ‰äº†BUGå°±ç°ä¿®;åœ¨ä¼ä¸šå¼€å‘æ—¶ï¼Œä¸€ä¸ªå°å°çš„BUGå¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„æŸå¤±ï¼Œå› æ­¤åœ¨ç¨‹åºä¸Šçº¿å‰å¯¹ç¨‹åºè¿›è¡Œæµ‹è¯•æ—¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p><img src="http://cdn.zsenhe.com/9508942dafaa4d54bdb47fb5d28a9816" alt="image.png"><br>æµ‹è¯•ç±»å‹åˆ†ä¸º <strong>å›å½’æµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•</strong></p>
<p>å›å½’æµ‹è¯•æ˜¯æŒ‡åœ¨å‘ç”Ÿä¿®æ”¹ä¹‹åé‡æ–°æµ‹è¯•å…ˆå‰çš„æµ‹è¯•ä»¥ä¿è¯ä¿®æ”¹çš„æ­£ç¡®æ€§ã€‚ç†è®ºä¸Šï¼Œè½¯ä»¶äº§ç”Ÿæ–°ç‰ˆæœ¬ï¼Œéƒ½éœ€è¦è¿›è¡Œå›å½’æµ‹è¯•ï¼ŒéªŒè¯ä»¥å‰å‘ç°å’Œä¿®å¤çš„é”™è¯¯æ˜¯å¦åœ¨æ–°è½¯ä»¶ç‰ˆæœ¬ä¸Šå†æ¬¡å‡ºç°;é›†æˆæµ‹è¯•åˆ™æ˜¯ä½¿ç”¨ä¸€äº›è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œè¿›è¡Œå¤šæ¬¡çš„å›å½’æµ‹è¯•æ“ä½œ</p>
<p>å•å…ƒæµ‹è¯•åˆ™æ˜¯åœ¨ä»£ç ç»´åº¦ï¼Œå¦‚å¼€å‘æ—¶å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•ã€‚ä»ä¸Šç”±ä¸‹çš„çš„è¦†ç›–ç‡å’Œæˆæœ¬æ˜¯é€æ­¥é™ä½çš„ï¼Œæ‰€ä»¥è¯´å•å…ƒæµ‹è¯•çš„è¦†ç›–ç‡åœ¨å¾ˆé«˜ç¨‹åº¦ä¸Šå†³å®šç€è´¨é‡</p>
<p><strong><font size="4">å•å…ƒæµ‹è¯•çš„ç»„æˆéƒ¨åˆ†</font></strong></p>
<p><img src="http://cdn.zsenhe.com/c770fa5a060e435bac4225560098b142" alt="image.png"></p>
<p>å•å…ƒæµ‹è¯•çš„ç»„æˆéƒ¨åˆ†åŒ…æ‹¬: <strong>è¾“å…¥,æµ‹è¯•å•å…ƒ,è¾“å‡º,ä¸æœŸæœ›è¾“å‡ºçš„æ ¡å¯¹</strong> æµ‹è¯•å•å…ƒçš„åŒ…æ‹¬è¾ƒä¸ºå®½æ³›ï¼Œå¦‚åŒ…å«: å‡½æ•°ï¼Œæ¥å£ï¼Œæ¨¡å—ï¼Œèšåˆçš„ä¸€äº›å¤§å‡½æ•°;é€šè¿‡è¾“å‡ºä¸æœŸæœ›å€¼æ ¡å¯¹æ¥ååº”æ˜¯å¦å’Œé¢„æœŸçš„æ•ˆæœç›¸ç¬¦</p>
<p>é€šè¿‡å¤šä¸ªå•å…ƒæµ‹è¯•æˆ‘ä»¬å¯ä»¥ä¿è¯ä»£ç çš„è´¨é‡ï¼Œæ¯æ¬¡å¯¹æ–°çš„æ¨¡å—è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¸€æ–¹é¢å¯ä»¥ä¿è¯æ–°æ¨¡å—çš„æ­£ç¡®æ€§ï¼Œå½“æ•´ä½“è·‘é€šæ—¶è¯æ˜æ–°çš„æ¨¡å—å¹¶æ²¡æœ‰å½±å“æ—§æ¨¡å—çš„æ­£ç¡®æ€§ï¼ˆæ—§çš„ä»£ç ä¹Ÿåšäº†å•å…ƒæµ‹è¯•ï¼‰</p>
<p>æ­¤å¤–å•å…ƒæµ‹è¯•åœ¨ä¸€å®šç¨‹åº¦ä¸‹ä¼šæå‡æ•ˆç‡ï¼Œè¿›è¡Œå•å…ƒæµ‹è¯•å¯ä»¥å¾ˆå¿«é€Ÿçš„å®šä½åˆ°é—®é¢˜ï¼Œè¿›è€Œé˜²æ­¢ä¸Šçº¿åæŸå¤±æ‰©å¤§åŒ–</p>
<p><strong><font size="4">å•å…ƒæµ‹è¯•çš„è§„åˆ™</font></strong></p>
<p><img src="http://cdn.zsenhe.com/9666ea5e25aa4868935fa7289344b40c" alt="image.png"></p>
<ol>
<li>æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ä»¥ <strong>_test.go</strong> ç»“å°¾ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿åŒºåˆ†å®šä½</li>
<li>æµ‹è¯•å‡½æ•°ä»¥é©¼å³°çš„å½¢å¼Testå¼€å¤´ï¼Œå¦‚TestTakePoint</li>
<li>åˆå§‹åŒ–é€»è¾‘æ”¾åœ¨TestMainä¸­</li>
</ol>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå•å…ƒæµ‹è¯•çš„ä¾‹å­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package Test</span><br><span class="line"></span><br><span class="line">import &quot;testing&quot;</span><br><span class="line"></span><br><span class="line">func HelloZyy() string &#123;</span><br><span class="line">	return &quot;zsh&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestHelloZyy(t *testing.T) &#123;</span><br><span class="line">	output := HelloZyy()</span><br><span class="line">	expectOutput := &quot;zyy&quot;</span><br><span class="line">	if output != expectOutput &#123;</span><br><span class="line">		t.Errorf(&quot;Expected %s do not match actual %s&quot;, expectOutput, output)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¸­HelloZyyæ˜¯æˆ‘ä»¬çš„<strong>æµ‹è¯•å•å…ƒ</strong>ï¼ŒexpectOutputä¸º<strong>æœŸæœ›å€¼</strong><br>outputä¸º<strong>è¾“å‡º</strong>ï¼Œifå†…æ¡ä»¶ä¸º<strong>æ ¡å¯¹</strong><br>ä½¿ç”¨go test HelloZyy_test.go è¿›è¡Œå•å…ƒæµ‹è¯•<br>ç»“æœæ˜¯<br><img src="http://cdn.zsenhe.com/27b5fd5e93d945088115edaeed8e3527" alt="image.png"><br>æ˜¾ç„¶ï¼Œè¿™æ¬¡æµ‹è¯•ç»“æœæ˜¯FAIL</p>
<p><strong><font size="4">æµ‹è¯•çš„è¦†ç›–ç‡</font></strong><br>é‚£ä¹ˆå¦‚ä½•è¡¡é‡ä»£ç æ˜¯å¦ç»è¿‡äº†è¶³å¤Ÿçš„æµ‹è¯•ä»¥åŠå¦‚ä½•è¯„ä»·é¡¹ç›®çš„æµ‹è¯•æ°´å‡†å‘¢ï¼Ÿé‚£ä¾¿æ˜¯<strong>ä»£ç è¦†ç›–ç‡</strong><br>ä»£ç è¦†ç›–ç‡è¶Šå®Œå¤‡å¯¹ä»£ç æ­£ç¡®æ€§è¶Šèƒ½æœ‰ä¿è¯ï¼Œç›´æ¥çœ‹ä¸€ä¸ªä¾‹å­</p>
<p>judgement.go:</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">JudgePassLine</span><span class="params">(score <span class="type">int16</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> score &gt;= <span class="number">60</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>judgement_test.go</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package Test</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;github.com/stretchr/testify/assert&quot;</span><br><span class="line">	&quot;testing&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">func TestJudgePassLine(t *testing.T) &#123;</span><br><span class="line">	isPass := JudgePassLine(70)</span><br><span class="line">	assert.Equal(t, true, isPass)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>assertæ˜¯testifyåº“æä¾›çš„â€œæ–­è¨€â€åŠŸèƒ½ï¼Œæœ‰äº†å®ƒä¸ç”¨å†ä½¿ç”¨æ ‡å‡†åº“ä¸­testingæ¥ç¼–å†™å„ç§æ¡ä»¶åˆ¤æ–­<br>ç›´æ¥åœ¨æ§åˆ¶å°è¾“å…¥<strong>go get -u github.com&#x2F;stretchr&#x2F;testify</strong> ä»¥å®‰è£…åº“</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert.Equal(t, <span class="literal">true</span>, isPass)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™è¡Œä»£ç ä¸­ï¼Œtrueæ˜¯æˆ‘ä»¬çš„æœŸæœ›å€¼<br>ä½¿ç”¨æŒ‡ä»¤ <strong>go test judgement_test.go judgement.go â€“cover</strong>æ¥æŸ¥è¯¢è¦†ç›–ç‡<br><img src="http://cdn.zsenhe.com/9b9bb48712d14019921df5d30448883d" alt="image.png"><br>å¯ä»¥çœ‹åˆ°coverageä¸º66.7%,è¿™ä¸ªæ•°å€¼æ˜¯æ€ä¹ˆå¾—å‡ºæ¥çš„å‘¢?æˆ‘ä»¬å¾€æµ‹è¯•å•å…ƒJudgePassLineå‡½æ•°ä¸­ä¼ å…¥äº†å‚æ•°70<br>å®ƒä¼šæ‰§è¡Œ </p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">60</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™åœ¨å‡½æ•°æ‰€æœ‰ä»£ç ä¸­å äº†2&#x2F;3ï¼Œè¦†ç›–ç‡è‡ªç„¶å°±æ˜¯66.7%äº†;æ¥ä¸‹æ¥ä¿®æ”¹ä¸€ä¸‹judgement_test.go</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/stretchr/testify/assert&quot;</span></span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestJudgePassLineTrue</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	isPass := JudgePassLine(<span class="number">70</span>)</span><br><span class="line">	assert.Equal(t, <span class="literal">true</span>, isPass)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestJudgePassLineFail</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	isPass := JudgePassLine(<span class="number">59</span>)</span><br><span class="line">	assert.Equal(t, <span class="literal">true</span>, isPass)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–°çš„é€»è¾‘ä¸­ï¼ŒJudgePassLineï¼ˆï¼‰å‡½æ•°æ‰€æœ‰çš„ä»£ç éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå†æ¥çœ‹çœ‹è¦†ç›–ç‡<br><img src="http://cdn.zsenhe.com/a17d952acc99485795d90b5e1131f246" alt="image.png"><br>è¿™ä¸‹æ˜¯100%äº†<br>å®é™…é¡¹ç›®å¼€å‘ä¸­å¯¹è¦†ç›–ç‡åˆ°è¾¾100%æ˜¯å¯æœ›ä¸å¯åŠçš„ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯„åˆ¤è¦†ç›–ç‡çš„æ ‡å‡†</p>
<ol>
<li>ä¸€èˆ¬è¦†ç›–ç‡50~60%;è¾ƒé«˜è¦†ç›–ç‡80%+</li>
<li>æµ‹è¯•åˆ†æ”¯ç›¸äº’ç‹¬ç«‹ï¼Œå…¨é¢è¦†ç›–</li>
<li>æµ‹è¯•å•å…ƒç²’åº¦è¶³å¤Ÿå°ï¼Œå‡½æ•°å•ä¸€èŒè´£</li>
</ol>
<p>å½“è¾¾åˆ°ä¸€èˆ¬è¦†ç›–ç‡æ—¶ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å¯ä»¥ä¿è¯ä¸»æµç¨‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†ä¸€äº›å¼‚å¸¸çš„åˆ†æ”¯æ˜¯æ²¡æœ‰è¦†ç›–åˆ°çš„ï¼›å¯¹äºèµ„é‡‘ç±»çš„ä¸šåŠ¡ï¼ˆå¦‚è½¬è´¦ç­‰ï¼‰å¯¹è¦†ç›–ç‡çš„è¦æ±‚ä¼šæ›´é«˜ï¼Œåœ¨å­—èŠ‚ä¼šè¦æ±‚è¾¾åˆ°85%ä»¥ä¸Š</p>
<p><strong><font size="4">åŸºå‡†æµ‹è¯•</font></strong><br>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–æˆ–è¿›è¡Œæ€§èƒ½åˆ†æï¼Œgoçš„æ ‡å‡†åº“æä¾›äº†åŸºå‡†æµ‹è¯•çš„èƒ½åŠ›<br>ä»¥ä¸‹ä»£ç æ¨¡æ‹Ÿäº†è´Ÿè½½å‡è¡¡çš„åœºæ™¯ï¼Œåœ¨åä¸ªæœåŠ¡å™¨ä¸­éšæœºè¿”å›ä¸€ä¸ªï¼Œå¯¹Selectæ–¹æ³•è¿›è¡Œéå¹¶è¡Œå’Œå¹¶è¡Œçš„åŸºå‡†æµ‹è¯•</p>
<p><strong>randomSelectServer.go</strong>:</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math/rand&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ServerIndex [<span class="number">10</span>]<span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">InitServerIndex</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		ServerIndex[i] = i + <span class="number">100</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Select</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> ServerIndex[rand.Intn(<span class="number">10</span>)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>randomSelectServer_test.go</strong>:</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Test</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSelect</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	InitServerIndex()</span><br><span class="line">	b.ResetTimer() <span class="comment">// é‡ç½®è®¡æ—¶å™¨ï¼ˆå› ä¸ºInitServerIndexä¸åœ¨æµ‹è¯•èŒƒå›´å†…ï¼‰</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">		Select()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkSelectParallel</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	InitServerIndex()</span><br><span class="line">	b.ResetTimer()</span><br><span class="line">	b.RunParallel(<span class="function"><span class="keyword">func</span><span class="params">(pb *testing.PB)</span></span> &#123;</span><br><span class="line">		<span class="keyword">for</span> pb.Next() &#123;</span><br><span class="line">			Select()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„: åŸºå‡†æµ‹è¯•æ–‡ä»¶å‘½åå­˜æ”¾ä¸å•å…ƒæµ‹è¯•ä¸€æ ·ï¼Œä½†åœ¨_test.goç»“å°¾æ–‡ä»¶ä¸­ï¼Œæµ‹è¯•å‡½æ•°éœ€ä»¥<strong>Benchmark</strong>å¼€å¤´é©¼å³°å‘½å<br>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•:<br><img src="http://cdn.zsenhe.com/c9859774bd614e468f046449b93e53ad" alt="image.png"><br>è¿è¡Œï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°å‡½æ•°æ€§èƒ½å’Œæ‰§è¡Œæ¬¡æ•°</p>
</div><div id="donate"><link rel="stylesheet" type="text/css" href="/css/donate.css?v=1.0.0"><script type="text/javascript" src="/js/donate.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><a class="pos-f tr3" id="github" href="https://github.com/meteorOSS" target="_blank" title="Github"></a><div id="DonateText">Donate</div><ul class="list pos-f" id="donateBox"><li id="AliPay" qr="/img/alipay.png"></li><li id="WeChat" qr="/img/wechatqrcode.png"></li></ul><div class="pos-f left-100" id="QRBox"><div id="MainBox"></div></div></div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.0"><p><span>æœ¬æ–‡æ ‡é¢˜ï¼š</span>å­—èŠ‚é’è®­è¥2.1å•å…ƒæµ‹è¯•</p><p><span>æ–‡ç« ä½œè€…ï¼š</span>meteor</p><p><span>å‘å¸ƒæ—¶é—´ï¼š</span>2023-01-18</p><p><span>æœ€åæ›´æ–°ï¼š</span>2023-01-18</p><p><span>åŸå§‹é“¾æ¥ï¼š</span><a href="/2023/01/18/å­—èŠ‚é’è®­è¥21 å•å…ƒæµ‹è¯•/">http://blog.zsenhe.com/2023/01/18/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A521%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="http://blog.zsenhe.com/2023/01/18/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A521%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"></i></span></p><p><span>ç‰ˆæƒå£°æ˜ï¼š</span>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p></div><br><script type="text/javascript" src="/js/share.js?v=1.0.0" async></script><a class="article-share-link" data-url="http://blog.zsenhe.com/2023/01/18/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A521%20%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" data-id="cmc4mashk001bw0vd2z6igitf" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAAD9klEQVR42u3cS27bQBAEUN3/0g6QlQNbVFX3UE6Qx5XA8DPztGj1x3k84uPj9/H58+fj2fnkrq9vuX7O9Qq/vvFxx4EDBw4cOOIHXW8m/3y90Bz62b3P7krOvIDGgQMHDhyHOPKFngqc16z5F5BzXO8RBw4cOHC8n6NNjdoELHl7fg0OHDhw4Pj7Odoi3fUSN6XJU3fhwIEDB477OPKm0R2NohZu3/Q6UCvFgQMHDhzpOoug9a98vn2+AwcOHDhwxG2hPMS2iV87PNFuuN4dDhw4cOA4FCjy9ClP4ZJ/zVtQSdqWjz68oMSBAwcOHGuOTdhrn7ApDm6+jLr1hQMHDhw41hzJEq/D3mzzs4ZQm17OhjNw4MCBA8eMYzaskJTt9iEwec6G/pvn4MCBAweOQxx5cS0Pigl0XsibtbjqlhgOHDhw4DjE0W5ptqD2CZtgPLwSBw4cOHAsOJJgNisathtoxw721dBv3oIDBw4cONYcecrUNoHa8NwG+NlgRPRTAAcOHDhwrDlmqdo++OULbYnbIYz6Uhw4cODA8TH/S5bN+EKb7OWrSradfHkvfnfgwIEDB47H+P9Jjo4cLg+HmxRxds0sSOPAgQMHjpwjGSCYpXB7xH26WP8IwIEDBw4cC46idlgOLrTp3H7cYfP8P+Y7cODAgQPHgiMJuu3wXHL9LAAnPwjyQYf6O8eBAwcOHIc48jTvbONn375qU1McOHDgwHGWYzbQkDSZZsXEZFWn1o8DBw4cOE5xzEp4+3G6U4XIs8/EgQMHDhx7jnY4IA+QxesXITlPI4tEDgcOHDhwHOKYJUhnA+psEGHWoHpKjAMHDhw4FhxtYa7d/H6EOm9rbUqZOHDgwIHjLMcmTZolS/ukMXljnTriwIEDB441RxsUk421xbjNe/M2WD72hwMHDhw4NhyzsbPZIjZ37VcVncGBAwcOHLdxJMudFeDqnlicKLZPfjE5iAMHDhw4RhyzVtAsncs3kFzftsSSteHAgQMHjvdwnApgeZDblx3zyuiLWikOHDhw4Cg52o1tmGZtp9mwwnCFOHDgwIHjEMcmqcvbP3nG1I5EtEc9HocDBw4cOGKOWaHt+jXtmU0KNyz8Xf9owIEDBw4cC46P8miZ8jG1WQjPB+mSdhQOHDhw4NhztGnPjGNf/mvLlO2aceDAgQPHWY42uCZ3bUYQTn0l+fNx4MCBA8cdHLMELA+cm3ZRnnRtWHHgwIEDx/s58jCWF+aS0l57Zpbm4cCBAweOn+XI06c8DWsH+PKhimKYDwcOHDhwHOJIioNtEbANgS1EcqYe/sOBAwcOHGuOzUDDpgU1G2LLw39exDw234EDBw4c/zvHLwYVP3EHUeiFAAAAAElFTkSuQmCC">åˆ†äº«</a><div class="tags"></div><div class="post-nav"><a class="pre" href="/2023/01/28/%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%A4%9A%E9%A1%B9%E5%BC%8F%E8%A1%A8%E7%A4%BA/">çº¿æ€§è¡¨çš„å®ç°ä¸å¤šé¡¹å¼è¡¨ç¤º</a><a class="next" href="/2023/01/17/%E5%AD%97%E8%8A%82%E9%9D%92%E8%AE%AD%E8%90%A52Go%E5%B7%A5%E7%A8%8B%E8%BF%9B%E9%98%B6%E4%B8%8E%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/">å­—èŠ‚é’è®­è¥2Goå·¥ç¨‹è¿›é˜¶ä¸ä¾èµ–ç®¡ç†</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
  clientID: 'Ov23lirF62PGMKZzkrDi',
  clientSecret: 'f33b660bb797de7a20416cabd11d6da83ec55ef7',
  repo: 'meteorOSS.github.io',
  owner: 'meteoross',
  admin: ['meteoross'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.zsenhe.com"/></form></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="ç®€å†"><img class="nofancybox" src="/img/avatar.png"/></a><p>æˆ‘èººåœ¨æŸ”è½¯çš„åºŠä¸Šå†¥æƒ³ç€æ²¡æœ‰æ—¶é—´çš„ç©ºé—´</p><a class="info-icon" href="https://twitter.com/username" title="Twitter" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:zhengsenhe1027@126.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/meteorOSS" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2025/07/10/gradle%E5%9C%A8vscode%E4%B8%8B%E6%9E%84%E5%BB%BA%E6%97%B6%E6%9C%AA%E9%80%89%E7%94%A8%E6%8C%87%E5%AE%9A%E7%9A%84jdk%E7%89%88%E6%9C%AC/">gradleåœ¨vscodeä¸‹æ„å»ºæ—¶æœªé€‰ç”¨æŒ‡å®šçš„jdkç‰ˆæœ¬</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/06/26/%E4%BD%BF%E7%94%A8xtodo%E5%9C%A8vscode%E4%B8%AD%E7%AE%A1%E7%90%86%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9/">ä½¿ç”¨xtodoåœ¨vscodeä¸­ç®¡ç†å¾…åŠäº‹é¡¹</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/06/20/Apache%20POI%E5%BA%93%E6%89%93%E5%8C%85%E4%B8%BAjar%E5%90%8E%E8%A7%A3%E6%9E%90%E6%8A%A5%E9%94%99/">apache poiåº“è§£ææŠ¥é”™;java.io.IOException: Your InputStream was neither an OLE2 stream, nor an OOXML str</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/06/20/hello-world/">æˆ‘å°†åšå®¢è¿ç§»åˆ°äº†è¿™é‡Œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/12/05/%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8A%A8%E6%80%81%E8%BD%BD%E5%85%A5%E4%BE%9D%E8%B5%96/">è¿è¡Œæ—¶åŠ¨æ€è½½å…¥ä¾èµ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/11/29/GoReplaceTool%20%E6%8C%87%E5%AE%9A%E7%9B%AE%E6%A0%87%E7%9B%AE%E5%BD%95%E6%89%B9%E9%87%8F%E6%9B%BF%E6%8D%A2%E5%B7%A5%E5%85%B7/">GoReplaceTool æŒ‡å®šç›®æ ‡ç›®å½•æ‰¹é‡æ›¿æ¢å·¥å…·</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/26/XPath%E4%B8%8EMyBatis%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A8%A1%E5%9D%97XPathParser/">XPathä¸MyBatisè§£æå™¨æ¨¡å—XPathParser</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/26/XML%E5%B8%B8%E8%A7%81%E7%9A%84%E8%A7%A3%E6%9E%90%E6%96%B9%E5%BC%8F/">XMLå¸¸è§çš„è§£ææ–¹å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/06/%E4%B8%80%E5%9D%97%E9%92%B1%E6%8E%89%E5%9C%B0%E4%B8%8A%EF%BC%8C%E7%A2%8E%E6%88%90%E4%BA%86%E4%B8%A4%E5%BC%A0%E4%BA%94%E6%AF%9B/">ä¸€å—é’±æ‰åœ°ä¸Šï¼Œç¢æˆäº†ä¸¤å¼ äº”æ¯›</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/10/%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84%E8%AF%A5%E6%AD%BB%E7%9A%84%E5%8F%8D%E5%B0%84/">è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„è¯¥æ­»çš„åå°„</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://github.com/meteorOSS/wechat-bc" title="wechat-bc(ç±»ä¼¼å¼€å‘å…¬ä¼—å·ä¸€æ ·ï¼Œå¼€å‘ä¸ªäººå¾®ä¿¡å·)" target="_blank">wechat-bc(ç±»ä¼¼å¼€å‘å…¬ä¼—å·ä¸€æ ·ï¼Œå¼€å‘ä¸ªäººå¾®ä¿¡å·)</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2025 <a href="/." rel="nofollow">meteor(zsh).</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>